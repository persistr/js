!function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){},{}],2:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}t.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},{}],3:[function(e,t,r){t.exports=async function(e,{username:t}){await e.post({endpoint:`/accounts/${t}/activate`})}},{}],4:[function(e,t,r){t.exports=async function(e,{name:t,username:r,password:n}){return await e.post({endpoint:`/accounts/${r}`,body:{name:t,password:n}})}},{}],5:[function(e,t,r){t.exports=async function(e,{username:t}){await e.post({endpoint:`/accounts/${t}/deactivate`})}},{}],6:[function(e,t,r){t.exports=async function(e,{username:t}){await e.delete({endpoint:`/accounts/${t}`})}},{}],7:[function(e,t,r){t.exports=async function(e){const{body:t}=await e.get({endpoint:"/accounts/current"});return t}},{}],8:[function(e,t,r){t.exports=async function(e,{identity:t,db:r,role:n,email:i}){return await e.post({identity:t,endpoint:`/db/${r}/grant`,query:{role:n,email:i}})}},{}],9:[function(e,t,r){t.exports=async function(e,{username:t}){const{body:r}=await e.get({endpoint:`/accounts/${t}`});return r}},{}],10:[function(e,t,r){t.exports=async function(e,{identity:t,db:r,email:n}){return await e.post({identity:t,endpoint:`/db/${r}/revoke`,query:{email:n}})}},{}],11:[function(e,t,r){t.exports=async function(e,{each:t}){const{body:r}=await e.get({endpoint:"/accounts"});for(const e of r)await t(e)}},{}],12:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,stream:n}){await e.delete({endpoint:`/db/${t}/ns/${r}/streams/${n}/annotation`})}},{}],13:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,stream:n}){try{const{body:i}=await e.get({endpoint:`/db/${t}/ns/${r}/streams/${n}/annotation`});return i}catch(e){if(e&&404===e.statusCode)return;if(e)throw e}}},{}],14:[function(e,t,r){t.exports=async function(e,{db:t,to:r}){await e.post({endpoint:`/db/${t}/clone?to=${r}`})}},{}],15:[function(e,t,r){t.exports=async function(e,{identity:t,db:r}){await e.put({identity:t,endpoint:`/db/${r}`})}},{}],16:[function(e,t,r){t.exports=async function(e,{identity:t,db:r}){await e.delete({identity:t,endpoint:`/db/${r}`})}},{}],17:[function(e,t,r){const n=e("async-queue"),i=e("eventsource"),s=e("../../Errors"),o=e("bluebird");o.config({cancellation:!0}),t.exports=async function(e,{db:t,ns:r,stream:a,from:u,after:c,to:l,until:h,types:d,limit:f,each:p}){const m=e.url({endpoint:`/db/${t}/events`,query:{ns:r,stream:a,types:d,from:u,after:c,to:l,until:h,limit:f,schema:"jsonapi"},headers:{accept:"text/event-stream"}}),y=new i(m,{headers:await e.auth()}),g=new n;let v,b;return y.addEventListener("error",(t=>{let r;try{r=JSON.parse(t.data),r&&r.name&&r.status||(r=void 0)}catch(e){}if(!t.message&&!r)return y.close(),void(g.running||v());y.close(),g.jobs.length=0,t&&("ECONNREFUSED"===t.code||t.message.includes("ECONNREFUSED"))?b(new s.ConnectionRefused(e.server)):b(r?new s.StatusCode(t.origin,r.status,r.name,r.message):new s.UnexpectedError(t.message))})),y.addEventListener("message",(e=>{!async function(e,t,r){g.run((async(n,i)=>{await t(e,r),i.success(),g.running||v()}))}(JSON.parse(e.data),p,{cancel:async()=>{y.close(),g.jobs.length=0,v()}})})),new o(((e,t,r)=>{v=e,b=t,r((function(){y.close(),g.jobs.length=0}))}))}},{"../../Errors":47,"async-queue":158,bluebird:160,eventsource:164}],18:[function(e,t,r){t.exports=async function(e,{db:t,to:r}){await e.post({endpoint:`/db/${t}/rename?to=${r}`})}},{}],19:[function(e,t,r){t.exports=async function(e,{each:t}){const{body:r}=await e.get({endpoint:"/db"});for(const e of r)await t(e)}},{}],20:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,stream:n,event:i}){await e.delete({endpoint:`/db/${t}/ns/${r}/streams/${n}/events/${i}`})}},{}],21:[function(e,t,r){t.exports=async function(e,{identity:t,db:r,ns:n,stream:i,event:s}){let{body:o}=await e.get({identity:t,endpoint:`/db/${r}/ns/${n}/streams/${i}/events/${s}`});return o}},{}],22:[function(e,t,r){const n=e("../Errors"),i=e("../utils/http"),s={activateAccount:e("./account/activate.js"),createAccount:e("./account/create.js"),deactivateAccount:e("./account/deactivate.js"),destroyAccount:e("./account/destroy.js"),getAccount:e("./account/get.js"),grantAccount:e("./account/grant.js"),profileAccount:e("./account/profile.js"),revokeAccount:e("./account/revoke.js"),listAccounts:e("./accounts/list.js"),destroyAnnotation:e("./annotation/destroy.js"),readAnnotation:e("./annotation/read.js"),cloneDatabase:e("./database/clone.js"),createDatabase:e("./database/create.js"),destroyDatabase:e("./database/destroy.js"),readDatabase:e("./database/read.js"),renameDatabase:e("./database/rename.js"),listDatabases:e("./databases/list.js"),destroyEvent:e("./event/destroy.js"),readEvent:e("./event/read.js"),createNamespace:e("./namespace/create.js"),destroyNamespace:e("./namespace/destroy.js"),readNamespace:e("./namespace/read.js"),renameNamespace:e("./namespace/rename.js"),truncateNamespace:e("./namespace/truncate.js"),listNamespaces:e("./namespaces/list.js"),destroyObject:e("./object/destroy.js"),readObject:e("./object/read.js"),watchObject:e("./object/watch.js"),writeObject:e("./object/write.js"),annotateStream:e("./stream/annotate.js"),destroyStream:e("./stream/destroy.js"),readStream:e("./stream/read.js"),writeStream:e("./stream/write.js"),listStreams:e("./streams/list.js")};t.exports=class{constructor(e,t){this.type="persistr",this.identity=e,this.server=t,this.http=new i(this.server,this.identity)}async activateAccount(e){return n.handle((async()=>s.activateAccount(this.http,e)))}async createAccount(e){return n.handle((async()=>s.createAccount(this.http,e)))}async deactivateAccount(e){return n.handle((async()=>s.deactivateAccount(this.http,e)))}async destroyAccount(e){return n.handle((async()=>s.destroyAccount(this.http,e)))}async getAccount(e){return n.handle((async()=>s.getAccount(this.http,e)))}async grantAccount(e){return n.handle((async()=>s.grantAccount(this.http,e)))}async profileAccount(e){return n.handle((async()=>s.profileAccount(this.http,e)))}async revokeAccount(e){return n.handle((async()=>s.revokeAccount(this.http,e)))}async listAccounts(e){return n.handle((async()=>s.listAccounts(this.http,e)))}async destroyAnnotation(e){return n.handle((async()=>s.destroyAnnotation(this.http,e)))}async readAnnotation(e){return n.handle((async()=>s.readAnnotation(this.http,e)))}async cloneDatabase(e){return n.handle((async()=>s.cloneDatabase(this.http,e)))}async createDatabase(e){return n.handle((async()=>s.createDatabase(this.http,e)))}async destroyDatabase(e){return n.handle((async()=>s.destroyDatabase(this.http,e)))}async readDatabase(e){return n.handle((async()=>s.readDatabase(this.http,e)))}async renameDatabase(e){return n.handle((async()=>s.renameDatabase(this.http,e)))}async listDatabases(e){return n.handle((async()=>s.listDatabases(this.http,e)))}async destroyEvent(e){return n.handle((async()=>s.destroyEvent(this.http,e)))}async readEvent(e){return n.handle((async()=>s.readEvent(this.http,e)))}async createNamespace(e){return n.handle((async()=>s.createNamespace(this.http,e)))}async destroyNamespace(e){return n.handle((async()=>s.destroyNamespace(this.http,e)))}async readNamespace(e){return n.handle((async()=>s.readNamespace(this.http,e)))}async renameNamespace(e){return n.handle((async()=>s.renameNamespace(this.http,e)))}async truncateNamespace(e){return n.handle((async()=>s.truncateNamespace(this.http,e)))}async listNamespaces(e){return n.handle((async()=>s.listNamespaces(this.http,e)))}async destroyObject(e){return n.handle((async()=>s.destroyObject(this.http,e)))}async readObject(e){return n.handle((async()=>s.readObject(this.http,e)))}async watchObject(e){return n.handle((async()=>s.watchObject(this.http,e)))}async writeObject(e){return n.handle((async()=>s.writeObject(this.http,e)))}async annotateStream(e){return n.handle((async()=>s.annotateStream(this.http,e)))}async destroyStream(e){return n.handle((async()=>s.destroyStream(this.http,e)))}async readStream(e){return n.handle((async()=>s.readStream(this.http,e)))}async writeStream(e){return n.handle((async()=>s.writeStream(this.http,e)))}async listStreams(e){return n.handle((async()=>s.listStreams(this.http,e)))}}},{"../Errors":47,"../utils/http":66,"./account/activate.js":3,"./account/create.js":4,"./account/deactivate.js":5,"./account/destroy.js":6,"./account/get.js":7,"./account/grant.js":8,"./account/profile.js":9,"./account/revoke.js":10,"./accounts/list.js":11,"./annotation/destroy.js":12,"./annotation/read.js":13,"./database/clone.js":14,"./database/create.js":15,"./database/destroy.js":16,"./database/read.js":17,"./database/rename.js":18,"./databases/list.js":19,"./event/destroy.js":20,"./event/read.js":21,"./namespace/create.js":23,"./namespace/destroy.js":24,"./namespace/read.js":25,"./namespace/rename.js":26,"./namespace/truncate.js":27,"./namespaces/list.js":28,"./object/destroy.js":29,"./object/read.js":30,"./object/watch.js":31,"./object/write.js":32,"./stream/annotate.js":33,"./stream/destroy.js":34,"./stream/read.js":35,"./stream/write.js":36,"./streams/list.js":37}],23:[function(e,t,r){t.exports=async function(e,{identity:t,db:r,ns:n}){await e.put({identity:t,endpoint:`/db/${r}/ns/${n}`})}},{}],24:[function(e,t,r){t.exports=async function(e,{db:t,ns:r}){await e.delete({endpoint:`/db/${t}/ns/${r}`})}},{}],25:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,from:n,after:i,to:s,until:o,types:a,limit:u,each:c}){const{body:l}=await e.get({endpoint:`/db/${t}/ns/${r}/events`,query:{types:a,from:n,after:i,to:s,until:o,limit:u,schema:"jsonapi"}});for(const e of l.data)await c(e);if(l.meta.cursor)return l.meta.cursor.after}},{}],26:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,to:n}){await e.post({endpoint:`/db/${t}/ns/${r}/rename?to=${n}`})}},{}],27:[function(e,t,r){t.exports=async function(e,{db:t,ns:r}){await e.delete({endpoint:`/db/${t}/ns/${r}/contents`})}},{}],28:[function(e,t,r){t.exports=async function(e,{db:t,each:r}){const{body:n}=await e.get({endpoint:`/db/${t}/ns`});for(const e of n)await r(e)}},{}],29:[function(e,t,r){t.exports=async function(e,{db:t,id:r}){await e.delete({endpoint:`/db/${t}/objects/${r}`})}},{}],30:[function(e,t,r){t.exports=async function(e,{db:t,id:r}){try{const{body:n}=await e.get({endpoint:`/db/${t}/objects/${r}`});return n}catch(e){if(e&&404===e.statusCode)return;if(e)throw e}}},{}],31:[function(e,t,r){const n=e("async-queue"),i=e("eventsource");t.exports=async function(e,{db:t,id:r,changed:s}){const o=e.url({endpoint:`/db/${t}/objects/${r}`,headers:{accept:"text/event-stream"}}),a=new i(o,{headers:await e.auth()});let u,c;a.addEventListener("error",(e=>{e.message?(a.close(),l.jobs.length=0,c(e)):a.close()}));const l=new n;return a.addEventListener("message",(e=>{!async function(e,t,r){l.run((async(n,i)=>{await t(e,r),i.success(),l.running||u()}))}(JSON.parse(e.data),s,{cancel:async()=>{a.close(),l.jobs.length=0,u()}})})),new Promise(((e,t)=>{u=e,c=t}))}},{"async-queue":158,eventsource:164}],32:[function(e,t,r){const{DateTime:n}=e("luxon");t.exports=async function(e,{db:t,id:r,data:n}){await e.put({endpoint:`/db/${t}/objects/${r}`,body:n})}},{luxon:540}],33:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,stream:n,annotation:i}){await e.put({endpoint:`/db/${t}/ns/${r}/streams/${n}/annotation`,body:i})}},{}],34:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,stream:n}){await e.delete({endpoint:`/db/${t}/streams/${n}`,query:{ns:r}})}},{}],35:[function(e,t,r){const n=e("async-queue"),i=e("eventsource");t.exports=async function(e,{db:t,ns:r,stream:s,from:o,after:a,to:u,until:c,types:l,limit:h,each:d}){const f=e.url({endpoint:`/db/${t}/ns/${r}/streams/${s}/events`,query:{types:l,from:o,after:a,to:u,until:c,limit:h,schema:"jsonapi"},headers:{accept:"text/event-stream"}}),p=new i(f,{headers:await e.auth()});let m,y;p.addEventListener("error",(e=>{e.message?(p.close(),g.jobs.length=0,y(e)):p.close()}));const g=new n;return p.addEventListener("message",(e=>{!async function(e,t,r){g.run((async(n,i)=>{await t(e,r),i.success(),g.running||m()}))}(JSON.parse(e.data),d,{cancel:async()=>{p.close(),g.jobs.length=0,m()}})})),new Promise(((e,t)=>{m=e,y=t}))}},{"async-queue":158,eventsource:164}],36:[function(e,t,r){const{DateTime:n}=e("luxon"),i=e("uuid");t.exports=async function(e,{db:t,ns:r,stream:s,data:o,meta:a,id:u}){const c={meta:{tz:n.local().zoneName,...a,id:null!=u?u:i.v4(),db:t,ns:r,stream:s},data:null!=o?o:{}};return await e.put({endpoint:`/events/${c.meta.id}`,body:c}),c}},{luxon:540,uuid:560}],37:[function(e,t,r){t.exports=async function(e,{db:t,ns:r,each:n}){const{body:i}=await e.get({endpoint:r?`/db/${t}/ns/${r}/streams`:`/db/${t}/streams`});for(const e of i)await n(e)}},{}],38:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(e){super("Connection refused to Persistr Server"+(e?" at "+e:""))}}},{"./PersistrError":43}],39:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(e){super(e)}}},{"./PersistrError":43}],40:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(e){super(e?`Internal error\nWhat went wrong:\n${e.message}`:"Internal error")}}},{"./PersistrError":43}],41:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor({bearer:e}){super(`Invalid bearer token: ${e}`)}}},{"./PersistrError":43}],42:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(){super("Invalid credentials")}}},{"./PersistrError":43}],43:[function(e,t,r){t.exports=class extends Error{constructor(e,t){super(e+(t?` caused by: ${t}`:"")),this.error=t,this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}},{}],44:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(e,t,r,n){let i=n;try{const e=JSON.parse(n);e&&e.error&&(i=`${e.error}`)}catch(e){}super(i),this.url=e,this.statusCode=t,this.statusText=r,this.responseText=n}}},{"./PersistrError":43}],45:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor(e){super(e)}}},{"./PersistrError":43}],46:[function(e,t,r){t.exports=class extends(e("./PersistrError")){constructor({filter:e,on:t}){super(`Unsupported filter '${e}' on ${t}`)}}},{"./PersistrError":43}],47:[function(e,t,r){var n={ConnectionRefused:e("./ConnectionRefused.js"),Fetch:e("./Fetch.js"),InternalError:e("./InternalError.js"),InvalidBearerToken:e("./InvalidBearerToken.js"),InvalidCredentials:e("./InvalidCredentials.js"),PersistrError:e("./PersistrError.js"),StatusCode:e("./StatusCode.js"),UnexpectedError:e("./UnexpectedError.js"),UnsupportedFilter:e("./UnsupportedFilter.js"),handle:function(e){return e().catch((e=>{if(e instanceof n.PersistrError)throw e;if(e&&e.error&&"ECONNREFUSED"===e.error.code)throw new n.ConnectionRefused;throw e}))}};t.exports=n},{"./ConnectionRefused.js":38,"./Fetch.js":39,"./InternalError.js":40,"./InvalidBearerToken.js":41,"./InvalidCredentials.js":42,"./PersistrError.js":43,"./StatusCode.js":44,"./UnexpectedError.js":45,"./UnsupportedFilter.js":46}],48:[function(e,t,r){const n=e("./Database"),i=e("./Databases");t.exports=class{constructor(e,t){this.connection=e,this.name=null==t?void 0:t.name,this.username=null==t?void 0:t.username}get store(){return this.connection.store}db(e){return new n(e,this)}databases(){return new i(this)}async exists({password:e}){let t;try{t=await this.store.accounts.find({username:this.username,password:e})}catch(e){t=void 0}return null!=t}async notExists({password:e}){return!await this.exists({password:e})}async create({password:e}){var t;return await this.store.accounts.create({name:null!==(t=this.name)&&void 0!==t?t:"",username:this.username,password:e}),this}async createIfNotExists({password:e}){return await this.notExists({password:e})&&await this.create({password:e}),this}async destroy(){return await this.store.accounts.destroy({username:this.username}),this}async activate(){return await this.store.accounts.activate({username:this.username}),this}async deactivate(){return await this.store.accounts.deactivate({username:this.username}),this}async profile(){return await this.store.accounts.find({username:this.username})}}},{"./Database":52,"./Databases":57}],49:[function(e,t,r){e("./Account");t.exports=class{constructor(e){this.connection=e}get store(){return this.connection.store}async each(e){const t=this.store.accounts.find();for(const r of t)await e(r)}async all(){return this.store.accounts.find()}}},{"./Account":48}],50:[function(e,t,r){t.exports=class{constructor(e){this.stream=e}get store(){return this.account.store}get account(){return this.db.account}get db(){return this.ns.db}get ns(){return this.stream.ns}async destroy(){return this.store.annotations.destroy({db:this.db.name,ns:this.ns.name,stream:this.stream.id})}async read(){return this.store.annotations.read({db:this.db.name,ns:this.ns.name,stream:this.stream.id})}}},{}],51:[function(e,t,r){const n=e("./Account"),i=e("./Accounts");e("./Database"),e("./Databases");t.exports=class{constructor(e){this.store=e}async close(){await this.store.disconnect()}accounts(){return new i(this)}account(e){return new n(this,e)}}},{"./Account":48,"./Accounts":49,"./Database":52,"./Databases":57}],52:[function(e,t,r){const n=e("./DatabaseObject"),i=e("./DatabaseObjects"),s=e("./DatabaseReactions"),o=e("./DatabaseViews"),a=e("./Events"),u=e("./Namespace"),c=e("./Namespaces"),l=(e("./Stream"),e("./Streams")),h=e("glob"),d=e("path");class f{constructor(e,t){this.name=e,this.account=t,this.objects=new i(this),this.reactions=new s(this),this.views=new o(this)}get connection(){return this.account.connection}get store(){return this.account.store}use(e){return new f(e,this.account)}namespaces(){return new c(this)}namespace(e){return this.ns(e)}ns(e){return new u(e,this)}streams(e){return e.ns&&(e.ns=this.ns(e.ns)),new l({...e,db:this})}events(e){return new a({...e,db:this})}stream(e){return this.ns("").stream(e)}object(e,t){return new n(this,e,t)}async domain({folder:t,tools:r,objects:n,views:a,reactions:u}){this.objects=new i(this),this.reactions=new s(this),this.views=new o(this);const c={...r,docs:e=>({write:async t=>await this.store.documents.write({db:this.name,collection:e,doc:t}),read:async({id:t})=>await this.store.documents.read({db:this.name,collection:e,id:t}),count:async t=>await this.store.documents.count({db:this.name,collection:e,query:t}),find:async(t,r)=>await this.store.documents.find({db:this.name,collection:e,query:t,options:r}),destroy:async({id:t})=>await this.store.documents.destroy({db:this.name,collection:e,id:t})}),db:this};function l(e,r,n,i){return t?h.sync(e,{...i,cwd:d.resolve(r,n)}).map((e=>{const t={...d.parse(e),relpath:e,abspath:d.resolve(r,n,e)};return t.id=[t.dir.replace("/","."),t.name].join(".").replace(/^\./,""),t})):[]}for(const r of l("**/*.js",t,"objects",{ignore:["**/commands/*","**/events/*"]}))this.objects.register(r.id.replace(/\.index$/,""),e(r.abspath),c);for(const[e,t]of Object.entries(null!=n?n:{}))this.objects.register(e,t,c);for(const r of l("**/*.js",t,"views",{}))this.views.register(r.id,e(r.abspath),c);for(const[e,t]of Object.entries(null!=a?a:{}))this.views.register(e,t,c);for(const r of l("**/*.js",t,"reactions",{}))this.reactions.register(r.id,e(r.abspath),c);for(const[e,t]of Object.entries(null!=u?u:{}))this.reactions.register(e,t,c)}async exists(){let e;try{e=await this.store.databases.find({name:this.name})}catch(t){e=void 0}return null!=e}async notExists(){return!await this.exists()}async create(){const e=await this.account.profile();return await this.store.databases.create({name:this.name,account:e.id}),this}async createIfNotExists(){return await this.notExists()&&await this.create(),this}async destroy(){await this.store.databases.destroy({db:this.name})}async rename(e){return await this.store.databases.rename({db:this.name,to:e}),this.name=e,this}async grant({role:e,email:t}){return await this.store.accounts.grant({db:this.name,role:e,email:t}),this}async revoke({email:e}){return await this.store.accounts.revoke({db:this.name,email:e}),this}}t.exports=f},{"./DatabaseObject":53,"./DatabaseObjects":54,"./DatabaseReactions":55,"./DatabaseViews":56,"./Events":59,"./Namespace":60,"./Namespaces":61,"./Stream":62,"./Streams":63,glob:170,path:void 0}],53:[function(e,t,r){t.exports=class{constructor(e,t,r){this.db=e,this.id=t,this.data=r}get store(){return this.account.store}get account(){return this.db.account}async write(){return this.store.objects.write({db:this.db.name,id:this.id,data:this.data})}async read(){return this.store.objects.read({db:this.db.name,id:this.id})}async destroy(){return this.store.objects.destroy({db:this.db.name,id:this.id})}}},{}],54:[function(e,t,r){const n=e("uuid");t.exports=class{constructor(e){this.db=e,this.types={}}async register(e,t,r){const n=this.db;this.types[e]={type:{...t,name:e},toolbox:r},n.events({types:t.events}).each((async e=>{let i=await n.object(e.meta.stream).read()||{};i=await t.on(r,i,e)||{},await n.object(e.meta.stream,{...i,_last:e.meta}).write()}))}async create(e,t=n.v4()){const r=this.db,i=this.types[e],s=i.type;let o={_type:s,id:t};return s.commands.forEach((e=>{o[e]=async function(t){let n=await this._type.do({...i.toolbox,db:r},this,e,t);return n.meta.stream=this.id,await r.stream(this.id).event(n.meta.type,n.data).append()}})),await r.object(o.id,o).write(),o}async get(e,t){const r=await this.db.object(e).read();if(t&&t.plain){let e={...r};return delete e._type,delete e._last,e}const n=this.db,i=this.types[r._type.name],s=i.type;return r._type=s,s.commands.forEach((e=>{r[e]=async function(t){let r=await this._type.do({...i.toolbox,db:n},this,e,t);return r.meta.stream=this.id,await n.stream(this.id).event(r.meta.type,r.data).append()}})),r}}},{uuid:560}],55:[function(e,t,r){function n(e){return`reaction_${e.replace(/[^a-zA-Z0-9]+/gi,"")}`}t.exports=class{constructor(e){this.db=e,this.registrations={},this.cancellations={}}async register(e,t,r){this.db;this.registrations[e]={type:t,toolbox:r},await this.resume(e)}async get(e,t){const r=this.registrations[e],i=r.type;let s=await this.db.object(n(e)).read()||i.context;i.get&&(s=await i.get({...r.toolbox,db:this.db},s,t));let o={...s};return delete o._type,delete o._last,o}async pause(e){this.registrations[e].type;const t=this.cancellations[e];t&&(t.cancel(),delete this.cancellations[e])}async resume(e){const t=this.registrations[e],r=t.type;if(this.cancellations[e])return;const i=this.db;let s=await i.object(n(e)).read()||r.context,o={types:r.events};s&&s._last&&s._last.stream&&s._last.id&&(o.after=`${s._last.stream}.${s._last.id}`);this.cancellations[e]={cancel:()=>{}},i.events(o).each((s=>{(async s=>{let o=await i.object(n(e)).read()||r.context;o=await r.on({...t.toolbox,db:i},o,s)||o,await i.object(n(e),{...o,_last:s.meta}).write()})(s)}),this.cancellations[e])}}},{}],56:[function(e,t,r){function n(e){return`view_${e.replace(/[^a-zA-Z0-9]+/gi,"")}`}t.exports=class{constructor(e){this.db=e,this.registrations={},this.cancellations={}}async register(e,t,r){this.db;this.registrations[e]={type:t,toolbox:r},t.extends||await this.resume(e)}async get(e,t){const r=this.registrations[e],i=r.type;if(i.extends){let e=await this.get(i.extends,t);return await i.get({...r.toolbox,db:this.db},e,t)}let s=await this.db.object(n(e)).read()||i.default;i.get&&(s=await i.get({...r.toolbox,db:this.db},s,t));let o={...s};return delete o._type,delete o._last,o}async refresh(e){this.registrations[e].type.extends||(this.pause(e),this.rewind(e),this.resume(e))}async rewind(e){this.registrations[e].type.extends||await this.db.object(n(e)).destroy()}async pause(e){if(this.registrations[e].type.extends)return;const t=this.cancellations[e];t&&(t.cancel(),delete this.cancellations[e])}async resume(e){const t=this.registrations[e],r=t.type;if(r.extends)return;if(this.cancellations[e])return;const i=this.db;let s=await i.object(n(e)).read()||r.default,o={types:r.events};s&&s._last&&s._last.stream&&s._last.id&&(o.after=`${s._last.stream}.${s._last.id}`),this.cancellations[e]={cancel:()=>{}},i.events(o).each((async s=>{let o=await i.object(n(e)).read()||r.default;o=await r.on({...t.toolbox,db:i},o,s)||o,await i.object(n(e),{...o,_last:s.meta}).write()}),this.cancellations[e])}}},{}],57:[function(e,t,r){t.exports=class{constructor(e){this.account=e}get store(){return this.account.store}async each(e){const t=await this.store.databases.find();for(const r of t)await e(r)}async all(){return await this.store.databases.find()}}},{}],58:[function(e,t,r){t.exports=class{constructor({stream:e,id:t,type:r,data:n}){this.stream=e,this.id=t,this.type=r,this.data=n}get store(){return this.account.store}get account(){return this.db.account}get db(){return this.ns.db}get ns(){return this.stream.ns}async destroy(){return await this.store.events.destroy({db:this.db.name,ns:this.ns.name,stream:this.stream.id,event:this.id})}async read(){return await this.store.events.read({db:this.db.name,ns:this.ns.name,stream:this.stream.id,event:this.id})}async append(){return await this.stream.events().write(this.type,this.data)}}},{}],59:[function(e,t,r){e("../utils/dedup"),e("./Event");e("bluebird").config({cancellation:!0});t.exports=class{constructor({db:e,cursor:t,ns:r,stream:n,from:i,after:s,to:o,until:a,types:u,filters:c,limit:l}){this._db=e,this.cursor=t,this._ns=r,this.stream=n,this.from=i,this.after=s,this.to=o,this.until=a,this.types=u,this.filters=c||[],this.limit=l,this.shouldRead=!0}get store(){return this.account.store}get account(){return this.db.account}get db(){return this._db||this.ns.db}get ns(){return this._ns||(this.stream?this.stream.ns:void 0)}filter(e){return this.filters.push(e),this}group(e){return this.groupby=e,this.until||(this.until="caught-up"),this}rollup(e){return this.rollupto=e,this}async write(e){var t,r;return 1===arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof String)&&(e={meta:{type:arguments[0]},data:{}}),2===arguments.length&&(e={meta:{type:arguments[0]},data:{...arguments[1]}}),await this.store.events.write({data:e.data,meta:{db:this.db.name,ns:null!==(t=null===(r=this.ns)||void 0===r?void 0:r.name)&&void 0!==t?t:"",stream:this.stream.id,...Object.keys(e.meta).filter((e=>"type"===e||"id"===e)).reduce(((t,r)=>({...t,[r]:e.meta[r]})),{})}})}async each(e,t){let r={db:this.db.name,cursor:this.cursor?this.cursor.name:void 0,ns:this.ns?this.ns.name:void 0,stream:this.stream?this.stream.id:void 0,from:this.from,after:this.after,to:this.to,until:this.until,types:this.types,filters:this.filters,groupby:this.groupby,rollupto:this.rollupto,limit:this.groupby?void 0:this.limit};Object.keys(r).forEach((e=>{void 0!==r[e]&&0!==r[e].length||delete r[e]})),await this.store.events.find({...r,callback:e,cancellation:t})}}},{"../utils/dedup":65,"./Event":58,bluebird:160}],60:[function(e,t,r){const n=e("./Events"),i=e("./Stream"),s=e("./Streams");t.exports=class{constructor(e,t){this.name=e,this.db=t}get store(){return this.account.store}get account(){return this.db.account}streams(){return new s({ns:this})}stream(e,t){return new i(e,this,t)}events(e){return"string"==typeof e&&(e={types:[e]}),new n({...e,ns:this})}async create(){return await this.store.namespaces.create({db:this.db.name,ns:this.name}),this}async destroy(){await this.store.namespaces.destroy({db:this.db.name,ns:this.name})}async truncate(){await this.store.namespaces.truncate({db:this.db.name,ns:this.name})}async rename(e){return await this.store.namespaces.rename({db:this.db.name,ns:this.name,to:e}),this.name=e,this}async export(){return await this.streams().each((e=>this.stream(e.id).export())),this}}},{"./Events":59,"./Stream":62,"./Streams":63}],61:[function(e,t,r){const n=e("./Namespace");t.exports=class{constructor(e){this.db=e}get store(){return this.account.store}get account(){return this.db.account}namespace(e){return this.ns(e)}ns(e){return new n(e,this.db)}async each(e){const t=this.store.namespaces.find({db:this.db.name});for(const r of t)await e(this.ns(r.id))}async all(){return this.store.namespaces.find({db:this.db.name})}}},{"./Namespace":60}],62:[function(e,t,r){const n=e("./Annotation"),i=e("./Event"),s=e("./Events"),o=e("uuid");t.exports=class{constructor(e,t,r){this.id=e||o.v4(),this.ns=t,r&&(this.created=r.created,this.modified=r.modified,this.size=r.size,this.annotation=r.annotation)}get store(){return this.account.store}get account(){return this.db.account}get db(){return this.ns.db}events(e){return new s({...e,stream:this})}event(e,t){return new i({stream:this,id:e,type:e,data:t})}async annotate(e){return this.store.annotations.write({db:this.db.name,ns:this.ns.name,stream:this.id,annotation:e})}annotation(){return new n(this)}async destroy(){return this.store.annotations.destroy({db:this.db.name,ns:this.ns.name,stream:this.id})}}},{"./Annotation":50,"./Event":58,"./Events":59,uuid:560}],63:[function(e,t,r){e("./Stream");t.exports=class{constructor({db:e,ns:t}){this._db=e,this.ns=t}get store(){return this.account.store}get account(){return this.db.account}get db(){var e;return this._db||(null===(e=this.ns)||void 0===e?void 0:e.db)}stream(e,t){return(void 0!==t.ns?this.db.ns(t.ns):this.ns).stream(e,t)}async each(e){var t;const r=this.store.streams.find({db:this.db.name,ns:null===(t=this.ns)||void 0===t?void 0:t.name});for(const t of r)await e(this.stream(t.id,t))}async all(){var e;return this.store.streams.find({db:this.db.name,ns:null===(e=this.ns)||void 0===e?void 0:e.name})}}},{"./Stream":62}],64:[function(e,t,r){(function(r){e("./API");const n=e("./fluent/Connection"),i=(e("./fluent/Database"),e("./Errors"),e("./utils/identity")),{Store:s}=e("@persistr/store");class o{constructor(){}async connect(e,t){if(e||t||(e="sqlite3:memory"),void 0===t&&"[object String]"!==Object.prototype.toString.call(e)&&(t=e,e={}),"[object String]"!==Object.prototype.toString.call(e)){const t=new URL(e);e={protocol:t.protocol.replace(":",""),hostname:t.hostname,port:t.port,username:t.username,password:t.password,database:t.pathname}}t||"persistr"===e.protocol||(t=new s(e));const r=new n(await t.connect());return"persistr"===e.protocol&&(e.authorization||e.authorized||(e.authorization=()=>r.authorization,e.authorized=e=>r.authorization=e)),r}}t.exports={Persistr:o,persistr:new o,Identity:i};"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)&&(r.persistr=t.exports.persistr)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./API":22,"./Errors":47,"./fluent/Connection":51,"./fluent/Database":52,"./utils/identity":67,"@persistr/store":94}],65:[function(e,t,r){var n=e("lru-cache");t.exports=class{constructor(){this.cache=new n({max:1e5,length:function(e,t){return 16},maxAge:3e5})}seen(e){if(this.cache.peek(e))return!0;this.cache.set(e,!0)}}},{"lru-cache":539}],66:[function(e,t,r){const n=e("../Errors"),i=e("btoa"),s=e("cross-fetch"),o=e("fetch-retry")(s,{retryOn:[503],retries:3,retryDelay:function(e,t,r){return Math.pow(7,e+1)}});function a(e){let t="";if(e&&Object.keys(e).length>0){const r=encodeURIComponent;t="?"+Object.entries(e).filter((e=>e[0]&&e[1])).map((e=>r(e[0])+"="+r(e[1]))).join("&")}return t}t.exports=class{constructor(e,t){this.server=e,this.identity=t,this.headers={}}url({endpoint:e,query:t}){return`${this.server}${e}${a(t)}`}async auth(){let e,t;if(this.identity&&this.identity.authorization&&(t=await this.identity.authorization()),t)e={authorization:t};else if(this.identity&&this.identity.credentials)if(this.identity.credentials.apikey)e={Authorization:`Apikey ${this.identity.credentials.apikey}`,...e};else if(this.identity.credentials.username&&void 0!==this.identity.credentials.password){e={Authorization:`Basic ${r=`${this.identity.credentials.username}:${this.identity.credentials.password}`,i(unescape(encodeURIComponent(r)))}`,...e}}var r;return e}async fetch({method:e,endpoint:t,query:r,body:i,headers:s}){const u=`${this.server}${t}${a(r)}`;let c,l={method:e,headers:{...this.headers,...await this.auth(),"content-type":"application/json",...s},credentials:"same-origin",mode:"cors"};i&&(l.headers["content-type"]&&l.headers["content-type"].includes("json")?l.body=JSON.stringify(i):l.body=i);try{c=await o(u,{...l})}catch(e){if("ECONNREFUSED"===e.code)throw new n.ConnectionRefused(this.server);throw new n.Fetch(e.message)}if(!c.ok)throw new n.StatusCode(u,c.status,c.statusText,await c.text());c.headers.has("Authorization")&&this.identity.authorized&&this.identity.authorized(c.headers.get("Authorization"));let h=await c.text();return h&&(c.headers.has("content-type")?c.headers.get("content-type").includes("json")&&(h=JSON.parse(h)):h=JSON.parse(h)),{body:h||""}}async get(e){return await this.fetch({...e,method:"GET"})}async post(e){return await this.fetch({...e,method:"POST"})}async put(e){return await this.fetch({...e,method:"PUT"})}async patch(e){return await this.fetch({...e,method:"PATCH"})}async delete(e){return await this.fetch({...e,method:"DELETE"})}}},{"../Errors":47,btoa:161,"cross-fetch":163,"fetch-retry":166}],67:[function(e,t,r){t.exports=class{constructor({credentials:e}){e&&(this.username=e.username,this.password=e.password)}get username(){return localStorage.getItem("username")}set username(e){localStorage.setItem("username",e)}async authenticate(e,{username:t,password:r}){localStorage.setItem("username",t),this.password=r,await e.details()}forget(){localStorage.removeItem("authorization"),localStorage.removeItem("username")}get credentials(){if(this.username||this.password)return{username:this.username,password:this.password}}async authorization(){const e=localStorage.getItem("authorization");if(e)return e;if(this.credentials&&this.credentials.apikey)return`Apikey ${this.credentials.apikey}`;if(this.credentials&&this.credentials.username&&this.credentials.password){return`Basic ${t=`${this.credentials.username}:${this.credentials.password}`,btoa(unescape(encodeURIComponent(t)))}`}var t}async authorized(e){localStorage.setItem("authorization",e)}async revoked(e){localStorage.removeItem("authorization")}}},{}],68:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function s(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,t,r){return c=u()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i},c.apply(null,arguments)}function l(e){var t="function"==typeof Map?new Map:void 0;return l=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return c(e,arguments,o(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},l(e)}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}Object.defineProperty(r,"__esModule",{value:!0});var f=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(l(Error)),p=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return s(t,e),t}(f),m=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return s(t,e),t}(f),y=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return s(t,e),t}(f),g=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(f),v=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return s(t,e),t}(f),b=function(e){function t(){return e.apply(this,arguments)||this}return s(t,e),t}(f),_=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return s(t,e),t}(f),w="numeric",E="short",x="long",C={year:w,month:w,day:w},k={year:w,month:E,day:w},O={year:w,month:E,day:w,weekday:E},S={year:w,month:x,day:w},T={year:w,month:x,day:w,weekday:x},$={hour:w,minute:w},j={hour:w,minute:w,second:w},N={hour:w,minute:w,second:w,timeZoneName:E},A={hour:w,minute:w,second:w,timeZoneName:x},I={hour:w,minute:w,hour12:!1},P={hour:w,minute:w,second:w,hour12:!1},R={hour:w,minute:w,second:w,hour12:!1,timeZoneName:E},q={hour:w,minute:w,second:w,hour12:!1,timeZoneName:x},M={year:w,month:w,day:w,hour:w,minute:w},L={year:w,month:w,day:w,hour:w,minute:w,second:w},D={year:w,month:E,day:w,hour:w,minute:w},F={year:w,month:E,day:w,hour:w,minute:w,second:w},U={year:w,month:E,day:w,weekday:E,hour:w,minute:w},B={year:w,month:x,day:w,hour:w,minute:w,timeZoneName:E},V={year:w,month:x,day:w,hour:w,minute:w,second:w,timeZoneName:E},z={year:w,month:x,day:w,weekday:x,hour:w,minute:w,timeZoneName:x},H={year:w,month:x,day:w,weekday:x,hour:w,minute:w,second:w,timeZoneName:x};function W(e){return void 0===e}function Q(e){return"number"==typeof e}function G(e){return"number"==typeof e&&e%1==0}function J(){try{return"undefined"!=typeof Intl&&Intl.DateTimeFormat}catch(e){return!1}}function K(){return!W(Intl.DateTimeFormat.prototype.formatToParts)}function Z(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Y(e,t,r){if(0!==e.length)return e.reduce((function(e,n){var i=[t(n),n];return e&&r(e[0],i[0])===e[0]?e:i}),null)[1]}function X(e,t){return t.reduce((function(t,r){return t[r]=e[r],t}),{})}function ee(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function te(e,t,r){return G(e)&&e>=t&&e<=r}function re(e,t){void 0===t&&(t=2);var r=e<0?"-":"",n=r?-1*e:e;return""+r+(n.toString().length<t?("0".repeat(t)+n).slice(-t):n.toString())}function ne(e){return W(e)||null===e||""===e?void 0:parseInt(e,10)}function ie(e){if(!W(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function se(e,t,r){void 0===r&&(r=!1);var n=Math.pow(10,t);return(r?Math.trunc:Math.round)(e*n)/n}function oe(e){return e%4==0&&(e%100!=0||e%400==0)}function ae(e){return oe(e)?366:365}function ue(e,t){var r=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===r?oe(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function ce(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(t.getUTCFullYear()-1900),+t}function le(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return 4===t||3===n?53:52}function he(e){return e>99?e:e>60?1900+e:2e3+e}function de(e,t,r,n){void 0===n&&(n=null);var i=new Date(e),s={hour12:!1,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(s.timeZone=n);var o=Object.assign({timeZoneName:t},s),a=J();if(a&&K()){var u=new Intl.DateTimeFormat(r,o).formatToParts(i).find((function(e){return"timezonename"===e.type.toLowerCase()}));return u?u.value:null}if(a){var c=new Intl.DateTimeFormat(r,s).format(i);return new Intl.DateTimeFormat(r,o).format(i).substring(c.length).replace(/^[, \u200e]+/,"")}return null}function fe(e,t){var r=parseInt(e,10);Number.isNaN(r)&&(r=0);var n=parseInt(t,10)||0;return 60*r+(r<0||Object.is(r,-0)?-n:n)}function pe(e){var t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new b("Invalid unit value "+e);return t}function me(e,t,r){var n={};for(var i in e)if(ee(e,i)){if(r.indexOf(i)>=0)continue;var s=e[i];if(null==s)continue;n[t(i)]=pe(s)}return n}function ye(e,t){var r=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return""+i+re(r,2)+":"+re(n,2);case"narrow":return""+i+r+(n>0?":"+n:"");case"techie":return""+i+re(r,2)+re(n,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function ge(e){return X(e,["hour","minute","second","millisecond"])}var ve=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?/;function be(e){return JSON.stringify(e,Object.keys(e).sort())}var _e=["January","February","March","April","May","June","July","August","September","October","November","December"],we=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ee=["J","F","M","A","M","J","J","A","S","O","N","D"];function xe(e){switch(e){case"narrow":return[].concat(Ee);case"short":return[].concat(we);case"long":return[].concat(_e);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Ce=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ke=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Oe=["M","T","W","T","F","S","S"];function Se(e){switch(e){case"narrow":return[].concat(Oe);case"short":return[].concat(ke);case"long":return[].concat(Ce);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Te=["AM","PM"],$e=["Before Christ","Anno Domini"],je=["BC","AD"],Ne=["B","A"];function Ae(e){switch(e){case"narrow":return[].concat(Ne);case"short":return[].concat(je);case"long":return[].concat($e);default:return null}}function Ie(e,t){for(var r,n="",i=d(e);!(r=i()).done;){var s=r.value;s.literal?n+=s.val:n+=t(s.val)}return n}var Pe={D:C,DD:k,DDD:S,DDDD:T,t:$,tt:j,ttt:N,tttt:A,T:I,TT:P,TTT:R,TTTT:q,f:M,ff:D,fff:B,ffff:z,F:L,FF:F,FFF:V,FFFF:H},Re=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,r){return void 0===r&&(r={}),new e(t,r)},e.parseFormat=function(e){for(var t=null,r="",n=!1,i=[],s=0;s<e.length;s++){var o=e.charAt(s);"'"===o?(r.length>0&&i.push({literal:n,val:r}),t=null,r="",n=!n):n||o===t?r+=o:(r.length>0&&i.push({literal:!1,val:r}),r=o,t=o)}return r.length>0&&i.push({literal:n,val:r}),i},e.macroTokenToFormatOpts=function(e){return Pe[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).formatToParts()},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,Object.assign({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return re(e,t);var r=Object.assign({},this.opts);return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)},t.formatDateTimeFromString=function(t,r){var n=this,i="en"===this.loc.listingMode(),s=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar&&K(),o=function(e,r){return n.loc.extract(t,e,r)},a=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},u=function(){return i?function(e){return Te[e.hour<12?0:1]}(t):o({hour:"numeric",hour12:!0},"dayperiod")},c=function(e,r){return i?function(e,t){return xe(t)[e.month-1]}(t,e):o(r?{month:e}:{month:e,day:"numeric"},"month")},l=function(e,r){return i?function(e,t){return Se(t)[e.weekday-1]}(t,e):o(r?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},h=function(e){return i?function(e,t){return Ae(t)[e.year<0?0:1]}(t,e):o({era:e},"era")};return Ie(e.parseFormat(r),(function(r){switch(r){case"S":return n.num(t.millisecond);case"u":case"SSS":return n.num(t.millisecond,3);case"s":return n.num(t.second);case"ss":return n.num(t.second,2);case"m":return n.num(t.minute);case"mm":return n.num(t.minute,2);case"h":return n.num(t.hour%12==0?12:t.hour%12);case"hh":return n.num(t.hour%12==0?12:t.hour%12,2);case"H":return n.num(t.hour);case"HH":return n.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:n.opts.allowZ});case"ZZ":return a({format:"short",allowZ:n.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:n.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:n.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:n.loc.locale});case"z":return t.zoneName;case"a":return u();case"d":return s?o({day:"numeric"},"day"):n.num(t.day);case"dd":return s?o({day:"2-digit"},"day"):n.num(t.day,2);case"c":case"E":return n.num(t.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return s?o({month:"numeric",day:"numeric"},"month"):n.num(t.month);case"LL":return s?o({month:"2-digit",day:"numeric"},"month"):n.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?o({month:"numeric"},"month"):n.num(t.month);case"MM":return s?o({month:"2-digit"},"month"):n.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?o({year:"numeric"},"year"):n.num(t.year);case"yy":return s?o({year:"2-digit"},"year"):n.num(t.year.toString().slice(-2),2);case"yyyy":return s?o({year:"numeric"},"year"):n.num(t.year,4);case"yyyyyy":return s?o({year:"numeric"},"year"):n.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return n.num(t.weekYear.toString().slice(-2),2);case"kkkk":return n.num(t.weekYear,4);case"W":return n.num(t.weekNumber);case"WW":return n.num(t.weekNumber,2);case"o":return n.num(t.ordinal);case"ooo":return n.num(t.ordinal,3);case"q":return n.num(t.quarter);case"qq":return n.num(t.quarter,2);case"X":return n.num(Math.floor(t.ts/1e3));case"x":return n.num(t.ts);default:return function(r){var i=e.macroTokenToFormatOpts(r);return i?n.formatWithSystemDefault(t,i):r}(r)}}))},t.formatDurationFromString=function(t,r){var n,i=this,s=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},o=e.parseFormat(r),a=o.reduce((function(e,t){var r=t.literal,n=t.val;return r?e:e.concat(n)}),[]),u=t.shiftTo.apply(t,a.map(s).filter((function(e){return e})));return Ie(o,(n=u,function(e){var t=s(e);return t?i.num(n.get(t),e.length):e}))},e}(),qe=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),Me=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new _},t.formatOffset=function(e,t){throw new _},t.offset=function(e){throw new _},t.equals=function(e){throw new _},i(e,[{key:"type",get:function(){throw new _}},{key:"name",get:function(){throw new _}},{key:"universal",get:function(){throw new _}},{key:"isValid",get:function(){throw new _}}]),e}(),Le=null,De=function(e){function t(){return e.apply(this,arguments)||this}s(t,e);var r=t.prototype;return r.offsetName=function(e,t){return de(e,t.format,t.locale)},r.formatOffset=function(e,t){return ye(this.offset(e),t)},r.offset=function(e){return-new Date(e).getTimezoneOffset()},r.equals=function(e){return"local"===e.type},i(t,[{key:"type",get:function(){return"local"}},{key:"name",get:function(){return J()?(new Intl.DateTimeFormat).resolvedOptions().timeZone:"local"}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Le&&(Le=new t),Le}}]),t}(Me),Fe=RegExp("^"+ve.source+"$"),Ue={};var Be={year:0,month:1,day:2,hour:3,minute:4,second:5};var Ve={},ze=function(e){function t(r){var n;return(n=e.call(this)||this).zoneName=r,n.valid=t.isValidZone(r),n}s(t,e),t.create=function(e){return Ve[e]||(Ve[e]=new t(e)),Ve[e]},t.resetCache=function(){Ve={},Ue={}},t.isValidSpecifier=function(e){return!(!e||!e.match(Fe))},t.isValidZone=function(e){try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}},t.parseGMTOffset=function(e){if(e){var t=e.match(/^Etc\/GMT(0|[+-]\d{1,2})$/i);if(t)return-60*parseInt(t[1])}return null};var r=t.prototype;return r.offsetName=function(e,t){return de(e,t.format,t.locale,this.name)},r.formatOffset=function(e,t){return ye(this.offset(e),t)},r.offset=function(e){var t=new Date(e);if(isNaN(t))return NaN;var r,n=(r=this.name,Ue[r]||(Ue[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),Ue[r]),i=n.formatToParts?function(e,t){for(var r=e.formatToParts(t),n=[],i=0;i<r.length;i++){var s=r[i],o=s.type,a=s.value,u=Be[o];W(u)||(n[u]=parseInt(a,10))}return n}(n,t):function(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r),i=n[1],s=n[2];return[n[3],i,s,n[4],n[5],n[6]]}(n,t),s=i[0],o=i[1],a=i[2],u=i[3],c=+t,l=c%1e3;return(ce({year:s,month:o,day:a,hour:24===u?0:u,minute:i[4],second:i[5],millisecond:0})-(c-=l>=0?l:1e3+l))/6e4},r.equals=function(e){return"iana"===e.type&&e.name===this.name},i(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(Me),He=null,We=function(e){function t(t){var r;return(r=e.call(this)||this).fixed=t,r}s(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(fe(r[1],r[2]))}return null},i(t,null,[{key:"utcInstance",get:function(){return null===He&&(He=new t(0)),He}}]);var r=t.prototype;return r.offsetName=function(){return this.name},r.formatOffset=function(e,t){return ye(this.fixed,t)},r.offset=function(){return this.fixed},r.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},i(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+ye(this.fixed,"narrow")}},{key:"universal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}]),t}(Me),Qe=function(e){function t(t){var r;return(r=e.call(this)||this).zoneName=t,r}s(t,e);var r=t.prototype;return r.offsetName=function(){return null},r.formatOffset=function(){return""},r.offset=function(){return NaN},r.equals=function(){return!1},i(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"universal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(Me);function Ge(e,t){var r;if(W(e)||null===e)return t;if(e instanceof Me)return e;if("string"==typeof e){var n=e.toLowerCase();return"local"===n?t:"utc"===n||"gmt"===n?We.utcInstance:null!=(r=ze.parseGMTOffset(e))?We.instance(r):ze.isValidSpecifier(n)?ze.create(e):We.parseSpecifier(n)||new Qe(e)}return Q(e)?We.instance(e):"object"==typeof e&&e.offset&&"number"==typeof e.offset?e:new Qe(e)}var Je=function(){return Date.now()},Ke=null,Ze=null,Ye=null,Xe=null,et=!1,tt=function(){function e(){}return e.resetCaches=function(){dt.resetCache(),ze.resetCache()},i(e,null,[{key:"now",get:function(){return Je},set:function(e){Je=e}},{key:"defaultZoneName",get:function(){return e.defaultZone.name},set:function(e){Ke=e?Ge(e):null}},{key:"defaultZone",get:function(){return Ke||De.instance}},{key:"defaultLocale",get:function(){return Ze},set:function(e){Ze=e}},{key:"defaultNumberingSystem",get:function(){return Ye},set:function(e){Ye=e}},{key:"defaultOutputCalendar",get:function(){return Xe},set:function(e){Xe=e}},{key:"throwOnInvalid",get:function(){return et},set:function(e){et=e}}]),e}(),rt={};function nt(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=rt[r];return n||(n=new Intl.DateTimeFormat(e,t),rt[r]=n),n}var it={};var st={};function ot(e,t){void 0===t&&(t={});var r=t,n=(r.base,function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(r,["base"])),i=JSON.stringify([e,n]),s=st[i];return s||(s=new Intl.RelativeTimeFormat(e,t),st[i]=s),s}var at=null;function ut(e,t,r,n,i){var s=e.listingMode(r);return"error"===s?null:"en"===s?n(t):i(t)}var ct=function(){function e(e,t,r){if(this.padTo=r.padTo||0,this.floor=r.floor||!1,!t&&J()){var n={useGrouping:!1};r.padTo>0&&(n.minimumIntegerDigits=r.padTo),this.inf=function(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=it[r];return n||(n=new Intl.NumberFormat(e,t),it[r]=n),n}(e,n)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return re(this.floor?Math.floor(e):se(e,3),this.padTo)},e}(),lt=function(){function e(e,t,r){var n;if(this.opts=r,this.hasIntl=J(),e.zone.universal&&this.hasIntl){var i=e.offset/60*-1,s=i>=0?"Etc/GMT+"+i:"Etc/GMT"+i,o=ze.isValidZone(s);0!==e.offset&&o?(n=s,this.dt=e):(n="UTC",r.timeZoneName?this.dt=e:this.dt=0===e.offset?e:pn.fromMillis(e.ts+60*e.offset*1e3))}else"local"===e.zone.type?this.dt=e:(this.dt=e,n=e.zone.name);if(this.hasIntl){var a=Object.assign({},this.opts);n&&(a.timeZone=n),this.dtf=nt(t,a)}}var t=e.prototype;return t.format=function(){if(this.hasIntl)return this.dtf.format(this.dt.toJSDate());var e=function(e){var t="EEEE, LLLL d, yyyy, h:mm a";switch(be(X(e,["weekday","era","year","month","day","hour","minute","second","timeZoneName","hour12"]))){case be(C):return"M/d/yyyy";case be(k):return"LLL d, yyyy";case be(O):return"EEE, LLL d, yyyy";case be(S):return"LLLL d, yyyy";case be(T):return"EEEE, LLLL d, yyyy";case be($):return"h:mm a";case be(j):return"h:mm:ss a";case be(N):case be(A):return"h:mm a";case be(I):return"HH:mm";case be(P):return"HH:mm:ss";case be(R):case be(q):return"HH:mm";case be(M):return"M/d/yyyy, h:mm a";case be(D):return"LLL d, yyyy, h:mm a";case be(B):return"LLLL d, yyyy, h:mm a";case be(z):return t;case be(L):return"M/d/yyyy, h:mm:ss a";case be(F):return"LLL d, yyyy, h:mm:ss a";case be(U):return"EEE, d LLL yyyy, h:mm a";case be(V):return"LLLL d, yyyy, h:mm:ss a";case be(H):return"EEEE, LLLL d, yyyy, h:mm:ss a";default:return t}}(this.opts),t=dt.create("en-US");return Re.create(t).formatDateTimeFromString(this.dt,e)},t.formatToParts=function(){return this.hasIntl&&K()?this.dtf.formatToParts(this.dt.toJSDate()):[]},t.resolvedOptions=function(){return this.hasIntl?this.dtf.resolvedOptions():{locale:"en-US",numberingSystem:"latn",outputCalendar:"gregory"}},e}(),ht=function(){function e(e,t,r){this.opts=Object.assign({style:"long"},r),!t&&Z()&&(this.rtf=ot(e,r))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,r,n){void 0===r&&(r="always"),void 0===n&&(n=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===r&&s){var o="days"===e;switch(t){case 1:return o?"tomorrow":"next "+i[e][0];case-1:return o?"yesterday":"last "+i[e][0];case 0:return o?"today":"this "+i[e][0]}}var a=Object.is(t,-0)||t<0,u=Math.abs(t),c=1===u,l=i[e],h=n?c?l[1]:l[2]||l[1]:c?i[e][0]:e;return a?u+" "+h+" ago":"in "+u+" "+h}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),dt=function(){function e(e,t,r,n){var i=function(e){var t=e.indexOf("-u-");if(-1===t)return[e];var r,n=e.substring(0,t);try{r=nt(e).resolvedOptions()}catch(e){r=nt(n).resolvedOptions()}var i=r;return[n,i.numberingSystem,i.calendar]}(e),s=i[0],o=i[1],a=i[2];this.locale=s,this.numberingSystem=t||o||null,this.outputCalendar=r||a||null,this.intl=function(e,t,r){return J()?r||t?(e+="-u",r&&(e+="-ca-"+r),t&&(e+="-nu-"+t),e):e:[]}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,r,n,i){void 0===i&&(i=!1);var s=t||tt.defaultLocale;return new e(s||(i?"en-US":function(){if(at)return at;if(J()){var e=(new Intl.DateTimeFormat).resolvedOptions().locale;return at=e&&"und"!==e?e:"en-US"}return at="en-US"}()),r||tt.defaultNumberingSystem,n||tt.defaultOutputCalendar,s)},e.resetCache=function(){at=null,rt={},it={},st={}},e.fromObject=function(t){var r=void 0===t?{}:t,n=r.locale,i=r.numberingSystem,s=r.outputCalendar;return e.create(n,i,s)};var t=e.prototype;return t.listingMode=function(e){void 0===e&&(e=!0);var t=J()&&K(),r=this.isEnglish(),n=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return t||r&&n||e?!t||r&&n?"en":"intl":"error"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(Object.assign({},e,{defaultToEN:!1}))},t.months=function(e,t,r){var n=this;return void 0===t&&(t=!1),void 0===r&&(r=!0),ut(this,e,r,xe,(function(){var r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return n.monthsCache[i][e]||(n.monthsCache[i][e]=function(e){for(var t=[],r=1;r<=12;r++){var n=pn.utc(2016,r,1);t.push(e(n))}return t}((function(e){return n.extract(e,r,"month")}))),n.monthsCache[i][e]}))},t.weekdays=function(e,t,r){var n=this;return void 0===t&&(t=!1),void 0===r&&(r=!0),ut(this,e,r,Se,(function(){var r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return n.weekdaysCache[i][e]||(n.weekdaysCache[i][e]=function(e){for(var t=[],r=1;r<=7;r++){var n=pn.utc(2016,11,13+r);t.push(e(n))}return t}((function(e){return n.extract(e,r,"weekday")}))),n.weekdaysCache[i][e]}))},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),ut(this,void 0,e,(function(){return Te}),(function(){if(!t.meridiemCache){var e={hour:"numeric",hour12:!0};t.meridiemCache=[pn.utc(2016,11,13,9),pn.utc(2016,11,13,19)].map((function(r){return t.extract(r,e,"dayperiod")}))}return t.meridiemCache}))},t.eras=function(e,t){var r=this;return void 0===t&&(t=!0),ut(this,e,t,Ae,(function(){var t={era:e};return r.eraCache[e]||(r.eraCache[e]=[pn.utc(-40,1,1),pn.utc(2017,1,1)].map((function(e){return r.extract(e,t,"era")}))),r.eraCache[e]}))},t.extract=function(e,t,r){var n=this.dtFormatter(e,t).formatToParts().find((function(e){return e.type.toLowerCase()===r}));return n?n.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new ct(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new lt(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new ht(this.intl,this.isEnglish(),e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||J()&&new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},i(e,[{key:"fastNumbers",get:function(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||J()&&"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),e}();function ft(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return e+t.source}),"");return RegExp("^"+n+"$")}function pt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(t,r){var n=t[0],i=t[1],s=t[2],o=r(e,s),a=o[0],u=o[1],c=o[2];return[Object.assign(n,a),i||u,c]}),[{},null,1]).slice(0,2)}}function mt(e){if(null==e)return[null,null];for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0,s=r;i<s.length;i++){var o=s[i],a=o[0],u=o[1],c=a.exec(e);if(c)return u(c)}return[null,null]}function yt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n,i={};for(n=0;n<t.length;n++)i[t[n]]=ne(e[r+n]);return[i,null,r+n]}}var gt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,vt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,bt=RegExp(""+vt.source+gt.source+"?"),_t=RegExp("(?:T"+bt.source+")?"),wt=yt("weekYear","weekNumber","weekDay"),Et=yt("year","ordinal"),xt=RegExp(vt.source+" ?(?:"+gt.source+"|("+ve.source+"))?"),Ct=RegExp("(?: "+xt.source+")?");function kt(e,t,r){var n=e[t];return W(n)?r:ne(n)}function Ot(e,t){return[{year:kt(e,t),month:kt(e,t+1,1),day:kt(e,t+2,1)},null,t+3]}function St(e,t){return[{hours:kt(e,t,0),minutes:kt(e,t+1,0),seconds:kt(e,t+2,0),milliseconds:ie(e[t+3])},null,t+4]}function Tt(e,t){var r=!e[t]&&!e[t+1],n=fe(e[t+1],e[t+2]);return[{},r?null:We.instance(n),t+3]}function $t(e,t){return[{},e[t]?ze.create(e[t]):null,t+1]}var jt=RegExp("^T?"+vt.source+"$"),Nt=/^-?P(?:(?:(-?\d{1,9})Y)?(?:(-?\d{1,9})M)?(?:(-?\d{1,9})W)?(?:(-?\d{1,9})D)?(?:T(?:(-?\d{1,9})H)?(?:(-?\d{1,9})M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function At(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l="-"===t[0],h=u&&"-"===u[0],d=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(t||e&&l)?-e:e};return[{years:d(ne(r)),months:d(ne(n)),weeks:d(ne(i)),days:d(ne(s)),hours:d(ne(o)),minutes:d(ne(a)),seconds:d(ne(u),"-0"===u),milliseconds:d(ie(c),h)}]}var It={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Pt(e,t,r,n,i,s,o){var a={year:2===t.length?he(ne(t)):ne(t),month:we.indexOf(r)+1,day:ne(n),hour:ne(i),minute:ne(s)};return o&&(a.second=ne(o)),e&&(a.weekday=e.length>3?Ce.indexOf(e)+1:ke.indexOf(e)+1),a}var Rt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function qt(e){var t,r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11],f=Pt(r,s,i,n,o,a,u);return t=c?It[c]:l?0:fe(h,d),[f,new We(t)]}var Mt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Lt=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Dt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Ft(e){var t=e[1],r=e[2],n=e[3];return[Pt(t,e[4],n,r,e[5],e[6],e[7]),We.utcInstance]}function Ut(e){var t=e[1],r=e[2],n=e[3],i=e[4],s=e[5],o=e[6];return[Pt(t,e[7],r,n,i,s,o),We.utcInstance]}var Bt=ft(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,_t),Vt=ft(/(\d{4})-?W(\d\d)(?:-?(\d))?/,_t),zt=ft(/(\d{4})-?(\d{3})/,_t),Ht=ft(bt),Wt=pt(Ot,St,Tt),Qt=pt(wt,St,Tt),Gt=pt(Et,St,Tt),Jt=pt(St,Tt);var Kt=pt(St);var Zt=ft(/(\d{4})-(\d\d)-(\d\d)/,Ct),Yt=ft(xt),Xt=pt(Ot,St,Tt,$t),er=pt(St,Tt,$t);var tr={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},rr=Object.assign({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},tr),nr=365.2425,ir=30.436875,sr=Object.assign({years:{quarters:4,months:12,weeks:52.1775,days:nr,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:ir,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},tr),or=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],ar=or.slice(0).reverse();function ur(e,t,r){void 0===r&&(r=!1);var n={values:r?t.values:Object.assign({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new lr(n)}function cr(e,t,r,n,i){var s=e[i][r],o=t[r]/s,a=!(Math.sign(o)===Math.sign(n[i]))&&0!==n[i]&&Math.abs(o)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(o):Math.trunc(o);n[i]+=a,t[r]-=a*s}var lr=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1;this.values=e.values,this.loc=e.loc||dt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=t?sr:rr,this.isLuxonDuration=!0}e.fromMillis=function(t,r){return e.fromObject(Object.assign({milliseconds:t},r))},e.fromObject=function(t){if(null==t||"object"!=typeof t)throw new b("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:me(t,e.normalizeUnit,["locale","numberingSystem","conversionAccuracy","zone"]),loc:dt.fromObject(t),conversionAccuracy:t.conversionAccuracy})},e.fromISO=function(t,r){var n=function(e){return mt(e,[Nt,At])}(t),i=n[0];if(i){var s=Object.assign(i,r);return e.fromObject(s)}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.fromISOTime=function(t,r){var n=function(e){return mt(e,[jt,Kt])}(t),i=n[0];if(i){var s=Object.assign(i,r);return e.fromObject(s)}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new b("need to specify a reason the Duration is invalid");var n=t instanceof qe?t:new qe(t,r);if(tt.throwOnInvalid)throw new y(n);return new e({invalid:n})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new v(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var r=Object.assign({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?Re.create(this.loc,r).formatDurationFromString(this,e):"Invalid Duration"},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.values);return e.includeConfig&&(t.conversionAccuracy=this.conversionAccuracy,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=se(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toISOTime=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var t=this.toMillis();if(t<0||t>=864e5)return null;e=Object.assign({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var r=this.shiftTo("hours","minutes","seconds","milliseconds"),n="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===r.seconds&&0===r.milliseconds||(n+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===r.milliseconds||(n+=".SSS"));var i=r.toFormat(n);return e.includePrefix&&(i="T"+i),i},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(e){if(!this.isValid)return this;for(var t,r=hr(e),n={},i=d(or);!(t=i()).done;){var s=t.value;(ee(r.values,s)||ee(this.values,s))&&(n[s]=r.get(s)+this.get(s))}return ur(this,{values:n},!0)},t.minus=function(e){if(!this.isValid)return this;var t=hr(e);return this.plus(t.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},r=0,n=Object.keys(this.values);r<n.length;r++){var i=n[r];t[i]=pe(e(this.values[i],i))}return ur(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?ur(this,{values:Object.assign(this.values,me(t,e.normalizeUnit,[]))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,r=t.locale,n=t.numberingSystem,i=t.conversionAccuracy,s={loc:this.loc.clone({locale:r,numberingSystem:n})};return i&&(s.conversionAccuracy=i),ur(this,s)},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return function(e,t){ar.reduce((function(r,n){return W(t[n])?r:(r&&cr(e,t,r,t,n),n)}),null)}(this.matrix,e),ur(this,{values:e},!0)},t.shiftTo=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!this.isValid)return this;if(0===r.length)return this;r=r.map((function(t){return e.normalizeUnit(t)}));for(var i,s,o={},a={},u=this.toObject(),c=d(or);!(s=c()).done;){var l=s.value;if(r.indexOf(l)>=0){i=l;var h=0;for(var f in a)h+=this.matrix[f][l]*a[f],a[f]=0;Q(u[l])&&(h+=u[l]);var p=Math.trunc(h);for(var m in o[l]=p,a[l]=h-p,u)or.indexOf(m)>or.indexOf(l)&&cr(this.matrix,u,m,o,l)}else Q(u[l])&&(a[l]=u[l])}for(var y in a)0!==a[y]&&(o[i]+=y===i?a[y]:a[y]/this.matrix[i][y]);return ur(this,{values:o},!0).normalize()},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,r=Object.keys(this.values);t<r.length;t++){var n=r[t];e[n]=-this.values[n]}return ur(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(var t,r=d(or);!(t=r()).done;){var n=t.value;if(i=this.values[n],s=e.values[n],!(void 0===i||0===i?void 0===s||0===s:i===s))return!1}var i,s;return!0},i(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}();function hr(e){if(Q(e))return lr.fromMillis(e);if(lr.isDuration(e))return e;if("object"==typeof e)return lr.fromObject(e);throw new b("Unknown duration argument "+e+" of type "+typeof e)}var dr="Invalid Interval";function fr(e,t){return e&&e.isValid?t&&t.isValid?t<e?pr.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:pr.invalid("missing or invalid end"):pr.invalid("missing or invalid start")}var pr=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new b("need to specify a reason the Interval is invalid");var n=t instanceof qe?t:new qe(t,r);if(tt.throwOnInvalid)throw new m(n);return new e({invalid:n})},e.fromDateTimes=function(t,r){var n=mn(t),i=mn(r),s=fr(n,i);return null==s?new e({start:n,end:i}):s},e.after=function(t,r){var n=hr(r),i=mn(t);return e.fromDateTimes(i,i.plus(n))},e.before=function(t,r){var n=hr(r),i=mn(t);return e.fromDateTimes(i.minus(n),i)},e.fromISO=function(t,r){var n=(t||"").split("/",2),i=n[0],s=n[1];if(i&&s){var o,a,u,c;try{a=(o=pn.fromISO(i,r)).isValid}catch(s){a=!1}try{c=(u=pn.fromISO(s,r)).isValid}catch(s){c=!1}if(a&&c)return e.fromDateTimes(o,u);if(a){var l=lr.fromISO(s,r);if(l.isValid)return e.after(o,l)}else if(c){var h=lr.fromISO(i,r);if(h.isValid)return e.before(u,h)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(t,e).get(e))+1},t.hasSame=function(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&(this.s<=e&&this.e>e)},t.set=function(t){var r=void 0===t?{}:t,n=r.start,i=r.end;return this.isValid?e.fromDateTimes(n||this.s,i||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var s=n.map(mn).filter((function(e){return t.contains(e)})).sort(),o=[],a=this.s,u=0;a<this.e;){var c=s[u]||this.e,l=+c>+this.e?this.e:c;o.push(e.fromDateTimes(a,l)),a=l,u+=1}return o},t.splitBy=function(t){var r=hr(t);if(!this.isValid||!r.isValid||0===r.as("milliseconds"))return[];for(var n,i=this.s,s=1,o=[];i<this.e;){var a=this.start.plus(r.mapUnits((function(e){return e*s})));n=+a>+this.e?this.e:a,o.push(e.fromDateTimes(i,n)),i=n,s+=1}return o},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e==+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e==+this.s},t.engulfs=function(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)},t.equals=function(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))},t.intersection=function(t){if(!this.isValid)return this;var r=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return r>=n?null:e.fromDateTimes(r,n)},t.union=function(t){if(!this.isValid)return this;var r=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return e.fromDateTimes(r,n)},e.merge=function(e){var t=e.sort((function(e,t){return e.s-t.s})).reduce((function(e,t){var r=e[0],n=e[1];return n?n.overlaps(t)||n.abutsStart(t)?[r,n.union(t)]:[r.concat([n]),t]:[r,t]}),[[],null]),r=t[0],n=t[1];return n&&r.push(n),r},e.xor=function(t){for(var r,n,i=null,s=0,o=[],a=t.map((function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]})),u=d((r=Array.prototype).concat.apply(r,a).sort((function(e,t){return e.time-t.time})));!(n=u()).done;){var c=n.value;1===(s+="s"===c.type?1:-1)?i=c.time:(i&&+i!=+c.time&&o.push(e.fromDateTimes(i,c.time)),i=null)}return e.merge(o)},t.difference=function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.xor([this].concat(n)).map((function(e){return t.intersection(e)})).filter((function(e){return e&&!e.isEmpty()}))},t.toString=function(){return this.isValid?"["+this.s.toISO()+"  "+this.e.toISO()+")":dr},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):dr},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():dr},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):dr},t.toFormat=function(e,t){var r=(void 0===t?{}:t).separator,n=void 0===r?"  ":r;return this.isValid?""+this.s.toFormat(e)+n+this.e.toFormat(e):dr},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):lr.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},i(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),mr=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=tt.defaultZone);var t=pn.now().setZone(e).set({month:12});return!e.universal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return ze.isValidSpecifier(e)&&ze.isValidZone(e)},e.normalizeZone=function(e){return Ge(e,tt.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj,u=void 0===a?null:a,c=r.outputCalendar,l=void 0===c?"gregory":c;return(u||dt.create(i,o,l)).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj,u=void 0===a?null:a,c=r.outputCalendar,l=void 0===c?"gregory":c;return(u||dt.create(i,o,l)).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj;return((void 0===a?null:a)||dt.create(i,o,null)).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj;return((void 0===a?null:a)||dt.create(i,o,null)).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,r=void 0===t?null:t;return dt.create(r).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var r=(void 0===t?{}:t).locale,n=void 0===r?null:r;return dt.create(n,null,"gregory").eras(e)},e.features=function(){var e=!1,t=!1,r=!1,n=!1;if(J()){e=!0,t=K(),n=Z();try{r="America/New_York"===new Intl.DateTimeFormat("en",{timeZone:"America/New_York"}).resolvedOptions().timeZone}catch(e){r=!1}}return{intl:e,intlTokens:t,zones:r,relative:n}},e}();function yr(e,t){var r=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},n=r(t)-r(e);return Math.floor(lr.fromMillis(n).as("days"))}function gr(e,t,r,n){var i=function(e,t,r){for(var n,i,s={},o=0,a=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var r=yr(e,t);return(r-r%7)/7}],["days",yr]];o<a.length;o++){var u=a[o],c=u[0],l=u[1];if(r.indexOf(c)>=0){var h;n=c;var d,f=l(e,t);(i=e.plus(((h={})[c]=f,h)))>t?(e=e.plus(((d={})[c]=f-1,d)),f-=1):e=i,s[c]=f}}return[e,s,i,n]}(e,t,r),s=i[0],o=i[1],a=i[2],u=i[3],c=t-s,l=r.filter((function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0}));if(0===l.length){var h;if(a<t)a=s.plus(((h={})[u]=1,h));a!==s&&(o[u]=(o[u]||0)+c/(a-s))}var d,f=lr.fromObject(Object.assign(o,n));return l.length>0?(d=lr.fromMillis(c,n)).shiftTo.apply(d,l).plus(f):f}var vr={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},br={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},_r=vr.hanidec.replace(/[\[|\]]/g,"").split("");function wr(e,t){var r=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+vr[r||"latn"]+t)}function Er(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var r=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(-1!==e[r].search(vr.hanidec))t+=_r.indexOf(e[r]);else for(var i in br){var s=br[i],o=s[0],a=s[1];n>=o&&n<=a&&(t+=n-o)}}return parseInt(t,10)}return t}(r))}}}var xr="( |"+String.fromCharCode(160)+")",Cr=new RegExp(xr,"g");function kr(e){return e.replace(/\./g,"\\.?").replace(Cr,xr)}function Or(e){return e.replace(/\./g,"").replace(Cr," ").toLowerCase()}function Sr(e,t){return null===e?null:{regex:RegExp(e.map(kr).join("|")),deser:function(r){var n=r[0];return e.findIndex((function(e){return Or(n)===Or(e)}))+t}}}function Tr(e,t){return{regex:e,deser:function(e){return fe(e[1],e[2])},groups:t}}function $r(e){return{regex:e,deser:function(e){return e[0]}}}var jr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};var Nr=null;function Ar(e,t){if(e.literal)return e;var r=Re.macroTokenToFormatOpts(e.val);if(!r)return e;var n=Re.create(t,r).formatDateTimeParts((Nr||(Nr=pn.fromMillis(1555555555555)),Nr)).map((function(e){return function(e,t,r){var n=e.type,i=e.value;if("literal"===n)return{literal:!0,val:i};var s=r[n],o=jr[n];return"object"==typeof o&&(o=o[s]),o?{literal:!1,val:o}:void 0}(e,0,r)}));return n.includes(void 0)?e:n}function Ir(e,t,r){var n=function(e,t){var r;return(r=Array.prototype).concat.apply(r,e.map((function(e){return Ar(e,t)})))}(Re.parseFormat(r),e),i=n.map((function(t){return r=t,i=wr(n=e),s=wr(n,"{2}"),o=wr(n,"{3}"),a=wr(n,"{4}"),u=wr(n,"{6}"),c=wr(n,"{1,2}"),l=wr(n,"{1,3}"),h=wr(n,"{1,6}"),d=wr(n,"{1,9}"),f=wr(n,"{2,4}"),p=wr(n,"{4,6}"),m=function(e){return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(e){return e[0]},literal:!0};var t},y=function(e){if(r.literal)return m(e);switch(e.val){case"G":return Sr(n.eras("short",!1),0);case"GG":return Sr(n.eras("long",!1),0);case"y":return Er(h);case"yy":case"kk":return Er(f,he);case"yyyy":case"kkkk":return Er(a);case"yyyyy":return Er(p);case"yyyyyy":return Er(u);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return Er(c);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return Er(s);case"MMM":return Sr(n.months("short",!0,!1),1);case"MMMM":return Sr(n.months("long",!0,!1),1);case"LLL":return Sr(n.months("short",!1,!1),1);case"LLLL":return Sr(n.months("long",!1,!1),1);case"o":case"S":return Er(l);case"ooo":case"SSS":return Er(o);case"u":return $r(d);case"a":return Sr(n.meridiems(),0);case"E":case"c":return Er(i);case"EEE":return Sr(n.weekdays("short",!1,!1),1);case"EEEE":return Sr(n.weekdays("long",!1,!1),1);case"ccc":return Sr(n.weekdays("short",!0,!1),1);case"cccc":return Sr(n.weekdays("long",!0,!1),1);case"Z":case"ZZ":return Tr(new RegExp("([+-]"+c.source+")(?::("+s.source+"))?"),2);case"ZZZ":return Tr(new RegExp("([+-]"+c.source+")("+s.source+")?"),2);case"z":return $r(/[a-z_+-/]{1,256}?/i);default:return m(e)}}(r)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"},y.token=r,y;var r,n,i,s,o,a,u,c,l,h,d,f,p,m,y})),s=i.find((function(e){return e.invalidReason}));if(s)return{input:t,tokens:n,invalidReason:s.invalidReason};var o=function(e){return["^"+e.map((function(e){return e.regex})).reduce((function(e,t){return e+"("+t.source+")"}),"")+"$",e]}(i),a=o[0],u=o[1],c=RegExp(a,"i"),l=function(e,t,r){var n=e.match(t);if(n){var i={},s=1;for(var o in r)if(ee(r,o)){var a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}return[n,{}]}(t,c,u),h=l[0],d=l[1],f=d?function(e){var t;return t=W(e.Z)?W(e.z)?null:ze.create(e.z):new We(e.Z),W(e.q)||(e.M=3*(e.q-1)+1),W(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),W(e.u)||(e.S=ie(e.u)),[Object.keys(e).reduce((function(t,r){var n=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(r);return n&&(t[n]=e[r]),t}),{}),t]}(d):[null,null],p=f[0],m=f[1];if(ee(d,"a")&&ee(d,"H"))throw new g("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:n,regex:c,rawMatches:h,matches:d,result:p,zone:m}}var Pr=[0,31,59,90,120,151,181,212,243,273,304,334],Rr=[0,31,60,91,121,152,182,213,244,274,305,335];function qr(e,t){return new qe("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function Mr(e,t,r){var n=new Date(Date.UTC(e,t-1,r)).getUTCDay();return 0===n?7:n}function Lr(e,t,r){return r+(oe(e)?Rr:Pr)[t-1]}function Dr(e,t){var r=oe(e)?Rr:Pr,n=r.findIndex((function(e){return e<t}));return{month:n+1,day:t-r[n]}}function Fr(e){var t,r=e.year,n=e.month,i=e.day,s=Lr(r,n,i),o=Mr(r,n,i),a=Math.floor((s-o+10)/7);return a<1?a=le(t=r-1):a>le(r)?(t=r+1,a=1):t=r,Object.assign({weekYear:t,weekNumber:a,weekday:o},ge(e))}function Ur(e){var t,r=e.weekYear,n=e.weekNumber,i=e.weekday,s=Mr(r,1,4),o=ae(r),a=7*n+i-s-3;a<1?a+=ae(t=r-1):a>o?(t=r+1,a-=ae(r)):t=r;var u=Dr(t,a),c=u.month,l=u.day;return Object.assign({year:t,month:c,day:l},ge(e))}function Br(e){var t=e.year,r=Lr(t,e.month,e.day);return Object.assign({year:t,ordinal:r},ge(e))}function Vr(e){var t=e.year,r=Dr(t,e.ordinal),n=r.month,i=r.day;return Object.assign({year:t,month:n,day:i},ge(e))}function zr(e){var t=G(e.year),r=te(e.month,1,12),n=te(e.day,1,ue(e.year,e.month));return t?r?!n&&qr("day",e.day):qr("month",e.month):qr("year",e.year)}function Hr(e){var t=e.hour,r=e.minute,n=e.second,i=e.millisecond,s=te(t,0,23)||24===t&&0===r&&0===n&&0===i,o=te(r,0,59),a=te(n,0,59),u=te(i,0,999);return s?o?a?!u&&qr("millisecond",i):qr("second",n):qr("minute",r):qr("hour",t)}var Wr="Invalid DateTime",Qr=864e13;function Gr(e){return new qe("unsupported zone",'the zone "'+e.name+'" is not supported')}function Jr(e){return null===e.weekData&&(e.weekData=Fr(e.c)),e.weekData}function Kr(e,t){var r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new pn(Object.assign({},r,t,{old:r}))}function Zr(e,t,r){var n=e-60*t*1e3,i=r.offset(n);if(t===i)return[n,t];n-=60*(i-t)*1e3;var s=r.offset(n);return i===s?[n,i]:[e-60*Math.min(i,s)*1e3,Math.max(i,s)]}function Yr(e,t){var r=new Date(e+=60*t*1e3);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Xr(e,t,r){return Zr(ce(e),t,r)}function en(e,t){var r=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),s=Object.assign({},e.c,{year:n,month:i,day:Math.min(e.c.day,ue(n,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)}),o=lr.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=Zr(ce(s),r,e.zone),u=a[0],c=a[1];return 0!==o&&(u+=o,c=e.zone.offset(u)),{ts:u,o:c}}function tn(e,t,r,n,i){var s=r.setZone,o=r.zone;if(e&&0!==Object.keys(e).length){var a=t||o,u=pn.fromObject(Object.assign(e,r,{zone:a,setZone:void 0}));return s?u:u.setZone(o)}return pn.invalid(new qe("unparsable",'the input "'+i+"\" can't be parsed as "+n))}function rn(e,t,r){return void 0===r&&(r=!0),e.isValid?Re.create(dt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function nn(e,t){var r=t.suppressSeconds,n=void 0!==r&&r,i=t.suppressMilliseconds,s=void 0!==i&&i,o=t.includeOffset,a=t.includePrefix,u=void 0!==a&&a,c=t.includeZone,l=void 0!==c&&c,h=t.spaceZone,d=void 0!==h&&h,f=t.format,p=void 0===f?"extended":f,m="basic"===p?"HHmm":"HH:mm";n&&0===e.second&&0===e.millisecond||(m+="basic"===p?"ss":":ss",s&&0===e.millisecond||(m+=".SSS")),(l||o)&&d&&(m+=" "),l?m+="z":o&&(m+="basic"===p?"ZZZ":"ZZ");var y=rn(e,m);return u&&(y="T"+y),y}var sn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},on={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},an={ordinal:1,hour:0,minute:0,second:0,millisecond:0},un=["year","month","day","hour","minute","second","millisecond"],cn=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],ln=["year","ordinal","hour","minute","second","millisecond"];function hn(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new v(e);return t}function dn(e,t){for(var r,n=d(un);!(r=n()).done;){var i=r.value;W(e[i])&&(e[i]=sn[i])}var s=zr(e)||Hr(e);if(s)return pn.invalid(s);var o=tt.now(),a=Xr(e,t.offset(o),t),u=a[0],c=a[1];return new pn({ts:u,zone:t,o:c})}function fn(e,t,r){var n=!!W(r.round)||r.round,i=function(e,i){return e=se(e,n||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(e,i)},s=function(n){return r.calendary?t.hasSame(e,n)?0:t.startOf(n).diff(e.startOf(n),n).get(n):t.diff(e,n).get(n)};if(r.unit)return i(s(r.unit),r.unit);for(var o,a=d(r.units);!(o=a()).done;){var u=o.value,c=s(u);if(Math.abs(c)>=1)return i(c,u)}return i(e>t?-0:0,r.units[r.units.length-1])}var pn=function(){function e(e){var t=e.zone||tt.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new qe("invalid input"):null)||(t.isValid?null:Gr(t));this.ts=W(e.ts)?tt.now():e.ts;var n=null,i=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var s=[e.old.c,e.old.o];n=s[0],i=s[1]}else{var o=t.offset(this.ts);n=Yr(this.ts,o),n=(r=Number.isNaN(n.year)?new qe("invalid input"):null)?null:n,i=r?null:o}this._zone=t,this.loc=e.loc||dt.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=i,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(t,r,n,i,s,o,a){return W(t)?e.now():dn({year:t,month:r,day:n,hour:i,minute:s,second:o,millisecond:a},tt.defaultZone)},e.utc=function(t,r,n,i,s,o,a){return W(t)?new e({ts:tt.now(),zone:We.utcInstance}):dn({year:t,month:r,day:n,hour:i,minute:s,second:o,millisecond:a},We.utcInstance)},e.fromJSDate=function(t,r){void 0===r&&(r={});var n,i=(n=t,"[object Date]"===Object.prototype.toString.call(n)?t.valueOf():NaN);if(Number.isNaN(i))return e.invalid("invalid input");var s=Ge(r.zone,tt.defaultZone);return s.isValid?new e({ts:i,zone:s,loc:dt.fromObject(r)}):e.invalid(Gr(s))},e.fromMillis=function(t,r){if(void 0===r&&(r={}),Q(t))return t<-Qr||t>Qr?e.invalid("Timestamp out of range"):new e({ts:t,zone:Ge(r.zone,tt.defaultZone),loc:dt.fromObject(r)});throw new b("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)},e.fromSeconds=function(t,r){if(void 0===r&&(r={}),Q(t))return new e({ts:1e3*t,zone:Ge(r.zone,tt.defaultZone),loc:dt.fromObject(r)});throw new b("fromSeconds requires a numerical input")},e.fromObject=function(t){var r=Ge(t.zone,tt.defaultZone);if(!r.isValid)return e.invalid(Gr(r));var n=tt.now(),i=r.offset(n),s=me(t,hn,["zone","locale","outputCalendar","numberingSystem"]),o=!W(s.ordinal),a=!W(s.year),u=!W(s.month)||!W(s.day),c=a||u,l=s.weekYear||s.weekNumber,h=dt.fromObject(t);if((c||o)&&l)throw new g("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&o)throw new g("Can't mix ordinal dates with month/day");var f,p,m=l||s.weekday&&!c,y=Yr(n,i);m?(f=cn,p=on,y=Fr(y)):o?(f=ln,p=an,y=Br(y)):(f=un,p=sn);for(var v,b=!1,_=d(f);!(v=_()).done;){var w=v.value;W(s[w])?s[w]=b?p[w]:y[w]:b=!0}var E=m?function(e){var t=G(e.weekYear),r=te(e.weekNumber,1,le(e.weekYear)),n=te(e.weekday,1,7);return t?r?!n&&qr("weekday",e.weekday):qr("week",e.week):qr("weekYear",e.weekYear)}(s):o?function(e){var t=G(e.year),r=te(e.ordinal,1,ae(e.year));return t?!r&&qr("ordinal",e.ordinal):qr("year",e.year)}(s):zr(s),x=E||Hr(s);if(x)return e.invalid(x);var C=Xr(m?Ur(s):o?Vr(s):s,i,r),k=new e({ts:C[0],zone:r,o:C[1],loc:h});return s.weekday&&c&&t.weekday!==k.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+s.weekday+" and a date of "+k.toISO()):k},e.fromISO=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[Bt,Wt],[Vt,Qt],[zt,Gt],[Ht,Jt])}(e);return tn(r[0],r[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var r=function(e){return mt(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Rt,qt])}(e);return tn(r[0],r[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[Mt,Ft],[Lt,Ft],[Dt,Ut])}(e);return tn(r[0],r[1],t,"HTTP",t)},e.fromFormat=function(t,r,n){if(void 0===n&&(n={}),W(t)||W(r))throw new b("fromFormat requires an input string and a format");var i=n,s=i.locale,o=void 0===s?null:s,a=i.numberingSystem,u=void 0===a?null:a,c=function(e,t,r){var n=Ir(e,t,r);return[n.result,n.zone,n.invalidReason]}(dt.fromOpts({locale:o,numberingSystem:u,defaultToEN:!0}),t,r),l=c[0],h=c[1],d=c[2];return d?e.invalid(d):tn(l,h,n,"format "+r,t)},e.fromString=function(t,r,n){return void 0===n&&(n={}),e.fromFormat(t,r,n)},e.fromSQL=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[Zt,Xt],[Yt,er])}(e);return tn(r[0],r[1],t,"SQL",e)},e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new b("need to specify a reason the DateTime is invalid");var n=t instanceof qe?t:new qe(t,r);if(tt.throwOnInvalid)throw new p(n);return new e({invalid:n})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOpts=function(e){void 0===e&&(e={});var t=Re.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(We.instance(e),t)},t.toLocal=function(){return this.setZone(tt.defaultZone)},t.setZone=function(t,r){var n=void 0===r?{}:r,i=n.keepLocalTime,s=void 0!==i&&i,o=n.keepCalendarTime,a=void 0!==o&&o;if((t=Ge(t,tt.defaultZone)).equals(this.zone))return this;if(t.isValid){var u=this.ts;if(s||a){var c=t.offset(this.ts);u=Xr(this.toObject(),c,t)[0]}return Kr(this,{ts:u,zone:t})}return e.invalid(Gr(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,r=t.locale,n=t.numberingSystem,i=t.outputCalendar;return Kr(this,{loc:this.loc.clone({locale:r,numberingSystem:n,outputCalendar:i})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,r=me(e,hn,[]),n=!W(r.weekYear)||!W(r.weekNumber)||!W(r.weekday),i=!W(r.ordinal),s=!W(r.year),o=!W(r.month)||!W(r.day),a=s||o,u=r.weekYear||r.weekNumber;if((a||i)&&u)throw new g("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&i)throw new g("Can't mix ordinal dates with month/day");n?t=Ur(Object.assign(Fr(this.c),r)):W(r.ordinal)?(t=Object.assign(this.toObject(),r),W(r.day)&&(t.day=Math.min(ue(t.year,t.month),t.day))):t=Vr(Object.assign(Br(this.c),r));var c=Xr(t,this.o,this.zone);return Kr(this,{ts:c[0],o:c[1]})},t.plus=function(e){return this.isValid?Kr(this,en(this,hr(e))):this},t.minus=function(e){return this.isValid?Kr(this,en(this,hr(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},r=lr.normalizeUnit(e);switch(r){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===r&&(t.weekday=1),"quarters"===r){var n=Math.ceil(this.month/3);t.month=3*(n-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?Re.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):Wr},t.toLocaleString=function(e){return void 0===e&&(e=C),this.isValid?Re.create(this.loc.clone(e),e).formatDateTime(this):Wr},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?Re.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){return void 0===e&&(e={}),this.isValid?this.toISODate(e)+"T"+this.toISOTime(e):null},t.toISODate=function(e){var t=(void 0===e?{}:e).format,r="basic"===(void 0===t?"extended":t)?"yyyyMMdd":"yyyy-MM-dd";return this.year>9999&&(r="+"+r),rn(this,r)},t.toISOWeekDate=function(){return rn(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,r=t.suppressMilliseconds,n=void 0!==r&&r,i=t.suppressSeconds,s=void 0!==i&&i,o=t.includeOffset,a=void 0===o||o,u=t.includePrefix,c=void 0!==u&&u,l=t.format;return nn(this,{suppressSeconds:s,suppressMilliseconds:n,includeOffset:a,includePrefix:c,format:void 0===l?"extended":l})},t.toRFC2822=function(){return rn(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return rn(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return rn(this,"yyyy-MM-dd")},t.toSQLTime=function(e){var t=void 0===e?{}:e,r=t.includeOffset,n=void 0===r||r,i=t.includeZone;return nn(this,{includeOffset:n,includeZone:void 0!==i&&i,spaceZone:!0})},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():Wr},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=Object.assign({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,r){if(void 0===t&&(t="milliseconds"),void 0===r&&(r={}),!this.isValid||!e.isValid)return lr.invalid(this.invalid||e.invalid,"created by diffing an invalid DateTime");var n,i=Object.assign({locale:this.locale,numberingSystem:this.numberingSystem},r),s=(n=t,Array.isArray(n)?n:[n]).map(lr.normalizeUnit),o=e.valueOf()>this.valueOf(),a=gr(o?this:e,o?e:this,s,i);return o?a.negate():a},t.diffNow=function(t,r){return void 0===t&&(t="milliseconds"),void 0===r&&(r={}),this.diff(e.now(),t,r)},t.until=function(e){return this.isValid?pr.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;var r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(t)<=r&&r<=n.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var r=t.base||e.fromObject({zone:this.zone}),n=t.padding?this<r?-t.padding:t.padding:0,i=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(i=t.unit,s=void 0),fn(r,this.plus(n),Object.assign(t,{numeric:"always",units:i,unit:s}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?fn(t.base||e.fromObject({zone:this.zone}),this,Object.assign(t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.every(e.isDateTime))throw new b("min requires all arguments be DateTimes");return Y(r,(function(e){return e.valueOf()}),Math.min)},e.max=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.every(e.isDateTime))throw new b("max requires all arguments be DateTimes");return Y(r,(function(e){return e.valueOf()}),Math.max)},e.fromFormatExplain=function(e,t,r){void 0===r&&(r={});var n=r,i=n.locale,s=void 0===i?null:i,o=n.numberingSystem,a=void 0===o?null:o;return Ir(dt.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,r,n){return void 0===n&&(n={}),e.fromFormatExplain(t,r,n)},i(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Jr(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Jr(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Jr(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Br(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?mr.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?mr.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?mr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?mr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.universal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return oe(this.year)}},{key:"daysInMonth",get:function(){return ue(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?ae(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?le(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return C}},{key:"DATE_MED",get:function(){return k}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return O}},{key:"DATE_FULL",get:function(){return S}},{key:"DATE_HUGE",get:function(){return T}},{key:"TIME_SIMPLE",get:function(){return $}},{key:"TIME_WITH_SECONDS",get:function(){return j}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return N}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return A}},{key:"TIME_24_SIMPLE",get:function(){return I}},{key:"TIME_24_WITH_SECONDS",get:function(){return P}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return R}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return q}},{key:"DATETIME_SHORT",get:function(){return M}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return L}},{key:"DATETIME_MED",get:function(){return D}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return F}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return U}},{key:"DATETIME_FULL",get:function(){return B}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return V}},{key:"DATETIME_HUGE",get:function(){return z}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return H}}]),e}();function mn(e){if(pn.isDateTime(e))return e;if(e&&e.valueOf&&Q(e.valueOf()))return pn.fromJSDate(e);if(e&&"object"==typeof e)return pn.fromObject(e);throw new b("Unknown datetime argument: "+e+", of type "+typeof e)}r.DateTime=pn,r.Duration=lr,r.FixedOffsetZone=We,r.IANAZone=ze,r.Info=mr,r.Interval=pr,r.InvalidZone=Qe,r.LocalZone=De,r.Settings=tt,r.VERSION="1.28.0",r.Zone=Me},{}],69:[function(e,t,r){(function(r){const n=e("../errors"),i=e("../schemas"),s=e("node-webtokens"),o=r.env.PERSISTR_SECRET||"";t.exports={encode:async function(e,t="Bearer"){return new Promise((function(r,i){s.generate("PBES2-HS512+A256KW","A256GCM",e,o,((e,s)=>{e?i(new n.TokenGenerationFailed({error:e})):s.error?i(new n.TokenGenerationFailed({error:s.error})):r([t,s].join(" ").trim())}))}))},decode:function(e,t="Bearer"){return new Promise((function(r,a){try{e||a(new n.InvalidAuthToken({auth:e}));const u=e.split(" ");if(u[0]!==t&&!u[1])return void a(new n.InvalidAuthToken({auth:e}));const c=u[1];s.parse(c).setAlgorithmList("PBES2-HS512+A256KW","A256GCM").setIssuer(["api.persistr.com"]).verify(o,((s,o)=>{if(s)a(new n.InvalidAuthToken({auth:e,error:s}));else if(o.error)a(new n.InvalidAuthToken({auth:e,error:o.error}));else if("Bearer"===t){if(!i.is(o).valid("auth/bearer"))return void a(new n.InvalidBearerToken({token:o}));r({id:o.payload.id,username:o.payload.sub,name:o.payload.name,dbs:o.payload.dbs||[]})}else if("Apikey"===t){if(!i.is(o).valid("auth/apikey"))return void a(new n.InvalidApiKeyToken({token:o}));r({user:o.payload.user.toString("utf8"),ts:o.payload.ts})}else a(new n.UnknownTokenScheme({scheme:t}))}))}catch(t){a(new n.InvalidAuthToken({auth:e}))}}))}}}).call(this,e("_process"))},{"../errors":72,"../schemas":74,_process:void 0,"node-webtokens":542}],70:[function(e,t,r){const{DateTime:n}=e("luxon");var i=e("./jwt");t.exports={generate:async function(e){return await i.encode({iss:"api.persistr.com",user:e,ts:n.local().toMillis()},"")}}},{"./jwt":69,luxon:68}],71:[function(e,t,r){var n=e("password-hash-and-salt");t.exports={hash:async function(e){return new Promise((function(t,r){n(e).hash((function(e,r){t(r)}))}))},verify:async function({password:e,against:t}){return new Promise((function(r,i){""!==e||""!==t?n(e).verifyAgainst(t,(function(e,t){r(!e&&!!t)})):r(!0)}))}}},{"password-hash-and-salt":548}],72:[function(e,t,r){(function(r){t.exports=e("@persistr/server-errors").register(r)}).call(this,"/node_modules/@persistr/server-crypto/src/errors")},{"@persistr/server-errors":76}],73:[function(e,t,r){const n=e("./crypto/jwt"),i=e("./crypto/keys"),s=e("./crypto/passwords");t.exports={jwt:n,keys:i,passwords:s}},{"./crypto/jwt":69,"./crypto/keys":70,"./crypto/passwords":71}],74:[function(e,t,r){(function(r){t.exports=e("@persistr/server-schemas").register(r)}).call(this,"/node_modules/@persistr/server-crypto/src/schemas")},{"@persistr/server-schemas":77}],75:[function(e,t,r){t.exports=class extends Error{constructor(e,t){super(e),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor),this.status=t||500}}},{}],76:[function(e,t,r){const n=e("fs");var i={PersistrError:e("./PersistrError"),register:function(t){return n.readdirSync(t).forEach((r=>{if(n.statSync(`${t}/${r}`).isDirectory())return register(`${t}/${r}`);const s=`${r}`;if("index.js"!==s&&s.endsWith(".js")){var o=e(`${t}/${r}`);i[o.name]=o}})),i},handle:function(e){return async function(t,r,n){try{await e(t,r,n)}catch(e){r.headersSent&&r.get("content-type").includes("text/event-stream")?(console.error(e.message+"\t"+e.stack),r.write(`event: error\ndata: ${JSON.stringify({message:e.message,name:e.name,status:e.status})}\n\n`)):e instanceof i.PersistrError?(console.error(e.message+"\t"+e.stack),r.status(e.status).json({error:e.message})):(console.error(e.message+"\t"+e.stack),r.status(500).json({error:"Internal service error",internal:e.message,stack:e.stack}))}}},json:function(e,t,r,n){e?r.status(400).json({error:`Invalid JSON body in request: ${t.originalUrl}`,internal:e.message,stack:e.stack}):n()}};t.exports=i},{"./PersistrError":75,fs:void 0}],77:[function(e,t,r){const n=e("ajv").default,i=e("ajv-formats"),s=e("@persistr/server-errors"),o=e("fs"),a=e("path"),u=new n({strict:!0});i(u);var c={register:function(e,t){t||(t="");const r=a.join(e,t);return o.readdirSync(r).forEach((t=>{const n=`${t}`;if("."===n||".."===n)return c;if(o.statSync(`${r}/${t}`).isDirectory())return c.register(e,a.relative(e,`${r}/${t}`));if(!n.endsWith(".schema.json"))return c;let i=a.relative(e,r)+"/"+n.replace(/\..*$/,""),s=JSON.parse(o.readFileSync(`${r}/${t}`,"utf8"));u.addSchema(s,i)})),c},is:function(e){return{valid:function(t){try{var r=u.validate(t,e);return r||console.error(u.errorsText()),r}catch(e){return console.error(e.message+"\t"+e.stack),!1}}}},validate:function(e){return function(t,r,n){try{if(!u.validate(e,t.body))throw new s.InvalidRequestBody(t.originalUrl,u.errorsText())}catch(e){return void(e instanceof s.ServiceError?r.status(e.status).json({error:e.message}):(console.error(e.message+"\t"+e.stack),r.status(500).json({error:"Internal service error",internal:e.message,stack:e.stack})))}n()}}};t.exports=c},{"@persistr/server-errors":76,ajv:100,"ajv-formats":98,fs:void 0,path:void 0}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return h.default}});var n=d(e("./v1.js")),i=d(e("./v3.js")),s=d(e("./v4.js")),o=d(e("./v5.js")),a=d(e("./nil.js")),u=d(e("./version.js")),c=d(e("./validate.js")),l=d(e("./stringify.js")),h=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":80,"./parse.js":81,"./stringify.js":85,"./v1.js":86,"./v3.js":87,"./v4.js":89,"./v5.js":90,"./validate.js":91,"./version.js":92}],79:[function(e,t,r){"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function i(e,t){const r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function s(e,t,r,n,s,o){return i((a=i(i(t,e),i(n,o)))<<(u=s)|a>>>32-u,r);var a,u}function o(e,t,r,n,i,o,a){return s(t&r|~t&n,e,t,i,o,a)}function a(e,t,r,n,i,o,a){return s(t&n|r&~n,e,t,i,o,a)}function u(e,t,r,n,i,o,a){return s(t^r^n,e,t,i,o,a)}function c(e,t,r,n,i,o,a){return s(r^(t|~n),e,t,i,o,a)}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var l=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){const t=[],r=32*e.length,n="0123456789abcdef";for(let i=0;i<r;i+=8){const r=e[i>>5]>>>i%32&255,s=parseInt(n.charAt(r>>>4&15)+n.charAt(15&r),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let r=1732584193,s=-271733879,l=-1732584194,h=271733878;for(let t=0;t<e.length;t+=16){const n=r,d=s,f=l,p=h;r=o(r,s,l,h,e[t],7,-680876936),h=o(h,r,s,l,e[t+1],12,-389564586),l=o(l,h,r,s,e[t+2],17,606105819),s=o(s,l,h,r,e[t+3],22,-1044525330),r=o(r,s,l,h,e[t+4],7,-176418897),h=o(h,r,s,l,e[t+5],12,1200080426),l=o(l,h,r,s,e[t+6],17,-1473231341),s=o(s,l,h,r,e[t+7],22,-45705983),r=o(r,s,l,h,e[t+8],7,1770035416),h=o(h,r,s,l,e[t+9],12,-1958414417),l=o(l,h,r,s,e[t+10],17,-42063),s=o(s,l,h,r,e[t+11],22,-1990404162),r=o(r,s,l,h,e[t+12],7,1804603682),h=o(h,r,s,l,e[t+13],12,-40341101),l=o(l,h,r,s,e[t+14],17,-1502002290),s=o(s,l,h,r,e[t+15],22,1236535329),r=a(r,s,l,h,e[t+1],5,-165796510),h=a(h,r,s,l,e[t+6],9,-1069501632),l=a(l,h,r,s,e[t+11],14,643717713),s=a(s,l,h,r,e[t],20,-373897302),r=a(r,s,l,h,e[t+5],5,-701558691),h=a(h,r,s,l,e[t+10],9,38016083),l=a(l,h,r,s,e[t+15],14,-660478335),s=a(s,l,h,r,e[t+4],20,-405537848),r=a(r,s,l,h,e[t+9],5,568446438),h=a(h,r,s,l,e[t+14],9,-1019803690),l=a(l,h,r,s,e[t+3],14,-187363961),s=a(s,l,h,r,e[t+8],20,1163531501),r=a(r,s,l,h,e[t+13],5,-1444681467),h=a(h,r,s,l,e[t+2],9,-51403784),l=a(l,h,r,s,e[t+7],14,1735328473),s=a(s,l,h,r,e[t+12],20,-1926607734),r=u(r,s,l,h,e[t+5],4,-378558),h=u(h,r,s,l,e[t+8],11,-2022574463),l=u(l,h,r,s,e[t+11],16,1839030562),s=u(s,l,h,r,e[t+14],23,-35309556),r=u(r,s,l,h,e[t+1],4,-1530992060),h=u(h,r,s,l,e[t+4],11,1272893353),l=u(l,h,r,s,e[t+7],16,-155497632),s=u(s,l,h,r,e[t+10],23,-1094730640),r=u(r,s,l,h,e[t+13],4,681279174),h=u(h,r,s,l,e[t],11,-358537222),l=u(l,h,r,s,e[t+3],16,-722521979),s=u(s,l,h,r,e[t+6],23,76029189),r=u(r,s,l,h,e[t+9],4,-640364487),h=u(h,r,s,l,e[t+12],11,-421815835),l=u(l,h,r,s,e[t+15],16,530742520),s=u(s,l,h,r,e[t+2],23,-995338651),r=c(r,s,l,h,e[t],6,-198630844),h=c(h,r,s,l,e[t+7],10,1126891415),l=c(l,h,r,s,e[t+14],15,-1416354905),s=c(s,l,h,r,e[t+5],21,-57434055),r=c(r,s,l,h,e[t+12],6,1700485571),h=c(h,r,s,l,e[t+3],10,-1894986606),l=c(l,h,r,s,e[t+10],15,-1051523),s=c(s,l,h,r,e[t+1],21,-2054922799),r=c(r,s,l,h,e[t+8],6,1873313359),h=c(h,r,s,l,e[t+15],10,-30611744),l=c(l,h,r,s,e[t+6],15,-1560198380),s=c(s,l,h,r,e[t+13],21,1309151649),r=c(r,s,l,h,e[t+4],6,-145523070),h=c(h,r,s,l,e[t+11],10,-1120210379),l=c(l,h,r,s,e[t+2],15,718787259),s=c(s,l,h,r,e[t+9],21,-343485551),r=i(r,n),s=i(s,d),l=i(l,f),h=i(h,p)}return[r,s,l,h]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))};r.default=l},{}],80:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default="00000000-0000-0000-0000-000000000000"},{}],81:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r};r.default=s},{"./validate.js":91}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;r.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},{}],83:[function(e,t,r){"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},{}],84:[function(e,t,r){"use strict";function n(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function i(e,t){return e<<t|e>>>32-t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var s=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const s=e.length/4+2,o=Math.ceil(s/16),a=new Array(o);for(let t=0;t<o;++t){const r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[o-1][14]=8*(e.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<o;++e){const s=new Uint32Array(80);for(let t=0;t<16;++t)s[t]=a[e][t];for(let e=16;e<80;++e)s[e]=i(s[e-3]^s[e-8]^s[e-14]^s[e-16],1);let o=r[0],u=r[1],c=r[2],l=r[3],h=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),a=i(o,5)+n(r,u,c,l)+h+t[r]+s[e]>>>0;h=l,l=c,c=i(u,30)>>>0,u=o,o=a}r[0]=r[0]+o>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]};r.default=s},{}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).substr(1));var o=function(e,t=0){const r=(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase();if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=o},{"./validate.js":91}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./rng.js")),i=s(e("./stringify.js"));function s(e){return e&&e.__esModule?e:{default:e}}let o,a,u=0,c=0;var l=function(e,t,r){let s=t&&r||0;const l=t||new Array(16);let h=(e=e||{}).node||o,d=void 0!==e.clockseq?e.clockseq:a;if(null==h||null==d){const t=e.random||(e.rng||n.default)();null==h&&(h=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=a=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const m=f-u+(p-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||f>u)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=p,a=d,f+=122192928e5;const y=(1e4*(268435455&f)+p)%4294967296;l[s++]=y>>>24&255,l[s++]=y>>>16&255,l[s++]=y>>>8&255,l[s++]=255&y;const g=f/4294967296*1e4&268435455;l[s++]=g>>>8&255,l[s++]=255&g,l[s++]=g>>>24&15|16,l[s++]=g>>>16&255,l[s++]=d>>>8|128,l[s++]=255&d;for(let e=0;e<6;++e)l[s+e]=h[e];return t||(0,i.default)(l)};r.default=l},{"./rng.js":83,"./stringify.js":85}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./md5.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v3",48,i.default);r.default=o},{"./md5.js":79,"./v35.js":88}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e,t,r){function s(e,s,o,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof s&&(s=(0,i.default)(s)),16!==s.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+e.length);if(u.set(s),u.set(e,s.length),u=r(u),u[6]=15&u[6]|t,u[8]=63&u[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=u[e];return o}return(0,n.default)(u)}try{s.name=e}catch(e){}return s.DNS=o,s.URL=a,s},r.URL=r.DNS=void 0;var n=s(e("./stringify.js")),i=s(e("./parse.js"));function s(e){return e&&e.__esModule?e:{default:e}}const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a},{"./parse.js":81,"./stringify.js":85}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./rng.js")),i=s(e("./stringify.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,r){const s=(e=e||{}).random||(e.rng||n.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return(0,i.default)(s)};r.default=o},{"./rng.js":83,"./stringify.js":85}],90:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=s(e("./v35.js")),i=s(e("./sha1.js"));function s(e){return e&&e.__esModule?e:{default:e}}var o=(0,n.default)("v5",80,i.default);r.default=o},{"./sha1.js":84,"./v35.js":88}],91:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./regex.js"))&&n.__esModule?n:{default:n};var s=function(e){return"string"==typeof e&&i.default.test(e)};r.default=s},{"./regex.js":82}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)};r.default=s},{"./validate.js":91}],93:[function(e,t,r){(function(r){const n=e("fs"),i=e("path"),s=[],o=(e,t,r)=>{const s=i.resolve(e,...t);n.readdirSync(s).forEach((a=>{if(n.statSync(`${s}/${a}`).isDirectory())return o(e,[...t,a],r);a.toLowerCase().endsWith(".js")&&r(e,t,s,a,i.resolve(s,a))}))};o(i.resolve(r),[],((t,r,n,o,a)=>{const u=i.parse(o);".js"===u.ext&&"index"!==u.name&&s.push({name:r.join("."),method:u.name,module:e(a)})})),t.exports=s}).call(this,"/node_modules/@persistr/store/src/entities")},{fs:void 0,path:void 0}],94:[function(e,t,r){const n=e("events"),i=e("path"),s=e("@persistr/server-crypto"),o=e("./entities"),a=e("knex"),u=e("./util/trycatch"),c=e("./util/uuid");class l{constructor(e){this.identity=e.identity,this.store=e.store,o.forEach((e=>{this[e.name]||(this[e.name]={}),this[e.name][e.method]=async function(...t){return await this.store[e.name][e.method](this.identity,...t)}.bind(this)}))}async disconnect(){await this.store.disconnect()}}t.exports={Store:class extends n{constructor(e,t){super(),o.forEach((e=>{this[e.name]||(this[e.name]={}),this[e.name][e.method]=async function(t,...r){var n;return null==this||null===(n=this.policy)||void 0===n||n.enforce(this.toolbox,t,e.name,e.method,r),await e.module(this.toolbox,t,...r)}.bind(this)})),this.url=e,this.options=t,this.policy=null==t?void 0:t.policy,this.toolbox={store:this,crypto:s,trycatch:u,uuid:c}}async connect(e,t){var r,n;e||(e=this.url),t||(t=this.options);const s=new URL(e),o={client:s.protocol.replace(":",""),connection:{host:s.hostname,port:s.port,user:s.username,password:s.password,filename:s.pathname,database:i.parse(s.pathname).base}};if("sqlite3"===o.client&&(o.useNullAsDefault=!0,"memory"===o.connection.filename&&(o.connection.filename=":memory:")),null===(r=t)||void 0===r||!r.hook(o))return this.knex=a(o),this.toolbox={...this.toolbox,knex:this.knex},await async function(e,t){await e.schema.hasTable("AccountDatabases").then((r=>{if(!r)return e.schema.createTable("AccountDatabases",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("idDB",16).notNullable(),e.binary("idAccount",16).notNullable(),e.string("type",45).notNullable(),e.primary(["idDB","idAccount"])}))})),await e.schema.hasTable("Accounts").then((r=>{if(!r)return e.schema.createTable("Accounts",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("id",16).notNullable().primary(),e.string("username",321).notNullable().unique(),e.text("name").notNullable(),e.string("password",300).notNullable(),e.string("key",500).notNullable(),e.tinyint("isActive",4).notNullable(),e.tinyint("isRoot",4).notNullable()}))})),await e.schema.hasTable("Annotations").then((r=>{if(!r)return e.schema.createTable("Annotations",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.binary("ns",16).notNullable(),e.binary("stream",16).notNullable(),e.json("annotation").notNullable(),e.primary(["db","ns","stream"])}))})),await e.schema.hasTable("Databases").then((r=>{if(!r)return e.schema.createTable("Databases",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("id",16).notNullable().primary(),e.string("name",100).notNullable().unique()}))})),await e.schema.hasTable("Documents").then((r=>{if(!r)return e.schema.createTable("Documents",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.string("collection",100).notNullable(),e.binary("id",16).notNullable(),e.json("data").notNullable(),e.primary(["db","collection","id"])}))})),await e.schema.hasTable("Events").then((r=>{if(!r)return e.schema.createTable("Events",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.binary("ns",16).notNullable(),e.binary("stream",16).notNullable(),e.binary("id",16).notNullable(),e.integer("version",10),e.timestamp("ts",{precision:6}).notNullable(),e.json("meta").notNullable(),e.json("data").notNullable(),e.string("type",100).notNullable(),e.primary(["db","ns","stream","id"])}))})),await e.schema.hasTable("Namespaces").then((r=>{if(!r)return e.schema.createTable("Namespaces",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.binary("id",16).notNullable().primary(),e.string("name",100).notNullable(),e.unique(["name","db"])}))})),await e.schema.hasTable("Objects").then((r=>{if(!r)return e.schema.createTable("Objects",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.string("id",100).notNullable(),e.json("data").notNullable(),e.primary(["db","id"])}))})),await e.schema.hasTable("Streams").then((r=>{if(!r)return e.schema.createTable("Streams",(e=>{"mysql"===t&&e.charset("utf8mb4"),e.binary("db",16).notNullable(),e.binary("domain",16).notNullable(),e.binary("stream",16).notNullable(),e.json("meta").notNullable(),e.json("annotation").notNullable(),e.primary(["db","domain","stream"])}))}))}(this.knex,o.client),new l({store:this,identity:null===(n=t)||void 0===n?void 0:n.identity})}async disconnect(){this.toolbox={...this.toolbox,knex:void 0},this.knex&&(await this.knex.destroy(),this.knex=void 0)}}}},{"./entities":93,"./util/trycatch":95,"./util/uuid":96,"@persistr/server-crypto":73,events:void 0,knex:178,path:void 0}],95:[function(e,t,r){t.exports=function(e){return e.then((e=>[null,e])).catch((e=>[e]))}},{}],96:[function(e,t,r){(function(r){const n=e("uuid-parse"),{v4:i}=e("uuid");t.exports={v4:()=>i(),toBuffer:e=>r.from(n.parse(e)),fromBuffer:e=>n.unparse(e)}}).call(this,e("buffer").Buffer)},{buffer:void 0,uuid:78,"uuid-parse":559}],97:[function(e,t,r){"use strict";function n(e,t){return{validate:e,compare:t}}Object.defineProperty(r,"__esModule",{value:!0}),r.formatNames=r.fastFormats=r.fullFormats=void 0,r.fullFormats={date:n(o,a),time:n(c,l),"date-time":n((function(e){const t=e.split(h);return 2===t.length&&o(t[0])&&c(t[1],!0)}),d),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return f.test(e)&&p.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(m.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/},r.fastFormats={...r.fullFormats,date:n(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,a),time:n(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,l),"date-time":n(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,d),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},r.formatNames=Object.keys(r.fullFormats);const i=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=i.exec(e);if(!t)return!1;const r=+t[1],n=+t[2],o=+t[3];return n>=1&&n<=12&&o>=1&&o<=(2===n&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:s[n])}function a(e,t){if(e&&t)return e>t?1:e<t?-1:0}const u=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(e,t){const r=u.exec(e);if(!r)return!1;const n=+r[1],i=+r[2],s=+r[3],o=r[5];return(n<=23&&i<=59&&s<=59||23===n&&59===i&&60===s)&&(!t||""!==o)}function l(e,t){if(!e||!t)return;const r=u.exec(e),n=u.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const h=/t|\s/i;function d(e,t){if(!e||!t)return;const[r,n]=e.split(h),[i,s]=t.split(h),o=a(r,i);return void 0!==o?o||l(n,s):void 0}const f=/\/|:/,p=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;const m=/[^\\]\\Z/},{}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./formats"),i=e("./limit"),s=e("ajv/dist/compile/codegen"),o=new s.Name("fullFormats"),a=new s.Name("fastFormats"),u=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,o),e;const[r,s]="fast"===t.mode?[n.fastFormats,a]:[n.fullFormats,o];return c(e,t.formats||n.formatNames,r,s),t.keywords&&i.default(e),e};function c(e,t,r,n){var i,o;null!==(i=(o=e.opts.code).formats)&&void 0!==i||(o.formats=s._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}u.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},r.default=u,t.exports=u,t.exports.default=u},{"./formats":97,"./limit":99,"ajv/dist/compile/codegen":102}],99:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.formatLimitDefinition=void 0;const n=e("ajv/dist/compile/context"),i=e("ajv/dist/compile/codegen"),s=i.operators,o={formatMaximum:{okStr:"<=",ok:s.LTE,fail:s.GT},formatMinimum:{okStr:">=",ok:s.GTE,fail:s.LT},formatExclusiveMaximum:{okStr:"<",ok:s.LT,fail:s.GTE},formatExclusiveMinimum:{okStr:">",ok:s.GT,fail:s.LTE}},a={message:({keyword:e,schemaCode:t})=>i.str`should be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${o[e].okStr}, limit: ${t}}`};r.formatLimitDefinition={keyword:Object.keys(o),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:r,schemaCode:s,keyword:a,it:u}=e,{opts:c,self:l}=u;if(!c.validateFormats)return;const h=new n.default(u,l.RULES.all.format.definition,"format");function d(e){return i._`${e}.compare(${r}, ${s}) ${o[a].fail} 0`}h.$data?function(){const r=t.scopeValue("formats",{ref:l.formats,code:c.code.formats}),n=t.const("fmt",i._`${r}[${h.schemaCode}]`);e.fail$data(i.or(i._`typeof ${n} != "object"`,i._`${n} instanceof RegExp`,i._`typeof ${n}.compare != "function"`,d(n)))}():function(){const r=h.schema,n=l.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw new Error(`"${a}": format "${r}" does not define "compare" function`);const s=t.scopeValue("formats",{key:r,ref:n,code:c.code.formats?i._`${c.code.formats}${i.getProperty(r)}`:void 0});e.fail$data(d(s))}()},dependencies:["format"]};r.default=e=>(e.addKeyword(r.formatLimitDefinition),e)},{"ajv/dist/compile/codegen":102,"ajv/dist/compile/context":104}],100:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=void 0;const n=e("./compile/context");r.KeywordCxt=n.default;var i=e("./compile/codegen");Object.defineProperty(r,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const s=e("./core"),o=e("./vocabularies/draft7"),a=e("./refs/json-schema-draft-07.json"),u=["/properties"],c="http://json-schema.org/draft-07/schema";class l extends s.default{_addVocabularies(){super._addVocabularies(),o.default.forEach((e=>this.addVocabulary(e)))}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(a,u):a;this.addMetaSchema(e,c,!1),this.refs["http://json-schema.org/schema"]=c}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(c)?c:void 0)}}r.default=l},{"./compile/codegen":102,"./compile/context":104,"./core":121,"./refs/json-schema-draft-07.json":123,"./vocabularies/draft7":143}],101:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getProperty=r.safeStringify=r.stringify=r.strConcat=r.addCodeArg=r.str=r._=r.nil=r._Code=r.Name=r.IDENTIFIER=r._CodeOrName=void 0;class n{}r._CodeOrName=n,r.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class i extends n{constructor(e){if(super(),!r.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}r.Name=i;class s extends n{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce(((e,t)=>`${e}${t}`),"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce(((e,t)=>(t instanceof i&&(e[t.str]=(e[t.str]||0)+1),e)),{})}}function o(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)c(r,t[n]),r.push(e[++n]);return new s(r)}r._Code=s,r.nil=new s(""),r._=o;const a=new s("+");function u(e,...t){const r=[h(e[0])];let n=0;for(;n<t.length;)r.push(a),c(r,t[n]),r.push(a,h(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===a){const r=l(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new s(r)}function c(e,t){var r;t instanceof s?e.push(...t._items):t instanceof i?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:h(Array.isArray(r)?r.join(","):r))}function l(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof i||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof i?void 0:`"${e}${t.slice(1)}`}function h(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}r.str=u,r.addCodeArg=c,r.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:u`${e}${t}`},r.stringify=function(e){return new s(h(e))},r.safeStringify=h,r.getProperty=function(e){return"string"==typeof e&&r.IDENTIFIER.test(e)?new s(`.${e}`):o`[${e}]`}},{}],102:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.or=r.and=r.not=r.CodeGen=r.operators=r.varKinds=r.ValueScopeName=r.ValueScope=r.Scope=r.Name=r.stringify=r.getProperty=r.nil=r.strConcat=r.str=r._=void 0;const n=e("./code"),i=e("./scope");var s=e("./code");Object.defineProperty(r,"_",{enumerable:!0,get:function(){return s._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return s.str}}),Object.defineProperty(r,"strConcat",{enumerable:!0,get:function(){return s.strConcat}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return s.nil}}),Object.defineProperty(r,"getProperty",{enumerable:!0,get:function(){return s.getProperty}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return s.stringify}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return s.Name}});var o=e("./scope");Object.defineProperty(r,"Scope",{enumerable:!0,get:function(){return o.Scope}}),Object.defineProperty(r,"ValueScope",{enumerable:!0,get:function(){return o.ValueScope}}),Object.defineProperty(r,"ValueScopeName",{enumerable:!0,get:function(){return o.ValueScopeName}}),Object.defineProperty(r,"varKinds",{enumerable:!0,get:function(){return o.varKinds}}),r.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class u extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?i.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=N(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=N(this.rhs,e,t),this}get names(){return j(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class l extends c{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class d extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class f extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class p extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=N(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class m extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce(((t,r)=>t+r.render(e)),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const i=r[n];i.optimizeNames(e,t)||(A(e,i.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce(((e,t)=>$(e,t.names)),{})}}class y extends m{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class g extends m{}class v extends y{}v.kind="else";class b extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(I(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=N(this.condition,e,t),this}get names(){const e=super.names;return j(e,this.condition),this.else&&$(e,this.else.names),e}}b.kind="if";class _ extends y{}_.kind="for";class w extends _{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=N(this.iteration,e,t),this}get names(){return $(super.names,this.iteration.names)}}class E extends _{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?i.varKinds.var:this.varKind,{name:r,from:n,to:s}=this;return`for(${t} ${r}=${n}; ${r}<${s}; ${r}++)`+super.render(e)}get names(){const e=j(super.names,this.from);return j(e,this.to)}}class x extends _{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=N(this.iterable,e,t),this}get names(){return $(super.names,this.iterable.names)}}class C extends y{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}C.kind="func";class k extends m{render(e){return"return "+super.render(e)}}k.kind="return";class O extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&$(e,this.catch.names),this.finally&&$(e,this.finally.names),e}}class S extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}S.kind="catch";class T extends y{render(e){return"finally"+super.render(e)}}T.kind="finally";function $(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function j(e,t){return t instanceof n._CodeOrName?$(e,t.names):e}function N(e,t,r){return e instanceof n.Name?s(e):(i=e)instanceof n._Code&&i._items.some((e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str]))?new n._Code(e._items.reduce(((e,t)=>(t instanceof n.Name&&(t=s(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e)),[])):e;var i;function s(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function A(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function I(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${M(e)}`}r.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new i.Scope({parent:e}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const i=this._scope.toName(t);return void 0!==r&&n&&(this._constants[i.str]=r),this._leafNode(new u(e,i,r)),i}const(e,t,r){return this._def(i.varKinds.const,e,t,r)}let(e,t,r){return this._def(i.varKinds.let,e,t,r)}var(e,t,r){return this._def(i.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new c(e,t,r))}add(e,t){return this._leafNode(new l(e,r.operators.ADD,t))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new p(e)),this}object(...e){const t=["{"];for(const[r,i]of e)t.length>1&&t.push(","),t.push(r),(r!==i||this.opts.es5)&&(t.push(":"),n.addCodeArg(t,i));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new b(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new w(e),t)}forRange(e,t,r,n,s=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const o=this._scope.toName(e);return this._for(new E(s,o,t,r),(()=>n(o)))}forOf(e,t,r,s=i.varKinds.const){const o=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,(t=>{this.var(o,n._`${e}[${t}]`),r(o)}))}return this._for(new x("of",s,o,t),(()=>r(o)))}forIn(e,t,r,s=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const o=this._scope.toName(e);return this._for(new x("in",s,o,t),(()=>r(o)))}endFor(){return this._endBlockNode(_)}label(e){return this._leafNode(new h(e))}break(e){return this._leafNode(new d(e))}return(e){const t=new k;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(k)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new O;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new S(e),t(e)}return r&&(this._currNode=n.finally=new T,this.code(r)),this._endBlockNode(S,T)}throw(e){return this._leafNode(new f(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,i){return this._blockNode(new C(e,t,r)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},r.not=I;const P=q(r.operators.AND);r.and=function(...e){return e.reduce(P)};const R=q(r.operators.OR);function q(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${M(t)} ${e} ${M(r)}`}function M(e){return e instanceof n.Name?e:n._`(${e})`}r.or=function(...e){return e.reduce(R)}},{"./code":101,"./scope":103}],103:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ValueScope=r.ValueScopeName=r.Scope=r.varKinds=r.UsedValueState=void 0;const n=e("./code");class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var s;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(s=r.UsedValueState||(r.UsedValueState={})),r.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class o{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}r.Scope=o;class a extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}r.ValueScopeName=a;const u=n._`\n`;r.ValueScope=class extends o{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?u:n.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:i}=n,s=null!==(r=t.key)&&void 0!==r?r:t.ref;let o=this._values[i];if(o){const e=o.get(s);if(e)return e}else o=this._values[i]=new Map;o.set(s,n);const a=this._scope[i]||(this._scope[i]=[]),u=a.length;return a[u]=t.ref,n.setValue(t,{property:i,itemIndex:u}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,(t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`}))}scopeCode(e=this._values,t,r){return this._reduceValues(e,(e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code}),t,r)}_reduceValues(e,t,o={},a){let u=n.nil;for(const c in e){const l=e[c];if(!l)continue;const h=o[c]=o[c]||new Map;l.forEach((e=>{if(h.has(e))return;h.set(e,s.Started);let o=t(e);if(o){const t=this.opts.es5?r.varKinds.var:r.varKinds.const;u=n._`${u}${t} ${e} = ${o};${this.opts._n}`}else{if(!(o=null==a?void 0:a(e)))throw new i(e);u=n._`${u}${o}${this.opts._n}`}h.set(e,s.Completed)}))}return u}}},{"./code":101}],104:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getData=void 0;const n=e("./validate/dataType"),i=e("./util"),s=e("./errors"),o=e("./codegen"),a=e("./names"),u=e("./subschema");r.default=class{constructor(e,t,r){if(function({schema:e,opts:t,self:r},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");const s=n.dependencies;if(null==s?void 0:s.some((t=>!Object.prototype.hasOwnProperty.call(e,t))))throw new Error(`parent schema must have dependencies of ${i}: ${s.join(",")}`);if(n.validateSchema){if(!n.validateSchema(e[i])){const e="keyword value is invalid: "+r.errorsText(n.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}}(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=i.schemaRefOrVal(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",h(this.$data,e));else if(this.schemaCode=this.schemaValue,!function(e,t,r=!1){return!t.length||t.some((t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e))}(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",a.default.errors))}result(e,t,r){this.gen.if(o.not(e)),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.result(e,void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(o._`${t} !== undefined && (${o.or(this.invalid$data(),e)})`)}error(e){(e?s.reportExtraError:s.reportError)(this,this.def.error)}$dataError(){s.reportError(this,this.def.$dataError||s.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');s.resetErrorsCount(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=o.nil){this.gen.block((()=>{this.check$data(e,r),t()}))}check$data(e=o.nil,t=o.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:i,def:s}=this;r.if(o.or(o._`${n} === undefined`,t)),e!==o.nil&&r.assign(e,!0),(i.length||s.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==o.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:i,it:s}=this;return o.or(function(){if(r.length){if(!(t instanceof o.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return o._`${n.checkDataTypes(e,t,s.opts.strict,n.DataType.Wrong)}`}return o.nil}(),function(){if(i.validateSchema){const r=e.scopeValue("validate$data",{ref:i.validateSchema});return o._`!${r}(${t})`}return o.nil}())}subschema(e,t){return u.applySubschema(this.it,e,t)}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=i.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=i.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,(()=>this.mergeEvaluated(e,o.Name))),!0}};const c=/^\/(?:[^~]|~0|~1)*$/,l=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function h(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,u;if(""===e)return a.default.rootData;if("/"===e[0]){if(!c.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,u=a.default.rootData}else{const i=l.exec(e);if(!i)throw new Error(`Invalid JSON-pointer: ${e}`);const o=+i[1];if(s=i[2],"#"===s){if(o>=t)throw new Error(f("property/index",o));return n[t-o]}if(o>t)throw new Error(f("data",o));if(u=r[t-o],!s)return u}let h=u;const d=s.split("/");for(const e of d)e&&(u=o._`${u}${o.getProperty(i.unescapeJsonPointer(e))}`,h=o._`${h} && ${u}`);return h;function f(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}r.getData=h},{"./codegen":102,"./errors":106,"./names":108,"./subschema":111,"./util":113,"./validate/dataType":116}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MissingRefError=r.ValidationError=void 0;const n=e("./resolve");class i extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}r.ValidationError=i;class s extends Error{constructor(e,t,r){super(r||`can't resolve reference ${t} from id ${e}`),this.missingRef=n.resolveUrl(e,t),this.missingSchema=n.normalizeId(n.getFullPath(this.missingRef))}}r.MissingRefError=s,t.exports={ValidationError:i,MissingRefError:s}},{"./resolve":109}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.extendErrors=r.resetErrorsCount=r.reportExtraError=r.reportError=r.keyword$DataError=r.keywordError=void 0;const n=e("./codegen"),i=e("./names");function s(e,t){const r=e.const("err",t);e.if(n._`${i.default.vErrors} === null`,(()=>e.assign(i.default.vErrors,n._`[${r}]`)),n._`${i.default.vErrors}.push(${r})`),e.code(n._`${i.default.errors}++`)}function o(e,t){const{gen:r,validateName:i,schemaEnv:s}=e;s.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${i}.errors`,t),r.return(!1))}r.keywordError={message:({keyword:e})=>n.str`should pass "${e}" keyword validation`},r.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},r.reportError=function(e,t=r.keywordError,i){const{it:a}=e,{gen:c,compositeRule:l,allErrors:h}=a,d=u(e,t);(null!=i?i:l||h)?s(c,d):o(a,n._`[${d}]`)},r.reportExtraError=function(e,t=r.keywordError){const{it:n}=e,{gen:a,compositeRule:c,allErrors:l}=n;s(a,u(e,t)),c||l||o(n,i.default.vErrors)},r.resetErrorsCount=function(e,t){e.assign(i.default.errors,t),e.if(n._`${i.default.vErrors} !== null`,(()=>e.if(t,(()=>e.assign(n._`${i.default.vErrors}.length`,t)),(()=>e.assign(i.default.vErrors,null)))))},r.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:s,errsCount:o,it:a}){if(void 0===o)throw new Error("ajv implementation error");const u=e.name("err");e.forRange("i",o,i.default.errors,(o=>{e.const(u,n._`${i.default.vErrors}[${o}]`),e.if(n._`${u}.dataPath === undefined`,(()=>e.assign(n._`${u}.dataPath`,n.strConcat(i.default.dataPath,a.errorPath)))),e.assign(n._`${u}.schemaPath`,n.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(n._`${u}.schema`,r),e.assign(n._`${u}.data`,s))}))};const a={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema"),instancePath:new n.Name("instancePath")};function u(e,t){const{createErrors:r,opts:i}=e.it;return!1===r?n._`{}`:(i.jtd&&!i.ajvErrors?c:l)(e,t)}function c(e,{message:t}){const{gen:r,keyword:s,it:o}=e,{errorPath:u,errSchemaPath:c,opts:l}=o,h=[[a.instancePath,n.strConcat(i.default.dataPath,u)],[a.schemaPath,n.str`${c}/${s}`]];return l.messages&&h.push([a.message,"function"==typeof t?t(e):t]),r.object(...h)}function l(e,t){const{gen:r,keyword:s,data:o,schemaValue:u,it:c}=e,{topSchemaRef:l,schemaPath:h,errorPath:d,errSchemaPath:f,propertyName:p,opts:m}=c,{params:y,message:g}=t,v=[[a.keyword,s],[i.default.dataPath,n.strConcat(i.default.dataPath,d)],[a.schemaPath,n.str`${f}/${s}`],[a.params,"function"==typeof y?y(e):y||n._`{}`]];return p&&v.push([a.propertyName,p]),m.messages&&v.push([a.message,"function"==typeof g?g(e):g]),m.verbose&&v.push([a.schema,u],[a.parentSchema,n._`${l}${h}`],[i.default.data,o]),r.object(...v)}},{"./codegen":102,"./names":108}],107:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.resolveSchema=r.getCompilingSchema=r.resolveRef=r.compileSchema=r.SchemaEnv=void 0;const n=e("./codegen"),i=e("./error_classes"),s=e("./names"),o=e("./resolve"),a=e("./util"),u=e("./validate"),c=e("uri-js");class l{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:o.normalizeId(null==r?void 0:r.$id),this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function h(e){const t=f.call(this,e);if(t)return t;const r=o.getFullPath(e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:l}=this.opts,h=new n.CodeGen(this.scope,{es5:a,lines:c,ownProperties:l});let d;e.$async&&(d=h.scopeValue("Error",{ref:i.ValidationError,code:n._`require("ajv/dist/compile/error_classes").ValidationError`}));const p=h.scopeName("validate");e.validateName=p;const m={gen:h,allErrors:this.opts.allErrors,data:s.default.data,parentData:s.default.parentData,parentDataProperty:s.default.parentDataProperty,dataNames:[s.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:h.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:n.stringify(e.schema)}:{ref:e.schema}),validateName:p,ValidationError:d,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:this.opts.jtd?"":"#",errorPath:n._`""`,opts:this.opts,self:this};let y;try{this._compilations.add(e),u.validateFunctionCode(m),h.optimize(this.opts.code.optimize);const t=h.toString();y=`${h.scopeRefs(s.default.scope)}return ${t}`,this.opts.code.process&&(y=this.opts.code.process(y,e));const r=new Function(`${s.default.self}`,`${s.default.scope}`,y)(this,this.scope.get());if(this.scope.value(p,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:p,validateCode:t,scopeValues:h._values}),this.opts.unevaluated){const{props:e,items:t}=m;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=n.stringify(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,y&&this.logger.error("Error compiling schema, function code:",y),t}finally{this._compilations.delete(e)}}function d(e){return o.inlineRef(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:h.call(this,e)}function f(e){for(const n of this._compilations)if(r=e,(t=n).schema===r.schema&&t.root===r.root&&t.baseId===r.baseId)return n;var t,r}function p(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||m.call(this,e,t)}function m(e,t){const r=c.parse(t),n=o._getFullPath(r);let i=o.getFullPath(e.baseId);if(Object.keys(e.schema).length>0&&n===i)return g.call(this,r,e);const s=o.normalizeId(n),a=this.refs[s]||this.schemas[s];if("string"==typeof a){const t=m.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||h.call(this,a),s===o.normalizeId(t)){const{schema:t}=a;return t.$id&&(i=o.resolveUrl(i,t.$id)),new l({schema:t,root:e,baseId:i})}return g.call(this,r,a)}}r.SchemaEnv=l,r.compileSchema=h,r.resolveRef=function(e,t,r){var n;r=o.resolveUrl(t,r);const i=e.refs[r];if(i)return i;let s=p.call(this,e,r);if(void 0===s){const i=null===(n=e.localRefs)||void 0===n?void 0:n[r];i&&(s=new l({schema:i,root:e,baseId:t}))}return void 0!==s?e.refs[r]=d.call(this,s):void 0},r.getCompilingSchema=f,r.resolveSchema=m;const y=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:r,root:n}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;if(void 0===(r=r[a.unescapeFragment(n)]))return;!y.has(n)&&"object"==typeof r&&r.$id&&(t=o.resolveUrl(t,r.$id))}let s;if("boolean"!=typeof r&&r.$ref&&!a.schemaHasRulesButRef(r,this.RULES)){const e=o.resolveUrl(t,r.$ref);s=m.call(this,n,e)}return s=s||new l({schema:r,root:n,baseId:t}),s.schema!==s.root.schema?s:void 0}},{"./codegen":102,"./error_classes":105,"./names":108,"./resolve":109,"./util":113,"./validate":118,"uri-js":558}],108:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./codegen"),i={data:new n.Name("data"),valCxt:new n.Name("valCxt"),dataPath:new n.Name("dataPath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};r.default=i},{"./codegen":102}],109:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getSchemaRefs=r.resolveUrl=r.normalizeId=r._getFullPath=r.getFullPath=r.inlineRef=void 0;const n=e("./util"),i=e("fast-deep-equal"),s=e("json-schema-traverse"),o=e("uri-js"),a=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);r.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!c(e):!!t&&l(e)<=t)};const u=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function c(e){for(const t in e){if(u.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(c))return!0;if("object"==typeof r&&c(r))return!0}return!1}function l(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!a.has(r)&&("object"==typeof e[r]&&n.eachItem(e[r],(e=>t+=l(e))),t===1/0))return 1/0}return t}function h(e="",t){!1!==t&&(e=p(e));return d(o.parse(e))}function d(e){return o.serialize(e).split("#")[0]+"#"}r.getFullPath=h,r._getFullPath=d;const f=/#\/?$/;function p(e){return e?e.replace(f,""):""}r.normalizeId=p,r.resolveUrl=function(e,t){return t=p(t),o.resolve(e,t)};const m=/^[a-z_][-a-z0-9._]*$/i;r.getSchemaRefs=function(e){if("boolean"==typeof e)return{};const t=p(e.$id),r={"":t},n=h(t,!1),a={},u=new Set;return s(e,{allKeys:!0},((e,t,i,s)=>{if(void 0===s)return;const h=n+t;let d=r[s];function f(t){if(t=p(d?o.resolve(d,t):t),u.has(t))throw l(t);u.add(t);let r=this.refs[t];return"string"==typeof r&&(r=this.refs[r]),"object"==typeof r?c(e,r.schema,t):t!==p(h)&&("#"===t[0]?(c(e,a[t],t),a[t]=e):this.refs[t]=h),t}function y(e){if("string"==typeof e){if(!m.test(e))throw new Error(`invalid anchor "${e}"`);f.call(this,`#${e}`)}}"string"==typeof e.$id&&(d=f.call(this,e.$id)),y.call(this,e.$anchor),y.call(this,e.$dynamicAnchor),r[t]=d})),a;function c(e,t,r){if(void 0!==t&&!i(e,t))throw l(r)}function l(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},{"./util":113,"fast-deep-equal":165,"json-schema-traverse":177,"uri-js":558}],110:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getRules=r.isJSONType=void 0;const n=new Set(["string","number","integer","boolean","null","object","array"]);r.isJSONType=function(e){return"string"==typeof e&&n.has(e)},r.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},{}],111:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.applySubschema=r.Type=void 0;const n=e("./validate"),i=e("./util"),s=e("./codegen");var o;!function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(o=r.Type||(r.Type={})),r.applySubschema=function(e,t,r){const a=function(e,{keyword:t,schemaProp:r,schema:n,schemaPath:o,errSchemaPath:a,topSchemaRef:u}){if(void 0!==t&&void 0!==n)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const n=e.schema[t];return void 0===r?{schema:n,schemaPath:s._`${e.schemaPath}${s.getProperty(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:n[r],schemaPath:s._`${e.schemaPath}${s.getProperty(t)}${s.getProperty(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${i.escapeFragment(r)}`}}if(void 0!==n){if(void 0===o||void 0===a||void 0===u)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:o,topSchemaRef:u,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')}(e,t);!function(e,t,{dataProp:r,dataPropType:n,data:a,dataTypes:u,propertyName:c}){if(void 0!==a&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:l}=t;if(void 0!==r){const{errorPath:a,dataPathArr:u,opts:c}=t;h(l.let("data",s._`${t.data}${s.getProperty(r)}`,!0)),e.errorPath=s.str`${a}${function(e,t,r){if(e instanceof s.Name){const n=t===o.Num;return r?n?s._`"[" + ${e} + "]"`:s._`"['" + ${e} + "']"`:n?s._`"/" + ${e}`:s._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?s.getProperty(e).toString():"/"+i.escapeJsonPointer(e)}(r,n,c.jsPropertySyntax)}`,e.parentDataProperty=s._`${r}`,e.dataPathArr=[...u,e.parentDataProperty]}if(void 0!==a){h(a instanceof s.Name?a:l.let("data",a,!0)),void 0!==c&&(e.propertyName=c)}u&&(e.dataTypes=u);function h(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}}(a,e,t),function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:s}){void 0!==n&&(e.compositeRule=n);void 0!==i&&(e.createErrors=i);void 0!==s&&(e.allErrors=s);e.jtdDiscriminator=t,e.jtdMetadata=r}(a,t);const u={...e,...a,items:void 0,props:void 0};return n.subschemaCode(u,r),u}},{"./codegen":102,"./util":113,"./validate":118}],112:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){const t=e.length;let r,n=0,i=0;for(;i<t;)n++,r=e.charCodeAt(i++),r>=55296&&r<=56319&&i<t&&(r=e.charCodeAt(i),56320==(64512&r)&&i++);return n}},{}],113:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.func=r.setEvaluated=r.evaluatedPropsToName=r.mergeEvaluated=r.eachItem=r.unescapeJsonPointer=r.escapeJsonPointer=r.escapeFragment=r.unescapeFragment=r.schemaRefOrVal=r.schemaHasRulesButRef=r.schemaHasRules=r.checkUnknownRules=r.alwaysValidSchema=r.toHash=void 0;const n=e("./codegen"),i=e("./validate");function s(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strict)return;if("boolean"==typeof t)return;const s=n.RULES.keywords;for(const r in t)s[r]||i.checkStrictMode(e,`unknown keyword: "${r}"`)}function o(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function u(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:i}){return(s,o,a,u)=>{const c=void 0===a?o:a instanceof n.Name?(o instanceof n.Name?e(s,o,a):t(s,o,a),a):o instanceof n.Name?(t(s,a,o),o):r(o,a);return u!==n.Name||c instanceof n.Name?c:i(s,c)}}function l(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&h(e,r,t),r}function h(e,t,r){Object.keys(r).forEach((r=>e.assign(n._`${t}${n.getProperty(r)}`,!0)))}r.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},r.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(s(e,t),!o(t,e.self.RULES.all))},r.checkUnknownRules=s,r.schemaHasRules=o,r.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},r.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,i,s){if(!s){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${n.getProperty(i)}`},r.unescapeFragment=function(e){return u(decodeURIComponent(e))},r.escapeFragment=function(e){return encodeURIComponent(a(e))},r.escapeJsonPointer=a,r.unescapeJsonPointer=u,r.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},r.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>{e.if(n._`${t} === true`,(()=>e.assign(r,!0)),(()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`)))})),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),h(e,r,t))})),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:l}),items:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,(()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`))),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,(()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`))),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},r.evaluatedPropsToName=l,r.setEvaluated=h,r.func=function(e,t){return e.scopeValue("func",{ref:t,code:t.code})}},{"./codegen":102,"./validate":118}],114:[function(e,t,r){"use strict";function n(e,t){return t.rules.some((t=>i(e,t)))}function i(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some((t=>void 0!==e[t])))}Object.defineProperty(r,"__esModule",{value:!0}),r.shouldUseRule=r.shouldUseGroup=r.schemaHasRulesForType=void 0,r.schemaHasRulesForType=function({schema:e,self:t},r){const i=t.RULES.types[r];return i&&!0!==i&&n(e,i)},r.shouldUseGroup=n,r.shouldUseRule=i},{}],115:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.boolOrEmptySchema=r.topBoolOrEmptySchema=void 0;const n=e("../errors"),i=e("../codegen"),s=e("../names"),o={message:"boolean schema is false"};function a(e,t){const{gen:r,data:i}=e,s={gen:r,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};n.reportError(s,o,t)}r.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(s.default.data):(t.assign(i._`${n}.errors`,null),t.return(!0))},r.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),a(e)):r.var(t,!0)}},{"../codegen":102,"../errors":106,"../names":108}],116:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.reportTypeError=r.checkDataTypes=r.checkDataType=r.coerceAndCheckDataType=r.getJSONTypes=r.getSchemaTypes=r.DataType=void 0;const n=e("../rules"),i=e("./applicability"),s=e("../errors"),o=e("../codegen"),a=e("../util");var u;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(u=r.DataType||(r.DataType={})),r.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},r.getJSONTypes=c,r.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:s}=e,a=function(e,t){return t?e.filter((e=>l.has(e)||"array"===t&&"array"===e)):[]}(t,s.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&i.schemaHasRulesForType(e,t[0]));if(c){const i=d(t,n,s.strict,u.Wrong);r.if(i,(()=>{a.length?function(e,t,r){const{gen:n,data:i,opts:s}=e,a=n.let("dataType",o._`typeof ${i}`),u=n.let("coerced",o._`undefined`);"array"===s.coerceTypes&&n.if(o._`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,(()=>n.assign(i,o._`${i}[0]`).assign(a,o._`typeof ${i}`).if(d(t,i,s.strict),(()=>n.assign(u,i)))));n.if(o._`${u} !== undefined`);for(const e of r)(l.has(e)||"array"===e&&"array"===s.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void n.elseIf(o._`${a} == "number" || ${a} == "boolean"`).assign(u,o._`"" + ${i}`).elseIf(o._`${i} === null`).assign(u,o._`""`);case"number":return void n.elseIf(o._`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(u,o._`+${i}`);case"integer":return void n.elseIf(o._`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(u,o._`+${i}`);case"boolean":return void n.elseIf(o._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(u,!1).elseIf(o._`${i} === "true" || ${i} === 1`).assign(u,!0);case"null":return n.elseIf(o._`${i} === "" || ${i} === 0 || ${i} === false`),void n.assign(u,null);case"array":n.elseIf(o._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(u,o._`[${i}]`)}}n.else(),p(e),n.endIf(),n.if(o._`${u} !== undefined`,(()=>{n.assign(i,u),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(o._`${t} !== undefined`,(()=>e.assign(o._`${t}[${r}]`,n)))}(e,u)}))}(e,t,a):p(e)}))}return c};const l=new Set(["string","number","integer","boolean","null"]);function h(e,t,r,n=u.Correct){const i=n===u.Correct?o.operators.EQ:o.operators.NEQ;let s;switch(e){case"null":return o._`${t} ${i} null`;case"array":s=o._`Array.isArray(${t})`;break;case"object":s=o._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=a(o._`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=a();break;default:return o._`typeof ${t} ${i} ${e}`}return n===u.Correct?s:o.not(s);function a(e=o.nil){return o.and(o._`typeof ${t} == "number"`,e,r?o._`isFinite(${t})`:o.nil)}}function d(e,t,r,n){if(1===e.length)return h(e[0],t,r,n);let i;const s=a.toHash(e);if(s.array&&s.object){const e=o._`typeof ${t} != "object"`;i=s.null?e:o._`!${t} || ${e}`,delete s.null,delete s.array,delete s.object}else i=o.nil;s.number&&delete s.integer;for(const e in s)i=o.and(i,h(e,t,r,n));return i}r.checkDataType=h,r.checkDataTypes=d;const f={message:({schema:e})=>o.str`should be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?o._`{type: ${e}}`:o._`{type: ${t}}`};function p(e){const t=function(e){const{gen:t,data:r,schema:n}=e,i=a.schemaRefOrVal(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}(e);s.reportError(t,f)}r.reportTypeError=p},{"../codegen":102,"../errors":106,"../rules":110,"../util":113,"./applicability":114}],117:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assignDefaults=void 0;const n=e("../codegen"),i=e(".");function s(e,t,r){const{gen:s,compositeRule:o,data:a,opts:u}=e;if(void 0===r)return;const c=n._`${a}${n.getProperty(t)}`;if(o)return void i.checkStrictMode(e,`default is ignored for: ${c}`);let l=n._`${c} === undefined`;"empty"===u.useDefaults&&(l=n._`${l} || ${c} === null || ${c} === ""`),s.if(l,n._`${c} = ${n.stringify(r)}`)}r.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)s(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach(((t,r)=>s(e,r,t.default)))}},{".":118,"../codegen":102}],118:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.checkStrictMode=r.schemaCxtHasRules=r.subschemaCode=r.validateFunctionCode=void 0;const n=e("./boolSchema"),i=e("./dataType"),s=e("./iterate"),o=e("../codegen"),a=e("../names"),u=e("../resolve"),c=e("../util");function l({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},s){i.code.es5?e.func(t,o._`${a.default.data}, ${a.default.valCxt}`,n.$async,(()=>{e.code(o._`"use strict"; ${h(r,i)}`),function(e,t){e.if(a.default.valCxt,(()=>{e.var(a.default.dataPath,o._`${a.default.valCxt}.${a.default.dataPath}`),e.var(a.default.parentData,o._`${a.default.valCxt}.${a.default.parentData}`),e.var(a.default.parentDataProperty,o._`${a.default.valCxt}.${a.default.parentDataProperty}`),e.var(a.default.rootData,o._`${a.default.valCxt}.${a.default.rootData}`),t.dynamicRef&&e.var(a.default.dynamicAnchors,o._`${a.default.valCxt}.${a.default.dynamicAnchors}`)}),(()=>{e.var(a.default.dataPath,o._`""`),e.var(a.default.parentData,o._`undefined`),e.var(a.default.parentDataProperty,o._`undefined`),e.var(a.default.rootData,a.default.data),t.dynamicRef&&e.var(a.default.dynamicAnchors,o._`{}`)}))}(e,i),e.code(s)})):e.func(t,o._`${a.default.data}, ${function(e){return o._`{${a.default.dataPath}="", ${a.default.parentData}, ${a.default.parentDataProperty}, ${a.default.rootData}=${a.default.data}${e.dynamicRef?o._`, ${a.default.dynamicAnchors}={}`:o.nil}}={}`}(i)}`,n.$async,(()=>e.code(h(r,i)).code(s)))}function h(e,t){return"object"==typeof e&&e.$id&&(t.code.source||t.code.process)?o._`/*# sourceURL=${e.$id} */`:o.nil}function d({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function f(e){return"boolean"!=typeof e.schema}function p(e){c.checkUnknownRules(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&c.schemaHasRulesButRef(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function m(e,t){if(e.opts.jtd)return s.schemaKeywords(e,[],!1,t);const r=i.getSchemaTypes(e.schema),n=i.coerceAndCheckDataType(e,r);s.schemaKeywords(e,r,!n,t)}function y({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){const s=r.$comment;if(!0===i.$comment)e.code(o._`${a.default.self}.logger.log(${s})`);else if("function"==typeof i.$comment){const r=o.str`${n}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(o._`${a.default.self}.opts.$comment(${s}, ${r}, ${i}.schema)`)}}function g(e,t,r=e.opts.strict){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}r.validateFunctionCode=function(e){f(e)&&(p(e),d(e))?function(e){const{schema:t,opts:r,gen:n}=e;l(e,(()=>{r.$comment&&t.$comment&&y(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strict&&g(e,"default is ignored in the schema root")}(e),n.let(a.default.vErrors,null),n.let(a.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",o._`${r}.evaluated`),t.if(o._`${e.evaluated}.dynamicProps`,(()=>t.assign(o._`${e.evaluated}.props`,o._`undefined`))),t.if(o._`${e.evaluated}.dynamicItems`,(()=>t.assign(o._`${e.evaluated}.items`,o._`undefined`)))}(e),m(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:s}=e;r.$async?t.if(o._`${a.default.errors} === 0`,(()=>t.return(a.default.data)),(()=>t.throw(o._`new ${i}(${a.default.vErrors})`))):(t.assign(o._`${n}.errors`,a.default.vErrors),s.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof o.Name&&e.assign(o._`${t}.props`,r);n instanceof o.Name&&e.assign(o._`${t}.items`,n)}(e),t.return(o._`${a.default.errors} === 0`))}(e)}))}(e):l(e,(()=>n.topBoolOrEmptySchema(e)))},r.subschemaCode=function(e,t){f(e)&&(p(e),d(e))?function(e,t){const{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&y(e);(function(e){e.schema.$id&&(e.baseId=u.resolveUrl(e.baseId,e.schema.$id))})(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const s=n.const("_errs",a.default.errors);m(e,s),n.var(t,o._`${s} === ${a.default.errors}`)}(e,t):n.boolOrEmptySchema(e,t)},r.schemaCxtHasRules=d,r.checkStrictMode=g},{"../codegen":102,"../names":108,"../resolve":109,"../util":113,"./boolSchema":115,"./dataType":116,"./iterate":119}],119:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.schemaKeywords=void 0;const n=e("./applicability"),i=e("./dataType"),s=e("./defaults"),o=e("./keyword"),a=e("../util"),u=e("."),c=e("../codegen"),l=e("../names");function h(e,t){const{gen:r,schema:i,opts:{useDefaults:a}}=e;a&&s.assignDefaults(e,t.type),r.block((()=>{for(const r of t.rules)n.shouldUseRule(i,r)&&o.keywordCode(e,r.keyword,r.definition,t.type)}))}function d(e,t){return e.includes(t)||"number"===t&&e.includes("integer")}function f(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function p(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,u.checkStrictMode(e,t,e.opts.strictTypes)}r.schemaKeywords=function(e,t,r,s){const{gen:u,schema:m,data:y,allErrors:g,opts:v,self:b}=e,{RULES:_}=b;function w(o){n.shouldUseGroup(m,o)&&(o.type?(u.if(i.checkDataType(o.type,y,v.strict)),h(e,o),1===t.length&&t[0]===o.type&&r&&(u.else(),i.reportTypeError(e)),u.endIf()):h(e,o),g||u.if(c._`${l.default.errors} === ${s||0}`))}!m.$ref||!v.ignoreKeywordsWithRef&&a.schemaHasRulesButRef(m,_)?(v.jtd||function(e,t){if(e.schemaEnv.meta||!e.opts.strictTypes)return;(function(e,t){if(!t.length)return;if(!e.dataTypes.length)return void(e.dataTypes=t);t.forEach((t=>{f(e.dataTypes,t)||p(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)})),e.dataTypes=e.dataTypes.filter((e=>f(t,e)))})(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&p(e,"use allowUnionTypes to allow union type keyword")}(e,t);!function(e,t){const r=e.self.RULES.all;for(const i in r){const s=r[i];if("object"==typeof s&&n.shouldUseRule(e.schema,s)){const{type:r}=s.definition;r.length&&!r.some((e=>d(t,e)))&&p(e,`missing type "${r.join(",")}" for keyword "${i}"`)}}}(e,e.dataTypes)}(e,t),u.block((()=>{for(const e of _.rules)w(e);w(_.post)}))):u.block((()=>o.keywordCode(e,"$ref",_.all.$ref.definition)))}},{".":118,"../codegen":102,"../names":108,"../util":113,"./applicability":114,"./dataType":116,"./defaults":117,"./keyword":120}],120:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.keywordCode=void 0;const n=e("../context"),i=e("../errors"),s=e("../../vocabularies/code"),o=e("../codegen"),a=e("../names");function u(e,t){var r;const{gen:n,keyword:u,schema:h,parentSchema:d,$data:f,it:p}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(p,t);const m=!f&&t.compile?t.compile.call(p.self,h,d,p):t.validate,y=l(n,u,m),g=n.let("valid");function v(r=(t.async?o._`await `:o.nil)){const i=p.opts.passContext?a.default.this:a.default.self,u=!("compile"in t&&!f||!1===t.schema);n.assign(g,o._`${r}${s.callValidateCode(e,y,i,u)}`,t.modifying)}function b(e){var r;n.if(o.not(null!==(r=t.valid)&&void 0!==r?r:g),e)}e.block$data(g,(function(){if(!1===t.errors)v(),t.modifying&&c(e),b((()=>e.error()));else{const r=t.async?function(){const e=n.let("ruleErrs",null);return n.try((()=>v(o._`await `)),(t=>n.assign(g,!1).if(o._`${t} instanceof ${p.ValidationError}`,(()=>n.assign(e,o._`${t}.errors`)),(()=>n.throw(t))))),e}():function(){const e=o._`${y}.errors`;return n.assign(e,null),v(o.nil),e}();t.modifying&&c(e),b((()=>function(e,t){const{gen:r}=e;r.if(o._`Array.isArray(${t})`,(()=>{r.assign(a.default.vErrors,o._`${a.default.vErrors} === null ? ${t} : ${a.default.vErrors}.concat(${t})`).assign(a.default.errors,o._`${a.default.vErrors}.length`),i.extendErrors(e)}),(()=>e.error()))}(e,r)))}})),e.ok(null!==(r=t.valid)&&void 0!==r?r:g)}function c(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,(()=>t.assign(r,o._`${n.parentData}[${n.parentDataProperty}]`)))}function l(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:o.stringify(r)})}r.keywordCode=function(e,t,r,i){const s=new n.default(e,r,t);"code"in r?r.code(s,i):s.$data&&r.validate?u(s,r):"macro"in r?function(e,t){const{gen:r,keyword:n,schema:i,parentSchema:s,it:a}=e,u=t.macro.call(a.self,i,s,a),c=l(r,n,u);!1!==a.opts.validateSchema&&a.self.validateSchema(u,!0);const h=r.name("valid");e.subschema({schema:u,schemaPath:o.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:c,compositeRule:!0},h),e.pass(h,(()=>e.error(!0)))}(s,r):(r.compile||r.validate)&&u(s,r)}},{"../../vocabularies/code":139,"../codegen":102,"../context":104,"../errors":106,"../names":108}],121:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=void 0;const n=e("./compile/context");r.KeywordCxt=n.default;var i=e("./compile/codegen");Object.defineProperty(r,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const s=e("./compile/error_classes"),o=e("./compile/rules"),a=e("./compile"),u=e("./compile/codegen"),c=e("./compile/resolve"),l=e("./compile/validate/dataType"),h=e("./compile/util"),d=e("./refs/data.json"),f=["removeAdditional","useDefaults","coerceTypes"],p=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),m={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",schemaId:"JSON Schema draft-04 is not supported in Ajv v7.",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",strictNumbers:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function g(e){var t,r,n,i,s,o,a,u,c,l,h,d;const f=null===(t=e.strict)||void 0===t||t,p=!!f&&"log",m=null===(r=e.code)||void 0===r?void 0:r.optimize,y=!0===m||void 0===m?1:m||0;return{strict:f,strictTypes:null!==(n=e.strictTypes)&&void 0!==n?n:p,strictTuples:null!==(i=e.strictTuples)&&void 0!==i?i:p,code:e.code?{...e.code,optimize:y}:{optimize:y},loopRequired:null!==(s=e.loopRequired)&&void 0!==s?s:1/0,loopEnum:null!==(o=e.loopEnum)&&void 0!==o?o:1/0,meta:null===(a=e.meta)||void 0===a||a,messages:null===(u=e.messages)||void 0===u||u,inlineRefs:null===(c=e.inlineRefs)||void 0===c||c,addUsedSchema:null===(l=e.addUsedSchema)||void 0===l||l,validateSchema:null===(h=e.validateSchema)||void 0===h||h,validateFormats:null===(d=e.validateFormats)||void 0===d||d}}class v{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...g(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new u.ValueScope({scope:{},prefixes:p,es5:t,lines:r}),this.logger=function(e){if(!1===e)return k;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=o.getRules(),b.call(this,m,e,"NOT SUPPORTED"),b.call(this,y,e,"DEPRECATED","warn"),this._metaOpts=C.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&x.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),w.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t}=this.opts;t&&e&&this.addMetaSchema(d,d.$id,!1)}defaultMeta(){const{meta:e}=this.opts;return this.opts.defaultMeta="object"==typeof e?e.$id||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await i.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||o.call(this,r)}async function i(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.MissingRefError))throw t;return a.call(this,t),await u.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function u(e){const r=await c.call(this,e);this.refs[e]||await i.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let i;if("object"==typeof e&&(i=e.$id,void 0!==i&&"string"!=typeof i))throw new Error("schema id must be string");return t=c.normalizeId(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=_.call(this,e));)e=t;if(void 0===t){const r=new a.SchemaEnv({schema:{}});if(t=a.resolveSchema.call(this,r,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=_.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e.$id;return r&&(r=c.normalizeId(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(S.call(this,r,t),!t)return h.eachItem(r,(e=>T.call(this,e))),this;j.call(this,t);const n={...t,type:l.getJSONTypes(t.type),schemaType:l.getJSONTypes(t.schemaType)};return h.eachItem(r,0===n.type.length?e=>T.call(this,e,n):e=>n.type.forEach((t=>T.call(this,e,n,t)))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex((t=>t.keyword===e));t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map((e=>`${r}${e.dataPath} ${e.message}`)).reduce(((e,r)=>e+t+r)):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,s=i[e];n&&s&&(i[e]=A(s))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r=this.opts.validateSchema,n=this.opts.addUsedSchema){if("object"!=typeof e){if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let i=this._cache.get(e);if(void 0!==i)return i;const s=c.getSchemaRefs.call(this,e);i=new a.SchemaEnv({schema:e,meta:t,localRefs:s}),this._cache.set(i.schema,i);const o=i.baseId;return n&&!o.startsWith("#")&&(o&&this._checkUnique(o),this.refs[o]=i),r&&this.validateSchema(e,!0),i}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):a.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{a.compileSchema.call(this,e)}finally{this.opts=t}}}function b(e,t,r,n="error"){for(const i in e){const s=i;s in t&&this.logger[n](`${r}: option ${i}. ${e[s]}`)}}function _(e){return e=c.normalizeId(e),this.schemas[e]||this.refs[e]}function w(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function x(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function C(){const e={...this.opts};for(const t of f)delete e[t];return e}r.default=v,v.ValidationError=s.ValidationError,v.MissingRefError=s.MissingRefError;const k={log(){},warn(){},error(){}};const O=/^[a-z_$][a-z0-9_$:-]*$/i;function S(e,t){const{RULES:r}=this;if(h.eachItem(e,(e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!O.test(e))throw new Error(`Keyword ${e} has invalid name`)})),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function T(e,t,r){var n;const i=null==t?void 0:t.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:s}=this;let o=i?s.post:s.rules.find((({type:e})=>e===r));if(o||(o={type:r,rules:[]},s.rules.push(o)),s.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:l.getJSONTypes(t.type),schemaType:l.getJSONTypes(t.schemaType)}};t.before?$.call(this,o,a,t.before):o.rules.push(a),s.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach((e=>this.addKeyword(e)))}function $(e,t,r){const n=e.rules.findIndex((e=>e.keyword===r));n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function j(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=A(t)),e.validateSchema=this.compile(t,!0))}const N={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function A(e){return{anyOf:[e,N]}}},{"./compile":107,"./compile/codegen":102,"./compile/context":104,"./compile/error_classes":105,"./compile/resolve":109,"./compile/rules":110,"./compile/util":113,"./compile/validate/dataType":116,"./refs/data.json":122}],122:[function(e,t,r){t.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}},{}],123:[function(e,t,r){t.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}},{}],124:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/subschema"),s=e("../../compile/util"),o=e("../../compile/validate"),a={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`should NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:u,it:c}=e,{items:l}=a;if(!Array.isArray(l))return void o.checkStrictMode(c,'"additionalItems" is ignored when "items" is not an array of schemas');c.items=!0;const h=t.const("len",n._`${u}.length`);if(!1===r)e.setParams({len:l.length}),e.pass(n._`${h} <= ${l.length}`);else if("object"==typeof r&&!s.alwaysValidSchema(c,r)){const r=t.var("valid",n._`${h} <= ${l.length}`);t.if(n.not(r),(()=>function(r){t.forRange("i",l.length,h,(s=>{e.subschema({keyword:"additionalItems",dataProp:s,dataPropType:i.Type.Num},r),c.allErrors||t.if(n.not(r),(()=>t.break()))}))}(r))),e.ok(r)}}};r.default=a},{"../../compile/codegen":102,"../../compile/subschema":111,"../../compile/util":113,"../../compile/validate":118}],125:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../code"),i=e("../../compile/codegen"),s=e("../../compile/names"),o=e("../../compile/subschema"),a=e("../../compile/util"),u={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"should NOT have additional properties",params:({params:e})=>i._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:u,data:c,errsCount:l,it:h}=e;if(!l)throw new Error("ajv implementation error");const{allErrors:d,opts:f}=h;if(h.props=!0,"all"!==f.removeAdditional&&a.alwaysValidSchema(h,r))return;const p=n.allSchemaProperties(u.properties),m=n.allSchemaProperties(u.patternProperties);function y(e){t.code(i._`delete ${c}[${e}]`)}function g(n){if("all"===f.removeAdditional||f.removeAdditional&&!1===r)y(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(d||t.break());if("object"==typeof r&&!a.alwaysValidSchema(h,r)){const r=t.name("valid");"failing"===f.removeAdditional?(v(n,r,!1),t.if(i.not(r),(()=>{e.reset(),y(n)}))):(v(n,r),d||t.if(i.not(r),(()=>t.break())))}}}function v(t,r,n){const i={keyword:"additionalProperties",dataProp:t,dataPropType:o.Type.Str};!1===n&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,r)}t.forIn("key",c,(e=>{p.length||m.length?t.if(function(e){let r;if(p.length>8){const i=a.schemaRefOrVal(h,u.properties,"properties");r=n.isOwnProperty(t,i,e)}else r=p.length?i.or(...p.map((t=>i._`${e} === ${t}`))):i.nil;return m.length&&(r=i.or(r,...m.map((r=>i._`${n.usePattern(t,r)}.test(${e})`)))),i.not(r)}(e),(()=>g(e))):g(e)})),e.ok(i._`${l} === ${s.default.errors}`)}};r.default=u},{"../../compile/codegen":102,"../../compile/names":108,"../../compile/subschema":111,"../../compile/util":113,"../code":139}],126:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/util"),i={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const s=t.name("valid");r.forEach(((t,r)=>{if(n.alwaysValidSchema(i,t))return;const o=e.subschema({keyword:"allOf",schemaProp:r},s);e.ok(s),e.mergeEvaluated(o)}))}};r.default=i},{"../../compile/util":113}],127:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e("../code").validateUnion,error:{message:"should match some schema in anyOf"}};r.default=n},{"../code":139}],128:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/subschema"),s=e("../../compile/util"),o=e("../../compile/validate"),a={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`should contain at least ${e} valid item(s)`:n.str`should contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:u,it:c}=e;let l,h;const{minContains:d,maxContains:f}=a;c.opts.next?(l=void 0===d?1:d,h=f):l=1;const p=t.const("len",n._`${u}.length`);if(e.setParams({min:l,max:h}),void 0===h&&0===l)return void o.checkStrictMode(c,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==h&&l>h)return o.checkStrictMode(c,'"minContains" > "maxContains" is always invalid'),void e.fail();if(s.alwaysValidSchema(c,r)){let t=n._`${p} >= ${l}`;return void 0!==h&&(t=n._`${t} && ${p} <= ${h}`),void e.pass(t)}c.items=!0;const m=t.name("valid");if(void 0===h&&1===l)y(m,(()=>t.if(m,(()=>t.break()))));else{t.let(m,!1);const e=t.name("_valid"),r=t.let("count",0);y(e,(()=>t.if(e,(()=>function(e){t.code(n._`${e}++`),void 0===h?t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0).break())):(t.if(n._`${e} > ${h}`,(()=>t.assign(m,!1).break())),1===l?t.assign(m,!0):t.if(n._`${e} >= ${l}`,(()=>t.assign(m,!0))))}(r)))))}function y(r,n){t.forRange("i",0,p,(t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:i.Type.Num,compositeRule:!0},r),n()}))}e.result(m,(()=>e.reset()))}};r.default=a},{"../../compile/codegen":102,"../../compile/subschema":111,"../../compile/util":113,"../../compile/validate":118}],129:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateSchemaDeps=r.validatePropertyDeps=r.error=void 0;const n=e("../../compile/codegen"),i=e("../../compile/util"),s=e("../code");r.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const i=1===t?"property":"properties";return n.str`should have ${i} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:i}})=>n._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${r}}`};const o={keyword:"dependencies",type:"object",schemaType:"object",error:r.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e){if("__proto__"===n)continue;(Array.isArray(e[n])?t:r)[n]=e[n]}return[t,r]}(e);a(e,t),u(e,r)}};function a(e,t=e.schema){const{gen:r,data:i,it:o}=e;if(0===Object.keys(t).length)return;const a=r.let("missing");for(const u in t){const c=t[u];if(0===c.length)continue;const l=s.propertyInData(r,i,u,o.opts.ownProperties);e.setParams({property:u,depsCount:c.length,deps:c.join(", ")}),o.allErrors?r.if(l,(()=>{for(const t of c)s.checkReportMissingProp(e,t)})):(r.if(n._`${l} && (${s.checkMissingProp(e,c,a)})`),s.reportMissingProp(e,a),r.else())}}function u(e,t=e.schema){const{gen:r,data:n,keyword:o,it:a}=e,u=r.name("valid");for(const c in t)i.alwaysValidSchema(a,t[c])||(r.if(s.propertyInData(r,n,c,a.opts.ownProperties),(()=>{const t=e.subschema({keyword:o,schemaProp:c},u);e.mergeValidEvaluated(t,u)}),(()=>r.var(u,!0))),e.ok(u))}r.validatePropertyDeps=a,r.validateSchemaDeps=u,r.default=o},{"../../compile/codegen":102,"../../compile/util":113,"../code":139}],130:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/util"),s=e("../../compile/validate"),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`should match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:i}=e;void 0===r.then&&void 0===r.else&&s.checkStrictMode(i,'"if" without "then" and "else" is ignored');const o=a(i,"then"),u=a(i,"else");if(!o&&!u)return;const c=t.let("valid",!0),l=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},l);e.mergeEvaluated(t)}(),e.reset(),o&&u){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(l,h("then",r),h("else",r))}else o?t.if(l,h("then")):t.if(n.not(l),h("else"));function h(r,i){return()=>{const s=e.subschema({keyword:r},l);t.assign(c,l),e.mergeValidEvaluated(s,c),i?t.assign(i,n._`${r}`):e.setParams({ifClause:r})}}e.pass(c,(()=>e.error(!0)))}};function a(e,t){const r=e.schema[t];return void 0!==r&&!i.alwaysValidSchema(e,r)}r.default=o},{"../../compile/codegen":102,"../../compile/util":113,"../../compile/validate":118}],131:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./additionalItems"),i=e("./items"),s=e("./contains"),o=e("./dependencies"),a=e("./propertyNames"),u=e("./additionalProperties"),c=e("./properties"),l=e("./patternProperties"),h=e("./not"),d=e("./anyOf"),f=e("./oneOf"),p=e("./allOf"),m=e("./if"),y=e("./thenElse"),g=[h.default,d.default,f.default,p.default,m.default,y.default,n.default,i.default,s.default,a.default,u.default,o.default,c.default,l.default];r.default=g},{"./additionalItems":124,"./additionalProperties":125,"./allOf":126,"./anyOf":127,"./contains":128,"./dependencies":129,"./if":130,"./items":132,"./not":133,"./oneOf":134,"./patternProperties":135,"./properties":136,"./propertyNames":137,"./thenElse":138}],132:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/util"),s=e("../../compile/validate"),o=e("../code"),a={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{gen:t,schema:r,it:a}=e;if(Array.isArray(r))a.opts.unevaluated&&r.length&&!0!==a.items&&(a.items=i.mergeEvaluated.items(t,r.length,a.items)),function(r){const{parentSchema:o,data:u}=e;if(a.opts.strictTuples&&!function(e,t){return e===t.minItems&&(e===t.maxItems||!1===t.additionalItems)}(r.length,o)){const e=`"items" is ${r.length}-tuple, but minItems or maxItems/additionalItems are not specified or different`;s.checkStrictMode(a,e,a.opts.strictTuples)}const c=t.name("valid"),l=t.const("len",n._`${u}.length`);r.forEach(((r,s)=>{i.alwaysValidSchema(a,r)||(t.if(n._`${l} > ${s}`,(()=>e.subschema({keyword:"items",schemaProp:s,dataProp:s},c))),e.ok(c))}))}(r);else{if(a.items=!0,i.alwaysValidSchema(a,r))return;e.ok(o.validateArray(e))}}};r.default=a},{"../../compile/codegen":102,"../../compile/util":113,"../../compile/validate":118,"../code":139}],133:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/util"),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:i}=e;if(n.alwaysValidSchema(i,r))return void e.fail();const s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.result(s,(()=>e.error()),(()=>e.reset()))},error:{message:"should NOT be valid"}};r.default=i},{"../../compile/util":113}],134:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/util"),s={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"should match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const o=r,a=t.let("valid",!1),u=t.let("passing",null),c=t.name("_valid");e.setParams({passing:u}),t.block((function(){o.forEach(((r,o)=>{let l;i.alwaysValidSchema(s,r)?t.var(c,!0):l=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},c),o>0&&t.if(n._`${c} && ${a}`).assign(a,!1).assign(u,n._`[${u}, ${o}]`).else(),t.if(c,(()=>{t.assign(a,!0),t.assign(u,o),l&&e.mergeEvaluated(l,n.Name)}))}))})),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}};r.default=s},{"../../compile/codegen":102,"../../compile/util":113}],135:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../code"),i=e("../../compile/codegen"),s=e("../../compile/subschema"),o=e("../../compile/validate"),a=e("../../compile/util"),u={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:u,parentSchema:c,it:l}=e,{opts:h}=l,d=n.schemaProperties(l,r);if(0===d.length)return;const f=h.strict&&!h.allowMatchingProperties&&c.properties,p=t.name("valid");!0===l.props||l.props instanceof i.Name||(l.props=a.evaluatedPropsToName(t,l.props));const{props:m}=l;function y(e){for(const t in f)new RegExp(e).test(t)&&o.checkStrictMode(l,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(r){t.forIn("key",u,(o=>{t.if(i._`${n.usePattern(t,r)}.test(${o})`,(()=>{e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:o,dataPropType:s.Type.Str},p),l.opts.unevaluated&&!0!==m?t.assign(i._`${m}[${o}]`,!0):l.allErrors||t.if(i.not(p),(()=>t.break()))}))}))}!function(){for(const e of d)f&&y(e),l.allErrors?g(e):(t.var(p,!0),g(e),t.if(p))}()}};r.default=u},{"../../compile/codegen":102,"../../compile/subschema":111,"../../compile/util":113,"../../compile/validate":118,"../code":139}],136:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/context"),i=e("../code"),s=e("../../compile/util"),o=e("./additionalProperties"),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:u,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&o.default.code(new n.default(c,o.default,"additionalProperties"));const l=i.allSchemaProperties(r);for(const e of l)c.definedProperties.add(e);c.opts.unevaluated&&l.length&&!0!==c.props&&(c.props=s.mergeEvaluated.props(t,s.toHash(l),c.props));const h=l.filter((e=>!s.alwaysValidSchema(c,r[e])));if(0===h.length)return;const d=t.name("valid");for(const r of h)f(r)?p(r):(t.if(i.propertyInData(t,u,r,c.opts.ownProperties)),p(r),c.allErrors||t.else().var(d,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(d);function f(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==r[e].default}function p(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},d)}}};r.default=a},{"../../compile/context":104,"../../compile/util":113,"../code":139,"./additionalProperties":125}],137:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/util"),s={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:({params:e})=>n.str`property name '${e.propertyName}' is invalid`,params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:s,it:o}=e;if(i.alwaysValidSchema(o,r))return;const a=t.name("valid");t.forIn("key",s,(r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if(n.not(a),(()=>{e.error(!0),o.allErrors||t.break()}))})),e.ok(a)}};r.default=s},{"../../compile/codegen":102,"../../compile/util":113}],138:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/validate"),i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&n.checkStrictMode(r,`"${e}" without "if" is ignored`)}};r.default=i},{"../../compile/validate":118}],139:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateUnion=r.validateArray=r.usePattern=r.callValidateCode=r.schemaProperties=r.allSchemaProperties=r.noPropertyInData=r.propertyInData=r.isOwnProperty=r.hasPropFunc=r.reportMissingProp=r.checkMissingProp=r.checkReportMissingProp=void 0;const n=e("../compile/codegen"),i=e("../compile/util"),s=e("../compile/subschema"),o=e("../compile/names");function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function u(e,t,r){return n._`${a(e)}.call(${t}, ${r})`}function c(e,t,r,i){const s=n._`${t}${n.getProperty(r)} === undefined`;return i?n.or(s,n.not(u(e,t,r))):s}function l(e){return e?Object.keys(e).filter((e=>"__proto__"!==e)):[]}r.checkReportMissingProp=function(e,t){const{gen:r,data:i,it:s}=e;r.if(c(r,i,t,s.opts.ownProperties),(()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()}))},r.checkMissingProp=function({gen:e,data:t,it:{opts:r}},i,s){return n.or(...i.map((i=>n.and(c(e,t,i,r.ownProperties),n._`${s} = ${i}`))))},r.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},r.hasPropFunc=a,r.isOwnProperty=u,r.propertyInData=function(e,t,r,i){const s=n._`${t}${n.getProperty(r)} !== undefined`;return i?n._`${s} && ${u(e,t,r)}`:s},r.noPropertyInData=c,r.allSchemaProperties=l,r.schemaProperties=function(e,t){return l(t).filter((r=>!i.alwaysValidSchema(e,t[r])))},r.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:i,schemaPath:s,errorPath:a},it:u},c,l,h){const d=h?n._`${e}, ${t}, ${i}${s}`:t,f=[[o.default.dataPath,n.strConcat(o.default.dataPath,a)],[o.default.parentData,u.parentData],[o.default.parentDataProperty,u.parentDataProperty],[o.default.rootData,o.default.rootData]];u.opts.dynamicRef&&f.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const p=n._`${d}, ${r.object(...f)}`;return l!==n.nil?n._`${c}.call(${l}, ${p})`:n._`${c}(${p})`},r.usePattern=function(e,t){return e.scopeValue("pattern",{key:t,ref:new RegExp(t,"u"),code:n._`new RegExp(${t}, "u")`})},r.validateArray=function(e){const{gen:t,data:r,keyword:i,it:o}=e,a=t.name("valid");if(o.allErrors){const e=t.let("valid",!0);return u((()=>t.assign(e,!1))),e}return t.var(a,!0),u((()=>t.break())),a;function u(o){const u=t.const("len",n._`${r}.length`);t.forRange("i",0,u,(r=>{e.subschema({keyword:i,dataProp:r,dataPropType:s.Type.Num},a),t.if(n.not(a),o)}))}},r.validateUnion=function(e){const{gen:t,schema:r,keyword:s,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some((e=>i.alwaysValidSchema(o,e)))&&!o.opts.unevaluated)return;const a=t.let("valid",!1),u=t.name("_valid");t.block((()=>r.forEach(((r,i)=>{const o=e.subschema({keyword:s,schemaProp:i,compositeRule:!0},u);t.assign(a,n._`${a} || ${u}`);e.mergeValidEvaluated(o,u)||t.if(n.not(a))})))),e.result(a,(()=>e.reset()),(()=>e.error(!0)))}},{"../compile/codegen":102,"../compile/names":108,"../compile/subschema":111,"../compile/util":113}],140:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};r.default=n},{}],141:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./id"),i=e("./ref"),s=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,i.default];r.default=s},{"./id":140,"./ref":142}],142:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.callRef=r.getValidate=void 0;const n=e("../../compile/error_classes"),i=e("../code"),s=e("../../compile/codegen"),o=e("../../compile/names"),a=e("../../compile"),u=e("../../compile/util"),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:i}=e,{baseId:o,schemaEnv:u,validateName:c,opts:d,self:f}=i;if("#"===r||"#/"===r)return function(){if(u===u.root)return h(e,c,u,u.$async);const r=t.scopeValue("root",{ref:u.root});return h(e,s._`${r}.validate`,u.root,u.root.$async)}();const p=a.resolveRef.call(f,u.root,o,r);if(void 0===p)throw new n.MissingRefError(o,r);return p instanceof a.SchemaEnv?function(t){const r=l(e,t);h(e,r,t,t.$async)}(p):function(n){const i=t.scopeValue("schema",!0===d.code.source?{ref:n,code:s.stringify(n)}:{ref:n}),o=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:s.nil,topSchemaRef:i,errSchemaPath:r},o);e.mergeEvaluated(a),e.ok(o)}(p)}};function l(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):s._`${r.scopeValue("wrapper",{ref:t})}.validate`}function h(e,t,r,n){const{gen:a,it:c}=e,{allErrors:l,schemaEnv:h,opts:d}=c,f=d.passContext?o.default.this:s.nil;function p(e){const t=s._`${e}.errors`;a.assign(o.default.vErrors,s._`${o.default.vErrors} === null ? ${t} : ${o.default.vErrors}.concat(${t})`),a.assign(o.default.errors,s._`${o.default.vErrors}.length`)}function m(e){var t;if(!c.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(n&&!n.dynamicProps)void 0!==n.props&&(c.props=u.mergeEvaluated.props(a,n.props,c.props));else{const t=a.var("props",s._`${e}.evaluated.props`);c.props=u.mergeEvaluated.props(a,t,c.props,s.Name)}if(!0!==c.items)if(n&&!n.dynamicItems)void 0!==n.items&&(c.items=u.mergeEvaluated.items(a,n.items,c.items));else{const t=a.var("items",s._`${e}.evaluated.items`);c.items=u.mergeEvaluated.items(a,t,c.items,s.Name)}}n?function(){if(!h.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try((()=>{a.code(s._`await ${i.callValidateCode(e,t,f)}`),m(t),l||a.assign(r,!0)}),(e=>{a.if(s._`!(${e} instanceof ${c.ValidationError})`,(()=>a.throw(e))),p(e),l||a.assign(r,!1)})),e.ok(r)}():e.result(i.callValidateCode(e,t,f),(()=>m(t)),(()=>p(t)))}r.getValidate=l,r.callRef=h,r.default=c},{"../../compile":107,"../../compile/codegen":102,"../../compile/error_classes":105,"../../compile/names":108,"../../compile/util":113,"../code":139}],143:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./core"),i=e("./validation"),s=e("./applicator"),o=e("./format"),a=e("./metadata"),u=[n.default,i.default,s.default,o.default,a.metadataVocabulary,a.contentVocabulary];r.default=u},{"./applicator":131,"./core":141,"./format":145,"./metadata":146,"./validation":149}],144:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`should match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:i,$data:s,schema:o,schemaCode:a,it:u}=e,{opts:c,errSchemaPath:l,schemaEnv:h,self:d}=u;c.validateFormats&&(s?function(){const s=r.scopeValue("formats",{ref:d.formats,code:c.code.formats}),o=r.const("fDef",n._`${s}[${a}]`),u=r.let("fType"),l=r.let("format");r.if(n._`typeof ${o} == "object" && !(${o} instanceof RegExp)`,(()=>r.assign(u,n._`${o}.type || "string"`).assign(l,n._`${o}.validate`)),(()=>r.assign(u,n._`"string"`).assign(l,o))),e.fail$data(n.or(!1===c.strict?n.nil:n._`${a} && !${l}`,function(){const e=h.$async?n._`(${o}.async ? await ${l}(${i}) : ${l}(${i}))`:n._`${l}(${i})`,r=n._`(typeof ${l} == "function" ? ${e} : ${l}.test(${i}))`;return n._`${l} && ${l} !== true && ${u} === ${t} && !${r}`}()))}():function(){const s=d.formats[o];if(!s)return void function(){if(!1===c.strict)return void d.logger.warn(e());throw new Error(e());function e(){return`unknown format "${o}" ignored in schema at path "${l}"`}}();if(!0===s)return;const[a,u,f]=function(e){const t=r.scopeValue("formats",{key:o,ref:e,code:c.code.formats?n._`${c.code.formats}${n.getProperty(o)}`:void 0});if("object"==typeof e&&!(e instanceof RegExp))return[e.type||"string",e.validate,n._`${t}.validate`];return["string",e,t]}(s);a===t&&e.pass(function(){if("object"==typeof s&&!(s instanceof RegExp)&&s.async){if(!h.$async)throw new Error("async format in sync schema");return n._`await ${f}(${i})`}return"function"==typeof u?n._`${f}(${i})`:n._`${f}.test(${i})`}())}())}};r.default=i},{"../../compile/codegen":102}],145:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=[e("./format").default];r.default=n},{"./format":144}],146:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.contentVocabulary=r.metadataVocabulary=void 0,r.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],r.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},{}],147:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("fast-deep-equal"),s={keyword:"const",$data:!0,error:{message:"should be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const t=e.gen.scopeValue("func",{ref:i,code:n._`require("ajv/dist/compile/equal")`});e.fail$data(n._`!${t}(${e.data}, ${e.schemaCode})`)}};r.default=s},{"../../compile/codegen":102,"fast-deep-equal":165}],148:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("fast-deep-equal"),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"should be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:s,schema:o,schemaCode:a,it:u}=e;if(!s&&0===o.length)throw new Error("enum must have non-empty array");const c=o.length>=u.opts.loopEnum,l=e.gen.scopeValue("func",{ref:i,code:n._`require("ajv/dist/compile/equal")`});let h;if(c||s)h=t.let("valid"),e.block$data(h,(function(){t.assign(h,!1),t.forOf("v",a,(e=>t.if(n._`${l}(${r}, ${e})`,(()=>t.assign(h,!0).break()))))}));else{if(!Array.isArray(o))throw new Error("ajv implementation error");const e=t.const("vSchema",a);h=n.or(...o.map(((t,i)=>function(e,t){const i=o[t];return i&&"object"==typeof i?n._`${l}(${r}, ${e}[${t}])`:n._`${r} === ${i}`}(e,i))))}e.pass(h)}};r.default=s},{"../../compile/codegen":102,"fast-deep-equal":165}],149:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./limitNumber"),i=e("./multipleOf"),s=e("./limitLength"),o=e("./pattern"),a=e("./limitProperties"),u=e("./required"),c=e("./limitItems"),l=e("./uniqueItems"),h=e("./const"),d=e("./enum"),f=[n.default,i.default,s.default,o.default,a.default,u.default,c.default,l.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},h.default,d.default];r.default=f},{"./const":147,"./enum":148,"./limitItems":150,"./limitLength":151,"./limitNumber":152,"./limitProperties":153,"./multipleOf":154,"./pattern":155,"./required":156,"./uniqueItems":157}],150:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`should NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:i}=e,s="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${s} ${i}`)}};r.default=i},{"../../compile/codegen":102}],151:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=e("../../compile/ucs2length"),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`should NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s,it:o}=e,a="maxLength"===t?n.operators.GT:n.operators.LT;let u;if(!1===o.opts.unicode)u=n._`${r}.length`;else{const t=e.gen.scopeValue("func",{ref:i.default,code:n._`require("ajv/dist/compile/ucs2length").default`});u=n._`${t}(${r})`}e.fail$data(n._`${u} ${a} ${s}`)}};r.default=s},{"../../compile/codegen":102,"../../compile/ucs2length":112}],152:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i=n.operators,s={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},o={message:({keyword:e,schemaCode:t})=>n.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${s[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(s),type:"number",schemaType:"number",$data:!0,error:o,code(e){const{keyword:t,data:r,schemaCode:i}=e;e.fail$data(n._`${r} ${s[t].fail} ${i} || isNaN(${r})`)}};r.default=a},{"../../compile/codegen":102}],153:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`should NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:i}=e,s="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${s} ${i}`)}};r.default=i},{"../../compile/codegen":102}],154:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/codegen"),i={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`should be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:i,it:s}=e,o=s.opts.multipleOfPrecision,a=t.let("res"),u=o?n._`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:n._`${a} !== parseInt(${a})`;e.fail$data(n._`(${i} === 0 || (${a} = ${r}/${i}, ${u}))`)}};r.default=i},{"../../compile/codegen":102}],155:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../code"),i=e("../../compile/codegen"),s={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`should match pattern "${e}"`,params:({schemaCode:e})=>i._`{pattern: ${e}}`},code(e){const{gen:t,data:r,$data:s,schema:o,schemaCode:a}=e,u=s?i._`(new RegExp(${a}, "u"))`:n.usePattern(t,o);e.fail$data(i._`!${u}.test(${r})`)}};r.default=s},{"../../compile/codegen":102,"../code":139}],156:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../code"),i=e("../../compile/codegen"),s=e("../../compile/validate"),o={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>i.str`should have required property '${e}'`,params:({params:{missingProperty:e}})=>i._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:o,data:a,$data:u,it:c}=e,{opts:l}=c;if(!u&&0===r.length)return;const h=r.length>=l.loopRequired;if(c.allErrors?function(){if(h||u)e.block$data(i.nil,d);else for(const t of r)n.checkReportMissingProp(e,t)}():function(){const s=t.let("missing");if(h||u){const r=t.let("valid",!0);e.block$data(r,(()=>function(r,s){e.setParams({missingProperty:r}),t.forOf(r,o,(()=>{t.assign(s,n.propertyInData(t,a,r,l.ownProperties)),t.if(i.not(s),(()=>{e.error(),t.break()}))}),i.nil)}(s,r))),e.ok(r)}else t.if(n.checkMissingProp(e,r,s)),n.reportMissingProp(e,s),t.else()}(),l.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;s.checkStrictMode(c,t,c.opts.strictRequired)}}function d(){t.forOf("prop",o,(r=>{e.setParams({missingProperty:r}),t.if(n.noPropertyInData(t,a,r,l.ownProperties),(()=>e.error()))}))}}};r.default=o},{"../../compile/codegen":102,"../../compile/validate":118,"../code":139}],157:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("../../compile/validate/dataType"),i=e("../../compile/codegen"),s=e("fast-deep-equal"),o={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>i.str`should NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>i._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:o,schema:a,parentSchema:u,schemaCode:c,it:l}=e;if(!o&&!a)return;const h=t.let("valid"),d=u.items?n.getSchemaTypes(u.items):[];function f(s,o){const a=t.name("item"),u=n.checkDataTypes(d,a,l.opts.strict,n.DataType.Wrong),c=t.const("indices",i._`{}`);t.for(i._`;${s}--;`,(()=>{t.let(a,i._`${r}[${s}]`),t.if(u,i._`continue`),d.length>1&&t.if(i._`typeof ${a} == "string"`,i._`${a} += "_"`),t.if(i._`typeof ${c}[${a}] == "number"`,(()=>{t.assign(o,i._`${c}[${a}]`),e.error(),t.assign(h,!1).break()})).code(i._`${c}[${a}] = ${s}`)}))}function p(n,o){const a=e.gen.scopeValue("func",{ref:s,code:i._`require("ajv/dist/compile/equal")`}),u=t.name("outer");t.label(u).for(i._`;${n}--;`,(()=>t.for(i._`${o} = ${n}; ${o}--;`,(()=>t.if(i._`${a}(${r}[${n}], ${r}[${o}])`,(()=>{e.error(),t.assign(h,!1).break(u)}))))))}e.block$data(h,(function(){const n=t.let("i",i._`${r}.length`),s=t.let("j");e.setParams({i:n,j:s}),t.assign(h,!0),t.if(i._`${n} > 1`,(()=>(d.length>0&&!d.some((e=>"object"===e||"array"===e))?f:p)(n,s)))}),i._`${c} === false`),e.ok(h)}};r.default=o},{"../../compile/codegen":102,"../../compile/validate/dataType":116,"fast-deep-equal":165}],158:[function(e,t,r){"use strict";function n(){this.jobs=Array.prototype.slice.call(arguments),this.running=!1}n.prototype={add:function(e){return e&&(arguments.length>1?this.jobs=this.jobs.concat(Array.prototype.slice.call(arguments)):this.jobs.push(e)),this},run:function(e){return this.add(e),this.running||this.start(),this},start:function(){this.running=!0,this.next(!1)},success:function(){this.next(!1)},fail:function(e){e=e||"Job failed",this.next(e)},next:function(e){if(this.jobs.length){var t=this.jobs.shift();try{t(e,this)}catch(e){this.next(e)}}else this.running=!1}},t.exports=n},{}],159:[function(e,t,r){"use strict";function n(e,t,r){e instanceof RegExp&&(e=i(e,r)),t instanceof RegExp&&(t=i(t,r));var n=s(e,t,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+e.length,n[1]),post:r.slice(n[1]+t.length)}}function i(e,t){var r=t.match(e);return r?r[0]:null}function s(e,t,r){var n,i,s,o,a,u=r.indexOf(e),c=r.indexOf(t,u+1),l=u;if(u>=0&&c>0){for(n=[],s=r.length;l>=0&&!a;)l==u?(n.push(l),u=r.indexOf(e,l+1)):1==n.length?a=[n.pop(),c]:((i=n.pop())<s&&(s=i,o=c),c=r.indexOf(t,l+1)),l=u<c&&u>=0?u:c;n.length&&(a=[s,o])}return a}t.exports=n,n.range=s},{}],160:[function(e,t,r){(function(e,n,i){!function(e){if("object"==typeof r&&void 0!==t)t.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var i;"undefined"!=typeof window?i=window:void 0!==n?i=n:"undefined"!=typeof self&&(i=self),i.Promise=e()}}((function(){var t,r,s;return function e(t,r,n){function i(o,a){if(!r[o]){if(!t[o]){var u="function"==typeof _dereq_&&_dereq_;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[o]={exports:{}};t[o][0].call(l.exports,(function(e){var r=t[o][1][e];return i(r||e)}),l,l.exports,e,t,r,n)}return r[o].exports}for(var s="function"==typeof _dereq_&&_dereq_,o=0;o<n.length;o++)i(n[o]);return i}({1:[function(e,t,r){"use strict";t.exports=function(e){var t=e._SomePromiseArray;function r(e){var r=new t(e),n=r.promise();return r.setHowMany(1),r.setUnwrap(),r.init(),n}e.any=function(e){return r(e)},e.prototype.any=function(){return r(this)}}},{}],2:[function(t,r,n){"use strict";var i;try{throw new Error}catch(e){i=e}var s=t("./schedule"),o=t("./queue");function a(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new o(16),this._normalQueue=new o(16),this._haveDrainedQueues=!1;var e=this;this.drainQueues=function(){e._drainQueues()},this._schedule=s}function u(e){for(;e.length()>0;)c(e)}function c(e){var t=e.shift();if("function"!=typeof t)t._settlePromises();else{var r=e.shift(),n=e.shift();t.call(r,n)}}a.prototype.setScheduler=function(e){var t=this._schedule;return this._schedule=e,this._customScheduler=!0,t},a.prototype.hasCustomScheduler=function(){return this._customScheduler},a.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},a.prototype.fatalError=function(t,r){r?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},a.prototype.throwLater=function(e,t){if(1===arguments.length&&(t=e,e=function(){throw t}),"undefined"!=typeof setTimeout)setTimeout((function(){e(t)}),0);else try{this._schedule((function(){e(t)}))}catch(e){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},a.prototype.invokeLater=function(e,t,r){this._lateQueue.push(e,t,r),this._queueTick()},a.prototype.invoke=function(e,t,r){this._normalQueue.push(e,t,r),this._queueTick()},a.prototype.settlePromises=function(e){this._normalQueue._pushOne(e),this._queueTick()},a.prototype._drainQueues=function(){u(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,u(this._lateQueue)},a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},a.prototype._reset=function(){this._isTickUsed=!1},r.exports=a,r.exports.firstLineError=i},{"./queue":26,"./schedule":29}],3:[function(e,t,r){"use strict";t.exports=function(e,t,r,n){var i=!1,s=function(e,t){this._reject(t)},o=function(e,t){t.promiseRejectionQueued=!0,t.bindingPromise._then(s,s,null,this,e)},a=function(e,t){0==(50397184&this._bitField)&&this._resolveCallback(t.target)},u=function(e,t){t.promiseRejectionQueued||this._reject(e)};e.prototype.bind=function(s){i||(i=!0,e.prototype._propagateFrom=n.propagateFromFunction(),e.prototype._boundValue=n.boundValueFunction());var c=r(s),l=new e(t);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(c),c instanceof e){var d={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:c};h._then(t,o,void 0,l,d),c._then(a,u,void 0,l,d),l._setOnCancel(c)}else l._resolveCallback(h);return l},e.prototype._setBoundTo=function(e){void 0!==e?(this._bitField=2097152|this._bitField,this._boundTo=e):this._bitField=-2097153&this._bitField},e.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},e.bind=function(t,r){return e.resolve(r).bind(t)}}},{}],4:[function(e,t,r){"use strict";var n;"undefined"!=typeof Promise&&(n=Promise);var i=e("./promise")();i.noConflict=function(){try{Promise===i&&(Promise=n)}catch(e){}return i},t.exports=i},{"./promise":22}],5:[function(e,t,r){"use strict";var n=Object.create;if(n){var i=n(null),s=n(null);i[" size"]=s[" size"]=0}t.exports=function(t){var r,n=e("./util"),i=n.canEvaluate;n.isIdentifier;function s(e,r){var i;if(null!=e&&(i=e[r]),"function"!=typeof i){var s="Object "+n.classString(e)+" has no method '"+n.toString(r)+"'";throw new t.TypeError(s)}return i}function o(e){return s(e,this.pop()).apply(e,this)}function a(e){return e[this]}function u(e){var t=+this;return t<0&&(t=Math.max(0,t+e.length)),e[t]}t.prototype.call=function(e){var t=[].slice.call(arguments,1);return t.push(e),this._then(o,void 0,void 0,t,void 0)},t.prototype.get=function(e){var t;if("number"==typeof e)t=u;else if(i){var n=r(e);t=null!==n?n:a}else t=a;return this._then(t,void 0,void 0,e,void 0)}}},{"./util":36}],6:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var s=e("./util"),o=s.tryCatch,a=s.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var e=this,t=e;e._isCancellable();){if(!e._cancelBy(t)){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}var r=e._cancellationParent;if(null==r||!r._isCancellable()){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}e._isFollowing()&&e._followee().cancel(),e._setWillBeCancelled(),t=e,e=r}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(e){return e===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(e,t){if(s.isArray(e))for(var r=0;r<e.length;++r)this._doInvokeOnCancel(e[r],t);else if(void 0!==e)if("function"==typeof e){if(!t){var n=o(e).call(this._boundValue());n===a&&(this._attachExtraTrace(n.e),u.throwLater(n.e))}}else e._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var e=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,e)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=e("./es5").keys,i=r.tryCatch,s=r.errorObj;return function(e,o,a){return function(u){var c=a._boundValue();e:for(var l=0;l<e.length;++l){var h=e[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(u instanceof h)return i(o).call(c,u)}else if("function"==typeof h){var d=i(h).call(c,u);if(d===s)return d;if(d)return i(o).call(c,u)}else if(r.isObject(u)){for(var f=n(h),p=0;p<f.length;++p){var m=f[p];if(h[m]!=u[m])continue e}return i(o).call(c,u)}}return t}}}},{"./es5":13,"./util":36}],8:[function(e,t,r){"use strict";t.exports=function(e){var t=!1,r=[];function n(){this._trace=new n.CapturedTrace(i())}function i(){var e=r.length-1;if(e>=0)return r[e]}return e.prototype._promiseCreated=function(){},e.prototype._pushContext=function(){},e.prototype._popContext=function(){return null},e._peekContext=e.prototype._peekContext=function(){},n.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(void 0!==this._trace){var e=r.pop(),t=e._promiseCreated;return e._promiseCreated=null,t}return null},n.CapturedTrace=null,n.create=function(){if(t)return new n},n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var r=e.prototype._pushContext,s=e.prototype._popContext,o=e._peekContext,a=e.prototype._peekContext,u=e.prototype._promiseCreated;n.deactivateLongStackTraces=function(){e.prototype._pushContext=r,e.prototype._popContext=s,e._peekContext=o,e.prototype._peekContext=a,e.prototype._promiseCreated=u,t=!1},t=!0,e.prototype._pushContext=n.prototype._pushContext,e.prototype._popContext=n.prototype._popContext,e._peekContext=e.prototype._peekContext=i,e.prototype._promiseCreated=function(){var e=this._peekContext();e&&null==e._promiseCreated&&(e._promiseCreated=this)}},n}},{}],9:[function(t,r,n){"use strict";r.exports=function(r,n,i,s){var o,a,u,c,l=r._async,h=t("./errors").Warning,d=t("./util"),f=t("./es5"),p=d.canAttachTrace,m=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,y=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,b=null,_=!1,w=!(0==d.env("BLUEBIRD_DEBUG")),E=!(0==d.env("BLUEBIRD_WARNINGS")||!w&&!d.env("BLUEBIRD_WARNINGS")),x=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!w&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),C=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(E||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var e=[];function t(){for(var t=0;t<e.length;++t)e[t]._notifyUnhandledRejection();n()}function n(){e.length=0}c=function(r){e.push(r),setTimeout(t,1)},f.defineProperty(r,"_unhandledRejectionCheck",{value:t}),f.defineProperty(r,"_unhandledRejectionClear",{value:n})}(),r.prototype.suppressUnhandledRejections=function(){var e=this._target();e._bitField=-1048577&e._bitField|524288},r.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),c(this))},r.prototype._notifyUnhandledRejectionIsHandled=function(){G("rejectionHandled",o,void 0,this)},r.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},r.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},r.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var e=this._settledValue();this._setUnhandledRejectionIsNotified(),G("unhandledRejection",a,e,this)}},r.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},r.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},r.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},r.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},r.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},r.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},r.prototype._warn=function(e,t,r){return z(e,t,r||this)},r.onPossiblyUnhandledRejection=function(e){var t=r._getContext();a=d.contextBind(t,e)},r.onUnhandledRejectionHandled=function(e){var t=r._getContext();o=d.contextBind(t,e)};var k=function(){};r.longStackTraces=function(){if(l.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!re.longStackTraces&&K()){var e=r.prototype._captureStackTrace,t=r.prototype._attachExtraTrace,i=r.prototype._dereferenceTrace;re.longStackTraces=!0,k=function(){if(l.haveItemsQueued()&&!re.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");r.prototype._captureStackTrace=e,r.prototype._attachExtraTrace=t,r.prototype._dereferenceTrace=i,n.deactivateLongStackTraces(),re.longStackTraces=!1},r.prototype._captureStackTrace=U,r.prototype._attachExtraTrace=B,r.prototype._dereferenceTrace=V,n.activateLongStackTraces()}},r.hasLongStackTraces=function(){return re.longStackTraces&&K()};var O={unhandledrejection:{before:function(){var e=d.global.onunhandledrejection;return d.global.onunhandledrejection=null,e},after:function(e){d.global.onunhandledrejection=e}},rejectionhandled:{before:function(){var e=d.global.onrejectionhandled;return d.global.onrejectionhandled=null,e},after:function(e){d.global.onrejectionhandled=e}}},S=function(){var e=function(e,t){if(!e)return!d.global.dispatchEvent(t);var r;try{return r=e.before(),!d.global.dispatchEvent(t)}finally{e.after(r)}};try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new CustomEvent(t,{detail:r,cancelable:!0});return f.defineProperty(n,"promise",{value:r.promise}),f.defineProperty(n,"reason",{value:r.reason}),e(O[t],n)}}if("function"==typeof Event){t=new Event("CustomEvent");return d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=new Event(t,{cancelable:!0});return n.detail=r,f.defineProperty(n,"promise",{value:r.promise}),f.defineProperty(n,"reason",{value:r.reason}),e(O[t],n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(t),function(t,r){t=t.toLowerCase();var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!0,r),e(O[t],n)}}catch(e){}return function(){return!1}}(),T=d.isNode?function(){return e.emit.apply(e,arguments)}:d.global?function(e){var t="on"+e.toLowerCase(),r=d.global[t];return!!r&&(r.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function $(e,t){return{promise:t}}var j={promiseCreated:$,promiseFulfilled:$,promiseRejected:$,promiseResolved:$,promiseCancelled:$,promiseChained:function(e,t,r){return{promise:t,child:r}},warning:function(e,t){return{warning:t}},unhandledRejection:function(e,t,r){return{reason:t,promise:r}},rejectionHandled:$},N=function(e){var t=!1;try{t=T.apply(null,arguments)}catch(e){l.throwLater(e),t=!0}var r=!1;try{r=S(e,j[e].apply(null,arguments))}catch(e){l.throwLater(e),r=!0}return r||t};function A(){return!1}function I(e,t,r){var n=this;try{e(t,r,(function(e){if("function"!=typeof e)throw new TypeError("onCancel must be a function, got: "+d.toString(e));n._attachCancellationCallback(e)}))}catch(e){return e}}function P(e){if(!this._isCancellable())return this;var t=this._onCancel();void 0!==t?d.isArray(t)?t.push(e):this._setOnCancel([t,e]):this._setOnCancel(e)}function R(){return this._onCancelField}function q(e){this._onCancelField=e}function M(){this._cancellationParent=void 0,this._onCancelField=void 0}function L(e,t){if(0!=(1&t)){this._cancellationParent=e;var r=e._branchesRemainingToCancel;void 0===r&&(r=0),e._branchesRemainingToCancel=r+1}0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)}r.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?r.longStackTraces():!e.longStackTraces&&r.hasLongStackTraces()&&k()),"warnings"in e){var t=e.warnings;re.warnings=!!t,C=re.warnings,d.isObject(t)&&"wForgottenReturn"in t&&(C=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!re.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");r.prototype._clearCancellationData=M,r.prototype._propagateFrom=L,r.prototype._onCancel=R,r.prototype._setOnCancel=q,r.prototype._attachCancellationCallback=P,r.prototype._execute=I,D=L,re.cancellation=!0}if("monitoring"in e&&(e.monitoring&&!re.monitoring?(re.monitoring=!0,r.prototype._fireEvent=N):!e.monitoring&&re.monitoring&&(re.monitoring=!1,r.prototype._fireEvent=A)),"asyncHooks"in e&&d.nodeSupportsAsyncResource){var n=re.asyncHooks,o=!!e.asyncHooks;n!==o&&(re.asyncHooks=o,o?i():s())}return r},r.prototype._fireEvent=A,r.prototype._execute=function(e,t,r){try{e(t,r)}catch(e){return e}},r.prototype._onCancel=function(){},r.prototype._setOnCancel=function(e){},r.prototype._attachCancellationCallback=function(e){},r.prototype._captureStackTrace=function(){},r.prototype._attachExtraTrace=function(){},r.prototype._dereferenceTrace=function(){},r.prototype._clearCancellationData=function(){},r.prototype._propagateFrom=function(e,t){};var D=function(e,t){0!=(2&t)&&e._isBound()&&this._setBoundTo(e._boundTo)};function F(){var e=this._boundTo;return void 0!==e&&e instanceof r?e.isFulfilled()?e.value():void 0:e}function U(){this._trace=new ee(this._peekContext())}function B(e,t){if(p(e)){var r=this._trace;if(void 0!==r&&t&&(r=r._parent),void 0!==r)r.attachExtraTrace(e);else if(!e.__stackCleaned__){var n=W(e);d.notEnumerableProp(e,"stack",n.message+"\n"+n.stack.join("\n")),d.notEnumerableProp(e,"__stackCleaned__",!0)}}}function V(){this._trace=void 0}function z(e,t,n){if(re.warnings){var i,s=new h(e);if(t)n._attachExtraTrace(s);else if(re.longStackTraces&&(i=r._peekContext()))i.attachExtraTrace(s);else{var o=W(s);s.stack=o.message+"\n"+o.stack.join("\n")}N("warning",s)||Q(s,"",!0)}}function H(e){for(var t=[],r=0;r<e.length;++r){var n=e[r],i="    (No stack trace)"===n||v.test(n),s=i&&Z(n);i&&!s&&(_&&" "!==n.charAt(0)&&(n="    "+n),t.push(n))}return t}function W(e){var t=e.stack,r=e.toString();return t="string"==typeof t&&t.length>0?function(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),r=0;r<t.length;++r){var n=t[r];if("    (No stack trace)"===n||v.test(n))break}return r>0&&"SyntaxError"!=e.name&&(t=t.slice(r)),t}(e):["    (No stack trace)"],{message:r,stack:"SyntaxError"==e.name?t:H(t)}}function Q(e,t,r){if("undefined"!=typeof console){var n;if(d.isObject(e)){var i=e.stack;n=t+b(i,e)}else n=t+String(e);"function"==typeof u?u(n,r):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(n)}}function G(e,t,r,n){var i=!1;try{"function"==typeof t&&(i=!0,"rejectionHandled"===e?t(n):t(r,n))}catch(e){l.throwLater(e)}"unhandledRejection"===e?N(e,r,n)||i||Q(r,"Unhandled rejection "):N(e,n)}function J(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{t=e&&"function"==typeof e.toString?e.toString():d.toString(e);if(/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(e){}0===t.length&&(t="(empty array)")}return"(<"+function(e){var t=41;if(e.length<t)return e;return e.substr(0,t-3)+"..."}(t)+">, no stack trace)"}function K(){return"function"==typeof te}var Z=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function X(e){var t=e.match(Y);if(t)return{fileName:t[1],line:parseInt(t[2],10)}}function ee(e){this._parent=e,this._promisesCreated=0;var t=this._length=1+(void 0===e?0:e._length);te(this,ee),t>32&&this.uncycle()}d.inherits(ee,Error),n.CapturedTrace=ee,ee.prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],r={},n=0,i=this;void 0!==i;++n)t.push(i),i=i._parent;for(n=(e=this._length=n)-1;n>=0;--n){var s=t[n].stack;void 0===r[s]&&(r[s]=n)}for(n=0;n<e;++n){var o=r[t[n].stack];if(void 0!==o&&o!==n){o>0&&(t[o-1]._parent=void 0,t[o-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var a=n>0?t[n-1]:this;o<e-1?(a._parent=t[o+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var u=a._length+1,c=n-2;c>=0;--c)t[c]._length=u,u++;return}}}},ee.prototype.attachExtraTrace=function(e){if(!e.__stackCleaned__){this.uncycle();for(var t=W(e),r=t.message,n=[t.stack],i=this;void 0!==i;)n.push(H(i.stack.split("\n"))),i=i._parent;!function(e){for(var t=e[0],r=1;r<e.length;++r){for(var n=e[r],i=t.length-1,s=t[i],o=-1,a=n.length-1;a>=0;--a)if(n[a]===s){o=a;break}for(a=o;a>=0;--a){var u=n[a];if(t[i]!==u)break;t.pop(),i--}t=n}}(n),function(e){for(var t=0;t<e.length;++t)(0===e[t].length||t+1<e.length&&e[t][0]===e[t+1][0])&&(e.splice(t,1),t--)}(n),d.notEnumerableProp(e,"stack",function(e,t){for(var r=0;r<t.length-1;++r)t[r].push("From previous event:"),t[r]=t[r].join("\n");return r<t.length&&(t[r]=t[r].join("\n")),e+"\n"+t.join("\n")}(r,n)),d.notEnumerableProp(e,"__stackCleaned__",!0)}};var te=function(){var e=/^\s*at\s*/,t=function(e,t){return"string"==typeof e?e:void 0!==t.name&&void 0!==t.message?t.toString():J(t)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=e,b=t;var r=Error.captureStackTrace;return Z=function(e){return m.test(e)},function(e,t){Error.stackTraceLimit+=6,r(e,t),Error.stackTraceLimit-=6}}var n,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,b=t,_=!0,function(e){e.stack=(new Error).stack};try{throw new Error}catch(e){n="stack"in e}return!("stack"in i)&&n&&"number"==typeof Error.stackTraceLimit?(v=e,b=t,function(e){Error.stackTraceLimit+=6;try{throw new Error}catch(t){e.stack=t.stack}Error.stackTraceLimit-=6}):(b=function(e,t){return"string"==typeof e?e:"object"!=typeof t&&"function"!=typeof t||void 0===t.name||void 0===t.message?J(t):t.toString()},null)}();"undefined"!=typeof console&&void 0!==console.warn&&(u=function(e){console.warn(e)},d.isNode&&e.stderr.isTTY?u=function(e,t){var r=t?"[33m":"[31m";console.warn(r+e+"[0m\n")}:d.isNode||"string"!=typeof(new Error).stack||(u=function(e,t){console.warn("%c"+e,t?"color: darkorange":"color: red")}));var re={warnings:E,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return x&&r.longStackTraces(),{asyncHooks:function(){return re.asyncHooks},longStackTraces:function(){return re.longStackTraces},warnings:function(){return re.warnings},cancellation:function(){return re.cancellation},monitoring:function(){return re.monitoring},propagateFromFunction:function(){return D},boundValueFunction:function(){return F},checkForgottenReturns:function(e,t,r,n,i){if(void 0===e&&null!==t&&C){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&n._bitField))return;r&&(r+=" ");var s="",o="";if(t._trace){for(var a=t._trace.stack.split("\n"),u=H(a),c=u.length-1;c>=0;--c){var l=u[c];if(!y.test(l)){var h=l.match(g);h&&(s="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(u.length>0){var d=u[0];for(c=0;c<a.length;++c)if(a[c]===d){c>0&&(o="\n"+a[c-1]);break}}}var f="a promise was created in a "+r+"handler "+s+"but was not returned from it, see http://goo.gl/rRqMUw"+o;n._warn(f,!0,t)}},setBounds:function(e,t){if(K()){for(var r,n,i=(e.stack||"").split("\n"),s=(t.stack||"").split("\n"),o=-1,a=-1,u=0;u<i.length;++u){if(c=X(i[u])){r=c.fileName,o=c.line;break}}for(u=0;u<s.length;++u){var c;if(c=X(s[u])){n=c.fileName,a=c.line;break}}o<0||a<0||!r||!n||r!==n||o>=a||(Z=function(e){if(m.test(e))return!0;var t=X(e);return!!(t&&t.fileName===r&&o<=t.line&&t.line<=a)})}},warn:z,deprecated:function(e,t){var r=e+" is deprecated and will be removed in a future version.";return t&&(r+=" Use "+t+" instead."),z(r)},CapturedTrace:ee,fireDomEvent:S,fireGlobalEvent:T}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(e,t,r){"use strict";t.exports=function(e){function t(){return this.value}function r(){throw this.reason}e.prototype.return=e.prototype.thenReturn=function(r){return r instanceof e&&r.suppressUnhandledRejections(),this._then(t,void 0,void 0,{value:r},void 0)},e.prototype.throw=e.prototype.thenThrow=function(e){return this._then(r,void 0,void 0,{reason:e},void 0)},e.prototype.catchThrow=function(e){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:e},void 0);var t=arguments[1],n=function(){throw t};return this.caught(e,n)},e.prototype.catchReturn=function(r){if(arguments.length<=1)return r instanceof e&&r.suppressUnhandledRejections(),this._then(void 0,t,void 0,{value:r},void 0);var n=arguments[1];n instanceof e&&n.suppressUnhandledRejections();var i=function(){return n};return this.caught(r,i)}}},{}],11:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.reduce,n=e.all;function i(){return n(this)}e.prototype.each=function(e){return r(this,e,t,0)._then(i,void 0,void 0,this,void 0)},e.prototype.mapSeries=function(e){return r(this,e,t,t)},e.each=function(e,n){return r(e,n,t,0)._then(i,void 0,void 0,e,void 0)},e.mapSeries=function(e,n){return r(e,n,t,t)}}},{}],12:[function(e,t,r){"use strict";var n,i,s=e("./es5"),o=s.freeze,a=e("./util"),u=a.inherits,c=a.notEnumerableProp;function l(e,t){function r(n){if(!(this instanceof r))return new r(n);c(this,"message","string"==typeof n?n:t),c(this,"name",e),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return u(r,Error),r}var h=l("Warning","warning"),d=l("CancellationError","cancellation error"),f=l("TimeoutError","timeout error"),p=l("AggregateError","aggregate error");try{n=TypeError,i=RangeError}catch(e){n=l("TypeError","type error"),i=l("RangeError","range error")}for(var m="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),y=0;y<m.length;++y)"function"==typeof Array.prototype[m[y]]&&(p.prototype[m[y]]=Array.prototype[m[y]]);s.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var g=0;function v(e){if(!(this instanceof v))return new v(e);c(this,"name","OperationalError"),c(this,"message",e),this.cause=e,this.isOperational=!0,e instanceof Error?(c(this,"message",e.message),c(this,"stack",e.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}p.prototype.toString=function(){var e=Array(4*g+1).join(" "),t="\n"+e+"AggregateError of:\n";g++,e=Array(4*g+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split("\n"),s=0;s<i.length;++s)i[s]=e+i[s];t+=(n=i.join("\n"))+"\n"}return g--,t},u(v,Error);var b=Error.__BluebirdErrorTypes__;b||(b=o({CancellationError:d,TimeoutError:f,OperationalError:v,RejectionError:v,AggregateError:p}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:n,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(e,t,r){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);return!(r&&!r.writable&&!r.set)}};else{var i={}.hasOwnProperty,s={}.toString,o={}.constructor.prototype,a=function(e){var t=[];for(var r in e)i.call(e,r)&&t.push(r);return t};t.exports={isArray:function(e){try{return"[object Array]"===s.call(e)}catch(e){return!1}},keys:a,names:a,defineProperty:function(e,t,r){return e[t]=r.value,e},getDescriptor:function(e,t){return{value:e[t]}},freeze:function(e){return e},getPrototypeOf:function(e){try{return Object(e).constructor.prototype}catch(e){return o}},isES5:n,propertyIsWritable:function(){return!0}}}},{}],14:[function(e,t,r){"use strict";t.exports=function(e,t){var r=e.map;e.prototype.filter=function(e,n){return r(this,e,n,t)},e.filter=function(e,n,i){return r(e,n,i,t)}}},{}],15:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),s=t.CancellationError,o=i.errorObj,a=e("./catch_filter")(n);function u(e,t,r){this.promise=e,this.type=t,this.handler=r,this.called=!1,this.cancelPromise=null}function c(e){this.finallyHandler=e}function l(e,t){return null!=e.cancelPromise&&(arguments.length>1?e.cancelPromise._reject(t):e.cancelPromise._cancel(),e.cancelPromise=null,!0)}function h(){return f.call(this,this.promise._target()._settledValue())}function d(e){if(!l(this,e))return o.e=e,o}function f(e){var i=this.promise,a=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?a.call(i._boundValue()):a.call(i._boundValue(),e);if(u===n)return u;if(void 0!==u){i._setReturnedNonUndefined();var f=r(u,i);if(f instanceof t){if(null!=this.cancelPromise){if(f._isCancelled()){var p=new s("late cancellation observer");return i._attachExtraTrace(p),o.e=p,o}f.isPending()&&f._attachCancellationCallback(new c(this))}return f._then(h,d,void 0,this,void 0)}}}return i.isRejected()?(l(this),o.e=e,o):(l(this),e)}return u.prototype.isFinallyHandler=function(){return 0===this.type},c.prototype._resultCancelled=function(){l(this.finallyHandler)},t.prototype._passThrough=function(e,t,r,n){return"function"!=typeof e?this.then():this._then(r,n,void 0,new u(this,t,e),void 0)},t.prototype.lastly=t.prototype.finally=function(e){return this._passThrough(e,0,f,f)},t.prototype.tap=function(e){return this._passThrough(e,1,f)},t.prototype.tapCatch=function(e){var r=arguments.length;if(1===r)return this._passThrough(e,1,void 0,f);var n,s=new Array(r-1),o=0;for(n=0;n<r-1;++n){var u=arguments[n];if(!i.isObject(u))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));s[o++]=u}s.length=o;var c=arguments[n];return this._passThrough(a(s,c,this),1,void 0,f)},u}},{"./catch_filter":7,"./util":36}],16:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s,o){var a=e("./errors").TypeError,u=e("./util"),c=u.errorObj,l=u.tryCatch,h=[];function d(e,r,i,s){if(o.cancellation()){var a=new t(n),u=this._finallyPromise=new t(n);this._promise=a.lastly((function(){return u})),a._captureStackTrace(),a._setOnCancel(this)}else{(this._promise=new t(n))._captureStackTrace()}this._stack=s,this._generatorFunction=e,this._receiver=r,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(d,s),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if(void 0!==this._generator.return)this._promise._pushContext(),e=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=l(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},d.prototype._promiseFulfilled=function(e){this._yieldedPromise=null,this._promise._pushContext();var t=l(this._generator.next).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._promiseRejected=function(e){this._yieldedPromise=null,this._promise._attachExtraTrace(e),this._promise._pushContext();var t=l(this._generator.throw).call(this._generator,e);this._promise._popContext(),this._continue(t)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(e){var r=this._promise;if(e===c)return this._cleanup(),this._cancellationPhase?r.cancel():r._rejectCallback(e.e,!1);var n=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?r.cancel():r._resolveCallback(n);var s=i(n,this._promise);if(s instanceof t||(s=function(e,r,n){for(var s=0;s<r.length;++s){n._pushContext();var o=l(r[s])(e);if(n._popContext(),o===c){n._pushContext();var a=t.reject(c.e);return n._popContext(),a}var u=i(o,n);if(u instanceof t)return u}return null}(s,this._yieldHandlers,this._promise),null!==s)){var o=(s=s._target())._bitField;0==(50397184&o)?(this._yieldedPromise=s,s._proxy(this,null)):0!=(33554432&o)?t._async.invoke(this._promiseFulfilled,this,s._value()):0!=(16777216&o)?t._async.invoke(this._promiseRejected,this,s._reason()):this._promiseCancelled()}else this._promiseRejected(new a("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(n))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},t.coroutine=function(e,t){if("function"!=typeof e)throw new a("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=Object(t).yieldHandler,n=d,i=(new Error).stack;return function(){var t=e.apply(this,arguments),s=new n(void 0,void 0,r,i),o=s.promise();return s._generator=t,s._promiseFulfilled(void 0),o}},t.coroutine.addYieldHandler=function(e){if("function"!=typeof e)throw new a("expecting a function but got "+u.classString(e));h.push(e)},t.spawn=function(e){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof e)return r("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=new d(e,this),i=n.promise();return n._run(t.spawn),i}}},{"./errors":12,"./util":36}],17:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s){var o=e("./util");o.canEvaluate,o.tryCatch,o.errorObj;t.join=function(){var e,t=arguments.length-1;t>0&&"function"==typeof arguments[t]&&(e=arguments[t]);var n=[].slice.call(arguments);e&&n.pop();var i=new r(n).promise();return void 0!==e?i.spread(e):i}}},{"./util":36}],18:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s,o){var a=e("./util"),u=a.tryCatch,c=a.errorObj,l=t._async;function h(e,r,n,i){this.constructor$(e),this._promise._captureStackTrace();var o=t._getContext();if(this._callback=a.contextBind(o,r),this._preservedValues=i===s?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0),a.isArray(e))for(var u=0;u<e.length;++u){var c=e[u];c instanceof t&&c.suppressUnhandledRejections()}}function d(e,r,i,s){if("function"!=typeof r)return n("expecting a function but got "+a.classString(r));var o=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+a.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(i.concurrency)));o=i.concurrency}return new h(e,r,o="number"==typeof o&&isFinite(o)&&o>=1?o:0,s).promise()}a.inherits(h,r),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(e,r){var n=this._values,s=this.length(),a=this._preservedValues,l=this._limit;if(r<0){if(n[r=-1*r-1]=e,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return n[r]=e,this._queue.push(r),!1;null!==a&&(a[r]=e);var h=this._promise,d=this._callback,f=h._boundValue();h._pushContext();var p=u(d).call(f,e,r,s),m=h._popContext();if(o.checkForgottenReturns(p,m,null!==a?"Promise.filter":"Promise.map",h),p===c)return this._reject(p.e),!0;var y=i(p,this._promise);if(y instanceof t){var g=(y=y._target())._bitField;if(0==(50397184&g))return l>=1&&this._inFlight++,n[r]=y,y._proxy(this,-1*(r+1)),!1;if(0==(33554432&g))return 0!=(16777216&g)?(this._reject(y._reason()),!0):(this._cancel(),!0);p=y._value()}n[r]=p}return++this._totalResolved>=s&&(null!==a?this._filter(n,a):this._resolve(n),!0)},h.prototype._drainQueue=function(){for(var e=this._queue,t=this._limit,r=this._values;e.length>0&&this._inFlight<t;){if(this._isResolved())return;var n=e.pop();this._promiseFulfilled(r[n],n)}},h.prototype._filter=function(e,t){for(var r=t.length,n=new Array(r),i=0,s=0;s<r;++s)e[s]&&(n[i++]=t[s]);n.length=i,this._resolve(n)},h.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(e,t){return d(this,e,t,null)},t.map=function(e,t,r,n){return d(e,t,r,n)}}},{"./util":36}],19:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s){var o=e("./util"),a=o.tryCatch;t.method=function(e){if("function"!=typeof e)throw new t.TypeError("expecting a function but got "+o.classString(e));return function(){var n=new t(r);n._captureStackTrace(),n._pushContext();var i=a(e).apply(this,arguments),o=n._popContext();return s.checkForgottenReturns(i,o,"Promise.method",n),n._resolveFromSyncValue(i),n}},t.attempt=t.try=function(e){if("function"!=typeof e)return i("expecting a function but got "+o.classString(e));var n,u=new t(r);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){s.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];n=o.isArray(c)?a(e).apply(l,c):a(e).call(l,c)}else n=a(e)();var h=u._popContext();return s.checkForgottenReturns(n,h,"Promise.try",u),u._resolveFromSyncValue(n),u},t.prototype._resolveFromSyncValue=function(e){e===o.errorObj?this._rejectCallback(e.e,!1):this._resolveCallback(e,!0)}}},{"./util":36}],20:[function(e,t,r){"use strict";var n=e("./util"),i=n.maybeWrapAsError,s=e("./errors").OperationalError,o=e("./es5");var a=/^(?:name|message|stack|cause)$/;function u(e){var t;if(function(e){return e instanceof Error&&o.getPrototypeOf(e)===Error.prototype}(e)){(t=new s(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var r=o.keys(e),i=0;i<r.length;++i){var u=r[i];a.test(u)||(t[u]=e[u])}return t}return n.markAsOriginatingFromRejection(e),e}t.exports=function(e,t){return function(r,n){if(null!==e){if(r){var s=u(i(r));e._attachExtraTrace(s),e._reject(s)}else if(t){var o=[].slice.call(arguments,1);e._fulfill(o)}else e._fulfill(n);e=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(e,t,r){"use strict";t.exports=function(t){var r=e("./util"),n=t._async,i=r.tryCatch,s=r.errorObj;function o(e,t){if(!r.isArray(e))return a.call(this,e,t);var o=i(t).apply(this._boundValue(),[null].concat(e));o===s&&n.throwLater(o.e)}function a(e,t){var r=this._boundValue(),o=void 0===e?i(t).call(r,null):i(t).call(r,null,e);o===s&&n.throwLater(o.e)}function u(e,t){if(!e){var r=new Error(e+"");r.cause=e,e=r}var o=i(t).call(this._boundValue(),e);o===s&&n.throwLater(o.e)}t.prototype.asCallback=t.prototype.nodeify=function(e,t){if("function"==typeof e){var r=a;void 0!==t&&Object(t).spread&&(r=o),this._then(r,u,void 0,this,e)}return this}}},{"./util":36}],22:[function(t,r,n){"use strict";r.exports=function(){var n=function(){return new v("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new I.PromiseInspection(this._target())},s=function(e){return I.reject(new v(e))};function o(){}var a={},u=t("./util");u.setReflectHandler(i);var c=function(){var t=e.domain;return void 0===t?null:t},l=function(){return{domain:c(),async:null}},h=u.isNode&&u.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,d=function(){return{domain:c(),async:new h("Bluebird::Promise")}},f=u.isNode?l:function(){return null};u.notEnumerableProp(I,"_getContext",f);var p=t("./es5"),m=t("./async"),y=new m;p.defineProperty(I,"_async",{value:y});var g=t("./errors"),v=I.TypeError=g.TypeError;I.RangeError=g.RangeError;var b=I.CancellationError=g.CancellationError;I.TimeoutError=g.TimeoutError,I.OperationalError=g.OperationalError,I.RejectionError=g.OperationalError,I.AggregateError=g.AggregateError;var _=function(){},w={},E={},x=t("./thenables")(I,_),C=t("./promise_array")(I,_,x,s,o),k=t("./context")(I),O=k.create,S=t("./debuggability")(I,k,(function(){f=d,u.notEnumerableProp(I,"_getContext",d)}),(function(){f=l,u.notEnumerableProp(I,"_getContext",l)})),T=(S.CapturedTrace,t("./finally")(I,x,E)),$=t("./catch_filter")(E),j=t("./nodeback"),N=u.errorObj,A=u.tryCatch;function I(e){e!==_&&function(e,t){if(null==e||e.constructor!==I)throw new v("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof t)throw new v("expecting a function but got "+u.classString(t))}(this,e),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(e),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function P(e){this.promise._resolveCallback(e)}function R(e){this.promise._rejectCallback(e,!1)}function q(e){var t=new I(_);t._fulfillmentHandler0=e,t._rejectionHandler0=e,t._promise0=e,t._receiver0=e}return I.prototype.toString=function(){return"[object Promise]"},I.prototype.caught=I.prototype.catch=function(e){var t=arguments.length;if(t>1){var r,n=new Array(t-1),i=0;for(r=0;r<t-1;++r){var o=arguments[r];if(!u.isObject(o))return s("Catch statement predicate: expecting an object but got "+u.classString(o));n[i++]=o}if(n.length=i,"function"!=typeof(e=arguments[r]))throw new v("The last argument to .catch() must be a function, got "+u.toString(e));return this.then(void 0,$(n,e,this))}return this.then(void 0,e)},I.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},I.prototype.then=function(e,t){if(S.warnings()&&arguments.length>0&&"function"!=typeof e&&"function"!=typeof t){var r=".then() only accepts functions but was passed: "+u.classString(e);arguments.length>1&&(r+=", "+u.classString(t)),this._warn(r)}return this._then(e,t,void 0,void 0,void 0)},I.prototype.done=function(e,t){this._then(e,t,void 0,void 0,void 0)._setIsFinal()},I.prototype.spread=function(e){return"function"!=typeof e?s("expecting a function but got "+u.classString(e)):this.all()._then(e,void 0,void 0,w,void 0)},I.prototype.toJSON=function(){var e={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(e.fulfillmentValue=this.value(),e.isFulfilled=!0):this.isRejected()&&(e.rejectionReason=this.reason(),e.isRejected=!0),e},I.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},I.prototype.error=function(e){return this.caught(u.originatesFromRejection,e)},I.getNewLibraryCopy=r.exports,I.is=function(e){return e instanceof I},I.fromNode=I.fromCallback=function(e){var t=new I(_);t._captureStackTrace();var r=arguments.length>1&&!!Object(arguments[1]).multiArgs,n=A(e)(j(t,r));return n===N&&t._rejectCallback(n.e,!0),t._isFateSealed()||t._setAsyncGuaranteed(),t},I.all=function(e){return new C(e).promise()},I.cast=function(e){var t=x(e);return t instanceof I||((t=new I(_))._captureStackTrace(),t._setFulfilled(),t._rejectionHandler0=e),t},I.resolve=I.fulfilled=I.cast,I.reject=I.rejected=function(e){var t=new I(_);return t._captureStackTrace(),t._rejectCallback(e,!0),t},I.setScheduler=function(e){if("function"!=typeof e)throw new v("expecting a function but got "+u.classString(e));return y.setScheduler(e)},I.prototype._then=function(e,t,r,n,i){var s=void 0!==i,o=s?i:new I(_),a=this._target(),c=a._bitField;s||(o._propagateFrom(this,3),o._captureStackTrace(),void 0===n&&0!=(2097152&this._bitField)&&(n=0!=(50397184&c)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,o));var l=f();if(0!=(50397184&c)){var h,d,p=a._settlePromiseCtx;0!=(33554432&c)?(d=a._rejectionHandler0,h=e):0!=(16777216&c)?(d=a._fulfillmentHandler0,h=t,a._unsetRejectionIsUnhandled()):(p=a._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),a._attachExtraTrace(d),h=t),y.invoke(p,a,{handler:u.contextBind(l,h),promise:o,receiver:n,value:d})}else a._addCallbacks(e,t,o,n,l);return o},I.prototype._length=function(){return 65535&this._bitField},I.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},I.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},I.prototype._setLength=function(e){this._bitField=-65536&this._bitField|65535&e},I.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},I.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},I.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},I.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},I.prototype._isFinal=function(){return(4194304&this._bitField)>0},I.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},I.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},I.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},I.prototype._setAsyncGuaranteed=function(){if(!y.hasCustomScheduler()){var e=this._bitField;this._bitField=e|(536870912&e)>>2^134217728}},I.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},I.prototype._receiverAt=function(e){var t=0===e?this._receiver0:this[4*e-4+3];if(t!==a)return void 0===t&&this._isBound()?this._boundValue():t},I.prototype._promiseAt=function(e){return this[4*e-4+2]},I.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},I.prototype._rejectionHandlerAt=function(e){return this[4*e-4+1]},I.prototype._boundValue=function(){},I.prototype._migrateCallback0=function(e){e._bitField;var t=e._fulfillmentHandler0,r=e._rejectionHandler0,n=e._promise0,i=e._receiverAt(0);void 0===i&&(i=a),this._addCallbacks(t,r,n,i,null)},I.prototype._migrateCallbackAt=function(e,t){var r=e._fulfillmentHandlerAt(t),n=e._rejectionHandlerAt(t),i=e._promiseAt(t),s=e._receiverAt(t);void 0===s&&(s=a),this._addCallbacks(r,n,i,s,null)},I.prototype._addCallbacks=function(e,t,r,n,i){var s=this._length();if(s>=65531&&(s=0,this._setLength(0)),0===s)this._promise0=r,this._receiver0=n,"function"==typeof e&&(this._fulfillmentHandler0=u.contextBind(i,e)),"function"==typeof t&&(this._rejectionHandler0=u.contextBind(i,t));else{var o=4*s-4;this[o+2]=r,this[o+3]=n,"function"==typeof e&&(this[o+0]=u.contextBind(i,e)),"function"==typeof t&&(this[o+1]=u.contextBind(i,t))}return this._setLength(s+1),s},I.prototype._proxy=function(e,t){this._addCallbacks(void 0,void 0,t,e,null)},I.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(n(),!1);var r=x(e,this);if(!(r instanceof I))return this._fulfill(e);t&&this._propagateFrom(r,2);var i=r._target();if(i!==this){var s=i._bitField;if(0==(50397184&s)){var o=this._length();o>0&&i._migrateCallback0(this);for(var a=1;a<o;++a)i._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!=(33554432&s))this._fulfill(i._value());else if(0!=(16777216&s))this._reject(i._reason());else{var u=new b("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(n())}},I.prototype._rejectCallback=function(e,t,r){var n=u.ensureErrorObject(e),i=n===e;if(!i&&!r&&S.warnings()){var s="a promise was rejected with a non-error: "+u.classString(e);this._warn(s,!0)}this._attachExtraTrace(n,!!t&&i),this._reject(e)},I.prototype._resolveFromExecutor=function(e){if(e!==_){var t=this;this._captureStackTrace(),this._pushContext();var r=!0,n=this._execute(e,(function(e){t._resolveCallback(e)}),(function(e){t._rejectCallback(e,r)}));r=!1,this._popContext(),void 0!==n&&t._rejectCallback(n,!0)}},I.prototype._settlePromiseFromHandler=function(e,t,r,n){var i=n._bitField;if(0==(65536&i)){var s;n._pushContext(),t===w?r&&"number"==typeof r.length?s=A(e).apply(this._boundValue(),r):(s=N).e=new v("cannot .spread() a non-array: "+u.classString(r)):s=A(e).call(t,r);var o=n._popContext();0==(65536&(i=n._bitField))&&(s===E?n._reject(r):s===N?n._rejectCallback(s.e,!1):(S.checkForgottenReturns(s,o,"",n,this),n._resolveCallback(s)))}},I.prototype._target=function(){for(var e=this;e._isFollowing();)e=e._followee();return e},I.prototype._followee=function(){return this._rejectionHandler0},I.prototype._setFollowee=function(e){this._rejectionHandler0=e},I.prototype._settlePromise=function(e,t,r,n){var s=e instanceof I,a=this._bitField,u=0!=(134217728&a);0!=(65536&a)?(s&&e._invokeInternalOnCancel(),r instanceof T&&r.isFinallyHandler()?(r.cancelPromise=e,A(t).call(r,n)===N&&e._reject(N.e)):t===i?e._fulfill(i.call(r)):r instanceof o?r._promiseCancelled(e):s||e instanceof C?e._cancel():r.cancel()):"function"==typeof t?s?(u&&e._setAsyncGuaranteed(),this._settlePromiseFromHandler(t,r,n,e)):t.call(r,n,e):r instanceof o?r._isResolved()||(0!=(33554432&a)?r._promiseFulfilled(n,e):r._promiseRejected(n,e)):s&&(u&&e._setAsyncGuaranteed(),0!=(33554432&a)?e._fulfill(n):e._reject(n))},I.prototype._settlePromiseLateCancellationObserver=function(e){var t=e.handler,r=e.promise,n=e.receiver,i=e.value;"function"==typeof t?r instanceof I?this._settlePromiseFromHandler(t,n,i,r):t.call(n,i,r):r instanceof I&&r._reject(i)},I.prototype._settlePromiseCtx=function(e){this._settlePromise(e.promise,e.handler,e.receiver,e.value)},I.prototype._settlePromise0=function(e,t,r){var n=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(n,e,i,t)},I.prototype._clearCallbackDataAtIndex=function(e){var t=4*e-4;this[t+2]=this[t+3]=this[t+0]=this[t+1]=void 0},I.prototype._fulfill=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(e===this){var r=n();return this._attachExtraTrace(r),this._reject(r)}this._setFulfilled(),this._rejectionHandler0=e,(65535&t)>0&&(0!=(134217728&t)?this._settlePromises():y.settlePromises(this),this._dereferenceTrace())}},I.prototype._reject=function(e){var t=this._bitField;if(!((117506048&t)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=e,this._isFinal())return y.fatalError(e,u.isNode);(65535&t)>0?y.settlePromises(this):this._ensurePossibleRejectionHandled()}},I.prototype._fulfillPromises=function(e,t){for(var r=1;r<e;r++){var n=this._fulfillmentHandlerAt(r),i=this._promiseAt(r),s=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,s,t)}},I.prototype._rejectPromises=function(e,t){for(var r=1;r<e;r++){var n=this._rejectionHandlerAt(r),i=this._promiseAt(r),s=this._receiverAt(r);this._clearCallbackDataAtIndex(r),this._settlePromise(i,n,s,t)}},I.prototype._settlePromises=function(){var e=this._bitField,t=65535&e;if(t>0){if(0!=(16842752&e)){var r=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,r,e),this._rejectPromises(t,r)}else{var n=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,n,e),this._fulfillPromises(t,n)}this._setLength(0)}this._clearCancellationData()},I.prototype._settledValue=function(){var e=this._bitField;return 0!=(33554432&e)?this._rejectionHandler0:0!=(16777216&e)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&p.defineProperty(I.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),I.defer=I.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new I(_),resolve:P,reject:R}},u.notEnumerableProp(I,"_makeSelfResolutionError",n),t("./method")(I,_,x,s,S),t("./bind")(I,_,x,S),t("./cancel")(I,C,s,S),t("./direct_resolve")(I),t("./synchronous_inspection")(I),t("./join")(I,C,x,_,y),I.Promise=I,I.version="3.7.2",t("./call_get.js")(I),t("./generators.js")(I,s,_,x,o,S),t("./map.js")(I,C,s,x,_,S),t("./nodeify.js")(I),t("./promisify.js")(I,_),t("./props.js")(I,C,x,s),t("./race.js")(I,_,x,s),t("./reduce.js")(I,C,s,x,_,S),t("./settle.js")(I,C,S),t("./some.js")(I,C,s),t("./timers.js")(I,_,S),t("./using.js")(I,s,x,O,_,S),t("./any.js")(I),t("./each.js")(I,_),t("./filter.js")(I,_),u.toFastProperties(I),u.toFastProperties(I.prototype),q({a:1}),q({b:2}),q({c:3}),q(1),q((function(){})),q(void 0),q(!1),q(new I(_)),S.setBounds(m.firstLineError,u.lastLineError),I}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s){var o=e("./util");o.isArray;function a(e){var n=this._promise=new t(r);e instanceof t&&(n._propagateFrom(e,3),e.suppressUnhandledRejections()),n._setOnCancel(this),this._values=e,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return o.inherits(a,s),a.prototype.length=function(){return this._length},a.prototype.promise=function(){return this._promise},a.prototype._init=function e(r,s){var a=n(this._values,this._promise);if(a instanceof t){var u=(a=a._target())._bitField;if(this._values=a,0==(50397184&u))return this._promise._setAsyncGuaranteed(),a._then(e,this._reject,void 0,this,s);if(0==(33554432&u))return 0!=(16777216&u)?this._reject(a._reason()):this._cancel();a=a._value()}if(null!==(a=o.asArray(a)))0!==a.length?this._iterate(a):-5===s?this._resolveEmptyArray():this._resolve(function(e){switch(e){case-2:return[];case-3:return{};case-6:return new Map}}(s));else{var c=i("expecting an array or an iterable object but got "+o.classString(a)).reason();this._promise._rejectCallback(c,!1)}},a.prototype._iterate=function(e){var r=this.getActualLength(e.length);this._length=r,this._values=this.shouldCopyValues()?new Array(r):this._values;for(var i=this._promise,s=!1,o=null,a=0;a<r;++a){var u=n(e[a],i);o=u instanceof t?(u=u._target())._bitField:null,s?null!==o&&u.suppressUnhandledRejections():null!==o?0==(50397184&o)?(u._proxy(this,a),this._values[a]=u):s=0!=(33554432&o)?this._promiseFulfilled(u._value(),a):0!=(16777216&o)?this._promiseRejected(u._reason(),a):this._promiseCancelled(a):s=this._promiseFulfilled(u,a)}s||i._setAsyncGuaranteed()},a.prototype._isResolved=function(){return null===this._values},a.prototype._resolve=function(e){this._values=null,this._promise._fulfill(e)},a.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},a.prototype._reject=function(e){this._values=null,this._promise._rejectCallback(e,!1)},a.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseCancelled=function(){return this._cancel(),!0},a.prototype._promiseRejected=function(e){return this._totalResolved++,this._reject(e),!0},a.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var r=0;r<e.length;++r)e[r]instanceof t&&e[r].cancel()}},a.prototype.shouldCopyValues=function(){return!0},a.prototype.getActualLength=function(e){return e},a}},{"./util":36}],24:[function(e,t,r){"use strict";t.exports=function(t,r){var n={},i=e("./util"),s=e("./nodeback"),o=i.withAppended,a=i.maybeWrapAsError,u=i.canEvaluate,c=e("./errors").TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(e){return i.isIdentifier(e)&&"_"!==e.charAt(0)&&"constructor"!==e};function f(e){return!h.test(e)}function p(e){try{return!0===e.__isPromisified__}catch(e){return!1}}function m(e,t,r){var n=i.getDataPropertyOrDefault(e,t+r,l);return!!n&&p(n)}function y(e,t,r,n){for(var s=i.inheritedDataKeys(e),o=[],a=0;a<s.length;++a){var u=s[a],l=e[u],h=n===d||d(u);"function"!=typeof l||p(l)||m(e,u,t)||!n(u,l,e,h)||o.push(u,l)}return function(e,t,r){for(var n=0;n<e.length;n+=2){var i=e[n];if(r.test(i))for(var s=i.replace(r,""),o=0;o<e.length;o+=2)if(e[o]===s)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",t))}}(o,t,r),o}var g;var v=u?g:function(e,u,c,l,h,d){var f=function(){return this}(),p=e;function m(){var i=u;u===n&&(i=this);var c=new t(r);c._captureStackTrace();var l="string"==typeof p&&this!==f?this[p]:e,h=s(c,d);try{l.apply(i,o(arguments,h))}catch(e){c._rejectCallback(a(e),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"==typeof p&&(e=l),i.notEnumerableProp(m,"__isPromisified__",!0),m};function b(e,t,r,s,o){for(var a=new RegExp(t.replace(/([$])/,"\\$")+"$"),u=y(e,t,a,r),c=0,l=u.length;c<l;c+=2){var h=u[c],d=u[c+1],f=h+t;if(s===v)e[f]=v(h,n,h,d,t,o);else{var p=s(d,(function(){return v(h,n,h,d,t,o)}));i.notEnumerableProp(p,"__isPromisified__",!0),e[f]=p}}return i.toFastProperties(e),e}t.promisify=function(e,t){if("function"!=typeof e)throw new c("expecting a function but got "+i.classString(e));if(p(e))return e;var r=function(e,t,r){return v(e,t,void 0,e,null,r)}(e,void 0===(t=Object(t)).context?n:t.context,!!t.multiArgs);return i.copyDescriptors(e,r,f),r},t.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var r=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n="Async");var s=t.filter;"function"!=typeof s&&(s=d);var o=t.promisifier;if("function"!=typeof o&&(o=v),!i.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=i.inheritedDataKeys(e),u=0;u<a.length;++u){var l=e[a[u]];"constructor"!==a[u]&&i.isClass(l)&&(b(l.prototype,n,s,o,r),b(l,n,s,o,r))}return b(e,n,s,o,r)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var s,o=e("./util"),a=o.isObject,u=e("./es5");"function"==typeof Map&&(s=Map);var c=function(){var e=0,t=0;function r(r,n){this[e]=r,this[e+t]=n,e++}return function(n){t=n.size,e=0;var i=new Array(2*n.size);return n.forEach(r,i),i}}();function l(e){var t,r=!1;if(void 0!==s&&e instanceof s)t=c(e),r=!0;else{var n=u.keys(e),i=n.length;t=new Array(2*i);for(var o=0;o<i;++o){var a=n[o];t[o]=e[a],t[o+i]=a}}this.constructor$(t),this._isMap=r,this._init$(void 0,r?-6:-3)}function h(e){var r,s=n(e);return a(s)?(r=s instanceof t?s._then(t.props,void 0,void 0,void 0,void 0):new l(s).promise(),s instanceof t&&r._propagateFrom(s,2),r):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}o.inherits(l,r),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(e,t){if(this._values[t]=e,++this._totalResolved>=this._length){var r;if(this._isMap)r=function(e){for(var t=new s,r=e.length/2|0,n=0;n<r;++n){var i=e[r+n],o=e[n];t.set(i,o)}return t}(this._values);else{r={};for(var n=this.length(),i=0,o=this.length();i<o;++i)r[this._values[i+n]]=this._values[i]}return this._resolve(r),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(e){return e>>1},t.prototype.props=function(){return h(this)},t.props=function(e){return h(e)}}},{"./es5":13,"./util":36}],26:[function(e,t,r){"use strict";function n(e){this._capacity=e,this._length=0,this._front=0}n.prototype._willBeOverCapacity=function(e){return this._capacity<e},n.prototype._pushOne=function(e){var t=this.length();this._checkCapacity(t+1),this[this._front+t&this._capacity-1]=e,this._length=t+1},n.prototype.push=function(e,t,r){var n=this.length()+3;if(this._willBeOverCapacity(n))return this._pushOne(e),this._pushOne(t),void this._pushOne(r);var i=this._front+n-3;this._checkCapacity(n);var s=this._capacity-1;this[i+0&s]=e,this[i+1&s]=t,this[i+2&s]=r,this._length=n},n.prototype.shift=function(){var e=this._front,t=this[e];return this[e]=void 0,this._front=e+1&this._capacity-1,this._length--,t},n.prototype.length=function(){return this._length},n.prototype._checkCapacity=function(e){this._capacity<e&&this._resizeTo(this._capacity<<1)},n.prototype._resizeTo=function(e){var t=this._capacity;this._capacity=e,function(e,t,r,n,i){for(var s=0;s<i;++s)r[s+n]=e[s+t],e[s+t]=void 0}(this,0,this,t,this._front+this._length&t-1)},t.exports=n},{}],27:[function(e,t,r){"use strict";t.exports=function(t,r,n,i){var s=e("./util");function o(e,a){var u,c=n(e);if(c instanceof t)return(u=c).then((function(e){return o(e,u)}));if(null===(e=s.asArray(e)))return i("expecting an array or an iterable object but got "+s.classString(e));var l=new t(r);void 0!==a&&l._propagateFrom(a,3);for(var h=l._fulfill,d=l._reject,f=0,p=e.length;f<p;++f){var m=e[f];(void 0!==m||f in e)&&t.cast(m)._then(h,d,void 0,l,null)}return l}t.race=function(e){return o(e,void 0)},t.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s,o){var a=e("./util"),u=a.tryCatch;function c(e,r,n,i){this.constructor$(e);var o=t._getContext();this._fn=a.contextBind(o,r),void 0!==n&&(n=t.resolve(n))._attachCancellationCallback(this),this._initialValue=n,this._currentCancellable=null,this._eachValues=i===s?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(e,t){this.isFulfilled()?t._resolve(e):t._reject(e)}function h(e,t,r,i){return"function"!=typeof t?n("expecting a function but got "+a.classString(t)):new c(e,t,r,i).promise()}function d(e){this.accum=e,this.array._gotAccum(e);var r=i(this.value,this.array._promise);return r instanceof t?(this.array._currentCancellable=r,r._then(f,void 0,void 0,this,void 0)):f.call(this,r)}function f(e){var r,n=this.array,i=n._promise,s=u(n._fn);i._pushContext(),(r=void 0!==n._eachValues?s.call(i._boundValue(),e,this.index,this.length):s.call(i._boundValue(),this.accum,e,this.index,this.length))instanceof t&&(n._currentCancellable=r);var a=i._popContext();return o.checkForgottenReturns(r,a,void 0!==n._eachValues?"Promise.each":"Promise.reduce",i),r}a.inherits(c,r),c.prototype._gotAccum=function(e){void 0!==this._eachValues&&null!==this._eachValues&&e!==s&&this._eachValues.push(e)},c.prototype._eachComplete=function(e){return null!==this._eachValues&&this._eachValues.push(e),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(e){this._promise._resolveCallback(e),this._values=null},c.prototype._resultCancelled=function(e){if(e===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},c.prototype._iterate=function(e){var r,n;this._values=e;var i=e.length;void 0!==this._initialValue?(r=this._initialValue,n=0):(r=t.resolve(e[0]),n=1),this._currentCancellable=r;for(var s=n;s<i;++s){var o=e[s];o instanceof t&&o.suppressUnhandledRejections()}if(!r.isRejected())for(;n<i;++n){var a={accum:null,value:e[n],index:n,length:i,array:this};r=r._then(d,void 0,void 0,a,void 0),0==(127&n)&&r._setNoAsyncGuarantee()}void 0!==this._eachValues&&(r=r._then(this._eachComplete,void 0,void 0,this,void 0)),r._then(l,l,void 0,r,this)},t.prototype.reduce=function(e,t){return h(this,e,t,null)},t.reduce=function(e,t,r,n){return h(e,t,r,n)}}},{"./util":36}],29:[function(t,r,s){"use strict";var o,a=t("./util"),u=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var c=n.setImmediate,l=e.nextTick;o=a.isRecentNode?function(e){c.call(n,e)}:function(t){l.call(e,t)}}else if("function"==typeof u&&"function"==typeof u.resolve){var h=u.resolve();o=function(e){h.then(e)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)||!("classList"in document.documentElement)?void 0!==i?function(e){i(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var e=document.createElement("div"),t={attributes:!0},r=!1,n=document.createElement("div");new MutationObserver((function(){e.classList.toggle("foo"),r=!1})).observe(n,t);return function(i){var s=new MutationObserver((function(){s.disconnect(),i()}));s.observe(e,t),r||(r=!0,n.classList.toggle("foo"))}}();r.exports=o},{"./util":36}],30:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=t.PromiseInspection;function s(e){this.constructor$(e)}e("./util").inherits(s,r),s.prototype._promiseResolved=function(e,t){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseFulfilled=function(e,t){var r=new i;return r._bitField=33554432,r._settledValueField=e,this._promiseResolved(t,r)},s.prototype._promiseRejected=function(e,t){var r=new i;return r._bitField=16777216,r._settledValueField=e,this._promiseResolved(t,r)},t.settle=function(e){return n.deprecated(".settle()",".reflect()"),new s(e).promise()},t.allSettled=function(e){return new s(e).promise()},t.prototype.settle=function(){return t.settle(this)}}},{"./util":36}],31:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),s=e("./errors").RangeError,o=e("./errors").AggregateError,a=i.isArray,u={};function c(e){this.constructor$(e),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(e,t){if((0|t)!==t||t<0)return n("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var r=new c(e),i=r.promise();return r.setHowMany(t),r.init(),i}i.inherits(c,r),c.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var e=a(this._values);!this._isResolved()&&e&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(e){this._howMany=e},c.prototype._promiseFulfilled=function(e){return this._addFulfilled(e),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},c.prototype._promiseRejected=function(e){return this._addRejected(e),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var e=new o,t=this.length();t<this._values.length;++t)this._values[t]!==u&&e.push(this._values[t]);return e.length>0?this._reject(e):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(e){this._values.push(e)},c.prototype._addFulfilled=function(e){this._values[this._totalResolved++]=e},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(e){var t="Input array must contain at least "+this._howMany+" items but contains only "+e+" items";return new s(t)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(e,t){return l(e,t)},t.prototype.some=function(e){return l(this,e)},t._SomePromiseArray=c}},{"./errors":12,"./util":36}],32:[function(e,t,r){"use strict";t.exports=function(e){function t(e){void 0!==e?(e=e._target(),this._bitField=e._bitField,this._settledValueField=e._isFateSealed()?e._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}t.prototype._settledValue=function(){return this._settledValueField};var r=t.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},n=t.prototype.error=t.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=t.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},s=t.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},o=t.prototype.isPending=function(){return 0==(50397184&this._bitField)},a=t.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};t.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},e.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},e.prototype._isCancelled=function(){return this._target().__isCancelled()},e.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},e.prototype.isPending=function(){return o.call(this._target())},e.prototype.isRejected=function(){return s.call(this._target())},e.prototype.isFulfilled=function(){return i.call(this._target())},e.prototype.isResolved=function(){return a.call(this._target())},e.prototype.value=function(){return r.call(this._target())},e.prototype.reason=function(){var e=this._target();return e._unsetRejectionIsUnhandled(),n.call(e)},e.prototype._value=function(){return this._settledValue()},e.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},e.PromiseInspection=t}},{}],33:[function(e,t,r){"use strict";t.exports=function(t,r){var n=e("./util"),i=n.errorObj,s=n.isObject;var o={}.hasOwnProperty;return function(e,a){if(s(e)){if(e instanceof t)return e;var u=function(e){try{return function(e){return e.then}(e)}catch(e){return i.e=e,i}}(e);if(u===i){a&&a._pushContext();var c=t.reject(u.e);return a&&a._popContext(),c}if("function"==typeof u){if(function(e){try{return o.call(e,"_promise0")}catch(e){return!1}}(e)){c=new t(r);return e._then(c._fulfill,c._reject,void 0,c,null),c}return function(e,s,o){var a=new t(r),u=a;o&&o._pushContext();a._captureStackTrace(),o&&o._popContext();var c=!0,l=n.tryCatch(s).call(e,h,d);c=!1,a&&l===i&&(a._rejectCallback(l.e,!0,!0),a=null);function h(e){a&&(a._resolveCallback(e),a=null)}function d(e){a&&(a._rejectCallback(e,c,!0),a=null)}return u}(e,u,a)}}return e}}},{"./util":36}],34:[function(e,t,r){"use strict";t.exports=function(t,r,n){var i=e("./util"),s=t.TimeoutError;function o(e){this.handle=e}o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(e){return u(+this).thenReturn(e)},u=t.delay=function(e,i){var s,u;return void 0!==i?(s=t.resolve(i)._then(a,null,null,e,void 0),n.cancellation()&&i instanceof t&&s._setOnCancel(i)):(s=new t(r),u=setTimeout((function(){s._fulfill()}),+e),n.cancellation()&&s._setOnCancel(new o(u)),s._captureStackTrace()),s._setAsyncGuaranteed(),s};t.prototype.delay=function(e){return u(e,this)};function c(e){return clearTimeout(this.handle),e}function l(e){throw clearTimeout(this.handle),e}t.prototype.timeout=function(e,t){var r,a;e=+e;var u=new o(setTimeout((function(){r.isPending()&&function(e,t,r){var n;n="string"!=typeof t?t instanceof Error?t:new s("operation timed out"):new s(t),i.markAsOriginatingFromRejection(n),e._attachExtraTrace(n),e._reject(n),null!=r&&r.cancel()}(r,t,a)}),e));return n.cancellation()?(a=this.then(),(r=a._then(c,l,void 0,u,void 0))._setOnCancel(u)):r=this._then(c,l,void 0,u,void 0),r}}},{"./util":36}],35:[function(e,t,r){"use strict";t.exports=function(t,r,n,i,s,o){var a=e("./util"),u=e("./errors").TypeError,c=e("./util").inherits,l=a.errorObj,h=a.tryCatch,d={};function f(e){setTimeout((function(){throw e}),0)}function p(e,r){var i=0,o=e.length,a=new t(s);return function s(){if(i>=o)return a._fulfill();var u=function(e){var t=n(e);return t!==e&&"function"==typeof e._isDisposable&&"function"==typeof e._getDisposer&&e._isDisposable()&&t._setDisposable(e._getDisposer()),t}(e[i++]);if(u instanceof t&&u._isDisposable()){try{u=n(u._getDisposer().tryDispose(r),e.promise)}catch(e){return f(e)}if(u instanceof t)return u._then(s,f,null,null,null)}s()}(),a}function m(e,t,r){this._data=e,this._promise=t,this._context=r}function y(e,t,r){this.constructor$(e,t,r)}function g(e){return m.isDisposer(e)?(this.resources[this.index]._setDisposable(e),e.promise()):e}function v(e){this.length=e,this.promise=null,this[e-1]=null}m.prototype.data=function(){return this._data},m.prototype.promise=function(){return this._promise},m.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},m.prototype.tryDispose=function(e){var t=this.resource(),r=this._context;void 0!==r&&r._pushContext();var n=t!==d?this.doDispose(t,e):null;return void 0!==r&&r._popContext(),this._promise._unsetDisposable(),this._data=null,n},m.isDisposer=function(e){return null!=e&&"function"==typeof e.resource&&"function"==typeof e.tryDispose},c(y,m),y.prototype.doDispose=function(e,t){return this.data().call(e,e,t)},v.prototype._resultCancelled=function(){for(var e=this.length,r=0;r<e;++r){var n=this[r];n instanceof t&&n.cancel()}},t.using=function(){var e=arguments.length;if(e<2)return r("you must pass at least 2 arguments to Promise.using");var i,s=arguments[e-1];if("function"!=typeof s)return r("expecting a function but got "+a.classString(s));var u=!0;2===e&&Array.isArray(arguments[0])?(e=(i=arguments[0]).length,u=!1):(i=arguments,e--);for(var c=new v(e),d=0;d<e;++d){var f=i[d];if(m.isDisposer(f)){var y=f;(f=f.promise())._setDisposable(y)}else{var b=n(f);b instanceof t&&(f=b._then(g,null,null,{resources:c,index:d},void 0))}c[d]=f}var _=new Array(c.length);for(d=0;d<_.length;++d)_[d]=t.resolve(c[d]).reflect();var w=t.all(_).then((function(e){for(var t=0;t<e.length;++t){var r=e[t];if(r.isRejected())return l.e=r.error(),l;if(!r.isFulfilled())return void w.cancel();e[t]=r.value()}E._pushContext(),s=h(s);var n=u?s.apply(void 0,e):s(e),i=E._popContext();return o.checkForgottenReturns(n,i,"Promise.using",E),n})),E=w.lastly((function(){var e=new t.PromiseInspection(w);return p(c,e)}));return c.promise=E,E._setOnCancel(c),E},t.prototype._setDisposable=function(e){this._bitField=131072|this._bitField,this._disposer=e},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},t.prototype.disposer=function(e){if("function"==typeof e)return new y(e,this,i());throw new u}}},{"./errors":12,"./util":36}],36:[function(t,r,i){"use strict";var s=t("./es5"),o="undefined"==typeof navigator,a={e:{}},u,c="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==this?this:null;function l(){try{var e=u;return u=null,e.apply(this,arguments)}catch(e){return a.e=e,a}}function h(e){return u=e,l}var d=function(e,t){var r={}.hasOwnProperty;function n(){for(var n in this.constructor=e,this.constructor$=t,t.prototype)r.call(t.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=t.prototype[n])}return n.prototype=t.prototype,e.prototype=new n,e.prototype};function f(e){return null==e||!0===e||!1===e||"string"==typeof e||"number"==typeof e}function p(e){return"function"==typeof e||"object"==typeof e&&null!==e}function m(e){return f(e)?new Error(S(e)):e}function y(e,t){var r,n=e.length,i=new Array(n+1);for(r=0;r<n;++r)i[r]=e[r];return i[r]=t,i}function g(e,t,r){if(!s.isES5)return{}.hasOwnProperty.call(e,t)?e[t]:void 0;var n=Object.getOwnPropertyDescriptor(e,t);return null!=n?null==n.get&&null==n.set?n.value:r:void 0}function v(e,t,r){if(f(e))return e;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return s.defineProperty(e,t,n),e}function b(e){throw e}var _=function(){var e=[Array.prototype,Object.prototype,Function.prototype],t=function(t){for(var r=0;r<e.length;++r)if(e[r]===t)return!0;return!1};if(s.isES5){var r=Object.getOwnPropertyNames;return function(e){for(var n=[],i=Object.create(null);null!=e&&!t(e);){var o;try{o=r(e)}catch(e){return n}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var c=Object.getOwnPropertyDescriptor(e,u);null!=c&&null==c.get&&null==c.set&&n.push(u)}}e=s.getPrototypeOf(e)}return n}}var n={}.hasOwnProperty;return function(r){if(t(r))return[];var i=[];e:for(var s in r)if(n.call(r,s))i.push(s);else{for(var o=0;o<e.length;++o)if(n.call(e[o],s))continue e;i.push(s)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function E(e){try{if("function"==typeof e){var t=s.names(e.prototype),r=s.isES5&&t.length>1,n=t.length>0&&!(1===t.length&&"constructor"===t[0]),i=w.test(e+"")&&s.names(e).length>0;if(r||n||i)return!0}return!1}catch(e){return!1}}function x(e){function t(){}t.prototype=e;var r=new t;function n(){return typeof r.foo}return n(),n(),e}var C=/^[a-z$_][a-z$_0-9]*$/i;function k(e){return C.test(e)}function O(e,t,r){for(var n=new Array(e),i=0;i<e;++i)n[i]=t+i+r;return n}function S(e){try{return e+""}catch(e){return"[no string representation]"}}function T(e){return e instanceof Error||null!==e&&"object"==typeof e&&"string"==typeof e.message&&"string"==typeof e.name}function $(e){try{v(e,"isOperational",!0)}catch(e){}}function j(e){return null!=e&&(e instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===e.isOperational)}function N(e){return T(e)&&s.propertyIsWritable(e,"stack")}var A="stack"in new Error?function(e){return N(e)?e:new Error(S(e))}:function(e){if(N(e))return e;try{throw new Error(S(e))}catch(e){return e}};function I(e){return{}.toString.call(e)}function P(e,t,r){for(var n=s.names(e),i=0;i<n.length;++i){var o=n[i];if(r(o))try{s.defineProperty(t,o,s.getDescriptor(e,o))}catch(e){}}}var R=function(e){return s.isArray(e)?e:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var q="function"==typeof Array.from?function(e){return Array.from(e)}:function(e){for(var t,r=[],n=e[Symbol.iterator]();!(t=n.next()).done;)r.push(t.value);return r};R=function(e){return s.isArray(e)?e:null!=e&&"function"==typeof e[Symbol.iterator]?q(e):null}}var M=void 0!==e&&"[object process]"===I(e).toLowerCase(),L=void 0!==e&&void 0!==e.env,D;function F(t){return L?e.env[t]:void 0}function U(){if("function"==typeof Promise)try{if("[object Promise]"===I(new Promise((function(){}))))return Promise}catch(e){}}function B(e,t){if(null===e||"function"!=typeof t||t===D)return t;null!==e.domain&&(t=e.domain.bind(t));var r=e.async;if(null!==r){var n=t;t=function(){var e=new Array(2).concat([].slice.call(arguments));return e[0]=n,e[1]=this,r.runInAsyncScope.apply(r,e)}}return t}var V={setReflectHandler:function(e){D=e},isClass:E,isIdentifier:k,inheritedDataKeys:_,getDataPropertyOrDefault:g,thrower:b,isArray:s.isArray,asArray:R,notEnumerableProp:v,isPrimitive:f,isObject:p,isError:T,canEvaluate:o,errorObj:a,tryCatch:h,inherits:d,withAppended:y,maybeWrapAsError:m,toFastProperties:x,filledRange:O,toString:S,canAttachTrace:N,ensureErrorObject:A,originatesFromRejection:j,markAsOriginatingFromRejection:$,classString:I,copyDescriptors:P,isNode:M,hasEnvVariables:L,env:F,global:c,getNativePromise:U,contextBind:B},z;V.isRecentNode=V.isNode&&(e.versions&&e.versions.node?z=e.versions.node.split(".").map(Number):e.version&&(z=e.version.split(".").map(Number)),0===z[0]&&z[1]>10||z[0]>0),V.nodeSupportsAsyncResource=V.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),V.isNode&&V.toFastProperties(e);try{throw new Error}catch(e){V.lastLineError=e}r.exports=V},{"./es5":13,async_hooks:void 0}]},{},[4])(4)})),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{_process:void 0,timers:void 0}],161:[function(e,t,r){(function(e){!function(){"use strict";t.exports=function(t){return(t instanceof e?t:e.from(t.toString(),"binary")).toString("base64")}}()}).call(this,e("buffer").Buffer)},{buffer:void 0}],162:[function(e,t,r){(function(t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("tty"));const s=t.env||{},o=t.argv||[],a="NO_COLOR"in s||o.includes("--no-color"),u="FORCE_COLOR"in s||o.includes("--color"),c="win32"===t.platform,l=i&&i.isatty&&i.isatty(1)&&s.TERM&&"dumb"!==s.TERM,h=!a&&(u||c||l||"CI"in s&&("GITHUB_ACTIONS"in s||"GITLAB_CI"in s||"CIRCLECI"in s)),d=(e,t,r,n,i=t.substring(0,e)+n,s=t.substring(e+r.length),o=s.indexOf(r))=>i+(o<0?s:d(o,s,r,n)),f=(e,t,r=e,n=e.length+1)=>i=>i||""!==i&&void 0!==i?((e,t,r,n,i)=>e<0?r+t+n:r+d(e,t,n,i)+n)((""+i).indexOf(t,n),i,e,t,r):"",p=(e,t,r)=>f(`[${e}m`,`[${t}m`,r),m={reset:p(0,0),bold:p(1,22,"[22m[1m"),dim:p(2,22,"[22m[2m"),italic:p(3,23),underline:p(4,24),inverse:p(7,27),hidden:p(8,28),strikethrough:p(9,29),black:p(30,39),red:p(31,39),green:p(32,39),yellow:p(33,39),blue:p(34,39),magenta:p(35,39),cyan:p(36,39),white:p(37,39),gray:p(90,39),bgBlack:p(40,49),bgRed:p(41,49),bgGreen:p(42,49),bgYellow:p(43,49),bgBlue:p(44,49),bgMagenta:p(45,49),bgCyan:p(46,49),bgWhite:p(47,49),blackBright:p(90,39),redBright:p(91,39),greenBright:p(92,39),yellowBright:p(93,39),blueBright:p(94,39),magentaBright:p(95,39),cyanBright:p(96,39),whiteBright:p(97,39),bgBlackBright:p(100,49),bgRedBright:p(101,49),bgGreenBright:p(102,49),bgYellowBright:p(103,49),bgBlueBright:p(104,49),bgMagentaBright:p(105,49),bgCyanBright:p(106,49),bgWhiteBright:p(107,49)},y=e=>e,g=({useColor:e=h}={})=>e?m:Object.keys(m).reduce(((e,t)=>({...e,[t]:y})),{}),{reset:v,bold:b,dim:_,italic:w,underline:E,inverse:x,hidden:C,strikethrough:k,black:O,red:S,green:T,yellow:$,blue:j,magenta:N,cyan:A,white:I,gray:P,bgBlack:R,bgRed:q,bgGreen:M,bgYellow:L,bgBlue:D,bgMagenta:F,bgCyan:U,bgWhite:B,blackBright:V,redBright:z,greenBright:H,yellowBright:W,blueBright:Q,magentaBright:G,cyanBright:J,whiteBright:K,bgBlackBright:Z,bgRedBright:Y,bgGreenBright:X,bgYellowBright:ee,bgBlueBright:te,bgMagentaBright:re,bgCyanBright:ne,bgWhiteBright:ie}=g();r.bgBlack=R,r.bgBlackBright=Z,r.bgBlue=D,r.bgBlueBright=te,r.bgCyan=U,r.bgCyanBright=ne,r.bgGreen=M,r.bgGreenBright=X,r.bgMagenta=F,r.bgMagentaBright=re,r.bgRed=q,r.bgRedBright=Y,r.bgWhite=B,r.bgWhiteBright=ie,r.bgYellow=L,r.bgYellowBright=ee,r.black=O,r.blackBright=V,r.blue=j,r.blueBright=Q,r.bold=b,r.createColors=g,r.cyan=A,r.cyanBright=J,r.dim=_,r.gray=P,r.green=T,r.greenBright=H,r.hidden=C,r.inverse=x,r.isColorSupported=h,r.italic=w,r.magenta=N,r.magentaBright=G,r.red=S,r.redBright=z,r.reset=v,r.strikethrough=k,r.underline=E,r.white=I,r.whiteBright=K,r.yellow=$,r.yellowBright=W}).call(this,e("_process"))},{_process:void 0,tty:void 0}],163:[function(e,t,r){var n="undefined"!=typeof self?self:this,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,i="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),s="FormData"in e,o="ArrayBuffer"in e;if(o)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&a.indexOf(Object.prototype.toString.call(e))>-1};function c(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function l(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function m(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:i&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:s&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():o&&i&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=p(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}d.prototype.append=function(e,t){e=c(e),t=l(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},d.prototype.delete=function(e){delete this.map[c(e)]},d.prototype.get=function(e){return e=c(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(c(e))},d.prototype.set=function(e,t){this.map[c(e)]=l(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},d.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},d.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(e,t){var r,n,i=(t=t||{}).body;if(e instanceof b){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),v.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function w(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},g.call(b.prototype),g.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var E=[301,302,303,307,308];w.redirect=function(e,t){if(-1===E.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function x(e,r){return new Promise((function(n,s){var o=new b(e,r);if(o.signal&&o.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var i="response"in a?a.response:a.responseText;n(new w(i,r))},a.onerror=function(){s(new TypeError("Network request failed"))},a.ontimeout=function(){s(new TypeError("Network request failed"))},a.onabort=function(){s(new t.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",u)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}x.polyfill=!0,e.fetch||(e.fetch=x,e.Headers=d,e.Request=b,e.Response=w),t.Headers=d,t.Request=b,t.Response=w,t.fetch=x,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;(r=s.fetch).default=s.fetch,r.fetch=s.fetch,r.Headers=s.Headers,r.Request=s.Request,r.Response=s.Response,t.exports=r},{}],164:[function(e,t,r){(function(r,n){var i=e("url").parse,s=e("events"),o=e("https"),a=e("http"),u=e("util"),c=["pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","secureProtocol","servername","checkServerIdentity"],l=[239,187,191];function h(e,t){var s=h.CONNECTING,u=t&&t.headers,m=!1;Object.defineProperty(this,"readyState",{get:function(){return s}}),Object.defineProperty(this,"url",{get:function(){return e}});var y,g=this;function v(t){s!==h.CLOSED&&(s=h.CONNECTING,k("error",new d("error",{message:t})),x&&(e=x,x=null,m=!1),setTimeout((function(){s!==h.CONNECTING||g.connectionInProgress||(g.connectionInProgress=!0,C())}),g.reconnectInterval))}g.reconnectInterval=1e3,g.connectionInProgress=!1;var b="";u&&u["Last-Event-ID"]&&(b=u["Last-Event-ID"],delete u["Last-Event-ID"]);var _=!1,w="",E="",x=null;function C(){var f=i(e),w="https:"===f.protocol;if(f.headers={"Cache-Control":"no-cache",Accept:"text/event-stream"},b&&(f.headers["Last-Event-ID"]=b),u){var E=m?function(e){var t={};for(var r in e)/^(cookie|authorization)$/i.test(r)||(t[r]=e[r]);return t}(u):u;for(var S in E){var T=E[S];T&&(f.headers[S]=T)}}if(f.rejectUnauthorized=!(t&&!t.rejectUnauthorized),t&&void 0!==t.createConnection&&(f.createConnection=t.createConnection),t&&t.proxy){var $=i(t.proxy);w="https:"===$.protocol,f.protocol=w?"https:":"http:",f.path=e,f.headers.Host=f.host,f.hostname=$.hostname,f.host=$.host,f.port=$.port}if(t&&t.https)for(var j in t.https)if(-1!==c.indexOf(j)){var N=t.https[j];void 0!==N&&(f[j]=N)}t&&void 0!==t.withCredentials&&(f.withCredentials=t.withCredentials),y=(w?o:a).request(f,(function(t){if(g.connectionInProgress=!1,500===t.statusCode||502===t.statusCode||503===t.statusCode||504===t.statusCode)return k("error",new d("error",{status:t.statusCode,message:t.statusMessage})),void v();if(301===t.statusCode||302===t.statusCode||307===t.statusCode){var i=t.headers.location;if(!i)return void k("error",new d("error",{status:t.statusCode,message:t.statusMessage}));var o=p(e),a=p(i);return m=o!==a,307===t.statusCode&&(x=e),e=i,void r.nextTick(C)}if(200!==t.statusCode)return k("error",new d("error",{status:t.statusCode,message:t.statusMessage})),g.close();s=h.OPEN,t.on("close",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),v()})),t.on("end",(function(){t.removeAllListeners("close"),t.removeAllListeners("end"),v()})),k("open",new d("open"));var u,c=!0,f=0,y=-1;t.on("data",(function(e){u=u?n.concat([u,e]):e,c&&function(e){return l.every((function(t,r){return e[r]===t}))}(u)&&(u=u.slice(l.length)),c=!1;for(var t=0,r=u.length;t<r;){_&&(10===u[t]&&++t,_=!1);for(var i,s=-1,o=y,a=f;s<0&&a<r;++a)58===(i=u[a])?o<0&&(o=a-t):13===i?(_=!0,s=a-t):10===i&&(s=a-t);if(s<0){f=r-t,y=o;break}f=0,y=-1,O(u,t,o,s),t+=s+1}t===r?u=void 0:t>0&&(u=u.slice(t))}))})),y.on("error",(function(e){g.connectionInProgress=!1,v(e.message)})),y.setNoDelay&&y.setNoDelay(!0),y.end()}function k(){g.listeners(arguments[0]).length>0&&g.emit.apply(g,arguments)}function O(t,r,n,i){if(0===i){if(w.length>0){var s=E||"message";k(s,new f(s,{data:w.slice(0,-1),lastEventId:b,origin:p(e)})),w=""}E=void 0}else if(n>0){var o=n<0,a=0,u=t.slice(r,r+(o?i:n)).toString();r+=a=o?i:32!==t[r+n+1]?n+1:n+2;var c=i-a,l=t.slice(r,r+c).toString();if("data"===u)w+=l+"\n";else if("event"===u)E=l;else if("id"===u)b=l;else if("retry"===u){var h=parseInt(l,10);Number.isNaN(h)||(g.reconnectInterval=h)}}}C(),this._close=function(){s!==h.CLOSED&&(s=h.CLOSED,y.abort&&y.abort(),y.xhr&&y.xhr.abort&&y.xhr.abort())}}function d(e,t){if(Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)for(var r in t)t.hasOwnProperty(r)&&Object.defineProperty(this,r,{writable:!1,value:t[r],enumerable:!0})}function f(e,t){for(var r in Object.defineProperty(this,"type",{writable:!1,value:e,enumerable:!0}),t)t.hasOwnProperty(r)&&Object.defineProperty(this,r,{writable:!1,value:t[r],enumerable:!0})}function p(e){return"string"==typeof e&&(e=i(e)),e.protocol&&e.hostname?(e.protocol+"//"+e.host).toLowerCase():"null"}t.exports=h,u.inherits(h,s.EventEmitter),h.prototype.constructor=h,["open","error","message"].forEach((function(e){Object.defineProperty(h.prototype,"on"+e,{get:function(){var t=this.listeners(e)[0];return t?t._listener?t._listener:t:void 0},set:function(t){this.removeAllListeners(e),this.addEventListener(e,t)}})})),Object.defineProperty(h,"CONNECTING",{enumerable:!0,value:0}),Object.defineProperty(h,"OPEN",{enumerable:!0,value:1}),Object.defineProperty(h,"CLOSED",{enumerable:!0,value:2}),h.prototype.CONNECTING=0,h.prototype.OPEN=1,h.prototype.CLOSED=2,h.prototype.close=function(){this._close()},h.prototype.addEventListener=function(e,t){"function"==typeof t&&(t._listener=t,this.on(e,t))},h.prototype.dispatchEvent=function(e){if(!e.type)throw new Error("UNSPECIFIED_EVENT_TYPE_ERR");this.emit(e.type,e.detail)},h.prototype.removeEventListener=function(e,t){"function"==typeof t&&(t._listener=void 0,this.removeListener(e,t))}}).call(this,e("_process"),e("buffer").Buffer)},{_process:void 0,buffer:void 0,events:void 0,http:void 0,https:void 0,url:void 0,util:void 0}],165:[function(e,t,r){"use strict";t.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!=i--;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r}},{}],166:[function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).fetchRetry=n()}(this,(function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(r,n){if(n=n||{},"function"!=typeof r)throw new t("fetch must be a function");if("object"!=typeof n)throw new t("defaults must be an object");if(void 0!==n.retries&&!e(n.retries))throw new t("retries must be a positive integer");if(void 0!==n.retryDelay&&!e(n.retryDelay)&&"function"!=typeof n.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!=typeof n.retryOn)throw new t("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(i,s){var o=n.retries,a=n.retryDelay,u=n.retryOn;if(s&&void 0!==s.retries){if(!e(s.retries))throw new t("retries must be a positive integer");o=s.retries}if(s&&void 0!==s.retryDelay){if(!e(s.retryDelay)&&"function"!=typeof s.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");a=s.retryDelay}if(s&&s.retryOn){if(!Array.isArray(s.retryOn)&&"function"!=typeof s.retryOn)throw new t("retryOn property expects an array or function");u=s.retryOn}return new Promise((function(e,t){var n=function(n){var a="undefined"!=typeof Request&&i instanceof Request?i.clone():i;r(a,s).then((function(r){if(Array.isArray(u)&&-1===u.indexOf(r.status))e(r);else if("function"==typeof u)try{return Promise.resolve(u(n,null,r)).then((function(t){t?c(n,null,r):e(r)})).catch(t)}catch(e){t(e)}else n<o?c(n,null,r):e(r)})).catch((function(e){if("function"==typeof u)try{Promise.resolve(u(n,e,null)).then((function(r){r?c(n,e,null):t(e)})).catch((function(e){t(e)}))}catch(e){t(e)}else n<o?c(n,e,null):t(e)}))};function c(e,t,r){var i="function"==typeof a?a(e,t,r):a;setTimeout((function(){n(++e)}),i)}n(0)}))}}}))},{}],167:[function(e,t,r){(function(r){t.exports=l,l.realpath=l,l.sync=h,l.realpathSync=h,l.monkeypatch=function(){n.realpath=l,n.realpathSync=h},l.unmonkeypatch=function(){n.realpath=i,n.realpathSync=s};var n=e("fs"),i=n.realpath,s=n.realpathSync,o=r.version,a=/^v[0-5]\./.test(o),u=e("./old.js");function c(e){return e&&"realpath"===e.syscall&&("ELOOP"===e.code||"ENOMEM"===e.code||"ENAMETOOLONG"===e.code)}function l(e,t,r){if(a)return i(e,t,r);"function"==typeof t&&(r=t,t=null),i(e,t,(function(n,i){c(n)?u.realpath(e,t,r):r(n,i)}))}function h(e,t){if(a)return s(e,t);try{return s(e,t)}catch(r){if(c(r))return u.realpathSync(e,t);throw r}}}).call(this,e("_process"))},{"./old.js":168,_process:void 0,fs:void 0}],168:[function(e,t,r){(function(t){var n=e("path"),i="win32"===t.platform,s=e("fs"),o=t.env.NODE_DEBUG&&/fs/.test(t.env.NODE_DEBUG);function a(e){return"function"==typeof e?e:function(){var e;if(o){var r=new Error;e=function(e){e&&(r.message=e.message,n(e=r))}}else e=n;return e;function n(e){if(e){if(t.throwDeprecation)throw e;if(!t.noDeprecation){var r="fs: missing callback "+(e.stack||e.message);t.traceDeprecation?console.trace(r):console.error(r)}}}}()}n.normalize;if(i)var u=/(.*?)(?:[\/\\]+|$)/g;else u=/(.*?)(?:[\/]+|$)/g;if(i)var c=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else c=/^[\/]*/;r.realpathSync=function(e,t){if(e=n.resolve(e),t&&Object.prototype.hasOwnProperty.call(t,e))return t[e];var r,o,a,l,h=e,d={},f={};function p(){var t=c.exec(e);r=t[0].length,o=t[0],a=t[0],l="",i&&!f[a]&&(s.lstatSync(a),f[a]=!0)}for(p();r<e.length;){u.lastIndex=r;var m=u.exec(e);if(l=o,o+=m[0],a=l+m[1],r=u.lastIndex,!(f[a]||t&&t[a]===a)){var y;if(t&&Object.prototype.hasOwnProperty.call(t,a))y=t[a];else{var g=s.lstatSync(a);if(!g.isSymbolicLink()){f[a]=!0,t&&(t[a]=a);continue}var v=null;if(!i){var b=g.dev.toString(32)+":"+g.ino.toString(32);d.hasOwnProperty(b)&&(v=d[b])}null===v&&(s.statSync(a),v=s.readlinkSync(a)),y=n.resolve(l,v),t&&(t[a]=y),i||(d[b]=v)}e=n.resolve(y,e.slice(r)),p()}}return t&&(t[h]=e),e},r.realpath=function(e,r,o){if("function"!=typeof o&&(o=a(r),r=null),e=n.resolve(e),r&&Object.prototype.hasOwnProperty.call(r,e))return t.nextTick(o.bind(null,null,r[e]));var l,h,d,f,p=e,m={},y={};function g(){var r=c.exec(e);l=r[0].length,h=r[0],d=r[0],f="",i&&!y[d]?s.lstat(d,(function(e){if(e)return o(e);y[d]=!0,v()})):t.nextTick(v)}function v(){if(l>=e.length)return r&&(r[p]=e),o(null,e);u.lastIndex=l;var n=u.exec(e);return f=h,h+=n[0],d=f+n[1],l=u.lastIndex,y[d]||r&&r[d]===d?t.nextTick(v):r&&Object.prototype.hasOwnProperty.call(r,d)?w(r[d]):s.lstat(d,b)}function b(e,n){if(e)return o(e);if(!n.isSymbolicLink())return y[d]=!0,r&&(r[d]=d),t.nextTick(v);if(!i){var a=n.dev.toString(32)+":"+n.ino.toString(32);if(m.hasOwnProperty(a))return _(null,m[a],d)}s.stat(d,(function(e){if(e)return o(e);s.readlink(d,(function(e,t){i||(m[a]=t),_(e,t)}))}))}function _(e,t,i){if(e)return o(e);var s=n.resolve(f,t);r&&(r[i]=s),w(s)}function w(t){e=n.resolve(t,e.slice(l)),g()}g()}}).call(this,e("_process"))},{_process:void 0,fs:void 0,path:void 0}],169:[function(e,t,r){(function(t){function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}r.setopts=function(e,r,o){o||(o={});if(o.matchBase&&-1===r.indexOf("/")){if(o.noglobstar)throw new Error("base matching requires globstar");r="**/"+r}e.silent=!!o.silent,e.pattern=r,e.strict=!1!==o.strict,e.realpath=!!o.realpath,e.realpathCache=o.realpathCache||Object.create(null),e.follow=!!o.follow,e.dot=!!o.dot,e.mark=!!o.mark,e.nodir=!!o.nodir,e.nodir&&(e.mark=!0);e.sync=!!o.sync,e.nounique=!!o.nounique,e.nonull=!!o.nonull,e.nosort=!!o.nosort,e.nocase=!!o.nocase,e.stat=!!o.stat,e.noprocess=!!o.noprocess,e.absolute=!!o.absolute,e.fs=o.fs||i,e.maxLength=o.maxLength||1/0,e.cache=o.cache||Object.create(null),e.statCache=o.statCache||Object.create(null),e.symlinks=o.symlinks||Object.create(null),function(e,t){e.ignore=t.ignore||[],Array.isArray(e.ignore)||(e.ignore=[e.ignore]);e.ignore.length&&(e.ignore=e.ignore.map(l))}(e,o),e.changedCwd=!1;var c=t.cwd();n(o,"cwd")?(e.cwd=s.resolve(o.cwd),e.changedCwd=e.cwd!==c):e.cwd=s.resolve(c);e.root=o.root||s.resolve(e.cwd,"/"),e.root=s.resolve(e.root),e.cwdAbs=a(e.cwd)?e.cwd:h(e,e.cwd),e.nomount=!!o.nomount,"win32"===t.platform&&(e.root=e.root.replace(/\\/g,"/"),e.cwd=e.cwd.replace(/\\/g,"/"),e.cwdAbs=e.cwdAbs.replace(/\\/g,"/"));o.nonegate=!0,o.nocomment=!0,o.allowWindowsEscape=!0,e.minimatch=new u(r,o),e.options=e.minimatch.options},r.ownProp=n,r.makeAbs=h,r.finish=function(e){for(var t=e.nounique,r=t?[]:Object.create(null),n=0,i=e.matches.length;n<i;n++){var s=e.matches[n];if(s&&0!==Object.keys(s).length){var o=Object.keys(s);t?r.push.apply(r,o):o.forEach((function(e){r[e]=!0}))}else if(e.nonull){var a=e.minimatch.globSet[n];t?r.push(a):r[a]=!0}}t||(r=Object.keys(r));e.nosort||(r=r.sort(c));if(e.mark){for(n=0;n<r.length;n++)r[n]=e._mark(r[n]);e.nodir&&(r=r.filter((function(t){var r=!/\/$/.test(t),n=e.cache[t]||e.cache[h(e,t)];return r&&n&&(r="DIR"!==n&&!Array.isArray(n)),r})))}e.ignore.length&&(r=r.filter((function(t){return!d(e,t)})));e.found=r},r.mark=function(e,t){var r=h(e,t),n=e.cache[r],i=t;if(n){var s="DIR"===n||Array.isArray(n),o="/"===t.slice(-1);if(s&&!o?i+="/":!s&&o&&(i=i.slice(0,-1)),i!==t){var a=h(e,i);e.statCache[a]=e.statCache[r],e.cache[a]=e.cache[r]}}return i},r.isIgnored=d,r.childrenIgnored=function(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return!(!e.gmatcher||!e.gmatcher.match(t))}))};var i=e("fs"),s=e("path"),o=e("minimatch"),a=e("path").isAbsolute,u=o.Minimatch;function c(e,t){return e.localeCompare(t,"en")}function l(e){var t=null;if("/**"===e.slice(-3)){var r=e.replace(/(\/\*\*)+$/,"");t=new u(r,{dot:!0})}return{matcher:new u(e,{dot:!0}),gmatcher:t}}function h(e,r){var n=r;return n="/"===r.charAt(0)?s.join(e.root,r):a(r)||""===r?r:e.changedCwd?s.resolve(e.cwd,r):s.resolve(r),"win32"===t.platform&&(n=n.replace(/\\/g,"/")),n}function d(e,t){return!!e.ignore.length&&e.ignore.some((function(e){return e.matcher.match(t)||!(!e.gmatcher||!e.gmatcher.match(t))}))}}).call(this,e("_process"))},{_process:void 0,fs:void 0,minimatch:173,path:void 0}],170:[function(e,t,r){(function(r){t.exports=v;var n=e("fs.realpath"),i=e("minimatch"),s=(i.Minimatch,e("inherits")),o=e("events").EventEmitter,a=e("path"),u=e("assert"),c=e("path").isAbsolute,l=e("./sync.js"),h=e("./common.js"),d=h.setopts,f=h.ownProp,p=e("inflight"),m=(e("util"),h.childrenIgnored),y=h.isIgnored,g=e("once");function v(e,t,r){if("function"==typeof t&&(r=t,t={}),t||(t={}),t.sync){if(r)throw new TypeError("callback provided to sync glob");return l(e,t)}return new _(e,t,r)}v.sync=l;var b=v.GlobSync=l.GlobSync;function _(e,t,r){if("function"==typeof t&&(r=t,t=null),t&&t.sync){if(r)throw new TypeError("callback provided to sync glob");return new b(e,t)}if(!(this instanceof _))return new _(e,t,r);d(this,e,t),this._didRealPath=!1;var n=this.minimatch.set.length;this.matches=new Array(n),"function"==typeof r&&(r=g(r),this.on("error",r),this.on("end",(function(e){r(null,e)})));var i=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(0===n)return o();for(var s=0;s<n;s++)this._process(this.minimatch.set[s],s,!1,o);function o(){--i._processing,i._processing<=0&&i._finish()}}v.glob=v,v.hasMagic=function(e,t){var r=function(e,t){if(null===t||"object"!=typeof t)return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}({},t);r.noprocess=!0;var n=new _(e,r).minimatch.set;if(!e)return!1;if(n.length>1)return!0;for(var i=0;i<n[0].length;i++)if("string"!=typeof n[0][i])return!0;return!1},v.Glob=_,s(_,o),_.prototype._finish=function(){if(u(this instanceof _),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();h.finish(this),this.emit("end",this.found)}},_.prototype._realpath=function(){if(!this._didRealpath){this._didRealpath=!0;var e=this.matches.length;if(0===e)return this._finish();for(var t=this,r=0;r<this.matches.length;r++)this._realpathSet(r,n)}function n(){0==--e&&t._finish()}},_.prototype._realpathSet=function(e,t){var r=this.matches[e];if(!r)return t();var i=Object.keys(r),s=this,o=i.length;if(0===o)return t();var a=this.matches[e]=Object.create(null);i.forEach((function(r,i){r=s._makeAbs(r),n.realpath(r,s.realpathCache,(function(n,i){n?"stat"===n.syscall?a[r]=!0:s.emit("error",n):a[i]=!0,0==--o&&(s.matches[e]=a,t())}))}))},_.prototype._mark=function(e){return h.mark(this,e)},_.prototype._makeAbs=function(e){return h.makeAbs(this,e)},_.prototype.abort=function(){this.aborted=!0,this.emit("abort")},_.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},_.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var e=this._emitQueue.slice(0);this._emitQueue.length=0;for(var t=0;t<e.length;t++){var r=e[t];this._emitMatch(r[0],r[1])}}if(this._processQueue.length){var n=this._processQueue.slice(0);this._processQueue.length=0;for(t=0;t<n.length;t++){var i=n[t];this._processing--,this._process(i[0],i[1],i[2],i[3])}}}},_.prototype._process=function(e,t,r,n){if(u(this instanceof _),u("function"==typeof n),!this.aborted)if(this._processing++,this.paused)this._processQueue.push([e,t,r,n]);else{for(var s,o=0;"string"==typeof e[o];)o++;switch(o){case e.length:return void this._processSimple(e.join("/"),t,n);case 0:s=null;break;default:s=e.slice(0,o).join("/")}var a,l=e.slice(o);null===s?a=".":c(s)||c(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(s&&c(s)||(s="/"+s),a=s):a=s;var h=this._makeAbs(a);if(m(this,a))return n();l[0]===i.GLOBSTAR?this._processGlobStar(s,a,h,l,t,r,n):this._processReaddir(s,a,h,l,t,r,n)}},_.prototype._processReaddir=function(e,t,r,n,i,s,o){var a=this;this._readdir(r,s,(function(u,c){return a._processReaddir2(e,t,r,n,i,s,c,o)}))},_.prototype._processReaddir2=function(e,t,r,n,i,s,o,u){if(!o)return u();for(var c=n[0],l=!!this.minimatch.negate,h=c._glob,d=this.dot||"."===h.charAt(0),f=[],p=0;p<o.length;p++){if("."!==(y=o[p]).charAt(0)||d)(l&&!e?!y.match(c):y.match(c))&&f.push(y)}var m=f.length;if(0===m)return u();if(1===n.length&&!this.mark&&!this.stat){this.matches[i]||(this.matches[i]=Object.create(null));for(p=0;p<m;p++){var y=f[p];e&&(y="/"!==e?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=a.join(this.root,y)),this._emitMatch(i,y)}return u()}n.shift();for(p=0;p<m;p++){y=f[p];e&&(y="/"!==e?e+"/"+y:e+y),this._process([y].concat(n),i,s,u)}u()},_.prototype._emitMatch=function(e,t){if(!this.aborted&&!y(this,t))if(this.paused)this._emitQueue.push([e,t]);else{var r=c(t)?t:this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0;var i=this.statCache[r];i&&this.emit("stat",t,i),this.emit("match",t)}}},_.prototype._readdirInGlobStar=function(e,t){if(!this.aborted){if(this.follow)return this._readdir(e,!1,t);var r=this,n=p("lstat\0"+e,(function(n,i){if(n&&"ENOENT"===n.code)return t();var s=i&&i.isSymbolicLink();r.symlinks[e]=s,s||!i||i.isDirectory()?r._readdir(e,!1,t):(r.cache[e]="FILE",t())}));n&&r.fs.lstat(e,n)}},_.prototype._readdir=function(e,t,r){if(!this.aborted&&(r=p("readdir\0"+e+"\0"+t,r))){if(t&&!f(this.symlinks,e))return this._readdirInGlobStar(e,r);if(f(this.cache,e)){var n=this.cache[e];if(!n||"FILE"===n)return r();if(Array.isArray(n))return r(null,n)}this.fs.readdir(e,function(e,t,r){return function(n,i){n?e._readdirError(t,n,r):e._readdirEntries(t,i,r)}}(this,e,r))}},_.prototype._readdirEntries=function(e,t,r){if(!this.aborted){if(!this.mark&&!this.stat)for(var n=0;n<t.length;n++){var i=t[n];i="/"===e?e+i:e+"/"+i,this.cache[i]=!0}return this.cache[e]=t,r(null,t)}},_.prototype._readdirError=function(e,t,r){if(!this.aborted){switch(t.code){case"ENOTSUP":case"ENOTDIR":var n=this._makeAbs(e);if(this.cache[n]="FILE",n===this.cwdAbs){var i=new Error(t.code+" invalid cwd "+this.cwd);i.path=this.cwd,i.code=t.code,this.emit("error",i),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:this.cache[this._makeAbs(e)]=!1,this.strict&&(this.emit("error",t),this.abort()),this.silent||console.error("glob error",t)}return r()}},_.prototype._processGlobStar=function(e,t,r,n,i,s,o){var a=this;this._readdir(r,s,(function(u,c){a._processGlobStar2(e,t,r,n,i,s,c,o)}))},_.prototype._processGlobStar2=function(e,t,r,n,i,s,o,a){if(!o)return a();var u=n.slice(1),c=e?[e]:[],l=c.concat(u);this._process(l,i,!1,a);var h=this.symlinks[r],d=o.length;if(h&&s)return a();for(var f=0;f<d;f++){if("."!==o[f].charAt(0)||this.dot){var p=c.concat(o[f],u);this._process(p,i,!0,a);var m=c.concat(o[f],n);this._process(m,i,!0,a)}}a()},_.prototype._processSimple=function(e,t,r){var n=this;this._stat(e,(function(i,s){n._processSimple2(e,t,i,s,r)}))},_.prototype._processSimple2=function(e,t,n,i,s){if(this.matches[t]||(this.matches[t]=Object.create(null)),!i)return s();if(e&&c(e)&&!this.nomount){var o=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=a.join(this.root,e):(e=a.resolve(this.root,e),o&&(e+="/"))}"win32"===r.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e),s()},_.prototype._stat=function(e,t){var r=this._makeAbs(e),n="/"===e.slice(-1);if(e.length>this.maxLength)return t();if(!this.stat&&f(this.cache,r)){var i=this.cache[r];if(Array.isArray(i)&&(i="DIR"),!n||"DIR"===i)return t(null,i);if(n&&"FILE"===i)return t()}var s=this.statCache[r];if(void 0!==s){if(!1===s)return t(null,s);var o=s.isDirectory()?"DIR":"FILE";return n&&"FILE"===o?t():t(null,o,s)}var a=this,u=p("stat\0"+r,(function(n,i){if(i&&i.isSymbolicLink())return a.fs.stat(r,(function(n,s){n?a._stat2(e,r,null,i,t):a._stat2(e,r,n,s,t)}));a._stat2(e,r,n,i,t)}));u&&a.fs.lstat(r,u)},_.prototype._stat2=function(e,t,r,n,i){if(r&&("ENOENT"===r.code||"ENOTDIR"===r.code))return this.statCache[t]=!1,i();var s="/"===e.slice(-1);if(this.statCache[t]=n,"/"===t.slice(-1)&&n&&!n.isDirectory())return i(null,!1,n);var o=!0;return n&&(o=n.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||o,s&&"FILE"===o?i():i(null,o,n)}}).call(this,e("_process"))},{"./common.js":169,"./sync.js":174,_process:void 0,assert:void 0,events:void 0,"fs.realpath":167,inflight:175,inherits:176,minimatch:173,once:547,path:void 0,util:void 0}],171:[function(e,t,r){var n=e("balanced-match");t.exports=function(e){if(!e)return[];"{}"===e.substr(0,2)&&(e="\\{\\}"+e.substr(2));return y(function(e){return e.split("\\\\").join(i).split("\\{").join(s).split("\\}").join(o).split("\\,").join(a).split("\\.").join(u)}(e),!0).map(l)};var i="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function c(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function l(e){return e.split(i).join("\\").split(s).join("{").split(o).join("}").split(a).join(",").split(u).join(".")}function h(e){if(!e)return[""];var t=[],r=n("{","}",e);if(!r)return e.split(",");var i=r.pre,s=r.body,o=r.post,a=i.split(",");a[a.length-1]+="{"+s+"}";var u=h(o);return o.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),t.push.apply(t,a),t}function d(e){return"{"+e+"}"}function f(e){return/^-?0\d/.test(e)}function p(e,t){return e<=t}function m(e,t){return e>=t}function y(e,t){var r=[],i=n("{","}",e);if(!i)return[e];var s=i.pre,a=i.post.length?y(i.post,!1):[""];if(/\$$/.test(i.pre))for(var u=0;u<a.length;u++){var l=s+"{"+i.body+"}"+a[u];r.push(l)}else{var g,v,b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),_=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),w=b||_,E=i.body.indexOf(",")>=0;if(!w&&!E)return i.post.match(/,.*\}/)?y(e=i.pre+"{"+i.body+o+i.post):[e];if(w)g=i.body.split(/\.\./);else if(1===(g=h(i.body)).length&&1===(g=y(g[0],!1).map(d)).length)return a.map((function(e){return i.pre+g[0]+e}));if(w){var x=c(g[0]),C=c(g[1]),k=Math.max(g[0].length,g[1].length),O=3==g.length?Math.abs(c(g[2])):1,S=p;C<x&&(O*=-1,S=m);var T=g.some(f);v=[];for(var $=x;S($,C);$+=O){var j;if(_)"\\"===(j=String.fromCharCode($))&&(j="");else if(j=String($),T){var N=k-j.length;if(N>0){var A=new Array(N+1).join("0");j=$<0?"-"+A+j.slice(1):A+j}}v.push(j)}}else{v=[];for(var I=0;I<g.length;I++)v.push.apply(v,y(g[I],!1))}for(I=0;I<v.length;I++)for(u=0;u<a.length;u++){l=s+v[I]+a[u];(!t||w||l)&&r.push(l)}}return r}},{"balanced-match":159}],172:[function(e,t,r){(function(e){const r="object"==typeof e&&e&&"win32"===e.platform;t.exports=r?{sep:"\\"}:{sep:"/"}}).call(this,e("_process"))},{_process:void 0}],173:[function(e,t,r){const n=t.exports=(e,t,r={})=>(y(t),!(!r.nocomment&&"#"===t.charAt(0))&&new v(t,r).match(e));t.exports=n;const i=e("./lib/path.js");n.sep=i.sep;const s=Symbol("globstar **");n.GLOBSTAR=s;const o=e("brace-expansion"),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},u="[^/]",c="[^/]*?",l=e=>e.split("").reduce(((e,t)=>(e[t]=!0,e)),{}),h=l("().*{}+?[]^$\\!"),d=l("[.("),f=/\/+/;n.filter=(e,t={})=>(r,i,s)=>n(r,e,t);const p=(e,t={})=>{const r={};return Object.keys(e).forEach((t=>r[t]=e[t])),Object.keys(t).forEach((e=>r[e]=t[e])),r};n.defaults=e=>{if(!e||"object"!=typeof e||!Object.keys(e).length)return n;const t=n,r=(r,n,i)=>t(r,n,p(e,i));return(r.Minimatch=class extends t.Minimatch{constructor(t,r){super(t,p(e,r))}}).defaults=r=>t.defaults(p(e,r)).Minimatch,r.filter=(r,n)=>t.filter(r,p(e,n)),r.defaults=r=>t.defaults(p(e,r)),r.makeRe=(r,n)=>t.makeRe(r,p(e,n)),r.braceExpand=(r,n)=>t.braceExpand(r,p(e,n)),r.match=(r,n,i)=>t.match(r,n,p(e,i)),r},n.braceExpand=(e,t)=>m(e,t);const m=(e,t={})=>(y(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:o(e)),y=e=>{if("string"!=typeof e)throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},g=Symbol("subparse");n.makeRe=(e,t)=>new v(e,t||{}).makeRe(),n.match=(e,t,r={})=>{const n=new v(t,r);return e=e.filter((e=>n.match(e))),n.options.nonull&&!e.length&&e.push(t),e};class v{constructor(e,t){y(e),t||(t={}),this.options=t,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||!1===t.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.make()}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&"#"===e.charAt(0))return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate();let r=this.globSet=this.braceExpand();t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,r),r=this.globParts=r.map((e=>e.split(f))),this.debug(this.pattern,r),r=r.map(((e,t,r)=>e.map(this.parse,this))),this.debug(this.pattern,r),r=r.filter((e=>-1===e.indexOf(!1))),this.debug(this.pattern,r),this.set=r}parseNegate(){if(this.options.nonegate)return;const e=this.pattern;let t=!1,r=0;for(let n=0;n<e.length&&"!"===e.charAt(n);n++)t=!t,r++;r&&(this.pattern=e.substr(r)),this.negate=t}matchOne(e,t,r){var n=this.options;this.debug("matchOne",{this:this,file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var i=0,o=0,a=e.length,u=t.length;i<a&&o<u;i++,o++){this.debug("matchOne loop");var c,l=t[o],h=e[i];if(this.debug(t,l,h),!1===l)return!1;if(l===s){this.debug("GLOBSTAR",[t,l,h]);var d=i,f=o+1;if(f===u){for(this.debug("** at the end");i<a;i++)if("."===e[i]||".."===e[i]||!n.dot&&"."===e[i].charAt(0))return!1;return!0}for(;d<a;){var p=e[d];if(this.debug("\nglobstar while",e,d,t,f,p),this.matchOne(e.slice(d),t.slice(f),r))return this.debug("globstar found match!",d,a,p),!0;if("."===p||".."===p||!n.dot&&"."===p.charAt(0)){this.debug("dot detected!",e,d,t,f);break}this.debug("globstar swallow a segment, and continue"),d++}return!(!r||(this.debug("\n>>> no match, partial?",e,d,t,f),d!==a))}if("string"==typeof l?(c=h===l,this.debug("string match",l,h,c)):(c=h.match(l),this.debug("pattern match",l,h,c)),!c)return!1}if(i===a&&o===u)return!0;if(i===a)return r;if(o===u)return i===a-1&&""===e[i];throw new Error("wtf?")}braceExpand(){return m(this.pattern,this.options)}parse(e,t){y(e);const r=this.options;if("**"===e){if(!r.noglobstar)return s;e="*"}if(""===e)return"";let n="",i=!!r.nocase,o=!1;const l=[],f=[];let p,m,v,b,_=!1,w=-1,E=-1;const x="."===e.charAt(0)?"":r.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=()=>{if(p){switch(p){case"*":n+=c,i=!0;break;case"?":n+=u,i=!0;break;default:n+="\\"+p}this.debug("clearStateChar %j %j",p,n),p=!1}};for(let t,s=0;s<e.length&&(t=e.charAt(s));s++)if(this.debug("%s\t%s %s %j",e,s,n,t),o){if("/"===t)return!1;h[t]&&(n+="\\"),n+=t,o=!1}else switch(t){case"/":return!1;case"\\":C(),o=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s\t%s %s %j <-- stateChar",e,s,n,t),_){this.debug("  in class"),"!"===t&&s===E+1&&(t="^"),n+=t;continue}this.debug("call clearStateChar %j",p),C(),p=t,r.noext&&C();continue;case"(":if(_){n+="(";continue}if(!p){n+="\\(";continue}l.push({type:p,start:s-1,reStart:n.length,open:a[p].open,close:a[p].close}),n+="!"===p?"(?:(?!(?:":"(?:",this.debug("plType %j %j",p,n),p=!1;continue;case")":if(_||!l.length){n+="\\)";continue}C(),i=!0,v=l.pop(),n+=v.close,"!"===v.type&&f.push(v),v.reEnd=n.length;continue;case"|":if(_||!l.length){n+="\\|";continue}C(),n+="|";continue;case"[":if(C(),_){n+="\\"+t;continue}_=!0,E=s,w=n.length,n+=t;continue;case"]":if(s===E+1||!_){n+="\\"+t;continue}m=e.substring(E+1,s);try{RegExp("["+m+"]")}catch(e){b=this.parse(m,g),n=n.substr(0,w)+"\\["+b[0]+"\\]",i=i||b[1],_=!1;continue}i=!0,_=!1,n+=t;continue;default:C(),!h[t]||"^"===t&&_||(n+="\\"),n+=t}for(_&&(m=e.substr(E+1),b=this.parse(m,g),n=n.substr(0,w)+"\\["+b[0],i=i||b[1]),v=l.pop();v;v=l.pop()){let e;e=n.slice(v.reStart+v.open.length),this.debug("setting tail",n,v),e=e.replace(/((?:\\{2}){0,64})(\\?)\|/g,((e,t,r)=>(r||(r="\\"),t+t+r+"|"))),this.debug("tail=%j\n   %s",e,e,v,n);const t="*"===v.type?c:"?"===v.type?u:"\\"+v.type;i=!0,n=n.slice(0,v.reStart)+t+"\\("+e}C(),o&&(n+="\\\\");const k=d[n.charAt(0)];for(let e=f.length-1;e>-1;e--){const r=f[e],i=n.slice(0,r.reStart),s=n.slice(r.reStart,r.reEnd-8);let o=n.slice(r.reEnd);const a=n.slice(r.reEnd-8,r.reEnd)+o,u=i.split("(").length-1;let c=o;for(let e=0;e<u;e++)c=c.replace(/\)[+*?]?/,"");o=c;n=i+s+o+(""===o&&t!==g?"$":"")+a}if(""!==n&&i&&(n="(?=.)"+n),k&&(n=x+n),t===g)return[n,i];if(!i)return e.replace(/\\(.)/g,"$1");const O=r.nocase?"i":"";try{return Object.assign(new RegExp("^"+n+"$",O),{_glob:e,_src:n})}catch(e){return new RegExp("$.")}}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,r=t.noglobstar?c:t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=t.nocase?"i":"";let i=e.map((e=>(e=e.map((e=>"string"==typeof e?e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):e===s?s:e._src)).reduce(((e,t)=>(e[e.length-1]===s&&t===s||e.push(t),e)),[]),e.forEach(((t,n)=>{t===s&&e[n-1]!==s&&(0===n?e.length>1?e[n+1]="(?:\\/|"+r+"\\/)?"+e[n+1]:e[n]=r:n===e.length-1?e[n-1]+="(?:\\/|"+r+")?":(e[n-1]+="(?:\\/|\\/"+r+"\\/)"+e[n+1],e[n+1]=s))})),e.filter((e=>e!==s)).join("/")))).join("|");i="^(?:"+i+")$",this.negate&&(i="^(?!"+i+").*$");try{this.regexp=new RegExp(i,n)}catch(e){this.regexp=!1}return this.regexp}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return""===e;if("/"===e&&t)return!0;const r=this.options;"/"!==i.sep&&(e=e.split(i.sep).join("/")),e=e.split(f),this.debug(this.pattern,"split",e);const n=this.set;let s;this.debug(this.pattern,"set",n);for(let t=e.length-1;t>=0&&(s=e[t],!s);t--);for(let i=0;i<n.length;i++){const o=n[i];let a=e;r.matchBase&&1===o.length&&(a=[s]);if(this.matchOne(a,o,t))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(e){return n.defaults(e).Minimatch}}n.Minimatch=v},{"./lib/path.js":172,"brace-expansion":171}],174:[function(e,t,r){(function(r){t.exports=f,f.GlobSync=p;var n=e("fs.realpath"),i=e("minimatch"),s=(i.Minimatch,e("./glob.js").Glob,e("util"),e("path")),o=e("assert"),a=e("path").isAbsolute,u=e("./common.js"),c=u.setopts,l=u.ownProp,h=u.childrenIgnored,d=u.isIgnored;function f(e,t){if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");return new p(e,t).found}function p(e,t){if(!e)throw new Error("must provide pattern");if("function"==typeof t||3===arguments.length)throw new TypeError("callback provided to sync glob\nSee: https://github.com/isaacs/node-glob/issues/167");if(!(this instanceof p))return new p(e,t);if(c(this,e,t),this.noprocess)return this;var r=this.minimatch.set.length;this.matches=new Array(r);for(var n=0;n<r;n++)this._process(this.minimatch.set[n],n,!1);this._finish()}p.prototype._finish=function(){if(o.ok(this instanceof p),this.realpath){var e=this;this.matches.forEach((function(t,r){var i=e.matches[r]=Object.create(null);for(var s in t)try{s=e._makeAbs(s),i[n.realpathSync(s,e.realpathCache)]=!0}catch(t){if("stat"!==t.syscall)throw t;i[e._makeAbs(s)]=!0}}))}u.finish(this)},p.prototype._process=function(e,t,r){o.ok(this instanceof p);for(var n,s=0;"string"==typeof e[s];)s++;switch(s){case e.length:return void this._processSimple(e.join("/"),t);case 0:n=null;break;default:n=e.slice(0,s).join("/")}var u,c=e.slice(s);null===n?u=".":a(n)||a(e.map((function(e){return"string"==typeof e?e:"[*]"})).join("/"))?(n&&a(n)||(n="/"+n),u=n):u=n;var l=this._makeAbs(u);h(this,u)||(c[0]===i.GLOBSTAR?this._processGlobStar(n,u,l,c,t,r):this._processReaddir(n,u,l,c,t,r))},p.prototype._processReaddir=function(e,t,r,n,i,o){var a=this._readdir(r,o);if(a){for(var u=n[0],c=!!this.minimatch.negate,l=u._glob,h=this.dot||"."===l.charAt(0),d=[],f=0;f<a.length;f++){if("."!==(y=a[f]).charAt(0)||h)(c&&!e?!y.match(u):y.match(u))&&d.push(y)}var p=d.length;if(0!==p)if(1!==n.length||this.mark||this.stat){n.shift();for(f=0;f<p;f++){var m;y=d[f];m=e?[e,y]:[y],this._process(m.concat(n),i,o)}}else{this.matches[i]||(this.matches[i]=Object.create(null));for(var f=0;f<p;f++){var y=d[f];e&&(y="/"!==e.slice(-1)?e+"/"+y:e+y),"/"!==y.charAt(0)||this.nomount||(y=s.join(this.root,y)),this._emitMatch(i,y)}}}},p.prototype._emitMatch=function(e,t){if(!d(this,t)){var r=this._makeAbs(t);if(this.mark&&(t=this._mark(t)),this.absolute&&(t=r),!this.matches[e][t]){if(this.nodir){var n=this.cache[r];if("DIR"===n||Array.isArray(n))return}this.matches[e][t]=!0,this.stat&&this._stat(t)}}},p.prototype._readdirInGlobStar=function(e){if(this.follow)return this._readdir(e,!1);var t,r;try{r=this.fs.lstatSync(e)}catch(e){if("ENOENT"===e.code)return null}var n=r&&r.isSymbolicLink();return this.symlinks[e]=n,n||!r||r.isDirectory()?t=this._readdir(e,!1):this.cache[e]="FILE",t},p.prototype._readdir=function(e,t){if(t&&!l(this.symlinks,e))return this._readdirInGlobStar(e);if(l(this.cache,e)){var r=this.cache[e];if(!r||"FILE"===r)return null;if(Array.isArray(r))return r}try{return this._readdirEntries(e,this.fs.readdirSync(e))}catch(t){return this._readdirError(e,t),null}},p.prototype._readdirEntries=function(e,t){if(!this.mark&&!this.stat)for(var r=0;r<t.length;r++){var n=t[r];n="/"===e?e+n:e+"/"+n,this.cache[n]=!0}return this.cache[e]=t,t},p.prototype._readdirError=function(e,t){switch(t.code){case"ENOTSUP":case"ENOTDIR":var r=this._makeAbs(e);if(this.cache[r]="FILE",r===this.cwdAbs){var n=new Error(t.code+" invalid cwd "+this.cwd);throw n.path=this.cwd,n.code=t.code,n}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(e)]=!1;break;default:if(this.cache[this._makeAbs(e)]=!1,this.strict)throw t;this.silent||console.error("glob error",t)}},p.prototype._processGlobStar=function(e,t,r,n,i,s){var o=this._readdir(r,s);if(o){var a=n.slice(1),u=e?[e]:[],c=u.concat(a);this._process(c,i,!1);var l=o.length;if(!this.symlinks[r]||!s)for(var h=0;h<l;h++){if("."!==o[h].charAt(0)||this.dot){var d=u.concat(o[h],a);this._process(d,i,!0);var f=u.concat(o[h],n);this._process(f,i,!0)}}}},p.prototype._processSimple=function(e,t){var n=this._stat(e);if(this.matches[t]||(this.matches[t]=Object.create(null)),n){if(e&&a(e)&&!this.nomount){var i=/[\/\\]$/.test(e);"/"===e.charAt(0)?e=s.join(this.root,e):(e=s.resolve(this.root,e),i&&(e+="/"))}"win32"===r.platform&&(e=e.replace(/\\/g,"/")),this._emitMatch(t,e)}},p.prototype._stat=function(e){var t=this._makeAbs(e),r="/"===e.slice(-1);if(e.length>this.maxLength)return!1;if(!this.stat&&l(this.cache,t)){var n=this.cache[t];if(Array.isArray(n)&&(n="DIR"),!r||"DIR"===n)return n;if(r&&"FILE"===n)return!1}var i=this.statCache[t];if(!i){var s;try{s=this.fs.lstatSync(t)}catch(e){if(e&&("ENOENT"===e.code||"ENOTDIR"===e.code))return this.statCache[t]=!1,!1}if(s&&s.isSymbolicLink())try{i=this.fs.statSync(t)}catch(e){i=s}else i=s}this.statCache[t]=i;n=!0;return i&&(n=i.isDirectory()?"DIR":"FILE"),this.cache[t]=this.cache[t]||n,(!r||"FILE"!==n)&&n},p.prototype._mark=function(e){return u.mark(this,e)},p.prototype._makeAbs=function(e){return u.makeAbs(this,e)}}).call(this,e("_process"))},{"./common.js":169,"./glob.js":170,_process:void 0,assert:void 0,"fs.realpath":167,minimatch:173,path:void 0,util:void 0}],175:[function(e,t,r){(function(r){var n=e("wrappy"),i=Object.create(null),s=e("once");function o(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n]=e[n];return r}t.exports=n((function(e,t){return i[e]?(i[e].push(t),null):(i[e]=[t],function(e){return s((function t(){var n=i[e],s=n.length,a=o(arguments);try{for(var u=0;u<s;u++)n[u].apply(null,a)}finally{n.length>s?(n.splice(0,s),r.nextTick((function(){t.apply(null,a)}))):delete i[e]}}))}(e))}))}).call(this,e("_process"))},{_process:void 0,once:547,wrappy:576}],176:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],177:[function(e,t,r){"use strict";var n=t.exports=function(e,t,r){"function"==typeof t&&(r=t,t={}),i(t,"function"==typeof(r=t.cb||r)?r:r.pre||function(){},r.post||function(){},e,"",e)};function i(e,t,r,s,o,a,u,c,l,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var d in t(s,o,a,u,c,l,h),s){var f=s[d];if(Array.isArray(f)){if(d in n.arrayKeywords)for(var p=0;p<f.length;p++)i(e,t,r,f[p],o+"/"+d+"/"+p,a,o,d,s,p)}else if(d in n.propsKeywords){if(f&&"object"==typeof f)for(var m in f)i(e,t,r,f[m],o+"/"+d+"/"+m.replace(/~/g,"~0").replace(/\//g,"~1"),a,o,d,s,m)}else(d in n.keywords||e.allKeys&&!(d in n.skipKeywords))&&i(e,t,r,f,o+"/"+d,a,o,d,s)}r(s,o,a,u,c,l,h)}}n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},{}],178:[function(e,t,r){const n=e("./lib/index");n.knex=n,n.default=n,t.exports=n},{"./lib/index":267}],179:[function(e,t,r){const n=e("lodash/clone"),i=e("lodash/isEmpty"),{callbackify:s}=e("util"),o=e("./util/finally-mixin"),{formatQuery:a}=e("./execution/internal/query-executioner");t.exports={augmentWithBuilderInterface:function(e){e.prototype.toQuery=function(e){let t=this.toSQL(this._method,e);return Array.isArray(t)||(t=[t]),t.length?t.map((t=>a(t.sql,t.bindings,e,this.client))).reduce(((e,t)=>e.concat(e.endsWith(";")?"\n":";\n",t))):""},e.prototype.then=function(){let e=this.client.runner(this).run();return this.client.config.asyncStackTraces&&(e=e.catch((e=>{e.originalStack=e.stack;const t=e.stack.split("\n")[0],{error:r,lines:n}=this._asyncStack,i=r.stack.split("\n").slice(n);throw i.unshift(t),e.stack=i.join("\n"),e}))),e.then.apply(e,arguments)},e.prototype.options=function(e){return this._options=this._options||[],this._options.push(n(e)||{}),this},e.prototype.connection=function(e){return this._connection=e,this.client.processPassedConnection(e),this},e.prototype.debug=function(e){return this._debug=!arguments.length||e,this},e.prototype.transacting=function(e){if(e&&e.client&&(e.client.transacting?this.client=e.client:e.client.logger.warn(`Invalid transaction value: ${e.client}`)),i(e))throw this.client.logger.error("Invalid value on transacting call, potential bug"),Error("Invalid transacting value (null, undefined or empty object)");return this},e.prototype.stream=function(e){return this.client.runner(this).stream(e)},e.prototype.pipe=function(e,t){return this.client.runner(this).pipe(e,t)},e.prototype.asCallback=function(e){const t=this.then();return s((()=>t))(e),t},e.prototype.catch=function(e){return this.then().catch(e)},Object.defineProperty(e.prototype,Symbol.toStringTag,{get:()=>"object"}),o(e.prototype)}}},{"./execution/internal/query-executioner":260,"./util/finally-mixin":291,"lodash/clone":475,"lodash/isEmpty":500,util:void 0}],180:[function(e,t,r){const{Pool:n,TimeoutError:i}=e("tarn"),{EventEmitter:s}=e("events"),{promisify:o}=e("util"),{makeEscape:a}=e("./util/string"),u=e("lodash/cloneDeep"),c=e("lodash/defaults"),l=e("lodash/uniqueId"),h=e("./execution/runner"),d=e("./execution/transaction"),{executeQuery:f,enrichQueryObject:p}=e("./execution/internal/query-executioner"),m=e("./query/querybuilder"),y=e("./query/querycompiler"),g=e("./schema/builder"),v=e("./schema/compiler"),b=e("./schema/tablebuilder"),_=e("./schema/tablecompiler"),w=e("./schema/columnbuilder"),E=e("./schema/columncompiler"),{KnexTimeoutError:x}=e("./util/timeout"),{outputQuery:C,unwrapRaw:k}=e("./formatter/wrappingFormatter"),{compileCallback:O}=e("./formatter/formatterUtils"),S=e("./raw"),T=e("./ref"),$=e("./formatter"),j=e("./logger"),{POOL_CONFIG_OPTIONS:N}=e("./constants"),A=e("./schema/viewbuilder.js"),I=e("./schema/viewcompiler.js"),P=e("lodash/isPlainObject"),R=e("debug")("knex:client");class q extends s{constructor(e={}){super(),this.config=e,this.logger=new j(e),this.dialect&&!this.config.client&&this.logger.warn("Using 'this.dialect' to identify the client is deprecated and support for it will be removed in the future. Please use configuration option 'client' instead.");if(!(this.config.client||this.dialect))throw new Error("knex: Required configuration option 'client' is missing.");e.version&&(this.version=e.version),e.connection&&e.connection instanceof Function?(this.connectionConfigProvider=e.connection,this.connectionConfigExpirationChecker=()=>!0):(this.connectionSettings=u(e.connection||{}),this.connectionConfigExpirationChecker=null),this.driverName&&e.connection&&(this.initializeDriver(),(!e.pool||e.pool&&0!==e.pool.max)&&this.initializePool(e)),this.valueForUndefined=this.raw("DEFAULT"),e.useNullAsDefault&&(this.valueForUndefined=null)}formatter(e){return new $(this,e)}queryBuilder(){return new m(this)}queryCompiler(e,t){return new y(this,e,t)}schemaBuilder(){return new g(this)}schemaCompiler(e){return new v(this,e)}tableBuilder(e,t,r,n){return new b(this,e,t,r,n)}viewBuilder(e,t,r){return new A(this,e,t,r)}tableCompiler(e){return new _(this,e)}viewCompiler(e){return new I(this,e)}columnBuilder(e,t,r){return new w(this,e,t,r)}columnCompiler(e,t){return new E(this,e,t)}runner(e){return new h(this,e)}transaction(e,t,r){return new d(this,e,t,r)}raw(){return new S(this).set(...arguments)}ref(){return new T(this,...arguments)}query(e,t){const r=p(e,t,this);return f(e,r,this)}stream(e,t,r,n){const i=p(e,t,this);return this._stream(e,i,r,n)}prepBindings(e){return e}positionBindings(e){return e}postProcessResponse(e,t){return this.config.postProcessResponse?this.config.postProcessResponse(e,t):e}wrapIdentifier(e,t){return this.customWrapIdentifier(e,this.wrapIdentifierImpl,t)}customWrapIdentifier(e,t,r){return this.config.wrapIdentifier?this.config.wrapIdentifier(e,t,r):t(e)}wrapIdentifierImpl(e){return"*"!==e?`"${e.replace(/"/g,'""')}"`:"*"}initializeDriver(){try{this.driver=this._driver()}catch(e){const t=`Knex: run\n$ npm install ${this.driverName} --save`;throw this.logger.error(`${t}\n${e.message}\n${e.stack}`),new Error(`${t}\n${e.message}`)}}poolDefaults(){return{min:2,max:10,propagateCreateError:!0}}getPoolSettings(e){e=c({},e,this.poolDefaults()),N.forEach((t=>{t in e&&this.logger.warn([`Pool config option "${t}" is no longer supported.`,"See https://github.com/Vincit/tarn.js for possible pool config options."].join(" "))}));const t=[this.config.acquireConnectionTimeout||6e4,e.acquireTimeoutMillis].filter((e=>void 0!==e));e.acquireTimeoutMillis=Math.min(...t);const r=async()=>{if(!this.connectionConfigProvider)return;if(!this.connectionConfigExpirationChecker||!this.connectionConfigExpirationChecker())return;const e=await this.connectionConfigProvider();e.expirationChecker?(this.connectionConfigExpirationChecker=e.expirationChecker,delete e.expirationChecker):this.connectionConfigExpirationChecker=null,this.connectionSettings=e};return Object.assign(e,{create:async()=>{await r();const t=await this.acquireRawConnection();return t.__knexUid=l("__knexUid"),e.afterCreate&&await o(e.afterCreate)(t),t},destroy:e=>{if(void 0!==e)return this.destroyRawConnection(e)},validate:e=>e.__knex__disposed?(this.logger.warn(`Connection Error: ${e.__knex__disposed}`),!1):this.validateConnection(e)})}initializePool(e=this.config){if(this.pool)return void this.logger.warn("The pool has already been initialized");const t={...this.getPoolSettings(e.pool)};t.afterCreate&&delete t.afterCreate,this.pool=new n(t)}validateConnection(e){return!0}async acquireConnection(){if(!this.pool)throw new Error("Unable to acquire a connection");try{const e=await this.pool.acquire().promise;return R("acquired connection from pool: %s",e.__knexUid),e}catch(e){let t=e;throw e instanceof i&&(t=new x("Knex: Timeout acquiring a connection. The pool is probably full. Are you missing a .transacting(trx) call?")),t}}releaseConnection(e){R("releasing connection to pool: %s",e.__knexUid);return this.pool.release(e)||R("pool refused connection: %s",e.__knexUid),Promise.resolve()}async destroy(e){try{this.pool&&this.pool.destroy&&await this.pool.destroy(),this.pool=void 0,"function"==typeof e&&e()}catch(t){if("function"==typeof e)return e(t);throw t}}database(){return this.connectionSettings.database}toString(){return"[object KnexClient]"}assertCanCancelQuery(){if(!this.canCancelQuery)throw new Error("Query cancelling not supported for this dialect")}cancelQuery(){throw new Error("Query cancelling not supported for this dialect")}alias(e,t){return e+" as "+t}parameter(e,t,r){return"function"==typeof e?C(O(e,void 0,this,r),!0,t,this):k(e,!0,t,this,r)||"?"}parameterize(e,t,r,n){if("function"==typeof e)return this.parameter(e,r,n);e=Array.isArray(e)?e:[e];let i="",s=-1;for(;++s<e.length;){s>0&&(i+=", ");let o=e[s];P(o)&&(o=JSON.stringify(o)),i+=this.parameter(void 0===o?t:o,r,n)}return i}values(e,t,r){return Array.isArray(e)?Array.isArray(e[0])?`(${e.map((e=>`(${this.parameterize(e,void 0,t,r)})`)).join(", ")})`:`(${this.parameterize(e,void 0,t,r)})`:e&&e.isRawInstance?`(${this.parameter(e,t,r)})`:this.parameter(e,t,r)}processPassedConnection(e){}toPathForJson(e){return e}}Object.assign(q.prototype,{_escapeBinding:a({escapeString:e=>`'${e.replace(/'/g,"''")}'`}),canCancelQuery:!1}),t.exports=q},{"./constants":181,"./execution/internal/query-executioner":260,"./execution/runner":261,"./execution/transaction":262,"./formatter":263,"./formatter/formatterUtils":264,"./formatter/wrappingFormatter":266,"./logger":273,"./query/querybuilder":278,"./query/querycompiler":279,"./raw":280,"./ref":281,"./schema/builder":282,"./schema/columnbuilder":283,"./schema/columncompiler":284,"./schema/compiler":285,"./schema/tablebuilder":287,"./schema/tablecompiler":288,"./schema/viewbuilder.js":289,"./schema/viewcompiler.js":290,"./util/string":297,"./util/timeout":298,debug:299,events:void 0,"lodash/cloneDeep":476,"lodash/defaults":479,"lodash/isPlainObject":507,"lodash/uniqueId":537,tarn:556,util:void 0}],181:[function(e,t,r){const n=Object.freeze({pg:"postgres",postgresql:"postgres",sqlite:"sqlite3"}),i=Object.freeze(["mssql","mysql","mysql2","oracledb","postgres","pgnative","redshift","sqlite3","cockroachdb","better-sqlite3"].concat(Object.keys(n))),s=Object.freeze({MsSQL:"mssql",MySQL:"mysql",MySQL2:"mysql2",Oracle:"oracledb",PostgreSQL:"pg",PgNative:"pgnative",Redshift:"pg-redshift",SQLite:"sqlite3",CockroachDB:"cockroachdb",BetterSQLite3:"better-sqlite3"}),o=Object.freeze(["maxWaitingClients","testOnBorrow","fifo","priorityRange","autostart","evictionRunIntervalMillis","numTestsPerRun","softIdleTimeoutMillis","Promise"]);t.exports={CLIENT_ALIASES:n,SUPPORTED_CLIENTS:i,POOL_CONFIG_OPTIONS:o,COMMA_NO_PAREN_REGEX:/,[\s](?![^(]*\))/g,DRIVER_NAMES:s}},{}],182:[function(e,t,r){const n=e("../sqlite3");class i extends n{_driver(){return e("better-sqlite3")}async acquireRawConnection(){return new this.driver(this.connectionSettings.filename)}async destroyRawConnection(e){return e.close()}async _query(e,t){if(!t.sql)throw new Error("The query is empty");if(!e)throw new Error("No connection provided");const r=e.prepare(t.sql),n=this._formatBindings(t.bindings);if(r.reader){const e=await r.all(n);return t.response=e,t}const i=await r.run(n);return t.response=i,t.context={lastID:i.lastInsertRowid,changes:i.changes},t}_formatBindings(e){return e?e.map((e=>e instanceof Date?e.valueOf():"boolean"==typeof e?Number(e):e)):[]}}Object.assign(i.prototype,{driverName:"better-sqlite3"}),t.exports=i},{"../sqlite3":243,"better-sqlite3":1}],183:[function(e,t,r){const n=e("../../query/querybuilder"),i=e("lodash/isEmpty");t.exports=class extends n{upsert(e,t,r){return this._method="upsert",i(t)||this.returning(t,r),this._single.upsert=e,this}}},{"../../query/querybuilder":278,"lodash/isEmpty":500}],184:[function(e,t,r){const n=e("../postgres/query/pg-querycompiler"),{columnize:i,wrap:s,operator:o}=e("../../formatter/wrappingFormatter");t.exports=class extends n{truncate(){return`truncate ${this.tableName}`}upsert(){let e=this._upsert();if(""===e)return e;const{returning:t}=this.single;return t&&(e+=this._returning(t)),{sql:e,returning:t}}_upsert(){const e=this.single.upsert||[],t=this.with()+`upsert into ${this.tableName} `,r=this._insertBody(e);return""===r?"":t+r}_groupOrder(e,t){return this._basicGroupOrder(e,t)}whereJsonPath(e){let t="";return t=!isNaN(e.value)&&parseInt(e.value)?"::int":!isNaN(e.value)&&parseFloat(e.value)?"::float":" #>> '{}'",`json_extract_path(${this._columnClause(e)}, ${this.client.toArrayPathFromJsonPath(e.jsonPath,this.builder,this.bindingsHolder)})${t} ${o(e.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(e)}`}_jsonExtract(e,t){let r;return r=Array.isArray(t.column)?t.column:[t],r.map((e=>{const t=`json_extract_path(${i(e.column||e[0],this.builder,this.client,this.bindingsHolder)}, ${this.client.toArrayPathFromJsonPath(e.path||e[1],this.builder,this.bindingsHolder)})`,r=e.alias||e[2];return r?this.client.alias(t,this.formatter.wrap(r)):t})).join(", ")}_onJsonPathEquals(e,t){return"json_extract_path("+s(t.columnFirst,void 0,this.builder,this.client,this.bindingsHolder)+", "+this.client.toArrayPathFromJsonPath(t.jsonPathFirst,this.builder,this.bindingsHolder)+") = json_extract_path("+s(t.columnSecond,void 0,this.builder,this.client,this.bindingsHolder)+", "+this.client.toArrayPathFromJsonPath(t.jsonPathSecond,this.builder,this.bindingsHolder)+")"}}},{"../../formatter/wrappingFormatter":266,"../postgres/query/pg-querycompiler":228}],185:[function(e,t,r){const n=e("../postgres/schema/pg-tablecompiler");t.exports=class extends n{constructor(e,t){super(e,t)}addColumns(e,t,r){if(t===this.alterColumnsPrefix)for(const e of r)this.client.logger.warn("Experimental alter column in use, see issue: https://github.com/cockroachdb/cockroach/issues/49329"),this.pushQuery({sql:"SET enable_experimental_alter_column_type_general = true",bindings:[]}),super._addColumn(e);else super.addColumns(e,t)}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`drop index ${this.tableName()}@${t} cascade `)}}},{"../postgres/schema/pg-tablecompiler":231}],186:[function(e,t,r){const n=e("../postgres/schema/pg-viewcompiler.js");t.exports=class extends n{renameColumn(e,t){throw new Error("rename column of views is not supported by this dialect.")}defaultTo(e,t){throw new Error("change default values of views is not supported by this dialect.")}}},{"../postgres/schema/pg-viewcompiler.js":233}],187:[function(e,t,r){const n=e("../postgres"),i=e("../postgres/execution/pg-transaction"),s=e("./crdb-querycompiler"),o=e("./crdb-tablecompiler"),a=e("./crdb-viewcompiler"),u=e("./crdb-querybuilder");class c extends n{transaction(){return new i(this,...arguments)}queryCompiler(e,t){return new s(this,e,t)}tableCompiler(){return new o(this,...arguments)}viewCompiler(){return new a(this,...arguments)}queryBuilder(){return new u(this)}_parseVersion(e){return e.split(" ")[2]}async cancelQuery(e){try{return await this._wrappedCancelQueryCall(null,e)}catch(e){throw this.logger.warn(`Connection Error: ${e}`),e}}_wrappedCancelQueryCall(e,t){if(0!==t.activeQuery.processID||0!==t.activeQuery.secretKey)return t.cancel(t,t.activeQuery)}toArrayPathFromJsonPath(e,t,r){return e.replace(/^(\$\.)/,"").replace(/\[([0-9]+)]/,".$1").split(".").map(function(e){return this.parameter(e,t,r)}.bind(this)).join(", ")}}Object.assign(c.prototype,{driverName:"cockroachdb"}),t.exports=c},{"../postgres":226,"../postgres/execution/pg-transaction":225,"./crdb-querybuilder":183,"./crdb-querycompiler":184,"./crdb-tablecompiler":185,"./crdb-viewcompiler":186}],188:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getDialectByNameOrAlias=void 0;const{resolveClientNameWithAliases:n}=e("../util/helpers"),i=Object.freeze({"better-sqlite3":()=>e("./better-sqlite3"),cockroachdb:()=>e("./cockroachdb"),mssql:()=>e("./mssql"),mysql:()=>e("./mysql"),mysql2:()=>e("./mysql2"),oracle:()=>e("./oracle"),oracledb:()=>e("./oracledb"),pgnative:()=>e("./pgnative"),postgres:()=>e("./postgres"),redshift:()=>e("./redshift"),sqlite3:()=>e("./sqlite3")});r.getDialectByNameOrAlias=function(e){const t=n(e),r=i[t];if(!r)throw new Error(`Invalid clientName given: ${e}`);return r()}},{"../util/helpers":292,"./better-sqlite3":182,"./cockroachdb":187,"./mssql":189,"./mysql":197,"./mysql2":205,"./oracle":207,"./oracledb":216,"./pgnative":224,"./postgres":226,"./redshift":234,"./sqlite3":243}],189:[function(e,t,r){(function(r,n){const i=e("lodash/map"),s=e("lodash/isNil"),o=e("../../client"),a=e("./mssql-formatter"),u=e("./transaction"),c=e("./query/mssql-querycompiler"),l=e("./schema/mssql-compiler"),h=e("./schema/mssql-tablecompiler"),d=e("./schema/mssql-viewcompiler"),f=e("./schema/mssql-columncompiler"),p=e("../../query/querybuilder"),m=e("debug")("knex:mssql"),y=-2147483648,g=2147483647,v=-9007199254740991,b=9007199254740991;class _ extends o{constructor(e={}){super(e)}_generateConnection(){const e=this.connectionSettings;e.options=e.options||{};const t={authentication:{type:e.type||"default",options:{userName:e.userName||e.user,password:e.password,domain:e.domain,token:e.token,clientId:e.clientId,clientSecret:e.clientSecret,tenantId:e.tenantId,msiEndpoint:e.msiEndpoint}},server:e.server||e.host,options:{database:e.database,encrypt:e.encrypt||!1,port:e.port||1433,connectTimeout:e.connectionTimeout||e.timeout||15e3,requestTimeout:s(e.requestTimeout)?15e3:e.requestTimeout,rowCollectionOnDone:!1,rowCollectionOnRequestCompletion:!1,useColumnNames:!1,tdsVersion:e.options.tdsVersion||"7_4",appName:e.options.appName||"knex",trustServerCertificate:!1,...e.options}};return t.options.instanceName&&delete t.options.port,isNaN(t.options.requestTimeout)&&(t.options.requestTimeout=15e3),t.options.requestTimeout===1/0&&(t.options.requestTimeout=0),t.options.requestTimeout<0&&(t.options.requestTimeout=0),e.debug&&(t.options.debug={packet:!0,token:!0,data:!0,payload:!0}),t}_driver(){return e("tedious")}formatter(){return new a(this,...arguments)}transaction(){return new u(this,...arguments)}queryCompiler(){return new c(this,...arguments)}schemaCompiler(){return new l(this,...arguments)}tableCompiler(){return new h(this,...arguments)}viewCompiler(){return new d(this,...arguments)}queryBuilder(){return new p(this)}columnCompiler(){return new f(this,...arguments)}wrapIdentifierImpl(e){return"*"===e?"*":`[${e.replace(/[[\]]+/g,"")}]`}acquireRawConnection(){return new Promise(((e,t)=>{m("connection::connection new connection requested");const r=this._driver(),n=Object.assign({},this._generateConnection()),i=new r.Connection(n);i.connect((r=>r?(m("connection::connect error: %s",r.message),t(r)):(m("connection::connect connected to server"),i.connected=!0,i.on("error",(e=>{m("connection::error message=%s",e.message),i.__knex__disposed=e,i.connected=!1})),i.once("end",(()=>{i.connected=!1,i.__knex__disposed="Connection to server was terminated.",m("connection::end connection ended.")})),e(i))))}))}validateConnection(e){return e&&e.connected}destroyRawConnection(e){return m("connection::destroy"),new Promise((t=>{e.once("end",(()=>{t()})),e.close()}))}positionBindings(e){let t=-1;return e.replace(/\\?\?/g,(e=>"\\?"===e?"?":(t+=1,`@p${t}`)))}_chomp(e){if("LoggedIn"===e.state.name){const t=this.requestQueue.pop();t&&(m("connection::query executing query, %d more in queue",this.requestQueue.length),e.execSql(t))}}_enqueueRequest(e,t){this.requestQueue.push(e),this._chomp(t)}_makeRequest(e,t){const r=this._driver(),n="string"==typeof e?e:e.sql;let i=0;if(!n)throw new Error("The query is empty");m("request::request sql=%s",n);const s=new r.Request(n,((e,r)=>{if(e)return m("request::error message=%s",e.message),t(e);i=r,m("request::callback rowCount=%d",i)}));return s.on("prepared",(()=>{m("request %s::request prepared",this.id)})),s.on("done",((e,t)=>{m("request::done rowCount=%d more=%s",e,t)})),s.on("doneProc",((e,t)=>{m("request::doneProc id=%s rowCount=%d more=%s",s.id,e,t)})),s.on("doneInProc",((e,t)=>{m("request::doneInProc id=%s rowCount=%d more=%s",s.id,e,t)})),s.once("requestCompleted",(()=>(m("request::completed id=%s",s.id),t(null,i)))),s.on("error",(e=>(m("request::error id=%s message=%s",s.id,e.message),t(e)))),s}_stream(e,t,r){return new Promise(((n,i)=>{const s=this._makeRequest(t,(e=>{if(e)return r.emit("error",e),i(e);n()}));s.on("row",(e=>{r.write(e.reduce(((e,t)=>({...e,[t.metadata.colName]:t.value})),{}))})),s.on("error",(e=>{r.emit("error",e),i(e)})),s.once("requestCompleted",(()=>{r.end(),n()})),this._assignBindings(s,t.bindings),this._enqueueRequest(s,e)}))}_assignBindings(e,t){if(Array.isArray(t))for(let r=0;r<t.length;r++){const n=t[r];this._setReqInput(e,r,n)}}_scaleForBinding(e){if(e%1==0)throw new Error(`The binding value ${e} must be a decimal number.`);return{scale:10}}_typeForBinding(e){const t=this._driver();switch(typeof e){case"string":return t.TYPES.NVarChar;case"boolean":return t.TYPES.Bit;case"number":if(e%1!=0)return t.TYPES.Float;if(e<y||e>g){if(e<v||e>b)throw new Error(`Bigint must be safe integer or must be passed as string, saw ${e}`);return t.TYPES.BigInt}return t.TYPES.Int;default:return e instanceof Date?t.TYPES.DateTime:e instanceof n?t.TYPES.VarBinary:t.TYPES.NVarChar}}_query(e,t){return new Promise(((n,i)=>{const s=[],o=this._makeRequest(t,((o,a)=>{if(o)return i(o);t.response=s,r.nextTick((()=>this._chomp(e))),n(t)}));o.on("row",(e=>{m("request::row"),s.push(e)})),this._assignBindings(o,t.bindings),this._enqueueRequest(o,e)}))}_setReqInput(e,t,r){const i=this._typeForBinding(r),s="p".concat(t);let o;"number"==typeof r&&r%1!=0&&(o=this._scaleForBinding(r)),m("request::binding pos=%d type=%s value=%s",t,i.name,r),n.isBuffer(r)&&(o={length:"max"}),e.addParameter(s,i,r,o)}processResponse(e,t){if(null==e)return;let{response:r}=e;const{method:n}=e;if(e.output)return e.output.call(t,r);if(r=r.map((e=>e.reduce(((e,t)=>{const r=t.metadata.colName;return e[r]?(Array.isArray(e[r])||(e[r]=[e[r]]),e[r].push(t.value)):e[r]=t.value,e}),{}))),e.output)return e.output.call(t,r);switch(n){case"select":default:return r;case"first":return r[0];case"pluck":return i(r,e.pluck);case"insert":case"del":case"update":case"counter":return e.returning&&"@@rowcount"===e.returning?r[0][""]:r}}}Object.assign(_.prototype,{requestQueue:[],dialect:"mssql",driverName:"mssql"}),t.exports=_}).call(this,e("_process"),e("buffer").Buffer)},{"../../client":180,"../../query/querybuilder":278,"./mssql-formatter":190,"./query/mssql-querycompiler":191,"./schema/mssql-columncompiler":192,"./schema/mssql-compiler":193,"./schema/mssql-tablecompiler":194,"./schema/mssql-viewcompiler":195,"./transaction":196,_process:void 0,buffer:void 0,debug:299,"lodash/isNil":504,"lodash/map":515,tedious:1}],190:[function(e,t,r){const n=e("../../formatter");t.exports=class extends n{columnizeWithPrefix(e,t){const r="string"==typeof t?[t]:t;let n="",i=-1;for(;++i<r.length;)i>0&&(n+=", "),n+=e+this.wrap(r[i]);return n}escapingStringDelimiters(e){return(e||"").replace(/'/g,"''")}}},{"../../formatter":263}],191:[function(e,t,r){const n=e("../../../query/querycompiler"),i=e("lodash/compact"),s=e("lodash/identity"),o=e("lodash/isEmpty"),a=e("../../../raw.js"),{columnize:u}=e("../../../formatter/wrappingFormatter"),c=["columns","join","lock","where","union","group","having","order","limit","offset"];t.exports=class extends n{constructor(e,t,r){super(e,t,r);const{onConflict:n}=this.single;if(n)throw new Error(".onConflict() is not supported for mssql.");this._emptyInsertValue="default values"}with(){const e=[];if(this.grouped.with)for(const t of this.grouped.with)t.recursive&&(e.push(t),t.recursive=!1);const t=super.with();for(const t of e)t.recursive=!0;return t}select(){const e=this.with(),t=c.map((e=>this[e](this)));return e+i(t).join(" ")}insert(){return this.single.options&&this.single.options.includeTriggerModifications?this.insertWithTriggers():this.standardInsert()}insertWithTriggers(){const e=this.single.insert||[],{returning:t}=this.single;let r=this.with()+`${this._buildTempTable(t)}insert into ${this.tableName} `;const n=t?this._returning("insert",t,!0)+" ":"";if(Array.isArray(e)){if(0===e.length)return""}else if("object"==typeof e&&o(e))return{sql:r+n+this._emptyInsertValue+this._buildReturningSelect(t),returning:t};return r+=this._buildInsertData(e,n),t&&(r+=this._buildReturningSelect(t)),{sql:r,returning:t}}_buildInsertData(e,t){let r="";const n=this._prepInsert(e);if("string"==typeof n)r+=n;else if(n.columns.length)r+=`(${this.formatter.columnize(n.columns)}`,r+=`) ${t}values (`+this._buildInsertValues(n)+")";else{if(1!==e.length||!e[0])return"";r+=t+this._emptyInsertValue}return r}standardInsert(){const e=this.single.insert||[];let t=this.with()+`insert into ${this.tableName} `;const{returning:r}=this.single,n=r?this._returning("insert",r)+" ":"";if(Array.isArray(e)){if(0===e.length)return""}else if("object"==typeof e&&o(e))return{sql:t+n+this._emptyInsertValue,returning:r};return t+=this._buildInsertData(e,n),{sql:t,returning:r}}update(){return this.single.options&&this.single.options.includeTriggerModifications?this.updateWithTriggers():this.standardUpdate()}updateWithTriggers(){const e=this.top(),t=this.with(),r=this._prepUpdate(this.single.update),n=this.join(),i=this.where(),s=this.order(),{returning:o}=this.single;return{sql:t+this._buildTempTable(o)+`update ${e?e+" ":""}${this.tableName} set `+r.join(", ")+(o?` ${this._returning("update",o,!0)}`:"")+(n?` from ${this.tableName} ${n}`:"")+(i?` ${i}`:"")+(s?` ${s}`:"")+(o?this._buildReturningSelect(o):this._returning("rowcount","@@rowcount")),returning:o||"@@rowcount"}}_formatGroupsItemValue(e,t){const r=super._formatGroupsItemValue(e);if(t&&!(e instanceof a)){const e=`IIF(${r} is null,`;if("first"===t)return`${e}0,1)`;if("last"===t)return`${e}1,0)`}return r}standardUpdate(){const e=this.top(),t=this.with(),r=this._prepUpdate(this.single.update),n=this.join(),i=this.where(),s=this.order(),{returning:o}=this.single;return{sql:t+`update ${e?e+" ":""}${this.tableName} set `+r.join(", ")+(o?` ${this._returning("update",o)}`:"")+(n?` from ${this.tableName} ${n}`:"")+(i?` ${i}`:"")+(s?` ${s}`:"")+(o?"":this._returning("rowcount","@@rowcount")),returning:o||"@@rowcount"}}del(){return this.single.options&&this.single.options.includeTriggerModifications?this.deleteWithTriggers():this.standardDelete()}deleteWithTriggers(){const e=this.with(),{tableName:t}=this,r=this.where(),n=this.join(),{returning:i}=this.single,s=i?` ${this._returning("del",i,!0)}`:"",o=n?`${t}${s} `:"";return{sql:e+`${this._buildTempTable(i)}delete ${o}from ${t}`+(n?"":s)+(n?` ${n}`:"")+(r?` ${r}`:"")+(i?this._buildReturningSelect(i):this._returning("rowcount","@@rowcount")),returning:i||"@@rowcount"}}standardDelete(){const e=this.with(),{tableName:t}=this,r=this.where(),n=this.join(),{returning:i}=this.single,s=i?` ${this._returning("del",i)}`:"";return{sql:e+`delete ${n?`${t}${s} `:""}from ${t}`+(n?"":s)+(n?` ${n}`:"")+(r?` ${r}`:"")+(i?"":this._returning("rowcount","@@rowcount")),returning:i||"@@rowcount"}}columns(){let e="";if(this.onlyUnions())return"";const t=this.top(),r=this._hintComments(),n=this.grouped.columns||[];let i=-1,s=[];if(n)for(;++i<n.length;){const t=n[i];t.distinct&&(e="distinct "),t.distinctOn?e=this.distinctOn(t.value):"aggregate"===t.type?s.push(...this.aggregate(t)):"aggregateRaw"===t.type?s.push(this.aggregateRaw(t)):"analytic"===t.type?s.push(this.analytic(t)):"json"===t.type?s.push(this.json(t)):t.value&&t.value.length>0&&s.push(this.formatter.columnize(t.value))}0===s.length&&(s=["*"]);return`${this.onlyJson()?"":"select "}${r}${e}`+(t?t+" ":"")+s.join(", ")+(this.tableName?` from ${this.tableName}`:"")}_returning(e,t,r){switch(e){case"update":case"insert":return t?`output ${this.formatter.columnizeWithPrefix("inserted.",t)}${r?" into #out":""}`:"";case"del":return t?`output ${this.formatter.columnizeWithPrefix("deleted.",t)}${r?" into #out":""}`:"";case"rowcount":return t?";select @@rowcount":""}}_buildTempTable(e){if(e&&e.length>0){let t="";t=Array.isArray(e)?e.map((e=>`[t].${this.formatter.columnize(e)}`)).join(","):`[t].${this.formatter.columnize(e)}`;let r=`select top(0) ${t} into #out `;return r+=`from ${this.tableName} as t `,r+=`left join ${this.tableName} on 0=1;`,r}return""}_buildReturningSelect(e){if(e&&e.length>0){let t="";t=Array.isArray(e)?e.map((e=>`${this.formatter.columnize(e)}`)).join(","):this.formatter.columnize(e);let r=`; select ${t} from #out; `;return r+="drop table #out;",r}return""}truncate(){return`truncate table ${this.tableName}`}forUpdate(){return"with (UPDLOCK)"}forShare(){return"with (HOLDLOCK)"}columnInfo(){const e=this.single.columnInfo;let t=this.single.schema;const r=this.client.customWrapIdentifier(this.single.table,s);t&&(t=this.client.customWrapIdentifier(t,s));let n="select [COLUMN_NAME], [COLUMN_DEFAULT], [DATA_TYPE], [CHARACTER_MAXIMUM_LENGTH], [IS_NULLABLE] from INFORMATION_SCHEMA.COLUMNS where table_name = ? and table_catalog = ?";const i=[r,this.client.database()];return t?(n+=" and table_schema = ?",i.push(t)):n+=" and table_schema = 'dbo'",{sql:n,bindings:i,output(t){const r=t.reduce(((e,t)=>(e[t[0].value]={defaultValue:t[1].value,type:t[2].value,maxLength:t[3].value,nullable:"YES"===t[4].value},e)),{});return e&&r[e]||r}}}top(){const e=!this.single.limit&&0!==this.single.limit,t=!this.single.offset;return e||!t?"":`top (${this._getValueOrParameterFromAttribute("limit")})`}limit(){return""}offset(){const e=!this.single.limit&&0!==this.single.limit,t=!this.single.offset;if(t)return"";let r=`offset ${t?"0":this._getValueOrParameterFromAttribute("offset")} rows`;return e||(r+=` fetch next ${this._getValueOrParameterFromAttribute("limit")} rows only`),r}whereLike(e){return`${this._columnClause(e)} collate SQL_Latin1_General_CP1_CS_AS ${this._not(e,"like ")}${this._valueClause(e)}`}whereILike(e){return`${this._columnClause(e)} collate SQL_Latin1_General_CP1_CI_AS ${this._not(e,"like ")}${this._valueClause(e)}`}jsonExtract(e){return this._jsonExtract(e.singleValue?"JSON_VALUE":"JSON_QUERY",e)}jsonSet(e){return this._jsonSet("JSON_MODIFY",e)}jsonInsert(e){return this._jsonSet("JSON_MODIFY",e)}jsonRemove(e){const t=`JSON_MODIFY(${u(e.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(e.path,this.builder,this.bindingsHolder)}, NULL)`;return e.alias?this.client.alias(t,this.formatter.wrap(e.alias)):t}whereJsonPath(e){return this._whereJsonPath("JSON_VALUE",e)}whereJsonSupersetOf(e){throw new Error("Json superset where clause not actually supported by MSSQL")}whereJsonSubsetOf(e){throw new Error("Json subset where clause not actually supported by MSSQL")}_getExtracts(e,t){const r=u(e.column,this.builder,this.client,this.bindingsHolder);return(Array.isArray(e.values)?e.values:[e.values]).map((function(e){return"JSON_VALUE("+r+","+this.client.parameter(e,this.builder,this.bindingsHolder)+")"}),this).join(t)}onJsonPathEquals(e){return this._onJsonPathEquals("JSON_VALUE",e)}}},{"../../../formatter/wrappingFormatter":266,"../../../query/querycompiler":279,"../../../raw.js":280,"lodash/compact":477,"lodash/identity":493,"lodash/isEmpty":500}],192:[function(e,t,r){const n=e("../../../schema/columncompiler"),{toNumber:i}=e("../../../util/helpers"),{formatDefault:s}=e("../../../formatter/formatterUtils"),{operator:o}=e("../../../formatter/wrappingFormatter");class a extends n{constructor(e,t,r){super(e,t,r),this.modifiers=["nullable","defaultTo","first","after","comment"],this._addCheckModifiers()}double(e,t){return"float"}floating(e,t){return"float"}integer(){return"int"}tinyint(){return"tinyint"}varchar(e){return`nvarchar(${i(e,255)})`}timestamp({useTz:e=!1}={}){return e?"datetimeoffset":"datetime2"}bit(e){return e>1&&this.client.logger.warn("Bit field is exactly 1 bit length for MSSQL"),"bit"}binary(e){return e?`varbinary(${i(e)})`:"varbinary(max)"}first(){return this.client.logger.warn("Column first modifier not available for MSSQL"),""}after(e){return this.client.logger.warn("Column after modifier not available for MSSQL"),""}defaultTo(e,{constraintName:t}={}){const r=s(e,this.type,this.client);return t=void 0!==t?t:`${this.tableCompiler.tableNameRaw}_${this.getColumnName()}_default`.toLowerCase(),"alter"===this.columnBuilder._method?(this.pushAdditional((function(){this.pushQuery(`ALTER TABLE ${this.tableCompiler.tableName()} ADD CONSTRAINT ${this.formatter.wrap(t)} DEFAULT ${r} FOR ${this.formatter.wrap(this.getColumnName())}`)})),""):t?`CONSTRAINT ${this.formatter.wrap(t)} DEFAULT ${r}`:`DEFAULT ${r}`}comment(e){if(!e)return;e&&e.length>3750&&this.client.logger.warn("Your comment might be longer than the max comment length for MSSQL of 7,500 bytes.");const t=this.formatter.escapingStringDelimiters(e),r=this.tableCompiler.schemaNameRaw||"dbo",n=this.formatter.escapingStringDelimiters(this.tableCompiler.tableNameRaw),i=this.formatter.escapingStringDelimiters(this.args[0]||this.defaults("columnName")),s=`N'MS_Description', N'${t}', N'Schema', N'${r}', N'Table', N'${n}', N'Column', N'${i}'`;return this.pushAdditional((function(){const e=`EXISTS(SELECT * FROM sys.fn_listextendedproperty(N'MS_Description', N'Schema', N'${r}', N'Table', N'${n}', N'Column', N'${i}'))`;this.pushQuery(`IF ${e}\n  EXEC sys.sp_updateextendedproperty ${s}\nELSE\n  EXEC sys.sp_addextendedproperty ${s}`)})),""}checkLength(e,t,r){return this._check(`LEN(${this.formatter.wrap(this.getColumnName())}) ${o(e,this.columnBuilder,this.bindingsHolder)} ${i(t)}`,r)}checkRegex(e,t){return this._check(`${this.formatter.wrap(this.getColumnName())} LIKE ${this.client._escapeBinding("%"+e+"%")}`,t)}increments(e={primaryKey:!0}){return"int identity(1,1) not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}bigincrements(e={primaryKey:!0}){return"bigint identity(1,1) not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}}a.prototype.bigint="bigint",a.prototype.mediumint="int",a.prototype.smallint="smallint",a.prototype.text="nvarchar(max)",a.prototype.mediumtext="nvarchar(max)",a.prototype.longtext="nvarchar(max)",a.prototype.json=a.prototype.jsonb="nvarchar(max)",a.prototype.enu="nvarchar(100)",a.prototype.uuid=({useBinaryUuid:e=!1}={})=>e?"binary(16)":"uniqueidentifier",a.prototype.datetime="datetime2",a.prototype.bool="bit",t.exports=a},{"../../../formatter/formatterUtils":264,"../../../formatter/wrappingFormatter":266,"../../../schema/columncompiler":284,"../../../util/helpers":292}],193:[function(e,t,r){const n=e("../../../schema/compiler");class i extends n{constructor(e,t){super(e,t)}dropTableIfExists(e){const t=this.formatter.wrap(s(this.schema,e));this.pushQuery(`if object_id('${t}', 'U') is not null DROP TABLE ${t}`)}dropViewIfExists(e){const t=this.formatter.wrap(s(this.schema,e));this.pushQuery(`if object_id('${t}', 'V') is not null DROP VIEW ${t}`)}renameTable(e,t){this.pushQuery(`exec sp_rename ${this.client.parameter(s(this.schema,e),this.builder,this.bindingsHolder)}, ${this.client.parameter(t,this.builder,this.bindingsHolder)}`)}renameView(e,t){this.pushQuery(`exec sp_rename ${this.client.parameter(s(this.schema,e),this.builder,this.bindingsHolder)}, ${this.client.parameter(t,this.builder,this.bindingsHolder)}`)}hasTable(e){const t=[e];let r=`SELECT TABLE_NAME FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_NAME = ${this.client.parameter(s(this.schema,e),this.builder,this.bindingsHolder)}`;this.schema&&(r+=" AND TABLE_SCHEMA = ?",t.push(this.schema)),this.pushQuery({sql:r,bindings:t,output:e=>e.length>0})}hasColumn(e,t){const r=`select object_id from sys.columns where name = ${this.client.parameter(t,this.builder,this.bindingsHolder)} and object_id = object_id(${this.client.parameter(this.formatter.wrap(s(this.schema,e)),this.builder,this.bindingsHolder)})`;this.pushQuery({sql:r,output:e=>e.length>0})}}function s(e,t){return e?`${e}.${t}`:t}i.prototype.dropTablePrefix="DROP TABLE ",t.exports=i},{"../../../schema/compiler":285}],194:[function(e,t,r){const n=e("../../../schema/tablecompiler"),i=e("../../../util/helpers"),{isObject:s}=e("../../../util/is");class o extends n{constructor(e,t){super(e,t)}createQuery(e,t,r){let n=t?`if object_id('${this.tableName()}', 'U') is null `:"";n+=r?`SELECT * INTO ${this.tableName()} FROM ${this.tableNameLike()} WHERE 0=1`:"CREATE TABLE "+this.tableName()+(this._formatting?" (\n    ":" (")+e.sql.join(this._formatting?",\n    ":", ")+this._addChecks()+")",this.pushQuery(n),this.single.comment&&this.comment(this.single.comment),r&&this.addColumns(e,this.addColumnsPrefix)}comment(e){if(!e)return;e.length>3750&&this.client.logger.warn("Your comment might be longer than the max comment length for MSSQL of 7,500 bytes.");const t=this.formatter.escapingStringDelimiters(e),r=this.formatter.escapingStringDelimiters(this.schemaNameRaw||"dbo"),n=this.formatter.escapingStringDelimiters(this.tableNameRaw),i=`N'MS_Description', N'${t}', N'Schema', N'${r}', N'Table', N'${n}'`,s=`EXISTS(SELECT * FROM sys.fn_listextendedproperty(N'MS_Description', N'Schema', N'${r}', N'Table', N'${n}', NULL, NULL))`;this.pushQuery(`IF ${s}\n  EXEC sys.sp_updateextendedproperty ${i}\nELSE\n  EXEC sys.sp_addextendedproperty ${i}`)}addColumns(e,t){t=t||this.addColumnsPrefix,e.sql.length>0&&this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+t+e.sql.join(", "),bindings:e.bindings})}alterColumns(e,t){for(let e=0,r=t.length;e<r;e++){const r=t[e];if(r.modified.defaultTo){const e=`\n              DECLARE @constraint varchar(100) = (SELECT default_constraints.name\n                                                  FROM sys.all_columns\n                                                  INNER JOIN sys.tables\n                                                    ON all_columns.object_id = tables.object_id\n                                                  INNER JOIN sys.schemas\n                                                    ON tables.schema_id = schemas.schema_id\n                                                  INNER JOIN sys.default_constraints\n                                                    ON all_columns.default_object_id = default_constraints.object_id\n                                                  WHERE schemas.name = '${this.schemaNameRaw||"dbo"}'\n                                                  AND tables.name = '${this.tableNameRaw}'\n                                                  AND all_columns.name = '${r.getColumnName()}')\n\n              IF @constraint IS NOT NULL EXEC('ALTER TABLE ${this.tableNameRaw} DROP CONSTRAINT ' + @constraint)`;this.pushQuery(e)}}e.sql.forEach((t=>{this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+(this.lowerCase?this.alterColumnPrefix.toLowerCase():this.alterColumnPrefix)+t,bindings:e.bindings})}))}dropColumn(){const e=this,t=i.normalizeArr.apply(null,arguments),r=(Array.isArray(t)?t:[t]).map((t=>e.formatter.wrap(t))),n=this.schemaNameRaw||"dbo";for(const e of t){const t=`\n              DECLARE @constraint varchar(100) = (SELECT default_constraints.name\n                                                  FROM sys.all_columns\n                                                  INNER JOIN sys.tables\n                                                    ON all_columns.object_id = tables.object_id\n                                                  INNER JOIN sys.schemas\n                                                    ON tables.schema_id = schemas.schema_id\n                                                  INNER JOIN sys.default_constraints\n                                                    ON all_columns.default_object_id = default_constraints.object_id\n                                                  WHERE schemas.name = '${n}'\n                                                  AND tables.name = '${this.tableNameRaw}'\n                                                  AND all_columns.name = '${e}')\n\n              IF @constraint IS NOT NULL EXEC('ALTER TABLE ${this.tableNameRaw} DROP CONSTRAINT ' + @constraint)`;this.pushQuery(t)}this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+this.dropColumnPrefix+r.join(", "))}changeType(){}renameColumn(e,t){this.pushQuery(`exec sp_rename ${this.client.parameter(this.tableName()+"."+e,this.tableBuilder,this.bindingsHolder)}, ${this.client.parameter(t,this.tableBuilder,this.bindingsHolder)}, 'COLUMN'`)}dropFKRefs(e,t){const r=this.client.formatter(this.tableBuilder);return Promise.all(t.map((function(t){const n=r.wrap(t.CONSTRAINT_NAME),i=r.wrap(t.TABLE_NAME);return e.query({sql:`ALTER TABLE ${i} DROP CONSTRAINT ${n}`})})))}createFKRefs(e,t){const r=this.client.formatter(this.tableBuilder);return Promise.all(t.map((function(t){const n=r.wrap(t.TABLE_NAME),i=r.wrap(t.CONSTRAINT_NAME),s=r.columnize(t.COLUMN_NAME),o=r.columnize(t.REFERENCED_COLUMN_NAME),a=r.wrap(t.REFERENCED_TABLE_NAME),u=` ON UPDATE ${t.UPDATE_RULE}`,c=` ON DELETE ${t.DELETE_RULE}`;return e.query({sql:`ALTER TABLE ${n} ADD CONSTRAINT ${i} FOREIGN KEY (`+s+") REFERENCES "+a+" ("+o+")"+u+c})})))}index(e,t,r){let n;t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),s(r)&&({predicate:n}=r);const i=n?" "+this.client.queryCompiler(n).where():"";this.pushQuery(`CREATE INDEX ${t} ON ${this.tableName()} (${this.formatter.columnize(e)})${i}`)}primary(e,t){let r;s(t)&&({constraintName:t,deferrable:r}=t),r&&"not deferrable"!==r&&this.client.logger.warn(`mssql: primary key constraint [${t}] will not be deferrable ${r} because mssql does not support deferred constraints.`),t=t?this.formatter.wrap(t):this.formatter.wrap(`${this.tableNameRaw}_pkey`),this.forCreate?this.pushQuery(`CONSTRAINT ${t} PRIMARY KEY (${this.formatter.columnize(e)})`):this.pushQuery(`ALTER TABLE ${this.tableName()} ADD CONSTRAINT ${t} PRIMARY KEY (${this.formatter.columnize(e)})`)}unique(e,t){let r,n=!1;s(t)&&({indexName:t,deferrable:r,useConstraint:n}=t),r&&"not deferrable"!==r&&this.client.logger.warn(`mssql: unique index [${t}] will not be deferrable ${r} because mssql does not support deferred constraints.`),t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),Array.isArray(e)||(e=[e]);const i=e.map((e=>this.formatter.columnize(e)+" IS NOT NULL")).join(" AND ");n?this.pushQuery(`ALTER TABLE ${this.tableName()} ADD CONSTRAINT ${t} UNIQUE (${this.formatter.columnize(e)})`):this.pushQuery(`CREATE UNIQUE INDEX ${t} ON ${this.tableName()} (${this.formatter.columnize(e)}) WHERE ${i}`)}dropIndex(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),this.pushQuery(`DROP INDEX ${t} ON ${this.tableName()}`)}dropForeign(e,t){t=t?this.formatter.wrap(t):this._indexCommand("foreign",this.tableNameRaw,e),this.pushQuery(`ALTER TABLE ${this.tableName()} DROP CONSTRAINT ${t}`)}dropPrimary(e){e=e?this.formatter.wrap(e):this.formatter.wrap(`${this.tableNameRaw}_pkey`),this.pushQuery(`ALTER TABLE ${this.tableName()} DROP CONSTRAINT ${e}`)}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`DROP INDEX ${t} ON ${this.tableName()}`)}}o.prototype.createAlterTableMethods=["foreign","primary"],o.prototype.lowerCase=!1,o.prototype.addColumnsPrefix="ADD ",o.prototype.dropColumnPrefix="DROP COLUMN ",o.prototype.alterColumnPrefix="ALTER COLUMN ",t.exports=o},{"../../../schema/tablecompiler":288,"../../../util/helpers":292,"../../../util/is":293}],195:[function(e,t,r){const n=e("../../../schema/viewcompiler.js"),{columnize:i}=e("../../../formatter/wrappingFormatter");t.exports=class extends n{constructor(e,t){super(e,t)}createQuery(e,t,r,n){let s="CREATE "+(n?"OR ALTER ":"")+"VIEW "+this.viewName();s+=e?" ("+i(e,this.viewBuilder,this.client,this.bindingsHolder)+")":"",s+=" AS ",s+=t.toString(),this.pushQuery({sql:s})}renameColumn(e,t){this.pushQuery(`exec sp_rename ${this.client.parameter(this.viewName()+"."+e,this.viewBuilder,this.bindingsHolder)}, ${this.client.parameter(t,this.viewBuilder,this.bindingsHolder)}, 'COLUMN'`)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,!1,!0)}}},{"../../../formatter/wrappingFormatter":266,"../../../schema/viewcompiler.js":290}],196:[function(e,t,r){const n=e("../../execution/transaction"),i=e("debug")("knex:tx");t.exports=class extends n{begin(e){return i("transaction::begin id=%s",this.txid),new Promise(((t,r)=>{e.beginTransaction((e=>{if(e)return i("transaction::begin error id=%s message=%s",this.txid,e.message),r(e);t()}),this.outerTx?this.txid:void 0,function(e){if(!e)return;e=e.toUpperCase().replace(" ","_");const t=s[e];if(!t)throw new Error(`Unknown Isolation level, was expecting one of: ${JSON.stringify(o)}`);return t}(this.isolationLevel))})).then(this._resolver,this._rejecter)}savepoint(e){return i("transaction::savepoint id=%s",this.txid),new Promise(((t,r)=>{e.saveTransaction((e=>{if(e)return i("transaction::savepoint id=%s message=%s",this.txid,e.message),r(e);this.trxClient.emit("query",{__knexUid:this.trxClient.__knexUid,__knexTxId:this.trxClient.__knexTxId,autogenerated:!0,sql:this.outerTx?`SAVE TRANSACTION [${this.txid}]`:"SAVE TRANSACTION"}),t()}),this.outerTx?this.txid:void 0)}))}commit(e,t){return i("transaction::commit id=%s",this.txid),new Promise(((r,n)=>{e.commitTransaction((e=>{if(e)return i("transaction::commit error id=%s message=%s",this.txid,e.message),n(e);this._completed=!0,r(t)}),this.outerTx?this.txid:void 0)})).then((()=>this._resolver(t)),this._rejecter)}release(e,t){return this._resolver(t)}rollback(e,t){return this._completed=!0,i("transaction::rollback id=%s",this.txid),new Promise(((r,n)=>e.inTransaction?"LoggedIn"!==e.state.name?n(new Error("Can't rollback transaction. There is a request in progress")):void e.rollbackTransaction((e=>{e&&i("transaction::rollback error id=%s message=%s",this.txid,e.message),n(e||t||new Error("Transaction rejected with non-error: undefined"))}),this.outerTx?this.txid:void 0):n(t||new Error("Transaction rejected with non-error: undefined")))).catch((e=>{if(t||!this.doNotRejectOnRollback){if(t)try{e.originalError=t}catch(e){}this._rejecter(e)}else this._resolver()}))}rollbackTo(e,t){return this.rollback(e,t).then((()=>{this.trxClient.emit("query",{__knexUid:this.trxClient.__knexUid,__knexTxId:this.trxClient.__knexTxId,autogenerated:!0,sql:"ROLLBACK TRANSACTION"})}))}};const s={READ_UNCOMMITTED:1,READ_COMMITTED:2,REPEATABLE_READ:3,SERIALIZABLE:4,SNAPSHOT:5},o=Object.keys(s).map((e=>e.toLowerCase().replace("_"," ")))},{"../../execution/transaction":262,debug:299}],197:[function(e,t,r){const n=e("lodash/defer"),i=e("lodash/map"),{promisify:s}=e("util"),o=e("../../client"),a=e("./transaction"),u=e("./query/mysql-querycompiler"),c=e("./schema/mysql-compiler"),l=e("./schema/mysql-tablecompiler"),h=e("./schema/mysql-columncompiler"),{makeEscape:d}=e("../../util/string"),f=e("./schema/mysql-viewcompiler"),p=e("./schema/mysql-viewbuilder");class m extends o{_driver(){return e("mysql")}queryCompiler(e,t){return new u(this,e,t)}schemaCompiler(){return new c(this,...arguments)}tableCompiler(){return new l(this,...arguments)}viewCompiler(){return new f(this,...arguments)}viewBuilder(){return new p(this,...arguments)}columnCompiler(){return new h(this,...arguments)}transaction(){return new a(this,...arguments)}wrapIdentifierImpl(e){return"*"!==e?`\`${e.replace(/`/g,"``")}\``:"*"}acquireRawConnection(){return new Promise(((e,t)=>{const r=this.driver.createConnection(this.connectionSettings);r.on("error",(e=>{r.__knex__disposed=e})),r.connect((n=>{if(n)return r.removeAllListeners(),t(n);e(r)}))}))}async destroyRawConnection(e){try{const t=s((t=>e.end(t)));return await t()}catch(t){e.__knex__disposed=t}finally{n((()=>e.removeAllListeners()))}}validateConnection(e){return"connected"===e.state||"authenticated"===e.state}_stream(e,t,r,n){if(!t.sql)throw new Error("The query is empty");n=n||{};const i=Object.assign({sql:t.sql},t.options);return new Promise(((s,o)=>{r.on("error",o),r.on("end",s);const a=e.query(i,t.bindings).stream(n);a.on("error",(e=>{o(e),r.emit("error",e)})),a.pipe(r)}))}_query(e,t){if(t&&"string"!=typeof t||(t={sql:t}),!t.sql)throw new Error("The query is empty");return new Promise((function(r,n){if(!t.sql)return void r();const i=Object.assign({sql:t.sql},t.options);e.query(i,t.bindings,(function(e,i,s){if(e)return n(e);t.response=[i,s],r(t)}))}))}processResponse(e,t){if(null==e)return;const{response:r}=e,{method:n}=e,s=r[0],o=r[1];if(e.output)return e.output.call(t,s,o);switch(n){case"select":return s;case"first":return s[0];case"pluck":return i(s,e.pluck);case"insert":return[s.insertId];case"del":case"update":case"counter":return s.affectedRows;default:return r}}async cancelQuery(e){const t=await this.acquireRawConnection();try{return await this._wrappedCancelQueryCall(t,e)}finally{await this.destroyRawConnection(t),t.__knex__disposed&&this.logger.warn(`Connection Error: ${t.__knex__disposed}`)}}_wrappedCancelQueryCall(e,t){return this._query(e,{sql:"KILL QUERY ?",bindings:[t.threadId],options:{}})}}Object.assign(m.prototype,{dialect:"mysql",driverName:"mysql",_escapeBinding:d(),canCancelQuery:!0}),t.exports=m},{"../../client":180,"../../util/string":297,"./query/mysql-querycompiler":198,"./schema/mysql-columncompiler":199,"./schema/mysql-compiler":200,"./schema/mysql-tablecompiler":201,"./schema/mysql-viewbuilder":202,"./schema/mysql-viewcompiler":203,"./transaction":204,"lodash/defer":480,"lodash/map":515,mysql:1,util:void 0}],198:[function(e,t,r){const n=e("lodash/identity"),i=e("../../../query/querycompiler"),{wrapAsIdentifier:s}=e("../../../formatter/formatterUtils"),{columnize:o,wrap:a}=e("../../../formatter/wrappingFormatter");t.exports=class extends i{constructor(e,t,r){super(e,t,r);const{returning:n}=this.single;n&&this.client.logger.warn(".returning() is not supported by mysql and will not have any effect."),this._emptyInsertValue="() values ()"}insert(){let e=super.insert();if(""===e)return e;const{ignore:t,merge:r,insert:n}=this.single;if(t&&(e=e.replace("insert into","insert ignore into")),r){e+=this._merge(r.updates,n);if(this.where())throw new Error(".onConflict().merge().where() is not supported for mysql")}return e}_merge(e,t){const r=" on duplicate key update ";if(e&&Array.isArray(e))return r+e.map((e=>s(e,this.formatter.builder,this.client))).map((e=>`${e} = values(${e})`)).join(", ");if(e&&"object"==typeof e){return r+this._prepUpdate(e).join(",")}{const e=this._prepInsert(t);if("string"==typeof e)throw new Error("If using merge with a raw insert query, then updates must be provided");return r+e.columns.map((e=>s(e,this.builder,this.client))).map((e=>`${e} = values(${e})`)).join(", ")}}update(){const e=this.with(),t=this.join(),r=this._prepUpdate(this.single.update),n=this.where(),i=this.order(),s=this.limit();return e+`update ${this.tableName}`+(t?` ${t}`:"")+" set "+r.join(", ")+(n?` ${n}`:"")+(i?` ${i}`:"")+(s?` ${s}`:"")}forUpdate(){return"for update"}forShare(){return"lock in share mode"}skipLocked(){return"skip locked"}noWait(){return"nowait"}columnInfo(){const e=this.single.columnInfo;return{sql:"select * from information_schema.columns where table_name = ? and table_schema = ?",bindings:[this.client.customWrapIdentifier(this.single.table,n),this.client.database()],output(t){const r=t.reduce((function(e,t){return e[t.COLUMN_NAME]={defaultValue:"NULL"===t.COLUMN_DEFAULT?null:t.COLUMN_DEFAULT,type:t.DATA_TYPE,maxLength:t.CHARACTER_MAXIMUM_LENGTH,nullable:"YES"===t.IS_NULLABLE},e}),{});return e&&r[e]||r}}}limit(){const e=!this.single.limit&&0!==this.single.limit;if(e&&!this.single.offset)return"";return`limit ${this.single.offset&&e?"18446744073709551615":this._getValueOrParameterFromAttribute("limit")}`}whereLike(e){return`${this._columnClause(e)} ${this._not(e,"like ")}${this._valueClause(e)} COLLATE utf8_bin`}whereILike(e){return`${this._columnClause(e)} ${this._not(e,"like ")}${this._valueClause(e)}`}jsonExtract(e){return this._jsonExtract(["json_extract","json_unquote"],e)}jsonSet(e){return this._jsonSet("json_set",e)}jsonInsert(e){return this._jsonSet("json_insert",e)}jsonRemove(e){const t=`json_remove(${o(e.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(e.path,this.builder,this.bindingsHolder)})`;return e.alias?this.client.alias(t,this.formatter.wrap(e.alias)):t}whereJsonObject(e){return this._not(e,`json_contains(${this._columnClause(e)}, ${this._jsonValueClause(e)})`)}whereJsonPath(e){return this._whereJsonPath("json_extract",e)}whereJsonSupersetOf(e){return this._not(e,`json_contains(${a(e.column,void 0,this.builder,this.client,this.bindingsHolder)},${this._jsonValueClause(e)})`)}whereJsonSubsetOf(e){return this._not(e,`json_contains(${this._jsonValueClause(e)},${a(e.column,void 0,this.builder,this.client,this.bindingsHolder)})`)}onJsonPathEquals(e){return this._onJsonPathEquals("json_extract",e)}}},{"../../../formatter/formatterUtils":264,"../../../formatter/wrappingFormatter":266,"../../../query/querycompiler":279,"lodash/identity":493}],199:[function(e,t,r){const n=e("../../../schema/columncompiler"),{isObject:i}=e("../../../util/is"),{toNumber:s}=e("../../../util/helpers"),o=/(?<!\\)'/g;class a extends n{constructor(e,t,r){super(e,t,r),this.modifiers=["unsigned","nullable","defaultTo","comment","collate","first","after"],this._addCheckModifiers()}double(e,t){return e?`double(${s(e,8)}, ${s(t,2)})`:"double"}integer(e){return`int${e=e?`(${s(e,11)})`:""}`}tinyint(e){return`tinyint${e=e?`(${s(e,1)})`:""}`}text(e){switch(e){case"medium":case"mediumtext":return"mediumtext";case"long":case"longtext":return"longtext";default:return"text"}}mediumtext(){return this.text("medium")}longtext(){return this.text("long")}enu(e){return`enum('${e.join("', '")}')`}datetime(e){return i(e)&&({precision:e}=e),"number"==typeof e?`datetime(${e})`:"datetime"}timestamp(e){return i(e)&&({precision:e}=e),"number"==typeof e?`timestamp(${e})`:"timestamp"}time(e){return i(e)&&({precision:e}=e),"number"==typeof e?`time(${e})`:"time"}bit(e){return e?`bit(${s(e)})`:"bit"}binary(e){return e?`varbinary(${s(e)})`:"blob"}json(){return"json"}jsonb(){return"json"}defaultTo(e){if(null==e)return;if(("json"===this.type||"jsonb"===this.type)&&i(e))return`default ('${JSON.stringify(e)}')`;const t=super.defaultTo.apply(this,arguments);return"blob"!==this.type&&-1===this.type.indexOf("text")?t:""}unsigned(){return"unsigned"}comment(e){return e&&e.length>255&&this.client.logger.warn("Your comment is longer than the max comment length for MySQL"),e&&`comment '${e.replace(o,"\\'")}'`}first(){return"first"}after(e){return`after ${this.formatter.wrap(e)}`}collate(e){return e&&`collate '${e}'`}checkRegex(e,t){return this._check(`${this.formatter.wrap(this.getColumnName())} REGEXP ${this.client._escapeBinding(e)}`,t)}increments(e={primaryKey:!0}){return"int unsigned not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" auto_increment primary key":"")}bigincrements(e={primaryKey:!0}){return"bigint unsigned not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" auto_increment primary key":"")}}a.prototype.bigint="bigint",a.prototype.mediumint="mediumint",a.prototype.smallint="smallint",t.exports=a},{"../../../schema/columncompiler":284,"../../../util/helpers":292,"../../../util/is":293}],200:[function(e,t,r){const n=e("../../../schema/compiler");t.exports=class extends n{constructor(e,t){super(e,t)}renameTable(e,t){this.pushQuery(`rename table ${this.formatter.wrap(e)} to ${this.formatter.wrap(t)}`)}renameView(e,t){this.renameTable(e,t)}hasTable(e){let t="select * from information_schema.tables where table_name = ?";const r=[e];this.schema?(t+=" and table_schema = ?",r.push(this.schema)):t+=" and table_schema = database()",this.pushQuery({sql:t,bindings:r,output:function(e){return e.length>0}})}hasColumn(e,t){this.pushQuery({sql:`show columns from ${this.formatter.wrap(e)}`,output(e){return e.some((e=>this.client.wrapIdentifier(e.Field.toLowerCase())===this.client.wrapIdentifier(t.toLowerCase())))}})}}},{"../../../schema/compiler":285}],201:[function(e,t,r){const n=e("../../../schema/tablecompiler"),{isObject:i,isString:s}=e("../../../util/is");class o extends n{constructor(e,t){super(e,t)}createQuery(e,t,r){const n=t?"create table if not exists ":"create table ",{client:i}=this;let s={},o=" ("+e.sql.join(", ");o+=this.primaryKeys()||"",o+=this._addChecks(),o+=")";let a=n+this.tableName()+(r&&this.tableNameLike()?" like "+this.tableNameLike():o);i.connectionSettings&&(s=i.connectionSettings);const u=this.single.charset||s.charset||"",c=this.single.collate||s.collate||"",l=this.single.engine||"";if(u&&!r&&(a+=` default character set ${u}`),c&&(a+=` collate ${c}`),l&&(a+=` engine = ${l}`),this.single.comment){const e=this.single.comment||"",t=1024;e.length>t&&this.client.logger.warn(`The max length for a table comment is ${t} characters`),a+=` comment = '${e}'`}this.pushQuery(a),r&&this.addColumns(e,this.addColumnsPrefix)}comment(e){this.pushQuery(`alter table ${this.tableName()} comment = '${e}'`)}changeType(){}renameColumn(e,t){const r=this,n=this.tableName(),i=this.formatter.wrap(e)+" "+this.formatter.wrap(t);this.pushQuery({sql:`show full fields from ${n} where field = `+this.client.parameter(e,this.tableBuilder,this.bindingsHolder),output(s){const o=s[0],a=this;return r.getFKRefs(a).then((([s])=>new Promise(((e,t)=>{try{s.length||e(),e(r.dropFKRefs(a,s))}catch(e){t(e)}})).then((function(){let e=`alter table ${n} change ${i} ${o.Type}`;return"YES"!==String(o.Null).toUpperCase()?e+=" NOT NULL":e+=" NULL",void 0!==o.Default&&null!==o.Default&&(e+=` DEFAULT '${o.Default}'`),void 0!==o.Collation&&null!==o.Collation&&(e+=` COLLATE '${o.Collation}'`),"auto_increment"==o.Extra&&(e+=" AUTO_INCREMENT"),a.query({sql:e})})).then((function(){if(s.length)return r.createFKRefs(a,s.map((function(r){return r.REFERENCED_COLUMN_NAME===e&&(r.REFERENCED_COLUMN_NAME=t),r.COLUMN_NAME===e&&(r.COLUMN_NAME=t),r})))}))))}})}primaryKeys(){const e=(this.grouped.alterTable||[]).filter((e=>"primary"===e.method));if(e.length>0&&e[0].args.length>0){const t=e[0].args[0];let r=e[0].args[1]||"";if(r&&(r=" constraint "+this.formatter.wrap(r)),this.grouped.columns){const e=this._getIncrementsColumnNames();e.length&&e.forEach((e=>{t.includes(e)||t.unshift(e)}))}return`,${r} primary key (${this.formatter.columnize(t)})`}}getFKRefs(e){const t={bindings:[]},r="SELECT KCU.CONSTRAINT_NAME, KCU.TABLE_NAME, KCU.COLUMN_NAME,        KCU.REFERENCED_TABLE_NAME, KCU.REFERENCED_COLUMN_NAME,        RC.UPDATE_RULE, RC.DELETE_RULE FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE AS KCU JOIN INFORMATION_SCHEMA.REFERENTIAL_CONSTRAINTS AS RC        USING(CONSTRAINT_NAME)WHERE KCU.REFERENCED_TABLE_NAME = "+this.client.parameter(this.tableNameRaw,this.tableBuilder,t)+"   AND KCU.CONSTRAINT_SCHEMA = "+this.client.parameter(this.client.database(),this.tableBuilder,t)+"   AND RC.CONSTRAINT_SCHEMA = "+this.client.parameter(this.client.database(),this.tableBuilder,t);return e.query({sql:r,bindings:t.bindings})}dropFKRefs(e,t){const r=this.client.formatter(this.tableBuilder);return Promise.all(t.map((function(t){const n=r.wrap(t.CONSTRAINT_NAME),i=r.wrap(t.TABLE_NAME);return e.query({sql:`alter table ${i} drop foreign key ${n}`})})))}createFKRefs(e,t){const r=this.client.formatter(this.tableBuilder);return Promise.all(t.map((function(t){const n=r.wrap(t.TABLE_NAME),i=r.wrap(t.CONSTRAINT_NAME),s=r.columnize(t.COLUMN_NAME),o=r.columnize(t.REFERENCED_COLUMN_NAME),a=r.wrap(t.REFERENCED_TABLE_NAME),u=` ON UPDATE ${t.UPDATE_RULE}`,c=` ON DELETE ${t.DELETE_RULE}`;return e.query({sql:`alter table ${n} add constraint ${i} foreign key (`+s+") references "+a+" ("+o+")"+u+c})})))}index(e,t,r){let n,o;s(r)?o=r:i(r)&&({indexType:o,storageEngineIndexType:n}=r),t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),n=n?` using ${n}`:"",this.pushQuery(`alter table ${this.tableName()} add${o?` ${o}`:""} index ${t}(${this.formatter.columnize(e)})${n}`)}primary(e,t){let r;i(t)&&({constraintName:t,deferrable:r}=t),r&&"not deferrable"!==r&&this.client.logger.warn(`mysql: primary key constraint \`${t}\` will not be deferrable ${r} because mysql does not support deferred constraints.`),t=t?this.formatter.wrap(t):this.formatter.wrap(`${this.tableNameRaw}_pkey`);const n=e;let s=[];this.grouped.columns&&(s=this._getIncrementsColumnNames(),s&&s.forEach((e=>{n.includes(e)||n.unshift(e)}))),"create"!==this.method&&"createIfNot"!==this.method&&this.pushQuery(`alter table ${this.tableName()} add primary key ${t}(${this.formatter.columnize(n)})`),s.length&&this.pushQuery(`alter table ${this.tableName()} modify column ${this.formatter.columnize(s)} int unsigned not null auto_increment`)}unique(e,t){let r,n;i(t)&&({indexName:t,deferrable:n,storageEngineIndexType:r}=t),n&&"not deferrable"!==n&&this.client.logger.warn(`mysql: unique index \`${t}\` will not be deferrable ${n} because mysql does not support deferred constraints.`),t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),r=r?` using ${r}`:"",this.pushQuery(`alter table ${this.tableName()} add unique ${t}(${this.formatter.columnize(e)})${r}`)}dropIndex(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop index ${t}`)}dropForeign(e,t){t=t?this.formatter.wrap(t):this._indexCommand("foreign",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop foreign key ${t}`)}dropPrimary(){this.pushQuery(`alter table ${this.tableName()} drop primary key`)}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop index ${t}`)}}o.prototype.addColumnsPrefix="add ",o.prototype.alterColumnsPrefix="modify ",o.prototype.dropColumnPrefix="drop ",t.exports=o},{"../../../schema/tablecompiler":288,"../../../util/is":293}],202:[function(e,t,r){const n=e("../../../schema/viewbuilder.js");t.exports=class extends n{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}localCheckOption(){this._single.checkOption="local"}cascadedCheckOption(){this._single.checkOption="cascaded"}}},{"../../../schema/viewbuilder.js":289}],203:[function(e,t,r){const n=e("../../../schema/viewcompiler.js");t.exports=class extends n{constructor(e,t){super(e,t)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,!1,!0)}}},{"../../../schema/viewcompiler.js":290}],204:[function(e,t,r){const n=e("../../execution/transaction"),i=e("debug")("knex:tx");t.exports=class extends n{query(e,t,r,n){const s=this,o=this.trxClient.query(e,t).catch((e=>{1305!==e.errno?(r=2,n=e,s._completed=!0,i("%s error running transaction query",s.txid)):this.trxClient.logger.warn("Transaction was implicitly committed, do not mix transactions and DDL with MySQL (#805)")})).then((function(e){if(1===r&&s._resolver(n),2===r){if(void 0===n){if(s.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(t))return void s._resolver();n=new Error(`Transaction rejected with non-error: ${n}`)}s._rejecter(n)}return e}));return 1!==r&&2!==r||(s._completed=!0),o}}},{"../../execution/transaction":262,debug:299}],205:[function(e,t,r){const n=e("../mysql"),i=e("./transaction");class s extends n{transaction(){return new i(this,...arguments)}_driver(){return e("mysql2")}validateConnection(e){return e&&!e._fatalError&&!e._protocolError&&!e._closing&&!e.stream.destroyed}}Object.assign(s.prototype,{driverName:"mysql2"}),t.exports=s},{"../mysql":197,"./transaction":206,mysql2:1}],206:[function(e,t,r){const n=e("../../execution/transaction"),i=e("debug")("knex:tx");t.exports=class extends n{query(e,t,r,n){const s=this,o=this.trxClient.query(e,t).catch((e=>{"ER_SP_DOES_NOT_EXIST"!==e.code?(r=2,n=e,s._completed=!0,i("%s error running transaction query",s.txid)):this.trxClient.logger.warn("Transaction was implicitly committed, do not mix transactions and DDL with MySQL (#805)")})).then((function(e){if(1===r&&s._resolver(n),2===r){if(void 0===n){if(s.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(t))return void s._resolver();n=new Error(`Transaction rejected with non-error: ${n}`)}return s._rejecter(n),e}}));return 1!==r&&2!==r||(s._completed=!0),o}}},{"../../execution/transaction":262,debug:299}],207:[function(e,t,r){const{ReturningHelper:n}=e("./utils"),{isConnectionError:i}=e("./utils"),s=e("../../client"),o=e("./schema/oracle-compiler"),a=e("./schema/oracle-columnbuilder"),u=e("./schema/oracle-columncompiler"),c=e("./schema/oracle-tablecompiler");class l extends s{schemaCompiler(){return new o(this,...arguments)}columnBuilder(){return new a(this,...arguments)}columnCompiler(){return new u(this,...arguments)}tableCompiler(){return new c(this,...arguments)}database(){return this.connectionSettings.database}positionBindings(e){let t=0;return e.replace(/\?/g,(function(){return t+=1,`:${t}`}))}_stream(e,t,r,n){if(!t.sql)throw new Error("The query is empty");return new Promise((function(s,o){r.on("error",(t=>{i(t)&&(e.__knex__disposed=t),o(t)})),r.on("end",s);const a=e.queryStream(t.sql,t.bindings,n);a.pipe(r),a.on("error",(function(e){o(e),r.emit("error",e)}))}))}alias(e,t){return e+" "+t}parameter(e,t,r){return e instanceof n&&this.driver?e=new this.driver.OutParam(this.driver.OCCISTRING):"boolean"==typeof e&&(e=e?1:0),super.parameter(e,t,r)}}Object.assign(l.prototype,{dialect:"oracle",driverName:"oracle"}),t.exports=l},{"../../client":180,"./schema/oracle-columnbuilder":211,"./schema/oracle-columncompiler":212,"./schema/oracle-compiler":213,"./schema/oracle-tablecompiler":214,"./utils":215}],208:[function(e,t,r){const n=e("lodash/compact"),i=e("lodash/identity"),s=e("lodash/isEmpty"),o=e("lodash/isPlainObject"),a=e("lodash/reduce"),u=e("../../../query/querycompiler"),{ReturningHelper:c}=e("../utils"),{isString:l}=e("../../../util/is"),h=["columns","join","where","union","group","having","order","lock"];t.exports=class extends u{constructor(e,t,r){super(e,t,r);const{onConflict:n}=this.single;if(n)throw new Error(".onConflict() is not supported for oracledb.");this.first=this.select}insert(){let e=this.single.insert||[],{returning:t}=this.single;if(!Array.isArray(e)&&o(this.single.insert)&&(e=[this.single.insert]),t&&!Array.isArray(t)&&(t=[t]),Array.isArray(e)&&1===e.length&&s(e[0]))return this._addReturningToSqlAndConvert(`insert into ${this.tableName} (${this.formatter.wrap(this.single.returning)}) values (default)`,t,this.tableName);if(s(this.single.insert)&&"function"!=typeof this.single.insert)return"";const r=this._prepInsert(e),n={};if(l(r))return this._addReturningToSqlAndConvert(`insert into ${this.tableName} ${r}`,t);if(1===r.values.length)return this._addReturningToSqlAndConvert(`insert into ${this.tableName} (${this.formatter.columnize(r.columns)}) values (${this.client.parameterize(r.values[0],void 0,this.builder,this.bindingsHolder)})`,t,this.tableName);const i=0===r.columns.length;return n.sql="begin "+r.values.map((e=>{let s;const o=i?"":this.client.parameterize(e,this.client.valueForUndefined,this.builder,this.bindingsHolder),a=Array.isArray(t)?t:[t];let u=`insert into ${this.tableName} `;t&&(s=new c(a.join(":")),n.outParams=(n.outParams||[]).concat(s)),u+=i?`(${this.formatter.wrap(this.single.returning)}) values (default)`:`(${this.formatter.columnize(r.columns)}) values (${o})`,u+=t?` returning ROWID into ${this.client.parameter(s,this.builder,this.bindingsHolder)}`:"",u=this.formatter.client.positionBindings(u);const l=o.replace("DEFAULT, ","").replace(", DEFAULT","");return`execute immediate '${u.replace(/'/g,"''")}`+(l||t?"' using ":"")+l+(l&&t?", ":"")+(t?"out ?":"")+";"})).join(" ")+"end;",t&&(n.returning=t,n.returningSql=`select ${this.formatter.columnize(t)} from `+this.tableName+" where ROWID in ("+n.outParams.map(((e,t)=>`:${t+1}`)).join(", ")+") order by case ROWID "+n.outParams.map(((e,t)=>`when CHARTOROWID(:${t+1}) then ${t}`)).join(" ")+" end"),n}update(){const e=this._prepUpdate(this.single.update),t=this.where();let{returning:r}=this.single;const n=`update ${this.tableName} set `+e.join(", ")+(t?` ${t}`:"");return r?(Array.isArray(r)||(r=[r]),this._addReturningToSqlAndConvert(n,r,this.tableName)):n}truncate(){return`truncate table ${this.tableName}`}forUpdate(){return"for update"}forShare(){return this.client.logger.warn("lock for share is not supported by oracle dialect"),""}columnInfo(){const e=this.single.columnInfo;return{sql:`select * from xmltable( '/ROWSET/ROW'\n      passing dbms_xmlgen.getXMLType('\n      select char_col_decl_length, column_name, data_type, data_default, nullable\n      from all_tab_columns where table_name = ''${this.client.customWrapIdentifier(this.single.table,i)}'' ')\n      columns\n      CHAR_COL_DECL_LENGTH number, COLUMN_NAME varchar2(200), DATA_TYPE varchar2(106),\n      DATA_DEFAULT clob, NULLABLE varchar2(1))`,output(t){const r=a(t,(function(e,t){return e[t.COLUMN_NAME]={type:t.DATA_TYPE,defaultValue:t.DATA_DEFAULT,maxLength:t.CHAR_COL_DECL_LENGTH,nullable:"Y"===t.NULLABLE},e}),{});return e&&r[e]||r}}}select(){let e=this.with();const t=h.map((e=>this[e]()));return e+=n(t).join(" "),this._surroundQueryWithLimitAndOffset(e)}aggregate(e){return this._aggregate(e,{aliasSeparator:" "})}_addReturningToSqlAndConvert(e,t,r){const n={sql:e};if(!t)return n;const i=Array.isArray(t)?t:[t],s=new c(i.join(":"));return n.sql=e+" returning ROWID into "+this.client.parameter(s,this.builder,this.bindingsHolder),n.returningSql=`select ${this.formatter.columnize(t)} from ${r} where ROWID = :1`,n.outParams=[s],n.returning=t,n}_surroundQueryWithLimitAndOffset(e){let{limit:t}=this.single;const{offset:r}=this.single,n=t||0===t||"0"===t;if(t=+t,!n&&!r)return e;if(e=e||"",n&&!r)return`select * from (${e}) where rownum <= ${this._getValueOrParameterFromAttribute("limit",t)}`;const i=+r+(n?t:1e13);return"select * from (select row_.*, ROWNUM rownum_ from ("+e+") row_ where rownum <= "+(this.single.skipBinding.offset?i:this.client.parameter(i,this.builder,this.bindingsHolder))+") where rownum_ > "+this._getValueOrParameterFromAttribute("offset",r)}}},{"../../../query/querycompiler":279,"../../../util/is":293,"../utils":215,"lodash/compact":477,"lodash/identity":493,"lodash/isEmpty":500,"lodash/isPlainObject":507,"lodash/reduce":523}],209:[function(e,t,r){const n=e("./trigger");t.exports={createAutoIncrementTriggerAndSequence:function(e){e.pushAdditional((function(){const e=this.tableCompiler.tableNameRaw,t=this.tableCompiler.schemaNameRaw,r=n.createAutoIncrementTrigger(this.client.logger,e,t);this.pushQuery(r)}))}}},{"./trigger":210}],210:[function(e,t,r){const n=e("../../utils"),i={renameColumnTrigger:function(e,t,r,i){const s=n.generateCombinedName(e,"autoinc_trg",t);return`DECLARE PK_NAME VARCHAR(200); IS_AUTOINC NUMBER := 0; BEGIN  EXECUTE IMMEDIATE ('ALTER TABLE "${t}" RENAME COLUMN "${r}" TO "${i}"');  SELECT COUNT(*) INTO IS_AUTOINC from "USER_TRIGGERS" where trigger_name = '${s}';  IF (IS_AUTOINC > 0) THEN    SELECT cols.column_name INTO PK_NAME    FROM all_constraints cons, all_cons_columns cols    WHERE cons.constraint_type = 'P'    AND cons.constraint_name = cols.constraint_name    AND cons.owner = cols.owner    AND cols.table_name = '${t}';    IF ('${i}' = PK_NAME) THEN      EXECUTE IMMEDIATE ('DROP TRIGGER "${s}"');      EXECUTE IMMEDIATE ('create or replace trigger "${s}"      BEFORE INSERT on "${t}" for each row        declare        checking number := 1;        begin          if (:new."${i}" is null) then            while checking >= 1 loop              select "${n.generateCombinedName(e,"seq",t)}".nextval into :new."${i}" from dual;              select count("${i}") into checking from "${t}"              where "${i}" = :new."${i}";            end loop;          end if;        end;');    end if;  end if;END;`},createAutoIncrementTrigger:function(e,t,r){const i=`"${t}"`,s=t,o=r?`"${r}".`:"",a=r?`'${r}'`:"cols.owner",u=n.generateCombinedName(e,"autoinc_trg",t),c=`"${n.generateCombinedName(e,"seq",t)}"`;return`DECLARE PK_NAME VARCHAR(200); BEGIN  EXECUTE IMMEDIATE ('CREATE SEQUENCE ${o}${c}');  SELECT cols.column_name INTO PK_NAME  FROM all_constraints cons, all_cons_columns cols  WHERE cons.constraint_type = 'P'  AND cons.constraint_name = cols.constraint_name  AND cons.owner = ${a}  AND cols.table_name = '${s}';  execute immediate ('create or replace trigger ${o}"${u}"  BEFORE INSERT on ${o}${i}  for each row  declare  checking number := 1;  begin    if (:new."' || PK_NAME || '" is null) then      while checking >= 1 loop        select ${o}${c}.nextval into :new."' || PK_NAME || '" from dual;        select count("' || PK_NAME || '") into checking from ${o}${i}        where "' || PK_NAME || '" = :new."' || PK_NAME || '";      end loop;    end if;  end;'); END;`},renameTableAndAutoIncrementTrigger:function(e,t,r){const i=n.generateCombinedName(e,"autoinc_trg",t),s=n.generateCombinedName(e,"seq",t),o=n.generateCombinedName(e,"autoinc_trg",r),a=n.generateCombinedName(e,"seq",r);return`DECLARE PK_NAME VARCHAR(200); IS_AUTOINC NUMBER := 0; BEGIN  EXECUTE IMMEDIATE ('RENAME "${t}" TO "${r}"');  SELECT COUNT(*) INTO IS_AUTOINC from "USER_TRIGGERS" where trigger_name = '${i}';  IF (IS_AUTOINC > 0) THEN    EXECUTE IMMEDIATE ('DROP TRIGGER "${i}"');    EXECUTE IMMEDIATE ('RENAME "${s}" TO "${a}"');    SELECT cols.column_name INTO PK_NAME    FROM all_constraints cons, all_cons_columns cols    WHERE cons.constraint_type = 'P'    AND cons.constraint_name = cols.constraint_name    AND cons.owner = cols.owner    AND cols.table_name = '${r}';    EXECUTE IMMEDIATE ('create or replace trigger "${o}"    BEFORE INSERT on "${r}" for each row      declare      checking number := 1;      begin        if (:new."' || PK_NAME || '" is null) then          while checking >= 1 loop            select "${a}".nextval into :new."' || PK_NAME || '" from dual;            select count("' || PK_NAME || '") into checking from "${r}"            where "' || PK_NAME || '" = :new."' || PK_NAME || '";          end loop;        end if;      end;');  end if;END;`}};t.exports=i},{"../../utils":215}],211:[function(e,t,r){const n=e("../../../schema/columnbuilder"),i=e("lodash/toArray");t.exports=class extends n{constructor(){super(...arguments)}checkIn(){return this._modifiers.checkIn=i(arguments),this}}},{"../../../schema/columnbuilder":283,"lodash/toArray":529}],212:[function(e,t,r){const n=e("lodash/uniq"),i=e("../../../raw"),s=e("../../../schema/columncompiler"),{createAutoIncrementTriggerAndSequence:o}=e("./internal/incrementUtils"),{toNumber:a}=e("../../../util/helpers");class u extends s{constructor(){super(...arguments),this.modifiers=["defaultTo","checkIn","nullable","comment"]}increments(e={primaryKey:!0}){return o(this),"integer not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}bigincrements(e={primaryKey:!0}){return o(this),"number(20, 0) not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}floating(e){const t=a(e,0);return"float"+(t?`(${t})`:"")}double(e,t){return`number(${a(e,8)}, ${a(t,2)})`}decimal(e,t){return null===e?"decimal":`decimal(${a(e,8)}, ${a(t,2)})`}integer(e){return e?`number(${a(e,11)})`:"integer"}enu(e){const t=((e=n(e))||[]).reduce(((e,t)=>Math.max(e,String(t).length)),1);return this.columnBuilder._modifiers.checkIn=[e],`varchar2(${t})`}datetime(e){return e?"timestamp":"timestamp with time zone"}timestamp(e){return e?"timestamp":"timestamp with time zone"}bool(){return this.columnBuilder._modifiers.checkIn=[[0,1]],"number(1, 0)"}varchar(e){return`varchar2(${a(e,255)})`}comment(e){const t=this.args[0]||this.defaults("columnName");this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(t)+" is '"+(e||"")+"'")}),e)}checkIn(e){return void 0===e?"":(e=e instanceof i?e.toQuery():Array.isArray(e)?e.map((e=>`'${e}'`)).join(", "):`'${e}'`,`check (${this.formatter.wrap(this.args[0])} in (${e}))`)}}u.prototype.tinyint="smallint",u.prototype.smallint="smallint",u.prototype.mediumint="integer",u.prototype.biginteger="number(20, 0)",u.prototype.text="clob",u.prototype.time="timestamp with time zone",u.prototype.bit="clob",u.prototype.json="clob",t.exports=u},{"../../../raw":280,"../../../schema/columncompiler":284,"../../../util/helpers":292,"./internal/incrementUtils":209,"lodash/uniq":536}],213:[function(e,t,r){const n=e("../../../schema/compiler"),i=e("../utils"),s=e("./internal/trigger");t.exports=class extends n{constructor(){super(...arguments)}renameTable(e,t){const r=s.renameTableAndAutoIncrementTrigger(this.client.logger,e,t);this.pushQuery(r)}hasTable(e){this.pushQuery({sql:"select TABLE_NAME from USER_TABLES where TABLE_NAME = "+this.client.parameter(e,this.builder,this.bindingsHolder),output:e=>e.length>0})}hasColumn(e,t){const r=`select COLUMN_NAME from ALL_TAB_COLUMNS where TABLE_NAME = ${this.client.parameter(e,this.builder,this.bindingsHolder)} and COLUMN_NAME = ${this.client.parameter(t,this.builder,this.bindingsHolder)}`;this.pushQuery({sql:r,output:e=>e.length>0})}dropSequenceIfExists(e){const t=this.schema?`"${this.schema}".`:"";this.pushQuery(i.wrapSqlWithCatch(`drop sequence ${t}${this.formatter.wrap(e)}`,-2289))}_dropRelatedSequenceIfExists(e){const t=i.generateCombinedName(this.client.logger,"seq",e);this.dropSequenceIfExists(t)}dropTable(e){const t=this.schema?`"${this.schema}".`:"";this.pushQuery(`drop table ${t}${this.formatter.wrap(e)}`),this._dropRelatedSequenceIfExists(e)}dropTableIfExists(e){this.dropObject(e,"table")}dropViewIfExists(e){this.dropObject(e,"view")}dropObject(e,t){const r=this.schema?`"${this.schema}".`:"";let n=-942;"materialized view"===t&&(n=-12003),this.pushQuery(i.wrapSqlWithCatch(`drop ${t} ${r}${this.formatter.wrap(e)}`,n)),this._dropRelatedSequenceIfExists(e)}refreshMaterializedView(e){return this.pushQuery({sql:`BEGIN DBMS_MVIEW.REFRESH('${this.schemaNameRaw?this.schemaNameRaw+".":""}${e}'); END;`})}dropMaterializedView(e){this._dropView(e,!1,!0)}dropMaterializedViewIfExists(e){this.dropObject(e,"materialized view")}}},{"../../../schema/compiler":285,"../utils":215,"./internal/trigger":210}],214:[function(e,t,r){const n=e("../utils"),i=e("../../../schema/tablecompiler"),s=e("../../../util/helpers"),o=e("./internal/trigger"),{isObject:a}=e("../../../util/is");class u extends i{constructor(){super(...arguments)}addColumns(e,t){if(e.sql.length>0){t=t||this.addColumnsPrefix;const r=e.sql;let n=`${this.lowerCase?"alter table ":"ALTER TABLE "}${this.tableName()} ${t}`;e.sql.length>1?n+=`(${r.join(", ")})`:n+=r.join(", "),this.pushQuery({sql:n,bindings:e.bindings})}}renameColumn(e,t){const r=this.tableName().slice(1,-1);return this.pushQuery(o.renameColumnTrigger(this.client.logger,r,e,t))}compileAdd(e){const t=this.formatter.wrap(e),r=this.prefixArray("add column",this.getColumns(e));return this.pushQuery({sql:`alter table ${t} ${r.join(", ")}`})}createQuery(e,t,r){const i=r&&this.tableNameLike()?" as (select * from "+this.tableNameLike()+" where 0=1)":" ("+e.sql.join(", ")+this._addChecks()+")",s=`create table ${this.tableName()}${i}`;this.pushQuery({sql:t?n.wrapSqlWithCatch(s,-955):s,bindings:e.bindings}),this.single.comment&&this.comment(this.single.comment),r&&this.addColumns(e,this.addColumnsPrefix)}comment(e){this.pushQuery(`comment on table ${this.tableName()} is '${e}'`)}dropColumn(){const e=s.normalizeArr.apply(null,arguments);this.pushQuery(`alter table ${this.tableName()} drop (${this.formatter.columnize(e)})`)}_indexCommand(e,t,r){return this.formatter.wrap(n.generateCombinedName(this.client.logger,e,t,r))}primary(e,t){let r;a(t)&&({constraintName:t,deferrable:r}=t),r=r?` deferrable initially ${r}`:"",t=t?this.formatter.wrap(t):this.formatter.wrap(`${this.tableNameRaw}_pkey`);const n=e;let i=[];this.grouped.columns&&(i=this._getIncrementsColumnNames(),i&&i.forEach((e=>{n.includes(e)||n.unshift(e)}))),this.pushQuery(`alter table ${this.tableName()} add constraint ${t} primary key (${this.formatter.columnize(n)})${r}`)}dropPrimary(e){e=e?this.formatter.wrap(e):this.formatter.wrap(this.tableNameRaw+"_pkey"),this.pushQuery(`alter table ${this.tableName()} drop constraint ${e}`)}index(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),this.pushQuery(`create index ${t} on ${this.tableName()} (`+this.formatter.columnize(e)+")")}dropIndex(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),this.pushQuery(`drop index ${t}`)}unique(e,t){let r;a(t)&&({indexName:t,deferrable:r}=t),r=r?` deferrable initially ${r}`:"",t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} add constraint ${t} unique (`+this.formatter.columnize(e)+")"+r)}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop constraint ${t}`)}dropForeign(e,t){t=t?this.formatter.wrap(t):this._indexCommand("foreign",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop constraint ${t}`)}}u.prototype.addColumnsPrefix="add ",u.prototype.alterColumnsPrefix="modify ",t.exports=u},{"../../../schema/tablecompiler":288,"../../../util/helpers":292,"../../../util/is":293,"../utils":215,"./internal/trigger":210}],215:[function(e,t,r){function n(e){this.columnName=e}n.prototype.toString=function(){return`[object ReturningHelper:${this.columnName}]`},t.exports={generateCombinedName:function(t,r,n,i){const s=e("crypto");Array.isArray(i)||(i=i?[i]:[]);const o=n.replace(/\.|-/g,"_"),a=i.join("_");let u=`${o}_${a.length?a+"_":""}${r}`.toLowerCase();return u.length>30&&(t.warn(`Automatically generated name "${u}" exceeds 30 character limit for Oracle. Using base64 encoded sha1 of that name instead.`),u=s.createHash("sha1").update(u).digest("base64").replace("=","")),u},isConnectionError:function(e){return["DPI-1010","DPI-1080","ORA-03114","ORA-03113","ORA-03135","ORA-12514","ORA-00022","ORA-00028","ORA-00031","ORA-00045","ORA-00378","ORA-00602","ORA-00603","ORA-00609","ORA-01012","ORA-01041","ORA-01043","ORA-01089","ORA-01092","ORA-02396","ORA-03122","ORA-12153","ORA-12537","ORA-12547","ORA-12570","ORA-12583","ORA-27146","ORA-28511","ORA-56600","NJS-024","NJS-003"].some((function(t){return 0===e.message.indexOf(t)}))},wrapSqlWithCatch:function(e,t){return`begin execute immediate '${e.replace(/'/g,"''")}'; exception when others then if sqlcode != ${t} then raise; end if; end;`},ReturningHelper:n}},{crypto:void 0}],216:[function(e,t,r){(function(r){const n=e("lodash/each"),i=e("lodash/flatten"),s=e("lodash/isEmpty"),o=e("lodash/map"),a=e("../../formatter"),u=e("./query/oracledb-querycompiler"),c=e("./schema/oracledb-tablecompiler"),l=e("./schema/oracledb-columncompiler"),{BlobHelper:h,ReturningHelper:d,monkeyPatchConnection:f}=e("./utils"),p=e("./schema/oracledb-viewcompiler"),m=e("./schema/oracledb-viewbuilder"),y=e("./transaction"),g=e("../oracle"),{isString:v}=e("../../util/is"),{outputQuery:b,unwrapRaw:_}=e("../../formatter/wrappingFormatter"),{compileCallback:w}=e("../../formatter/formatterUtils");class E extends g{constructor(e){super(e),this.driver&&(r.env.UV_THREADPOOL_SIZE=r.env.UV_THREADPOOL_SIZE||1,r.env.UV_THREADPOOL_SIZE=parseInt(r.env.UV_THREADPOOL_SIZE)+this.driver.poolMax)}_driver(){const t=this,r=e("oracledb");return t.fetchAsString=[],this.config.fetchAsString&&Array.isArray(this.config.fetchAsString)&&this.config.fetchAsString.forEach((function(e){v(e)&&(e=e.toUpperCase(),r[e]&&("NUMBER"!==e&&"DATE"!==e&&"CLOB"!==e&&"BUFFER"!==e&&this.logger.warn('Only "date", "number", "clob" and "buffer" are supported for fetchAsString'),t.fetchAsString.push(r[e])))})),r}queryCompiler(e,t){return new u(this,e,t)}tableCompiler(){return new c(this,...arguments)}columnCompiler(){return new l(this,...arguments)}viewBuilder(){return new m(this,...arguments)}viewCompiler(){return new p(this,...arguments)}formatter(e){return new a(this,e)}transaction(){return new y(this,...arguments)}prepBindings(e){return o(e,(e=>e instanceof h&&this.driver?{type:this.driver.BLOB,dir:this.driver.BIND_OUT}:e instanceof d&&this.driver?{type:this.driver.STRING,dir:this.driver.BIND_OUT}:"boolean"==typeof e?e?1:0:e))}parameter(e,t,r){return"function"==typeof e?b(w(e,void 0,this,r),!0,t,this):e instanceof h?(r.bindings.push(e.value),"?"):_(e,!0,t,this,r)||"?"}acquireRawConnection(){const e=this;return new Promise((function(t,r){const n=e.connectionSettings.externalAuth?{externalAuth:e.connectionSettings.externalAuth}:{user:e.connectionSettings.user,password:e.connectionSettings.password};n.connectString=function(e){if(e.connectString)return e.connectString;if(!e.port)return e.host+"/"+e.database;return e.host+":"+e.port+"/"+e.database}(e.connectionSettings),e.connectionSettings.prefetchRowCount&&(n.prefetchRows=e.connectionSettings.prefetchRowCount),void 0!==e.connectionSettings.stmtCacheSize&&(n.stmtCacheSize=e.connectionSettings.stmtCacheSize),e.driver.fetchAsString=e.fetchAsString,e.driver.getConnection(n,(function(n,i){if(n)return r(n);f(i,e),t(i)}))}))}destroyRawConnection(e){return e.release()}_query(e,t){if(!t.sql)throw new Error("The query is empty");const r={autoCommit:!1};return"select"===t.method&&(r.resultSet=!0),e.executeAsync(t.sql,t.bindings,r).then((async function(r){let s=i(r.outBinds);if(t.response=r.rows||[],t.rowsAffected=r.rows?r.rows.rowsAffected:r.rowsAffected,"raw"===t.method&&s.length>0)return{response:s};if("update"===t.method){const e=t.rowsAffected.length||t.rowsAffected,r=[],i=[],o=t=>function(r,n){const o=n*e;i.push(s[t+o])};for(let i=0;i<e;i++)r.push(t.outBinding[0]),n(t.outBinding[0],o(i));s=i,t.outBinding=r}if(!t.returning&&0===s.length)return e.isTransaction||await e.commitAsync(),t;const o=[];let a=0;for(let e=0;e<t.outBinding.length;e++){const r=t.outBinding[e];a+=t.outBinding[e-1]?t.outBinding[e-1].length:0;for(let n=0;n<r.length;n++){const i=r[n];await new Promise((function(r,u){if(i instanceof h){const o=s[n+a];i.returning&&(t.response[e]=t.response[e]||{},t.response[e][i.columnName]=i.value),o.on("error",(function(e){u(e)})),o.on("finish",(function(){r()})),o.write(i.value),o.end()}else"ROWID"===t.outBinding[e][n]?(o.push(s[n+a]),r()):(t.response[e]=t.response[e]||{},t.response[e][i]=s[n+a],r())}))}}if(e.isTransaction)return t;if(await e.commitAsync(),t.returningSql){const r=await e.executeAsync(t.returningSql(),o,{resultSet:!0});t.response=r.rows}return t}))}processResponse(e,t){const{response:r}=e;if(e.output)return e.output.call(t,r);switch(e.method){case"select":default:return r;case"first":return r[0];case"pluck":return o(r,e.pluck);case"insert":case"del":case"update":case"counter":return e.returning&&!s(e.returning)?r:void 0!==e.rowsAffected?e.rowsAffected:1}}processPassedConnection(e){f(e,this)}}E.prototype.driverName="oracledb",t.exports=E}).call(this,e("_process"))},{"../../formatter":263,"../../formatter/formatterUtils":264,"../../formatter/wrappingFormatter":266,"../../util/is":293,"../oracle":207,"./query/oracledb-querycompiler":217,"./schema/oracledb-columncompiler":218,"./schema/oracledb-tablecompiler":219,"./schema/oracledb-viewbuilder":220,"./schema/oracledb-viewcompiler":221,"./transaction":222,"./utils":223,_process:void 0,"lodash/each":481,"lodash/flatten":486,"lodash/isEmpty":500,"lodash/map":515,oracledb:1}],217:[function(e,t,r){(function(r){const n=e("lodash/clone"),i=e("lodash/each"),s=e("lodash/isEmpty"),o=e("lodash/isPlainObject"),a=e("../../oracle/query/oracle-querycompiler"),u=e("../utils").ReturningHelper,c=e("../utils").BlobHelper,{isString:l}=e("../../../util/is"),{columnize:h}=e("../../../formatter/wrappingFormatter");t.exports=class extends a{insert(){const e=this,t=this._prepOutbindings(this.single.insert,this.single.returning),r=t.outBinding,n=t.returning,o=t.values;if(Array.isArray(o)&&1===o.length&&s(o[0])){const e=this.single.returning?" ("+this.formatter.wrap(this.single.returning)+")":"";return this._addReturningToSqlAndConvert("insert into "+this.tableName+e+" values (default)",r[0],this.tableName,n)}if(s(this.single.insert)&&"function"!=typeof this.single.insert)return"";const a=this._prepInsert(o),h={};if(l(a))return this._addReturningToSqlAndConvert("insert into "+this.tableName+" "+a,r[0],this.tableName,n);if(1===a.values.length)return this._addReturningToSqlAndConvert("insert into "+this.tableName+" ("+this.formatter.columnize(a.columns)+") values ("+this.client.parameterize(a.values[0],void 0,this.builder,this.bindingsHolder)+")",r[0],this.tableName,n);const d=0===a.columns.length;return h.returning=n,h.sql="begin "+a.values.map((function(t,n){const s=d?"":e.client.parameterize(t,e.client.valueForUndefined,e.builder,e.bindingsHolder);let o="insert into "+e.tableName;o+=d?" ("+e.formatter.wrap(e.single.returning)+") values (default)":" ("+e.formatter.columnize(a.columns)+") values ("+s+")";let l="",h="",f="",p="";i(t,(function(e){e instanceof c||(f+=" ?,")})),f=f.slice(0,-1),r[n].forEach((function(t){const r=t.columnName||t;if(l+=e.formatter.wrap(r)+",",h+=" ?,",p+=" out ?,",t instanceof c)return e.formatter.bindings.push(t);e.formatter.bindings.push(new u(r))})),l=l.slice(0,-1),h=h.slice(0,-1),p=p.slice(0,-1),l&&h&&(o+=" returning "+l+" into"+h),o=e.formatter.client.positionBindings(o);const m=s.replace(/DEFAULT, /g,"").replace(/, DEFAULT/g,"").replace("EMPTY_BLOB(), ","").replace(", EMPTY_BLOB()","");return"execute immediate '"+o.replace(/'/g,"''")+(m||t?"' using ":"")+m+(m&&p?",":"")+p+";"})).join(" ")+"end;",h.outBinding=r,"*"===n[0]&&(h.returningSql=function(){return"select * from "+e.tableName+" where ROWID in ("+this.outBinding.map((function(e,t){return":"+(t+1)})).join(", ")+") order by case ROWID "+this.outBinding.map((function(e,t){return"when CHARTOROWID(:"+(t+1)+") then "+t})).join(" ")+" end"}),h}with(){const e=[];if(this.grouped.with)for(const t of this.grouped.with)t.recursive&&(e.push(t),t.recursive=!1);const t=super.with();for(const t of e)t.recursive=!0;return t}_addReturningToSqlAndConvert(e,t,r,n){const i=this,s={sql:e};if(!t)return s;const o=Array.isArray(t)?t:[t];let a="",l="";return o.forEach((function(e){const t=e.columnName||e;if(a+=i.formatter.wrap(t)+",",l+="?,",e instanceof c)return i.formatter.bindings.push(e);i.formatter.bindings.push(new u(t))})),s.sql=e,a=a.slice(0,-1),l=l.slice(0,-1),a&&l&&(s.sql+=" returning "+a+" into "+l),s.outBinding=[t],"*"===n[0]&&(s.returningSql=function(){return"select * from "+i.tableName+" where ROWID = :1"}),s.returning=n,s}_prepOutbindings(e,t){const s={};let a=e||[],u=t||[];!Array.isArray(a)&&o(e)&&(a=[a]),u&&!Array.isArray(u)&&(u=[u]);const l=[];return i(a,(function(e,t){"*"===u[0]?l[t]=["ROWID"]:l[t]=n(u),i(e,(function(n,i){if(n instanceof r){e[i]=new c(i,n);const r=l[t].indexOf(i);r>=0&&(l[t].splice(r,1),e[i].returning=!0),l[t].push(e[i])}void 0===n&&delete a[t][i]}))})),s.returning=u,s.outBinding=l,s.values=a,s}_groupOrder(e,t){return super._groupOrderNulls(e,t)}update(){const e=this,t={},r=this._prepOutbindings(this.single.update||this.single.counter,this.single.returning),n=r.outBinding,i=r.returning,o=this._prepUpdate(this.single.update),a=this.where();let l="",h="";return s(o)&&"function"!=typeof this.single.update?"":(n.forEach((function(t){t.forEach((function(t){const r=t.columnName||t;if(l+=e.formatter.wrap(r)+",",h+=" ?,",t instanceof c)return e.formatter.bindings.push(t);e.formatter.bindings.push(new u(r))}))})),l=l.slice(0,-1),h=h.slice(0,-1),t.outBinding=n,t.returning=i,t.sql="update "+this.tableName+" set "+o.join(", ")+(a?" "+a:""),n.length&&!s(n[0])&&(t.sql+=" returning "+l+" into"+h),"*"===i[0]&&(t.returningSql=function(){let t="select * from "+e.tableName;const r=this.rowsAffected.length||this.rowsAffected;let n=" where ROWID in (",i=") order by case ROWID ";for(let e=0;e<r;e++)"*"===this.returning[0]&&(n+=":"+(e+1)+", ",i+="when CHARTOROWID(:"+(e+1)+") then "+e+" ");return"*"===this.returning[0]&&(this.returning=this.returning.slice(0,-1),n=n.slice(0,-2),i=i.slice(0,-1)),t+(n+i+" end")}),t)}_jsonPathWrap(e){return`'${e.path||e[1]}'`}jsonExtract(e){return this._jsonExtract(e.singleValue?"json_value":"json_query",e)}jsonSet(e){return`json_transform(${h(e.column,this.builder,this.client,this.bindingsHolder)}, set ${this.client.parameter(e.path,this.builder,this.bindingsHolder)} = ${this.client.parameter(e.value,this.builder,this.bindingsHolder)})`}jsonInsert(e){return`json_transform(${h(e.column,this.builder,this.client,this.bindingsHolder)}, insert ${this.client.parameter(e.path,this.builder,this.bindingsHolder)} = ${this.client.parameter(e.value,this.builder,this.bindingsHolder)})`}jsonRemove(e){const t=`json_transform(${h(e.column,this.builder,this.client,this.bindingsHolder)}, remove ${this.client.parameter(e.path,this.builder,this.bindingsHolder)})`;return e.alias?this.client.alias(t,this.formatter.wrap(e.alias)):t}whereJsonPath(e){return this._whereJsonPath("json_value",e)}whereJsonSupersetOf(e){throw new Error("Json superset where clause not actually supported by Oracle")}whereJsonSubsetOf(e){throw new Error("Json subset where clause not actually supported by Oracle")}onJsonPathEquals(e){return this._onJsonPathEquals("json_value",e)}}}).call(this,e("buffer").Buffer)},{"../../../formatter/wrappingFormatter":266,"../../../util/is":293,"../../oracle/query/oracle-querycompiler":208,"../utils":223,buffer:void 0,"lodash/clone":475,"lodash/each":481,"lodash/isEmpty":500,"lodash/isPlainObject":507}],218:[function(e,t,r){const n=e("../../oracle/schema/oracle-columncompiler"),{isObject:i}=e("../../../util/is");class s extends n{constructor(){super(...arguments),this.modifiers=["defaultTo","nullable","comment"],this._addCheckModifiers()}datetime(e){let t;return i(e)?({useTz:t}=e):t=!e,t?"timestamp with local time zone":"timestamp"}timestamp(e){let t;return i(e)?({useTz:t}=e):t=!e,t?"timestamp with local time zone":"timestamp"}checkRegex(e,t){return this._check(`REGEXP_LIKE(${this.formatter.wrap(this.getColumnName())},${this.client._escapeBinding(e)})`,t)}json(){return`varchar2(4000) check (${this.formatter.columnize(this.getColumnName())} is json)`}jsonb(){return this.json()}}s.prototype.time="timestamp with local time zone",s.prototype.uuid=({useBinaryUuid:e=!1}={})=>e?"raw(16)":"char(36)",t.exports=s},{"../../../util/is":293,"../../oracle/schema/oracle-columncompiler":212}],219:[function(e,t,r){const n=e("../../oracle/schema/oracle-tablecompiler");t.exports=class extends n{constructor(e,t){super(e,t)}_setNullableState(e,t){const r=t?"NULL":"NOT NULL",n=`alter table ${this.tableName()} modify (${this.formatter.wrap(e)} ${r})`;return this.pushQuery({sql:n})}}},{"../../oracle/schema/oracle-tablecompiler":214}],220:[function(e,t,r){const n=e("../../../schema/viewbuilder.js");t.exports=class extends n{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}}},{"../../../schema/viewbuilder.js":289}],221:[function(e,t,r){const n=e("../../../schema/viewcompiler.js");t.exports=class extends n{constructor(e,t){super(e,t)}createOrReplace(){this.createQuery(this.columns,this.selectQuery,!1,!0)}createMaterializedView(){this.createQuery(this.columns,this.selectQuery,!0)}}},{"../../../schema/viewcompiler.js":290}],222:[function(e,t,r){const n=e("../../execution/transaction"),{timeout:i,KnexTimeoutError:s}=e("../../util/timeout"),o=e("debug")("knex:tx");t.exports=class extends n{begin(e){return this.isolationLevel&&this.client.logger.warn("Transaction isolation is not currently supported for Oracle"),Promise.resolve()}async commit(e,t){this._completed=!0;try{await e.commitAsync(),this._resolver(t)}catch(e){this._rejecter(e)}}release(e,t){return this._resolver(t)}rollback(e,t){return this._completed=!0,o("%s: rolling back",this.txid),i(e.rollbackAsync(),5e3).catch((e=>{if(!(e instanceof s))return Promise.reject(e);this._rejecter(e)})).then((()=>{if(void 0===t){if(this.doNotRejectOnRollback)return void this._resolver();t=new Error(`Transaction rejected with non-error: ${t}`)}this._rejecter(t)}))}savepoint(e){return this.query(e,`SAVEPOINT ${this.txid}`)}async acquireConnection(e,t){const r=e&&e.connection,n=r||await this.client.acquireConnection();try{return n.__knexTxId=this.txid,n.isTransaction=!0,await t(n)}finally{o("%s: releasing connection",this.txid),n.isTransaction=!1;try{await n.commitAsync()}catch(e){this._rejecter(e)}finally{r?o("%s: not releasing external connection",this.txid):await this.client.releaseConnection(n)}}}}},{"../../execution/transaction":262,"../../util/timeout":298,debug:299}],223:[function(e,t,r){(function(r){const n=e("../oracle/utils"),{promisify:i}=e("util"),s=e("stream");function o(e,t){this.columnName=e,this.value=t,this.returning=!1}o.prototype.toString=function(){return"[object BlobHelper:"+this.columnName+"]"};const a=function(t){const n=e("oracledb");let i;if(t.type)t.type===n.BLOB?i="buffer":t.type===n.CLOB&&(i="string");else{if(!t.iLob)throw new Error("Unrecognized oracledb lob stream type");t.iLob.type===n.CLOB?i="string":t.iLob.type===n.BLOB&&(i="buffer")}return"string"===i&&t.setEncoding("utf-8"),function(e,t){return new Promise(((n,i)=>{let s="string"===t?"":r.alloc(0);e.on("error",(function(e){i(e)})),e.on("data",(function(e){"string"===t?s+=e:s=r.concat([s,e])})),e.on("end",(function(){n(s)}))}))}(t,i)};n.BlobHelper=o,n.monkeyPatchConnection=function(e,t){if(e.executeAsync)return;e.commitAsync=function(){return new Promise(((e,t)=>{this.commit((function(r){if(r)return t(r);e()}))}))},e.rollbackAsync=function(){return new Promise(((e,t)=>{this.rollback((function(r){if(r)return t(r);e()}))}))};const r=i((function(r,i,s,o){if((s=s||{}).outFormat=t.driver.OUT_FORMAT_OBJECT||t.driver.OBJECT,!s.outFormat)throw new Error("not found oracledb.outFormat constants");s.resultSet?e.execute(r,i||[],s,(function(t,r){if(t)return n.isConnectionError(t)&&(e.close().catch((function(e){})),e.__knex__disposed=t),o(t);const i={rows:[],resultSet:r.resultSet},s=function(e,t,r){t.getRows(r,(function(a,u){if(a)n.isConnectionError(a)&&(e.close().catch((function(e){})),e.__knex__disposed=a),t.close((function(){return o(a)}));else{if(0===u.length)return o(null,i);if(u.length>0){if(u.length!==r)return i.rows=i.rows.concat(u),o(null,i);i.rows=i.rows.concat(u),s(e,t,r)}}}))};s(e,r.resultSet,100)})):e.execute(r,i||[],s,(function(t,r){return t?(n.isConnectionError(t)&&(e.close().catch((function(e){})),e.__knex__disposed=t),o(t)):o(null,r)}))}));e.executeAsync=function(e,t,n){return r(e,t,n).then((async e=>{const t=()=>e.resultSet?i(e.resultSet.close).call(e.resultSet):Promise.resolve(),r=[];if(e.rows&&Array.isArray(e.rows))for(let t=0;t<e.rows.length;t++){const n=e.rows[t];for(const e in n)n[e]instanceof s.Readable&&r.push({index:t,key:e,stream:n[e]})}try{for(const t of r)e.rows[t.index][t.key]=await a(t.stream)}catch(e){throw await t().catch((()=>{})),e}return await t(),e}))}},t.exports=n}).call(this,e("buffer").Buffer)},{"../oracle/utils":215,buffer:void 0,oracledb:1,stream:void 0,util:void 0}],224:[function(e,t,r){const n=e("../postgres");t.exports=class extends n{constructor(...e){super(...e),this.driverName="pgnative",this.canCancelQuery=!0}_driver(){return e("pg").native}_stream(e,t,r,n){if(!t.sql)throw new Error("The query is empty");const i=this;return new Promise(((n,s)=>(r.on("error",s),r.on("end",n),i._query(e,t).then((e=>e.response)).then((({rows:e})=>e.forEach((e=>r.write(e))))).catch((function(e){r.emit("error",e)})).then((function(){r.end()})))))}async cancelQuery(e){try{return await this._wrappedCancelQueryCall(null,e)}catch(e){throw this.logger.warn(`Connection Error: ${e}`),e}}_wrappedCancelQueryCall(e,t){return new Promise((function(e,r){t.native.cancel((function(t){t?r(t):e(!0)}))}))}}},{"../postgres":226,pg:1}],225:[function(e,t,r){const n=e("../../../execution/transaction");t.exports=class extends n{begin(e){return this.isolationLevel?this.query(e,`BEGIN ISOLATION LEVEL ${this.isolationLevel};`):this.query(e,"BEGIN;")}}},{"../../../execution/transaction":262}],226:[function(e,t,r){(function(r){const n=e("lodash/extend"),i=e("lodash/map"),{promisify:s}=e("util"),o=e("../../client"),a=e("./execution/pg-transaction"),u=e("./query/pg-querycompiler"),c=e("./query/pg-querybuilder"),l=e("./schema/pg-columncompiler"),h=e("./schema/pg-tablecompiler"),d=e("./schema/pg-viewcompiler"),f=e("./schema/pg-viewbuilder"),p=e("./schema/pg-compiler"),{makeEscape:m}=e("../../util/string"),{isString:y}=e("../../util/is");class g extends o{constructor(e){super(e),e.returning&&(this.defaultReturning=e.returning),e.searchPath&&(this.searchPath=e.searchPath)}transaction(){return new a(this,...arguments)}queryBuilder(){return new c(this)}queryCompiler(e,t){return new u(this,e,t)}columnCompiler(){return new l(this,...arguments)}schemaCompiler(){return new p(this,...arguments)}tableCompiler(){return new h(this,...arguments)}viewCompiler(){return new d(this,...arguments)}viewBuilder(){return new f(this,...arguments)}_driver(){return e("pg")}wrapIdentifierImpl(e){if("*"===e)return e;let t="";const r=e.match(/(.*?)(\[[0-9]+\])/);return r&&(e=r[1],t=r[2]),`"${e.replace(/"/g,'""')}"${t}`}_acquireOnlyConnection(){const e=new this.driver.Client(this.connectionSettings);return e.connect().then((()=>e))}acquireRawConnection(){const e=this;return this._acquireOnlyConnection().then((function(t){return t.on("error",(e=>{t.__knex__disposed=e})),t.on("end",(e=>{t.__knex__disposed=e||"Connection ended unexpectedly"})),e.version?t:e.checkVersion(t).then((function(r){return e.version=r,t}))})).then((async function(t){return await e.setSchemaSearchPath(t),t}))}async destroyRawConnection(e){return s((t=>e.end(t)))()}checkVersion(e){return new Promise(((t,r)=>{e.query("select version();",((e,n)=>{if(e)return r(e);t(this._parseVersion(n.rows[0].version))}))}))}_parseVersion(e){return/^PostgreSQL (.*?)( |$)/.exec(e)[1]}positionBindings(e){let t=0;return e.replace(/(\\*)(\?)/g,(function(e,r){return r.length%2?"?":(t++,`$${t}`)}))}setSchemaSearchPath(e,t){let r=t||this.searchPath;if(!r)return Promise.resolve(!0);if(!Array.isArray(r)&&!y(r))throw new TypeError("knex: Expected searchPath to be Array/String, got: "+typeof r);if(y(r)){if(r.includes(",")){const e=`[${r.split(",").map((e=>`'${e}'`)).join(", ")}]`;this.logger.warn(`Detected comma in searchPath "${r}".If you are trying to specify multiple schemas, use Array syntax: ${e}`)}r=[r]}return r=r.map((e=>`"${e}"`)).join(","),new Promise((function(t,n){e.query(`set search_path to ${r}`,(function(e){if(e)return n(e);t(!0)}))}))}_stream(t,n,i,s){if(!n.sql)throw new Error("The query is empty");const o=r.browser?void 0:e("pg-query-stream"),a=n.sql;return new Promise((function(e,r){const u=t.query(new o(a,n.bindings,s));u.on("error",(function(e){r(e),i.emit("error",e)})),i.on("end",e),u.pipe(i)}))}_query(e,t){if(!t.sql)throw new Error("The query is empty");let r={text:t.sql,values:t.bindings||[]};return t.options&&(r=n(r,t.options)),new Promise((function(n,i){e.query(r,(function(e,r){if(e)return i(e);t.response=r,n(t)}))}))}processResponse(e,t){const r=e.response;if(e.output)return e.output.call(t,r);if("raw"===e.method)return r;const{returning:n}=e;if("SELECT"===r.command)return"first"===e.method?r.rows[0]:"pluck"===e.method?i(r.rows,e.pluck):r.rows;if(n){const e=[];for(let t=0,n=r.rows.length;t<n;t++){const n=r.rows[t];e[t]=n}return e}return"UPDATE"===r.command||"DELETE"===r.command?r.rowCount:r}async cancelQuery(e){const t=await this.acquireRawConnection();try{return await this._wrappedCancelQueryCall(t,e)}finally{await this.destroyRawConnection(t).catch((e=>{this.logger.warn(`Connection Error: ${e}`)}))}}_wrappedCancelQueryCall(e,t){return this._query(e,{sql:"SELECT pg_cancel_backend($1);",bindings:[t.processID],options:{}})}toPathForJson(e){return e.match(/^{.*}$/)?e:"{"+e.replace(/^(\$\.)/,"").replace(".",",").replace(/\[([0-9]+)]/,",$1")+"}"}}function v(e,t){let r="{";for(let n=0;n<e.length;n++){n>0&&(r+=",");const i=e[n];null==i?r+="NULL":Array.isArray(i)?r+=v(i,t):r+="number"==typeof i?i:JSON.stringify("string"==typeof i?i:t(i))}return r+"}"}Object.assign(g.prototype,{dialect:"postgresql",driverName:"pg",canCancelQuery:!0,_escapeBinding:m({escapeArray:(e,t)=>t(v(e,t)),escapeString(e){let t=!1,r="'";for(let n=0;n<e.length;n++){const i=e[n];"'"===i?r+=i+i:"\\"===i?(r+=i+i,t=!0):r+=i}return r+="'",!0===t&&(r="E"+r),r},escapeObject(e,t,r,n=[]){if(e&&"function"==typeof e.toPostgres){if(-1!==(n=n||[]).indexOf(e))throw new Error(`circular reference detected while preparing "${e}" for query`);return n.push(e),t(e.toPostgres(t),n)}return JSON.stringify(e)}})}),t.exports=g}).call(this,e("_process"))},{"../../client":180,"../../util/is":293,"../../util/string":297,"./execution/pg-transaction":225,"./query/pg-querybuilder":227,"./query/pg-querycompiler":228,"./schema/pg-columncompiler":229,"./schema/pg-compiler":230,"./schema/pg-tablecompiler":231,"./schema/pg-viewbuilder":232,"./schema/pg-viewcompiler":233,_process:void 0,"lodash/extend":483,"lodash/map":515,pg:1,"pg-query-stream":1,util:void 0}],227:[function(e,t,r){const n=e("../../../query/querybuilder.js");t.exports=class extends n{using(e){return this._single.using=e,this}withMaterialized(e,t,r){return this._validateWithArgs(e,t,r,"with"),this.withWrapped(e,t,r,!0)}withNotMaterialized(e,t,r){return this._validateWithArgs(e,t,r,"with"),this.withWrapped(e,t,r,!1)}}},{"../../../query/querybuilder.js":278}],228:[function(e,t,r){const n=e("lodash/identity"),i=e("lodash/reduce"),s=e("../../../query/querycompiler"),{wrapString:o,columnize:a,operator:u,wrap:c}=e("../../../formatter/wrappingFormatter");t.exports=class extends s{constructor(e,t,r){super(e,t,r),this._defaultInsertValue="default"}truncate(){return`truncate ${this.tableName} restart identity`}insert(){let e=super.insert();if(""===e)return e;const{returning:t,onConflict:r,ignore:n,merge:i,insert:s}=this.single;if(r&&n&&(e+=this._ignore(r)),r&&i){e+=this._merge(i.updates,r,s);const t=this.where();t&&(e+=` ${t}`)}return t&&(e+=this._returning(t)),{sql:e,returning:t}}update(){const e=this.with(),t=this._prepUpdate(this.single.update),r=this.where(),{returning:n}=this.single;return{sql:e+`update ${this.single.only?"only ":""}${this.tableName} `+`set ${t.join(", ")}`+(r?` ${r}`:"")+this._returning(n),returning:n}}using(){const e=this.single.using;if(!e)return;let t="using ";return Array.isArray(e)?t+=e.map((e=>this.formatter.wrap(e))).join(","):t+=this.formatter.wrap(e),t}del(){const{tableName:e}=this,t=this.with();let r=this.where()||"",n=this.using()||"";const i=this.grouped.join,s=[];if(Array.isArray(i)){for(const e of i){s.push(c(this._joinTable(e),void 0,this.builder,this.client,this.bindingsHolder));const t=[];for(const r of e.clauses)t.push(this.whereBasic({column:r.column,operator:"=",value:r.value,asColumn:!0}));t.length>0&&(r+=(r?" and ":"where ")+t.join(" and "))}s.length>0&&(n+=(n?",":"using ")+s.join(","))}const o=t+`delete from ${this.single.only?"only ":""}${e}`+(n?` ${n}`:"")+(r?` ${r}`:""),{returning:a}=this.single;return{sql:o+this._returning(a),returning:a}}aggregate(e){return this._aggregate(e,{distinctParentheses:!0})}_returning(e){return e?` returning ${this.formatter.columnize(e)}`:""}_ignore(e){return!0===e?" on conflict do nothing":` on conflict ${this._onConflictClause(e)} do nothing`}_merge(e,t,r){let n=` on conflict ${this._onConflictClause(t)} do update set `;if(e&&Array.isArray(e))return n+=e.map((e=>o(e.split(".").pop(),this.formatter.builder,this.client,this.formatter))).map((e=>`${e} = excluded.${e}`)).join(", "),n;if(e&&"object"==typeof e){const t=this._prepUpdate(e);return n+="string"==typeof t?t:t.join(","),n}{const e=this._prepInsert(r);if("string"==typeof e)throw new Error("If using merge with a raw insert query, then updates must be provided");return n+=e.columns.map((e=>o(e.split(".").pop(),this.builder,this.client))).map((e=>`${e} = excluded.${e}`)).join(", "),n}}_tableNames(e){const t=this.single.schema,r=[];for(let n=0;n<e.length;n++){let i=e[n];i&&(t&&(i=`${t}.${i}`),r.push(this.formatter.wrap(i)))}return r.join(", ")}_lockingClause(e){const t=this.single.lockTables||[];return e+(t.length?" of "+this._tableNames(t):"")}_groupOrder(e,t){return super._groupOrderNulls(e,t)}forUpdate(){return this._lockingClause("for update")}forShare(){return this._lockingClause("for share")}forNoKeyUpdate(){return this._lockingClause("for no key update")}forKeyShare(){return this._lockingClause("for key share")}skipLocked(){return"skip locked"}noWait(){return"nowait"}columnInfo(){const e=this.single.columnInfo;let t=this.single.schema;const r=this.client.customWrapIdentifier(this.single.table,n);t&&(t=this.client.customWrapIdentifier(t,n));const i=[r];return this._buildColumnInfoQuery(t,"select * from information_schema.columns where table_name = ? and table_catalog = current_database()",i,e)}_buildColumnInfoQuery(e,t,r,n){return e?(t+=" and table_schema = ?",r.push(e)):t+=" and table_schema = current_schema()",{sql:t,bindings:r,output(e){const t=i(e.rows,(function(e,t){return e[t.column_name]={type:t.data_type,maxLength:t.character_maximum_length,nullable:"YES"===t.is_nullable,defaultValue:t.column_default},e}),{});return n&&t[n]||t}}}distinctOn(e){return"distinct on ("+this.formatter.columnize(e)+") "}jsonExtract(e){return this._jsonExtract("jsonb_path_query",e)}jsonSet(e){return this._jsonSet("jsonb_set",Object.assign({},e,{path:this.client.toPathForJson(e.path)}))}jsonInsert(e){return this._jsonSet("jsonb_insert",Object.assign({},e,{path:this.client.toPathForJson(e.path)}))}jsonRemove(e){const t=`${a(e.column,this.builder,this.client,this.bindingsHolder)} #- ${this.client.parameter(this.client.toPathForJson(e.path),this.builder,this.bindingsHolder)}`;return e.alias?this.client.alias(t,this.formatter.wrap(e.alias)):t}whereJsonPath(e){let t="";return t=!isNaN(e.value)&&parseInt(e.value)?"::int":!isNaN(e.value)&&parseFloat(e.value)?"::float":" #>> '{}'",`jsonb_path_query_first(${this._columnClause(e)}, ${this.client.parameter(e.jsonPath,this.builder,this.bindingsHolder)})${t} ${u(e.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(e)}`}whereJsonSupersetOf(e){return this._not(e,`${c(e.column,void 0,this.builder,this.client,this.bindingsHolder)} @> ${this._jsonValueClause(e)}`)}whereJsonSubsetOf(e){return this._not(e,`${a(e.column,this.builder,this.client,this.bindingsHolder)} <@ ${this._jsonValueClause(e)}`)}onJsonPathEquals(e){return this._onJsonPathEquals("jsonb_path_query_first",e)}}},{"../../../formatter/wrappingFormatter":266,"../../../query/querycompiler":279,"lodash/identity":493,"lodash/reduce":523}],229:[function(e,t,r){const n=e("../../../schema/columncompiler"),{isObject:i}=e("../../../util/is"),{toNumber:s}=e("../../../util/helpers"),o=/(?<!')'(?!')/g;class a extends n{constructor(e,t,r){super(e,t,r),this.modifiers=["nullable","defaultTo","comment"],this._addCheckModifiers()}bit(e){return!1!==e.length?`bit(${e.length})`:"bit"}enu(e,t){const r=(t=t||{}).useNative&&t.existingType?void 0:e.join("', '");if(t.useNative){let e="";const n=t.schemaName||this.tableCompiler.schemaNameRaw;return n&&(e+=`"${n}".`),e+=`"${t.enumName}"`,t.existingType||this.tableCompiler.unshiftQuery(`create type ${e} as enum ('${r}')`),e}return`text check (${this.formatter.wrap(this.args[0])} in ('${r}'))`}decimal(e,t){return null===e?"decimal":`decimal(${s(e,8)}, ${s(t,2)})`}json(e){return e&&this.client.logger.deprecate("json(true)","jsonb()"),u(this.client,e)}jsonb(){return u(this.client,!0)}checkRegex(e,t){return this._check(`${this.formatter.wrap(this.getColumnName())} ~ ${this.client._escapeBinding(e)}`,t)}datetime(e=!1,t){let r;return i(e)?({useTz:r,precision:t}=e):r=!e,r="boolean"!=typeof r||r,`${r?"timestamptz":"timestamp"}${t=null!=t?"("+t+")":""}`}timestamp(e=!1,t){return this.datetime(e,t)}comment(e){const t=this.args[0]||this.defaults("columnName"),r=e?`'${e.replace(o,"''")}'`:"NULL";this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(t)+` is ${r}`)}),e)}increments(e={primaryKey:!0}){return"serial"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}bigincrements(e={primaryKey:!0}){return"bigserial"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")}}function u(e,t){return!e.version||"cockroachdb"===e.config.client||parseFloat(e.version)>=9.2?t?"jsonb":"json":"text"}a.prototype.bigint="bigint",a.prototype.binary="bytea",a.prototype.bool="boolean",a.prototype.double="double precision",a.prototype.floating="real",a.prototype.smallint="smallint",a.prototype.tinyint="smallint",a.prototype.uuid="uuid",t.exports=a},{"../../../schema/columncompiler":284,"../../../util/helpers":292,"../../../util/is":293}],230:[function(e,t,r){const n=e("../../../schema/compiler");t.exports=class extends n{constructor(e,t){super(e,t)}hasTable(e){let t="select * from information_schema.tables where table_name = ?";const r=[e];this.schema?(t+=" and table_schema = ?",r.push(this.schema)):t+=" and table_schema = current_schema()",this.pushQuery({sql:t,bindings:r,output:e=>e.rows.length>0})}hasColumn(e,t){let r="select * from information_schema.columns where table_name = ? and column_name = ?";const n=[e,t];this.schema?(r+=" and table_schema = ?",n.push(this.schema)):r+=" and table_schema = current_schema()",this.pushQuery({sql:r,bindings:n,output:e=>e.rows.length>0})}qualifiedTableName(e){const t=this.schema?`${this.schema}.${e}`:e;return this.formatter.wrap(t)}renameTable(e,t){this.pushQuery(`alter table ${this.qualifiedTableName(e)} rename to ${this.formatter.wrap(t)}`)}createSchema(e){this.pushQuery(`create schema ${this.formatter.wrap(e)}`)}createSchemaIfNotExists(e){this.pushQuery(`create schema if not exists ${this.formatter.wrap(e)}`)}dropSchema(e,t=!1){this.pushQuery(`drop schema ${this.formatter.wrap(e)}${t?" cascade":""}`)}dropSchemaIfExists(e,t=!1){this.pushQuery(`drop schema if exists ${this.formatter.wrap(e)}${t?" cascade":""}`)}dropExtension(e){this.pushQuery(`drop extension ${this.formatter.wrap(e)}`)}dropExtensionIfExists(e){this.pushQuery(`drop extension if exists ${this.formatter.wrap(e)}`)}createExtension(e){this.pushQuery(`create extension ${this.formatter.wrap(e)}`)}createExtensionIfNotExists(e){this.pushQuery(`create extension if not exists ${this.formatter.wrap(e)}`)}renameView(e,t){this.pushQuery(this.alterViewPrefix+`${this.formatter.wrap(e)} rename to ${this.formatter.wrap(t)}`)}refreshMaterializedView(e,t=!1){this.pushQuery({sql:`refresh materialized view${t?" concurrently":""} ${this.formatter.wrap(e)}`})}dropMaterializedView(e){this._dropView(e,!1,!0)}dropMaterializedViewIfExists(e){this._dropView(e,!0,!0)}}},{"../../../schema/compiler":285}],231:[function(e,t,r){const n=e("lodash/has"),i=e("../../../schema/tablecompiler"),{isObject:s,isString:o}=e("../../../util/is");t.exports=class extends i{constructor(e,t){super(e,t)}renameColumn(e,t){return this.pushQuery({sql:`alter table ${this.tableName()} rename ${this.formatter.wrap(e)} to ${this.formatter.wrap(t)}`})}_setNullableState(e,t){const r=t?"drop not null":"set not null",n=`alter table ${this.tableName()} alter column ${this.formatter.wrap(e)} ${r}`;return this.pushQuery({sql:n})}compileAdd(e){const t=this.formatter.wrap(e),r=this.prefixArray("add column",this.getColumns(e));return this.pushQuery({sql:`alter table ${t} ${r.join(", ")}`})}createQuery(e,t,r){const i=t?"create table if not exists ":"create table ",s=" ("+e.sql.join(", ")+this._addChecks()+")";let o=i+this.tableName()+(r&&this.tableNameLike()?" (like "+this.tableNameLike()+" including all"+(e.sql.length?", "+e.sql.join(", "):"")+")":s);this.single.inherits&&(o+=` inherits (${this.formatter.wrap(this.single.inherits)})`),this.pushQuery({sql:o,bindings:e.bindings});n(this.single,"comment")&&this.comment(this.single.comment)}addColumns(e,t,r){if(t===this.alterColumnsPrefix)for(const e of r)this._addColumn(e);else super.addColumns(e,t)}_addColumn(e){const t=this.tableName(),r=e.getColumnType(),n=this.client.wrapIdentifier(e.getColumnName(),e.columnBuilder.queryContext()),i="enu"===e.type;this.pushQuery({sql:`alter table ${t} alter column ${n} drop default`,bindings:[]});const s=e.columnBuilder.alterNullable;s&&this.pushQuery({sql:`alter table ${t} alter column ${n} drop not null`,bindings:[]});e.columnBuilder.alterType&&this.pushQuery({sql:`alter table ${t} alter column ${n} type ${r} using (${n}${i?"::text::":"::"}${r})`,bindings:[]});const o=e.modified.defaultTo;if(o){const r=e.defaultTo.apply(e,o);this.pushQuery({sql:`alter table ${t} alter column ${n} set ${r}`,bindings:[]})}if(s){const r=e.modified.nullable;r&&!1===r[0]&&this.pushQuery({sql:`alter table ${t} alter column ${n} set not null`,bindings:[]})}}comment(e){this.pushQuery(`comment on table ${this.tableName()} is '${this.single.comment}'`)}primary(e,t){let r;s(t)&&({constraintName:t,deferrable:r}=t),r=r?` deferrable initially ${r}`:"",t=t?this.formatter.wrap(t):this.formatter.wrap(`${this.tableNameRaw}_pkey`),this.pushQuery(`alter table ${this.tableName()} add constraint ${t} primary key (${this.formatter.columnize(e)})${r}`)}unique(e,t){let r;s(t)&&({indexName:t,deferrable:r}=t),r=r?` deferrable initially ${r}`:"",t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} add constraint ${t} unique (`+this.formatter.columnize(e)+")"+r)}index(e,t,r){let n,i;t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),o(r)?i=r:s(r)&&({indexType:i,predicate:n}=r);const a=n?" "+this.client.queryCompiler(n).where():"";this.pushQuery(`create index ${t} on ${this.tableName()}${i&&` using ${i}`||""} (`+this.formatter.columnize(e)+")"+`${a}`)}dropPrimary(e){e=e?this.formatter.wrap(e):this.formatter.wrap(this.tableNameRaw+"_pkey"),this.pushQuery(`alter table ${this.tableName()} drop constraint ${e}`)}dropIndex(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),t=this.schemaNameRaw?`${this.formatter.wrap(this.schemaNameRaw)}.${t}`:t,this.pushQuery(`drop index ${t}`)}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop constraint ${t}`)}dropForeign(e,t){t=t?this.formatter.wrap(t):this._indexCommand("foreign",this.tableNameRaw,e),this.pushQuery(`alter table ${this.tableName()} drop constraint ${t}`)}}},{"../../../schema/tablecompiler":288,"../../../util/is":293,"lodash/has":490}],232:[function(e,t,r){const n=e("../../../schema/viewbuilder.js");t.exports=class extends n{constructor(){super(...arguments)}checkOption(){this._single.checkOption="default_option"}localCheckOption(){this._single.checkOption="local"}cascadedCheckOption(){this._single.checkOption="cascaded"}}},{"../../../schema/viewbuilder.js":289}],233:[function(e,t,r){const n=e("../../../schema/viewcompiler.js");t.exports=class extends n{constructor(e,t){super(e,t)}renameColumn(e,t){return this.pushQuery({sql:`alter view ${this.viewName()} rename ${this.formatter.wrap(e)} to ${this.formatter.wrap(t)}`})}defaultTo(e,t){return this.pushQuery({sql:`alter view ${this.viewName()} alter ${this.formatter.wrap(e)} set default ${t}`})}createOrReplace(){this.createQuery(this.columns,this.selectQuery,!1,!0)}createMaterializedView(){this.createQuery(this.columns,this.selectQuery,!0)}}},{"../../../schema/viewcompiler.js":290}],234:[function(e,t,r){const n=e("../postgres"),i=e("lodash/map"),s=e("./transaction"),o=e("./query/redshift-querycompiler"),a=e("./schema/redshift-columnbuilder"),u=e("./schema/redshift-columncompiler"),c=e("./schema/redshift-tablecompiler"),l=e("./schema/redshift-compiler"),h=e("./schema/redshift-viewcompiler");class d extends n{transaction(){return new s(this,...arguments)}queryCompiler(e,t){return new o(this,e,t)}columnBuilder(){return new a(this,...arguments)}columnCompiler(){return new u(this,...arguments)}tableCompiler(){return new c(this,...arguments)}schemaCompiler(){return new l(this,...arguments)}viewCompiler(){return new h(this,...arguments)}_driver(){return e("pg")}processResponse(e,t){const r=e.response;return e.output?e.output.call(t,r):"raw"===e.method?r:"SELECT"===r.command?"first"===e.method?r.rows[0]:"pluck"===e.method?i(r.rows,e.pluck):r.rows:"INSERT"===r.command||"UPDATE"===r.command||"DELETE"===r.command?r.rowCount:r}toPathForJson(e,t,r){return e.replace(/^(\$\.)/,"").split(".").map(function(e){return this.parameter(e,t,r)}.bind(this)).join(", ")}}Object.assign(d.prototype,{dialect:"redshift",driverName:"pg-redshift"}),t.exports=d},{"../postgres":226,"./query/redshift-querycompiler":235,"./schema/redshift-columnbuilder":236,"./schema/redshift-columncompiler":237,"./schema/redshift-compiler":238,"./schema/redshift-tablecompiler":239,"./schema/redshift-viewcompiler":240,"./transaction":241,"lodash/map":515,pg:1}],235:[function(e,t,r){const n=e("../../../query/querycompiler"),i=e("../../postgres/query/pg-querycompiler"),s=e("lodash/identity"),{columnize:o}=e("../../../formatter/wrappingFormatter");t.exports=class extends i{truncate(){return`truncate ${this.tableName.toLowerCase()}`}insert(){const e=n.prototype.insert.apply(this,arguments);return""===e?e:(this._slightReturn(),{sql:e})}update(){const e=n.prototype.update.apply(this,arguments);return this._slightReturn(),{sql:e}}del(){const e=n.prototype.del.apply(this,arguments);return this._slightReturn(),{sql:e}}_slightReturn(){this.single.isReturning&&this.client.logger.warn("insert/update/delete returning is not supported by redshift dialect")}forUpdate(){return this.client.logger.warn("table lock is not supported by redshift dialect"),""}forShare(){return this.client.logger.warn("lock for share is not supported by redshift dialect"),""}forNoKeyUpdate(){return this.client.logger.warn("table lock is not supported by redshift dialect"),""}forKeyShare(){return this.client.logger.warn("lock for share is not supported by redshift dialect"),""}columnInfo(){const e=this.single.columnInfo;let t=this.single.schema;const r=this.client.customWrapIdentifier(this.single.table,s);t&&(t=this.client.customWrapIdentifier(t,s));const n=[r.toLowerCase(),this.client.database().toLowerCase()];return this._buildColumnInfoQuery(t,"select * from information_schema.columns where table_name = ? and table_catalog = ?",n,e)}jsonExtract(e){let t;return t=Array.isArray(e.column)?e.column:[e],t.map((t=>{const r=`json_extract_path_text(${o(t.column||t[0],this.builder,this.client,this.bindingsHolder)}, ${this.client.toPathForJson(e.path||t[1],this.builder,this.bindingsHolder)})`,n=t.alias||t[2];return n?this.client.alias(r,this.formatter.wrap(n)):r})).join(", ")}jsonSet(e){throw new Error("Json set is not supported by Redshift")}jsonInsert(e){throw new Error("Json insert is not supported by Redshift")}jsonRemove(e){throw new Error("Json remove is not supported by Redshift")}whereJsonPath(e){return this._whereJsonPath("json_extract_path_text",Object.assign({},e,{path:this.client.toPathForJson(e.path)}))}whereJsonSupersetOf(e){throw new Error("Json superset is not supported by Redshift")}whereJsonSubsetOf(e){throw new Error("Json subset is not supported by Redshift")}onJsonPathEquals(e){return this._onJsonPathEquals("json_extract_path_text",e)}}},{"../../../formatter/wrappingFormatter":266,"../../../query/querycompiler":279,"../../postgres/query/pg-querycompiler":228,"lodash/identity":493}],236:[function(e,t,r){const n=e("../../../schema/columnbuilder");t.exports=class extends n{constructor(){super(...arguments)}primary(){return this.notNullable(),super.primary(...arguments)}index(){return this.client.logger.warn("Redshift does not support the creation of indexes."),this}}},{"../../../schema/columnbuilder":283}],237:[function(e,t,r){const n=e("../../postgres/schema/pg-columncompiler"),i=e("../../../schema/columncompiler");class s extends n{constructor(){super(...arguments)}bit(e){return!1!==e.length?`char(${e.length})`:"char(1)"}datetime(e){return e?"timestamp":"timestamptz"}timestamp(e){return e?"timestamp":"timestamptz"}comment(e){this.pushAdditional((function(){this.pushQuery(`comment on column ${this.tableCompiler.tableName()}.`+this.formatter.wrap(this.args[0])+" is "+(e?`'${e}'`:"NULL"))}),e)}}s.prototype.increments=({primaryKey:e=!0}={})=>"integer identity(1,1)"+(e?" primary key":"")+" not null",s.prototype.bigincrements=({primaryKey:e=!0}={})=>"bigint identity(1,1)"+(e?" primary key":"")+" not null",s.prototype.binary="varchar(max)",s.prototype.blob="varchar(max)",s.prototype.enu="varchar(255)",s.prototype.enum="varchar(255)",s.prototype.json="varchar(max)",s.prototype.jsonb="varchar(max)",s.prototype.longblob="varchar(max)",s.prototype.mediumblob="varchar(16777218)",s.prototype.set="text",s.prototype.text="varchar(max)",s.prototype.tinyblob="varchar(256)",s.prototype.uuid=i.prototype.uuid,s.prototype.varbinary="varchar(max)",s.prototype.bigint="bigint",s.prototype.bool="boolean",s.prototype.double="double precision",s.prototype.floating="real",s.prototype.smallint="smallint",s.prototype.tinyint="smallint",t.exports=s},{"../../../schema/columncompiler":284,"../../postgres/schema/pg-columncompiler":229}],238:[function(e,t,r){const n=e("../../postgres/schema/pg-compiler");t.exports=class extends n{constructor(){super(...arguments)}}},{"../../postgres/schema/pg-compiler":230}],239:[function(e,t,r){const n=e("lodash/has"),i=e("../../postgres/schema/pg-tablecompiler");t.exports=class extends i{constructor(){super(...arguments)}index(e,t,r){this.client.logger.warn("Redshift does not support the creation of indexes.")}dropIndex(e,t){this.client.logger.warn("Redshift does not support the deletion of indexes.")}createQuery(e,t,r){const i=t?"create table if not exists ":"create table ",s=" ("+e.sql.join(", ")+this._addChecks()+")";let o=i+this.tableName()+(r&&this.tableNameLike()?" (like "+this.tableNameLike()+")":s);this.single.inherits&&(o+=` like (${this.formatter.wrap(this.single.inherits)})`),this.pushQuery({sql:o,bindings:e.bindings});n(this.single,"comment")&&this.comment(this.single.comment),r&&this.addColumns(e,this.addColumnsPrefix)}primary(e,t){const r=this;t=t?r.formatter.wrap(t):r.formatter.wrap(`${this.tableNameRaw}_pkey`),e.constructor!==Array&&(e=[e]);const n=r.grouped.columns;if(n)for(let t=0;t<e.length;t++){let r=n.find((r=>"columns"===r.grouping&&r.builder&&"add"===r.builder._method&&r.builder._args&&r.builder._args.indexOf(e[t])>-1));r&&(r=r.builder);if(!(r&&r._modifiers&&r._modifiers.nullable&&!1===r._modifiers.nullable[0]))return r?this.client.logger.warn("Redshift does not allow primary keys to contain nullable columns."):this.client.logger.warn("Redshift does not allow primary keys to contain nonexistent columns.")}return r.pushQuery(`alter table ${r.tableName()} add constraint ${t} primary key (${r.formatter.columnize(e)})`)}addColumns(e,t,r){if(t===this.alterColumnsPrefix)super.addColumns(e,t,r);else{t=t||this.addColumnsPrefix,r=r||this.getColumns();for(const e of r){const r=this.tableName(),n=e.compileColumn();this.pushQuery({sql:`alter table ${r} ${t}${n}`,bindings:[]})}}}}},{"../../postgres/schema/pg-tablecompiler":231,"lodash/has":490}],240:[function(e,t,r){const n=e("../../postgres/schema/pg-viewcompiler.js");t.exports=class extends n{constructor(e,t){super(e,t)}}},{"../../postgres/schema/pg-viewcompiler.js":233}],241:[function(e,t,r){const n=e("../../execution/transaction");t.exports=class extends n{begin(e){return this.isolationLevel?this.query(e,`BEGIN ISOLATION LEVEL ${this.isolationLevel};`):this.query(e,"BEGIN;")}savepoint(e){return this.trxClient.logger("Redshift does not support savepoints."),Promise.resolve()}release(e,t){return this.trxClient.logger("Redshift does not support savepoints."),Promise.resolve()}rollbackTo(e,t){return this.trxClient.logger("Redshift does not support savepoints."),Promise.resolve()}}},{"../../execution/transaction":262}],242:[function(e,t,r){const n=e("../../../execution/transaction");t.exports=class extends n{begin(e){return this.isolationLevel&&this.client.logger.warn("sqlite3 only supports serializable transactions, ignoring the isolation level param"),this.query(e,"BEGIN;")}}},{"../../../execution/transaction":262}],243:[function(e,t,r){const n=e("lodash/defaults"),i=e("lodash/map"),{promisify:s}=e("util"),o=e("../../client"),a=e("../../raw"),u=e("./execution/sqlite-transaction"),c=e("./query/sqlite-querycompiler"),l=e("./schema/sqlite-compiler"),h=e("./schema/sqlite-columncompiler"),d=e("./schema/sqlite-tablecompiler"),f=e("./schema/sqlite-viewcompiler"),p=e("./schema/ddl"),m=e("../../formatter"),y=e("./query/sqlite-querybuilder");class g extends o{constructor(e){super(e),void 0===e.useNullAsDefault&&this.logger.warn("sqlite does not support inserting default values. Set the `useNullAsDefault` flag to hide this warning. (see docs http://knexjs.org/#Builder-insert).")}_driver(){return e("sqlite3")}schemaCompiler(){return new l(this,...arguments)}transaction(){return new u(this,...arguments)}queryCompiler(e,t){return new c(this,e,t)}queryBuilder(){return new y(this)}viewCompiler(e,t){return new f(this,e,t)}columnCompiler(){return new h(this,...arguments)}tableCompiler(){return new d(this,...arguments)}ddl(e,t,r){return new p(this,e,t,r)}wrapIdentifierImpl(e){return"*"!==e?`\`${e.replace(/`/g,"``")}\``:"*"}acquireRawConnection(){return new Promise(((e,t)=>{let r=this.driver.OPEN_READWRITE|this.driver.OPEN_CREATE;if(this.connectionSettings.flags){if(!Array.isArray(this.connectionSettings.flags))throw new Error("flags must be an array of strings");this.connectionSettings.flags.forEach((e=>{if(!e.startsWith("OPEN_")||!this.driver[e])throw new Error(`flag ${e} not supported by node-sqlite3`);r|=this.driver[e]}))}const n=new this.driver.Database(this.connectionSettings.filename,r,(r=>{if(r)return t(r);e(n)}))}))}async destroyRawConnection(e){return s((t=>e.close(t)))()}_query(e,t){if(!t.sql)throw new Error("The query is empty");const{method:r}=t;let n;switch(r){case"insert":case"update":case"counter":case"del":n="run";break;default:n="all"}return new Promise((function(r,i){if(!e||!e[n])return i(new Error(`Error calling ${n} on connection.`));e[n](t.sql,t.bindings,(function(e,n){return e?i(e):(t.response=n,t.context=this,r(t))}))}))}_stream(e,t,r){if(!t.sql)throw new Error("The query is empty");const n=this;return new Promise((function(i,s){return r.on("error",s),r.on("end",i),n._query(e,t).then((e=>e.response)).then((e=>e.forEach((e=>r.write(e))))).catch((function(e){r.emit("error",e)})).then((function(){r.end()}))}))}processResponse(e,t){const r=e.context,{response:n,returning:s}=e;if(e.output)return e.output.call(t,n);switch(e.method){case"select":default:return n;case"first":return n[0];case"pluck":return i(n,e.pluck);case"insert":if(s){if(n)return n;this.logger.warn("node-sqlite3 does not currently support RETURNING clause")}return[r.lastID];case"del":case"update":case"counter":return r.changes}}poolDefaults(){return n({min:1,max:1},super.poolDefaults())}formatter(e){return new m(this,e)}values(e,t,r){return Array.isArray(e)?Array.isArray(e[0])?`( values ${e.map((e=>`(${this.parameterize(e,void 0,t,r)})`)).join(", ")})`:`(${this.parameterize(e,void 0,t,r)})`:e instanceof a?`(${this.parameter(e,t,r)})`:this.parameter(e,t,r)}}Object.assign(g.prototype,{dialect:"sqlite3",driverName:"sqlite3"}),t.exports=g},{"../../client":180,"../../formatter":263,"../../raw":280,"./execution/sqlite-transaction":242,"./query/sqlite-querybuilder":244,"./query/sqlite-querycompiler":245,"./schema/ddl":246,"./schema/sqlite-columncompiler":253,"./schema/sqlite-compiler":254,"./schema/sqlite-tablecompiler":255,"./schema/sqlite-viewcompiler":256,"lodash/defaults":479,"lodash/map":515,sqlite3:1,util:void 0}],244:[function(e,t,r){const n=e("../../../query/querybuilder.js");t.exports=class extends n{withMaterialized(e,t,r){return this._validateWithArgs(e,t,r,"with"),this.withWrapped(e,t,r,!0)}withNotMaterialized(e,t,r){return this._validateWithArgs(e,t,r,"with"),this.withWrapped(e,t,r,!1)}}},{"../../../query/querybuilder.js":278}],245:[function(e,t,r){const n=e("lodash/constant"),i=e("lodash/each"),s=e("lodash/identity"),o=e("lodash/isEmpty"),a=e("lodash/reduce"),u=e("../../../query/querycompiler"),c=e("../../../util/noop"),{isString:l}=e("../../../util/is"),{wrapString:h,columnize:d}=e("../../../formatter/wrappingFormatter"),f=n("");t.exports=class extends u{constructor(e,t,r){super(e,t,r),this.forShare=f,this.forKeyShare=f,this.forUpdate=f,this.forNoKeyUpdate=f}insert(){const e=this.single.insert||[];let t=this.with()+`insert into ${this.tableName} `;if(Array.isArray(e)){if(0===e.length)return"";if(1===e.length&&e[0]&&o(e[0]))return{sql:t+this._emptyInsertValue}}else if("object"==typeof e&&o(e))return{sql:t+this._emptyInsertValue};const r=this._prepInsert(e);if(l(r))return{sql:t+r};if(0===r.columns.length)return{sql:""};if(t+=`(${this.formatter.columnize(r.columns)})`,null!==this.client.valueForUndefined&&r.values.forEach((e=>{i(e,(e=>{if(void 0===e)throw new TypeError("`sqlite` does not support inserting default values. Specify values explicitly or use the `useNullAsDefault` config flag. (see docs http://knexjs.org/#Builder-insert).")}))})),1===r.values.length){t+=` values (${this.client.parameterize(r.values[0],this.client.valueForUndefined,this.builder,this.bindingsHolder)})`;const{onConflict:n,ignore:i,merge:s}=this.single;if(n&&i)t+=this._ignore(n);else if(n&&s){t+=this._merge(s.updates,n,e);const r=this.where();r&&(t+=` ${r}`)}const{returning:o}=this.single;return o&&(t+=this._returning(o)),{sql:t,returning:o}}const n=[];let s=-1;for(;++s<r.values.length;){let e=-1;const t=n[s]=[];let i=r.values[s];for(i=void 0===i?this.client.valueForUndefined:i;++e<r.columns.length;)t.push(this.client.alias(this.client.parameter(i[e],this.builder,this.bindingsHolder),this.formatter.wrap(r.columns[e])));n[s]=t.join(", ")}t+=" select "+n.join(" union all select ");const{onConflict:a,ignore:u,merge:c}=this.single;a&&u?t+=" where true"+this._ignore(a):a&&c&&(t+=" where true"+this._merge(c.updates,a,e));const{returning:h}=this.single;return h&&(t+=this._returning(h)),{sql:t,returning:h}}_ignore(e){return!0===e?" on conflict do nothing":` on conflict ${this._onConflictClause(e)} do nothing`}_merge(e,t,r){let n=` on conflict ${this._onConflictClause(t)} do update set `;if(e&&Array.isArray(e))return n+=e.map((e=>h(e.split(".").pop(),this.formatter.builder,this.client,this.formatter))).map((e=>`${e} = excluded.${e}`)).join(", "),n;if(e&&"object"==typeof e){const t=this._prepUpdate(e);return n+="string"==typeof t?t:t.join(","),n}{const e=this._prepInsert(r);if("string"==typeof e)throw new Error("If using merge with a raw insert query, then updates must be provided");return n+=e.columns.map((e=>h(e.split(".").pop(),this.builder,this.client))).map((e=>`${e} = excluded.${e}`)).join(", "),n}}_returning(e){return e?` returning ${this.formatter.columnize(e)}`:""}truncate(){const{table:e}=this.single;return{sql:`delete from ${this.tableName}`,output(){return this.query({sql:`delete from sqlite_sequence where name = '${e}'`}).catch(c)}}}columnInfo(){const e=this.single.columnInfo;return{sql:`PRAGMA table_info(\`${this.client.customWrapIdentifier(this.single.table,s)}\`)`,output(t){const r=/.*\((\d+)\)/,n=a(t,(function(e,t){let{type:n}=t,i=n.match(r);return i&&(i=i[1]),n=i?n.split("(")[0]:n,e[t.name]={type:n.toLowerCase(),maxLength:i,nullable:!t.notnull,defaultValue:t.dflt_value},e}),{});return e&&n[e]||n}}}limit(){const e=!this.single.limit&&0!==this.single.limit;return e&&!this.single.offset?"":(this.single.limit=e?-1:this.single.limit,`limit ${this._getValueOrParameterFromAttribute("limit")}`)}jsonExtract(e){return this._jsonExtract("json_extract",e)}jsonSet(e){return this._jsonSet("json_set",e)}jsonInsert(e){return this._jsonSet("json_insert",e)}jsonRemove(e){const t=`json_remove(${d(e.column,this.builder,this.client,this.bindingsHolder)},${this.client.parameter(e.path,this.builder,this.bindingsHolder)})`;return e.alias?this.client.alias(t,this.formatter.wrap(e.alias)):t}whereJsonPath(e){return this._whereJsonPath("json_extract",e)}whereJsonSupersetOf(e){throw new Error("Json superset where clause not actually supported by SQLite")}whereJsonSubsetOf(e){throw new Error("Json subset where clause not actually supported by SQLite")}onJsonPathEquals(e){return this._onJsonPathEquals("json_extract",e)}}},{"../../../formatter/wrappingFormatter":266,"../../../query/querycompiler":279,"../../../util/is":293,"../../../util/noop":295,"lodash/constant":478,"lodash/each":481,"lodash/identity":493,"lodash/isEmpty":500,"lodash/reduce":523}],246:[function(e,t,r){const n=e("lodash/identity"),{nanonum:i}=e("../../../util/nanoid"),{copyData:s,dropOriginal:o,renameTable:a,getTableSql:u,isForeignCheckEnabled:c,setForeignCheck:l,executeForeignCheck:h}=e("./internal/sqlite-ddl-operations"),{parseCreateTable:d,parseCreateIndex:f}=e("./internal/parser"),{compileCreateTable:p,compileCreateIndex:m}=e("./internal/compiler"),{isEqualId:y,includesId:g}=e("./internal/utils");t.exports=class{constructor(e,t,r,s){this.client=e,this.tableCompiler=t,this.pragma=r,this.tableNameRaw=this.tableCompiler.tableNameRaw,this.alteredName=`_knex_temp_alter${i(3)}`,this.connection=s,this.formatter=e=>this.client.customWrapIdentifier(e,n),this.wrap=e=>this.client.wrapIdentifierImpl(e)}tableName(){return this.formatter(this.tableNameRaw)}getTableSql(){const e=this.tableName();return this.client.transaction((async t=>{t.disableProcessing();const r=await t.raw(u(e));return t.enableProcessing(),{createTable:r.filter((e=>"table"===e.type))[0].sql,createIndices:r.filter((e=>"index"===e.type)).map((e=>e.sql))}}),{connection:this.connection})}async isForeignCheckEnabled(){return 1===(await this.client.raw(c()).connection(this.connection))[0].foreign_keys}async setForeignCheck(e){await this.client.raw(l(e)).connection(this.connection)}renameTable(e){return e.raw(a(this.alteredName,this.tableName()))}dropOriginal(e){return e.raw(o(this.tableName()))}copyData(e,t){return e.raw(s(this.tableName(),this.alteredName,t))}async alterColumn(e){const{createTable:t,createIndices:r}=await this.getTableSql(),n=d(t);n.table=this.alteredName,n.columns=n.columns.map((t=>{const r=e.find((e=>y(e.name,t.name)));return r&&(t.type=r.type,t.constraints.default=null!==r.defaultTo?{name:null,value:r.defaultTo,expression:!1}:null,t.constraints.notnull=r.notNull?{name:null,conflict:null}:null,t.constraints.null=r.notNull?null:t.constraints.null),t}));const i=p(n,this.wrap);return this.generateAlterCommands(i,r)}async dropColumn(e){const{createTable:t,createIndices:r}=await this.getTableSql(),n=d(t);if(n.table=this.alteredName,n.columns=n.columns.filter((t=>t.expression||!g(e,t.name))),0===n.columns.length)throw new Error("Unable to drop last column from table");n.constraints=n.constraints.filter((t=>"PRIMARY KEY"===t.type||"UNIQUE"===t.type?t.columns.every((t=>t.expression||!g(e,t.name))):"FOREIGN KEY"!==t.type||t.columns.every((t=>!g(e,t)))&&(t.references.table!==n.table||t.references.columns.every((t=>!g(e,t))))));const i=n.columns.map((e=>e.name)),s=p(n,this.wrap),o=[];for(const t of r){const r=f(t);r.columns=r.columns.filter((t=>t.expression||!g(e,t.name))),r.columns.length>0&&o.push(m(r,this.wrap))}return this.alter(s,o,i)}async dropForeign(e,t){const{createTable:r,createIndices:n}=await this.getTableSql(),i=d(r);i.table=this.alteredName,t||(i.columns=i.columns.map((t=>({...t,references:g(e,t.name)?null:t.references})))),i.constraints=i.constraints.filter((r=>"FOREIGN KEY"!==r.type||(t?!r.name||!y(r.name,t):r.columns.every((t=>!g(e,t))))));const s=p(i,this.wrap);return this.alter(s,n)}async dropPrimary(e){const{createTable:t,createIndices:r}=await this.getTableSql(),n=d(t);n.table=this.alteredName,n.columns=n.columns.map((e=>({...e,primary:null}))),n.constraints=n.constraints.filter((t=>"PRIMARY KEY"!==t.type||!!e&&(!t.name||!y(t.name,e))));const i=p(n,this.wrap);return this.alter(i,r)}async primary(e,t){const{createTable:r,createIndices:n}=await this.getTableSql(),i=d(r);i.table=this.alteredName,i.columns=i.columns.map((e=>({...e,primary:null}))),i.constraints=i.constraints.filter((e=>"PRIMARY KEY"!==e.type)),i.constraints.push({type:"PRIMARY KEY",name:t||null,columns:e.map((e=>({name:e,expression:!1,collation:null,order:null}))),conflict:null});const s=p(i,this.wrap);return this.alter(s,n)}async foreign(e){const{createTable:t,createIndices:r}=await this.getTableSql(),n=d(t);n.table=this.alteredName,n.constraints.push({type:"FOREIGN KEY",name:e.keyName||null,columns:e.column,references:{table:e.inTable,columns:e.references,delete:e.onDelete||null,update:e.onUpdate||null,match:null,deferrable:null}});const i=p(n,this.wrap);return this.generateAlterCommands(i,r)}async setNullable(e,t){const{createTable:r,createIndices:n}=await this.getTableSql(),i=d(r);i.table=this.alteredName;const s=i.columns.find((t=>y(e,t.name)));if(!s)throw new Error(`.setNullable: Column ${e} does not exist in table ${this.tableName()}.`);s.constraints.notnull=t?null:{name:null,conflict:null},s.constraints.null=t?s.constraints.null:null;const o=p(i,this.wrap);return this.generateAlterCommands(o,n)}async alter(e,t,r){const n=await this.isForeignCheckEnabled();n&&await this.setForeignCheck(!1);try{await this.client.transaction((async i=>{await i.raw(e),await this.copyData(i,r),await this.dropOriginal(i),await this.renameTable(i);for(const e of t)await i.raw(e);if(n){if((await i.raw(h())).length>0)throw new Error("FOREIGN KEY constraint failed")}}),{connection:this.connection})}finally{n&&await this.setForeignCheck(!0)}}async generateAlterCommands(e,t,r){const n=[],i=[],u=[];let c=null;n.push(e),n.push(s(this.tableName(),this.alteredName,r)),n.push(o(this.tableName())),n.push(a(this.alteredName,this.tableName()));for(const e of t)n.push(e);return await this.isForeignCheckEnabled()&&(i.push(l(!1)),u.push(l(!0)),c=h()),{pre:i,sql:n,check:c,post:u}}}},{"../../../util/nanoid":294,"./internal/compiler":247,"./internal/parser":249,"./internal/sqlite-ddl-operations":250,"./internal/utils":252,"lodash/identity":493}],247:[function(e,t,r){function n(e,t){return null!==e.conflict?` ON CONFLICT ${e.conflict}`:""}function i(e,t){return`REFERENCES ${c(e,t)}${function(e,t){return e.columns.length>0?` (${s(e,t)})`:""}(e,t)}${function(e,t){return`${function(e,t){return null!==e.delete?` ON DELETE ${e.delete}`:""}(e)}${function(e,t){return null!==e.update?` ON UPDATE ${e.update}`:""}(e)}${function(e,t){return null!==e.match?` MATCH ${e.match}`:""}(e)}`}(e)}${function(e,t){return null!==e?` ${e.not?"NOT ":""}DEFERRABLE${null!==e.initially?` INITIALLY ${e.initially}`:""}`:""}(e.deferrable)}`}function s(e,t){return e.columns.map((e=>p(e,t))).join(", ")}function o(e,t){return null!==e.name?`CONSTRAINT ${p(e.name,t)} `:""}function a(e,t){return e.exists?" IF NOT EXISTS":""}function u(e,t){return null!==e.schema?`${p(e.schema,t)}.`:""}function c(e,t){return p(e.table,t)}function l(e,t){return e.columns.map((e=>e.expression?function(e,t){return`${function(e,t){return f(e,t)}(e.name,t)}${h(e,t)}${d(e,t)}`}(e,t):function(e,t){return`${p(e.name,t)}${h(e,t)}${d(e,t)}`}(e,t))).join(", ")}function h(e,t){return null!==e.collation?` COLLATE ${e.collation}`:""}function d(e,t){return null!==e.order?` ${e.order}`:""}function f(e,t){return e.reduce(((e,t)=>Array.isArray(t)?`${e}(${f(t)})`:e?`${e} ${t}`:t),"")}function p(e,t){return t(e)}t.exports={compileCreateTable:function(e,t=(e=>e)){return function(e,t){return`CREATE${function(e,t){return e.temporary?" TEMP":""}(e)} TABLE${a(e,t)} ${u(e,t)}${c(e,t)} (${function(e,t){return e.columns.map((e=>function(e,t){return`${p(e.name,t)}${function(e,t){return null!==e.type?` ${e.type}`:""}(e)}${function(e,t){return`${function(e,t){return null!==e.primary?` ${o(e.primary,t)}PRIMARY KEY${d(e.primary,t)}${n(e.primary,t)}${function(e,t){return e.autoincrement?" AUTOINCREMENT":""}(e.primary)}`:""}(e,t)}${function(e,t){return null!==e.notnull?` ${o(e.notnull,t)}NOT NULL${n(e.notnull,t)}`:""}(e,t)}${function(e,t){return null!==e.null?` ${o(e.null,t)}NULL${n(e.null,t)}`:""}(e,t)}${function(e,t){return null!==e.unique?` ${o(e.unique,t)}UNIQUE${n(e.unique,t)}`:""}(e,t)}${function(e,t){return null!==e.check?` ${o(e.check,t)}CHECK (${f(e.check.expression,t)})`:""}(e,t)}${function(e,t){return null!==e.default?` ${o(e.default,t)}DEFAULT ${e.default.expression?`(${f(e.default.value,t)})`:e.default.value}`:""}(e,t)}${function(e,t){return null!==e.collate?` ${o(e.collate,t)}COLLATE ${e.collate.collation}`:""}(e,t)}${function(e,t){return null!==e.references?` ${o(e.references,t)}${i(e.references,t)}`:""}(e,t)}${function(e,t){return null!==e.as?` ${o(e.as,t)}${e.as.generated?"GENERATED ALWAYS ":""}AS (${f(e.as.expression,t)})${null!==e.as.mode?` ${e.as.mode}`:""}`:""}(e,t)}`}(e.constraints,t)}`}(e,t))).join(", ")}(e,t)}${function(e,t){return e.constraints.reduce(((e,r)=>`${e}, ${function(e,t){switch(e.type){case"PRIMARY KEY":return function(e,t){return`${o(e,t)}PRIMARY KEY (${l(e,t)})${n(e,t)}`}(e,t);case"UNIQUE":return function(e,t){return`${o(e,t)}UNIQUE (${l(e,t)})${n(e,t)}`}(e,t);case"CHECK":return function(e,t){return`${o(e,t)}CHECK (${f(e.expression,t)})`}(e,t);case"FOREIGN KEY":return function(e,t){return`${o(e,t)}FOREIGN KEY (${s(e,t)}) ${i(e.references,t)}`}(e,t)}}(r,t)}`),"")}(e,t)})${function(e,t){return e.rowid?" WITHOUT ROWID":""}(e)}`}(e,t)},compileCreateIndex:function(e,t=(e=>e)){return function(e,t){return`CREATE${function(e,t){return e.unique?" UNIQUE":""}(e)} INDEX${a(e,t)} ${u(e,t)}${function(e,t){return p(e.index,t)}(e,t)} on ${c(e,t)} (${l(e,t)})${function(e,t){return null!==e.where?` where ${f(e.where)}`:""}(e)}`}(e,t)}}},{}],248:[function(e,t,r){t.exports={s:function(e,t=(e=>e)){return function({index:r=0,input:n}){let i=r;const s=[];for(const t of e){const e=t({index:i,input:n});if(!e.success)return e;i=e.index,s.push(e.ast)}return{success:!0,ast:t(s),index:i,input:n}}},a:function(e,t=(e=>e)){return function({index:r=0,input:n}){for(const i of e){const e=i({index:r,input:n});if(e.success)return{success:!0,ast:t(e.ast),index:e.index,input:n}}return{success:!1,ast:null,index:r,input:n}}},m:function(e,t=(e=>e)){return function({index:r=0,input:n}){let i={},s=r;const o=[];do{i=e({index:s,input:n}),i.success&&(s=i.index,o.push(i.ast))}while(i.success);return o.length>0?{success:!0,ast:t(o),index:s,input:n}:{success:!1,ast:null,index:s,input:n}}},o:function(e,t=(e=>e)){return function({index:r=0,input:n}){const i=e({index:r,input:n});return i.success?{success:!0,ast:t(i.ast),index:i.index,input:n}:{success:!0,ast:t(null),index:r,input:n}}},l:function(e,t=(e=>e)){return function({index:r=0,input:n}){const i=e.do({index:r,input:n});if(i.success){if(e.next({index:i.index,input:n}).success)return{success:!0,ast:t(i.ast),index:i.index,input:n}}return{success:!1,ast:null,index:r,input:n}}},n:function(e,t=(e=>e)){return function({index:r=0,input:n}){const i=e.do({index:r,input:n});if(i.success){if(!e.not({index:r,input:n}).success)return{success:!0,ast:t(i.ast),index:i.index,input:n}}return{success:!1,ast:null,index:r,input:n}}},t:function(e,t=(e=>e.text)){return function({index:r=0,input:n}){const i=n[r];return void 0===i||void 0!==e.type&&e.type!==i.type||void 0!==e.text&&e.text.toUpperCase()!==i.text.toUpperCase()?{success:!1,ast:null,index:r,input:n}:{success:!0,ast:t(i),index:r+1,input:n}}},e:function({index:e=0,input:t}){return{success:!0,ast:null,index:e,input:t}},f:function({index:e=0,input:t}){return{success:e===t.length,ast:null,index:e,input:t}}}},{}],249:[function(e,t,r){const{tokenize:n}=e("./tokenizer"),{s:i,a:s,m:o,o:a,l:u,n:c,t:l,e:h,f:d}=e("./parser-combinator"),f={keyword:/(?:ABORT|ACTION|ADD|AFTER|ALL|ALTER|ALWAYS|ANALYZE|AND|AS|ASC|ATTACH|AUTOINCREMENT|BEFORE|BEGIN|BETWEEN|BY|CASCADE|CASE|CAST|CHECK|COLLATE|COLUMN|COMMIT|CONFLICT|CONSTRAINT|CREATE|CROSS|CURRENT|CURRENT_DATE|CURRENT_TIME|CURRENT_TIMESTAMP|DATABASE|DEFAULT|DEFERRED|DEFERRABLE|DELETE|DESC|DETACH|DISTINCT|DO|DROP|END|EACH|ELSE|ESCAPE|EXCEPT|EXCLUSIVE|EXCLUDE|EXISTS|EXPLAIN|FAIL|FILTER|FIRST|FOLLOWING|FOR|FOREIGN|FROM|FULL|GENERATED|GLOB|GROUP|GROUPS|HAVING|IF|IGNORE|IMMEDIATE|IN|INDEX|INDEXED|INITIALLY|INNER|INSERT|INSTEAD|INTERSECT|INTO|IS|ISNULL|JOIN|KEY|LAST|LEFT|LIKE|LIMIT|MATCH|MATERIALIZED|NATURAL|NO|NOT|NOTHING|NOTNULL|NULL|NULLS|OF|OFFSET|ON|OR|ORDER|OTHERS|OUTER|OVER|PARTITION|PLAN|PRAGMA|PRECEDING|PRIMARY|QUERY|RAISE|RANGE|RECURSIVE|REFERENCES|REGEXP|REINDEX|RELEASE|RENAME|REPLACE|RESTRICT|RETURNING|RIGHT|ROLLBACK|ROW|ROWS|SAVEPOINT|SELECT|SET|TABLE|TEMP|TEMPORARY|THEN|TIES|TO|TRANSACTION|TRIGGER|UNBOUNDED|UNION|UNIQUE|UPDATE|USING|VACUUM|VALUES|VIEW|VIRTUAL|WHEN|WHERE|WINDOW|WITH|WITHOUT)(?=\s+|-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\.)/,id:/"[^"]*(?:""[^"]*)*"|`[^`]*(?:``[^`]*)*`|\[[^[\]]*\]|[a-z_][a-z0-9_$]*/,string:/'[^']*(?:''[^']*)*'/,blob:/x'(?:[0-9a-f][0-9a-f])+'/,numeric:/(?:\d+(?:\.\d*)?|\.\d+)(?:e(?:\+|-)?\d+)?|0x[0-9a-f]+/,variable:/\?\d*|[@$:][a-z0-9_$]+/,operator:/-|\(|\)|;|\+|\*|\/|%|==|=|<=|<>|<<|<|>=|>>|>|!=|,|&|~|\|\||\||\./,_ws:/\s+/};function p(e){return s([l({text:"TEMP"}),l({text:"TEMPORARY"}),h],(e=>({temporary:null!==e})))(e)}function m(e){return a(i([l({text:"WITHOUT"}),l({text:"ROWID"})]),(e=>({rowid:null!==e})))(e)}function y(e){return s([i([g,l({text:","}),y],(e=>({columns:[e[0]].concat(e[2].columns)}))),i([g],(e=>({columns:[e[0]]})))])(e)}function g(e){return i([i([se],(e=>({name:e[0]}))),v,b],(e=>Object.assign({},...e)))(e)}function v(e){return a(i([o(l({type:"id"})),s([i([l({text:"("}),ue,l({text:","}),ue,l({text:")"})],(e=>`(${e[1]}, ${e[3]})`)),i([l({text:"("}),ue,l({text:")"})],(e=>`(${e[1]})`)),h])],(e=>`${e[0].join(" ")}${e[1]||""}`)),(e=>({type:e})))(e)}function b(e){return a(o(_),(e=>({constraints:Object.assign({primary:null,notnull:null,null:null,unique:null,check:null,default:null,collate:null,references:null,as:null},...e||[])})))(e)}function _(e){return s([w,x,C,k,O,S,T,$,j])(e)}function w(e){return i([H,l({text:"PRIMARY"},(e=>null)),l({text:"KEY"},(e=>null)),re,R,E],(e=>({primary:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function E(e){return a(l({text:"AUTOINCREMENT"}),(e=>({autoincrement:null!==e})))(e)}function x(e){return i([H,l({text:"NOT"},(e=>null)),l({text:"NULL"},(e=>null)),R],(e=>({notnull:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function C(e){return i([H,l({text:"NULL"},(e=>null)),R],(e=>({null:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function k(e){return i([H,l({text:"UNIQUE"},(e=>null)),R],(e=>({unique:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function O(e){return i([H,l({text:"CHECK"},(e=>null)),l({text:"("},(e=>null)),i([ie],(e=>({expression:e[0]}))),l({text:")"},(e=>null))],(e=>({check:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function S(e){return i([H,l({text:"DEFAULT"},(e=>null)),s([i([l({text:"("}),ie,l({text:")"})],(e=>({value:e[1],expression:!0}))),i([ae],(e=>({value:e[0],expression:!1}))),i([ue],(e=>({value:e[0],expression:!1})))])],(e=>({default:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function T(e){return i([H,l({text:"COLLATE"},(e=>null)),l({type:"id"},(e=>({collation:e.text})))],(e=>({collate:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function $(e){return i([H,i([L],(e=>e[0].references))],(e=>({references:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function j(e){return i([H,a(i([l({text:"GENERATED"}),l({text:"ALWAYS"})]),(e=>({generated:null!==e}))),l({text:"AS"},(e=>null)),l({text:"("},(e=>null)),i([ie],(e=>({expression:e[0]}))),l({text:")"},(e=>null)),s([l({text:"STORED"}),l({text:"VIRTUAL"}),h],(e=>({mode:e?e.toUpperCase():null})))],(e=>({as:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function N(e){return a(o(i([l({text:","}),A],(e=>e[1]))),(e=>({constraints:e||[]})))(e)}function A(e){return s([I,P,q,M])(e)}function I(e){return i([H,l({text:"PRIMARY"},(e=>null)),l({text:"KEY"},(e=>null)),l({text:"("},(e=>null)),Y,l({text:")"},(e=>null)),R],(e=>Object.assign({type:"PRIMARY KEY"},...e.filter((e=>null!==e)))))(e)}function P(e){return i([H,l({text:"UNIQUE"},(e=>null)),l({text:"("},(e=>null)),Y,l({text:")"},(e=>null)),R],(e=>Object.assign({type:"UNIQUE"},...e.filter((e=>null!==e)))))(e)}function R(e){return a(i([l({text:"ON"}),l({text:"CONFLICT"}),s([l({text:"ROLLBACK"}),l({text:"ABORT"}),l({text:"FAIL"}),l({text:"IGNORE"}),l({text:"REPLACE"})])],(e=>e[2])),(e=>({conflict:e?e.toUpperCase():null})))(e)}function q(e){return i([H,l({text:"CHECK"},(e=>null)),l({text:"("},(e=>null)),i([ie],(e=>({expression:e[0]}))),l({text:")"},(e=>null))],(e=>Object.assign({type:"CHECK"},...e.filter((e=>null!==e)))))(e)}function M(e){return i([H,l({text:"FOREIGN"},(e=>null)),l({text:"KEY"},(e=>null)),l({text:"("},(e=>null)),F,l({text:")"},(e=>null)),L],(e=>Object.assign({type:"FOREIGN KEY"},...e.filter((e=>null!==e)))))(e)}function L(e){return i([l({text:"REFERENCES"},(e=>null)),K,D,a(o(s([U,B,V])),(e=>Object.assign({delete:null,update:null,match:null},...e||[]))),z],(e=>({references:Object.assign({},...e.filter((e=>null!==e)))})))(e)}function D(e){return a(i([l({text:"("}),F,l({text:")"})],(e=>e[1])),(e=>({columns:e?e.columns:[]})))(e)}function F(e){return i([a(o(i([se,l({text:","})],(e=>e[0]))),(e=>null!==e?e:[])),se],(e=>({columns:e[0].concat([e[1]])})))(e)}function U(e){return i([l({text:"ON"}),l({text:"DELETE"}),oe],(e=>({delete:e[2]})))(e)}function B(e){return i([l({text:"ON"}),l({text:"UPDATE"}),oe],(e=>({update:e[2]})))(e)}function V(e){return i([l({text:"MATCH"}),s([l({type:"keyword"}),l({type:"id"})])],(e=>({match:e[1]})))(e)}function z(e){return a(i([a(l({text:"NOT"})),l({text:"DEFERRABLE"}),a(i([l({text:"INITIALLY"}),s([l({text:"DEFERRED"}),l({text:"IMMEDIATE"})])],(e=>e[1].toUpperCase())))]),(e=>({deferrable:e?{not:null!==e[0],initially:e[2]}:null})))(e)}function H(e){return a(i([l({text:"CONSTRAINT"}),se],(e=>e[1])),(e=>({name:e})))(e)}function W(e){return a(l({text:"UNIQUE"}),(e=>({unique:null!==e})))(e)}function Q(e){return a(i([l({text:"IF"}),l({text:"NOT"}),l({text:"EXISTS"})]),(e=>({exists:null!==e})))(e)}function G(e){return a(i([se,l({text:"."})],(e=>e[0])),(e=>({schema:e})))(e)}function J(e){return i([se],(e=>({index:e[0]})))(e)}function K(e){return i([se],(e=>({table:e[0]})))(e)}function Z(e){return a(i([l({text:"WHERE"}),ie],(e=>e[1])),(e=>({where:e})))(e)}function Y(e){return s([i([X,l({text:","}),Y],(e=>({columns:[e[0]].concat(e[2].columns)}))),i([ee,l({text:","}),Y],(e=>({columns:[e[0]].concat(e[2].columns)}))),u({do:X,next:l({text:")"})},(e=>({columns:[e]}))),u({do:ee,next:l({text:")"})},(e=>({columns:[e]})))])(e)}function X(e){return i([i([se],(e=>({name:e[0],expression:!1}))),te,re],(e=>Object.assign({},...e.filter((e=>null!==e)))))(e)}function ee(e){return i([i([ne],(e=>({name:e[0],expression:!0}))),te,re],(e=>Object.assign({},...e.filter((e=>null!==e)))))(e)}function te(e){return a(i([l({text:"COLLATE"}),l({type:"id"})],(e=>e[1])),(e=>({collation:e})))(e)}function re(e){return s([l({text:"ASC"}),l({text:"DESC"}),h],(e=>({order:e?e.toUpperCase():null})))(e)}function ne(e){return o(s([c({do:l({type:"keyword"}),not:s([l({text:"COLLATE"}),l({text:"ASC"}),l({text:"DESC"})])}),l({type:"id"}),l({type:"string"}),l({type:"blob"}),l({type:"numeric"}),l({type:"variable"}),c({do:l({type:"operator"}),not:s([l({text:"("}),l({text:")"}),l({text:","})])}),i([l({text:"("}),a(ie),l({text:")"})],(e=>e[1]||[]))]))(e)}function ie(e){return o(s([l({type:"keyword"}),l({type:"id"}),l({type:"string"}),l({type:"blob"}),l({type:"numeric"}),l({type:"variable"}),c({do:l({type:"operator"}),not:s([l({text:"("}),l({text:")"})])}),i([l({text:"("}),a(ie),l({text:")"})],(e=>e[1]||[]))]))(e)}function se(e){return s([l({type:"id"}),l({type:"string"})],(e=>/^["`['][^]*["`\]']$/.test(e)?e.substring(1,e.length-1):e))(e)}function oe(e){return s([i([l({text:"SET"}),l({text:"NULL"})],(e=>`${e[0]} ${e[1]}`)),i([l({text:"SET"}),l({text:"DEFAULT"})],(e=>`${e[0]} ${e[1]}`)),l({text:"CASCADE"}),l({text:"RESTRICT"}),i([l({text:"NO"}),l({text:"ACTION"})],(e=>`${e[0]} ${e[1]}`))],(e=>e.toUpperCase()))(e)}function ae(e){return s([l({type:"numeric"}),l({type:"string"}),l({type:"id"}),l({type:"blob"}),l({text:"NULL"}),l({text:"TRUE"}),l({text:"FALSE"}),l({text:"CURRENT_TIME"}),l({text:"CURRENT_DATE"}),l({text:"CURRENT_TIMESTAMP"})])(e)}function ue(e){return i([s([l({text:"+"}),l({text:"-"}),h]),l({type:"numeric"})],(e=>`${e[0]||""}${e[1]}`))(e)}t.exports={parseCreateTable:function(e){const t=(r={input:n(e,f)},i([l({text:"CREATE"},(e=>null)),p,l({text:"TABLE"},(e=>null)),Q,G,K,l({text:"("},(e=>null)),y,N,l({text:")"},(e=>null)),m,d],(e=>Object.assign({},...e.filter((e=>null!==e)))))(r));var r;if(!t.success)throw new Error(`Parsing CREATE TABLE failed at [${t.input.slice(t.index).map((e=>e.text)).join(" ")}] of "${e}"`);return t.ast},parseCreateIndex:function(e){const t=(r={input:n(e,f)},i([l({text:"CREATE"},(e=>null)),W,l({text:"INDEX"},(e=>null)),Q,G,J,l({text:"ON"},(e=>null)),K,l({text:"("},(e=>null)),Y,l({text:")"},(e=>null)),Z,d],(e=>Object.assign({},...e.filter((e=>null!==e)))))(r));var r;if(!t.success)throw new Error(`Parsing CREATE INDEX failed at [${t.input.slice(t.index).map((e=>e.text)).join(" ")}] of "${e}"`);return t.ast}}},{"./parser-combinator":248,"./tokenizer":251}],250:[function(e,t,r){t.exports={copyData:function(e,t,r){return`INSERT INTO "${t}" SELECT ${void 0===r?"*":r.map((e=>`"${e}"`)).join(", ")} FROM "${e}";`},dropOriginal:function(e){return`DROP TABLE "${e}"`},renameTable:function(e,t){return`ALTER TABLE "${e}" RENAME TO "${t}"`},getTableSql:function(e){return`SELECT type, sql FROM sqlite_master WHERE (type='table' OR (type='index' AND sql IS NOT NULL)) AND tbl_name='${e}'`},isForeignCheckEnabled:function(){return"PRAGMA foreign_keys"},setForeignCheck:function(e){return"PRAGMA foreign_keys = "+(e?"ON":"OFF")},executeForeignCheck:function(){return"PRAGMA foreign_key_check"}}},{}],251:[function(e,t,r){t.exports={tokenize:function(e,t){const r=new RegExp(Object.entries(t).map((([e,t])=>`(?<${e}>${t.source})`)).join("|"),"yi");let n=0;const i=[];for(;n<e.length;){r.lastIndex=n;const t=e.match(r);if(null===t)throw new Error(`No matching tokenizer rule found at: [${e.substring(n)}]`);{const[e,r]=Object.entries(t.groups).find((([e,t])=>void 0!==t));n+=r.length,e.startsWith("_")||i.push({type:e,text:r})}}return i}}},{}],252:[function(e,t,r){function n(e,t){return e.toLowerCase()===t.toLowerCase()}t.exports={isEqualId:n,includesId:function(e,t){return e.some((e=>n(e,t)))}}},{}],253:[function(e,t,r){const n=e("../../../schema/columncompiler");class i extends n{constructor(){super(...arguments),this.modifiers=["nullable","defaultTo"],this._addCheckModifiers()}enu(e){return`text check (${this.formatter.wrap(this.args[0])} in ('${e.join("', '")}'))`}_pushAlterCheckQuery(e,t){throw new Error("Alter table with to add constraints is not permitted in SQLite")}checkRegex(e,t){return this._check(`${this.formatter.wrap(this.getColumnName())} REGEXP ${this.client._escapeBinding(e)}`,t)}}i.prototype.json="json",i.prototype.jsonb="json",i.prototype.double=i.prototype.decimal=i.prototype.floating="float",i.prototype.timestamp="datetime",i.prototype.increments=i.prototype.bigincrements="integer not null primary key autoincrement",t.exports=i},{"../../../schema/columncompiler":284}],254:[function(e,t,r){const n=e("../../../schema/compiler"),i=e("lodash/some");t.exports=class extends n{constructor(e,t){super(e,t)}hasTable(e){const t=`select * from sqlite_master where type = 'table' and name = ${this.client.parameter(this.formatter.wrap(e).replace(/`/g,""),this.builder,this.bindingsHolder)}`;this.pushQuery({sql:t,output:e=>e.length>0})}hasColumn(e,t){this.pushQuery({sql:`PRAGMA table_info(${this.formatter.wrap(e)})`,output(e){return i(e,(e=>this.client.wrapIdentifier(e.name.toLowerCase())===this.client.wrapIdentifier(t.toLowerCase())))}})}renameTable(e,t){this.pushQuery(`alter table ${this.formatter.wrap(e)} rename to ${this.formatter.wrap(t)}`)}async generateDdlCommands(){const e=this.builder._sequence;for(let t=0,r=e.length;t<r;t++){const r=e[t];this[r.method].apply(this,r.args)}const t=this.sequence;if(1===t.length&&t[0].statementsProducer)return t[0].statementsProducer();{const e=[];for(const r of t){const t=r.sql;Array.isArray(t)?e.push(...t):e.push(t)}return{pre:[],sql:e,check:null,post:[]}}}}},{"../../../schema/compiler":285,"lodash/some":525}],255:[function(e,t,r){const n=e("lodash/filter"),i=e("lodash/values"),s=e("lodash/identity"),{isObject:o}=e("../../../util/is"),a=e("../../../schema/tablecompiler"),{formatDefault:u}=e("../../../formatter/formatterUtils");t.exports=class extends a{constructor(){super(...arguments)}createQuery(e,t,r){let n=(t?"create table if not exists ":"create table ")+this.tableName();r&&this.tableNameLike()?n+=" as select * from "+this.tableNameLike()+" where 0=1":(n+=" ("+e.sql.join(", "),n+=this.foreignKeys()||"",n+=this.primaryKeys()||"",n+=this._addChecks(),n+=")"),this.pushQuery(n),r&&this.addColumns(e,this.addColumnsPrefix)}addColumns(e,t,r){if(t===this.alterColumnsPrefix){const e=this,t=r.map((e=>{const t=this.client.customWrapIdentifier(e.getColumnName(),s,e.columnBuilder.queryContext()),r=e.getColumnType();return{name:t,type:r,defaultTo:e.modified.defaultTo?u(e.modified.defaultTo[0],r,this.client):null,notNull:e.modified.nullable&&!1===e.modified.nullable[0]}}));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer:(r,n)=>e.client.ddl(e,r,n).alterColumn(t)})}else for(let t=0,r=e.sql.length;t<r;t++)this.pushQuery({sql:`alter table ${this.tableName()} add column ${e.sql[t]}`,bindings:e.bindings[t]})}dropUnique(e,t){t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),this.pushQuery(`drop index ${t}`)}dropForeign(e,t){const r=this;e=(e=Array.isArray(e)?e:[e]).map((e=>this.client.customWrapIdentifier(e,s))),t=this.client.customWrapIdentifier(t,s),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(n){return r.client.ddl(r,n,this.connection).dropForeign(e,t)}})}dropPrimary(e){const t=this;e=this.client.customWrapIdentifier(e,s),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(r){return t.client.ddl(t,r,this.connection).dropPrimary(e)}})}dropIndex(e,t){t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),this.pushQuery(`drop index ${t}`)}unique(e,t){let r;o(t)&&({indexName:t,deferrable:r}=t),r&&"not deferrable"!==r&&this.client.logger.warn(`sqlite3: unique index \`${t}\` will not be deferrable ${r} because sqlite3 does not support deferred constraints.`),t=t?this.formatter.wrap(t):this._indexCommand("unique",this.tableNameRaw,e),e=this.formatter.columnize(e),this.pushQuery(`create unique index ${t} on ${this.tableName()} (${e})`)}index(e,t,r){let n;t=t?this.formatter.wrap(t):this._indexCommand("index",this.tableNameRaw,e),e=this.formatter.columnize(e),o(r)&&({predicate:n}=r);const i=n?" "+this.client.queryCompiler(n).where():"";this.pushQuery(`create index ${t} on ${this.tableName()} (${e})${i}`)}primary(e,t){const r=this;let n;e=(e=Array.isArray(e)?e:[e]).map((e=>this.client.customWrapIdentifier(e,s))),o(t)&&({constraintName:t,deferrable:n}=t),n&&"not deferrable"!==n&&this.client.logger.warn(`sqlite3: primary key constraint \`${t}\` will not be deferrable ${n} because sqlite3 does not support deferred constraints.`),t=this.client.customWrapIdentifier(t,s),"create"!==this.method&&"createIfNot"!==this.method&&this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(n){return r.client.ddl(r,n,this.connection).primary(e,t)}})}foreign(e){const t=this;"create"!==this.method&&"createIfNot"!==this.method&&(e.column=Array.isArray(e.column)?e.column:[e.column],e.column=e.column.map((e=>this.client.customWrapIdentifier(e,s))),e.inTable=this.client.customWrapIdentifier(e.inTable,s),e.references=Array.isArray(e.references)?e.references:[e.references],e.references=e.references.map((e=>this.client.customWrapIdentifier(e,s))),this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer:(r,n)=>t.client.ddl(t,r,n).foreign(e)}))}primaryKeys(){const e=n(this.grouped.alterTable||[],{method:"primary"});if(e.length>0&&e[0].args.length>0){const t=e[0].args[0];let r=e[0].args[1]||"";r&&(r=" constraint "+this.formatter.wrap(r));return`,${r} ${this.grouped.columns.filter((e=>"increments"===e.builder._type)).length>0?"unique":"primary key"} (${this.formatter.columnize(t)})`}}foreignKeys(){let e="";const t=n(this.grouped.alterTable||[],{method:"foreign"});for(let r=0,n=t.length;r<n;r++){const n=t[r].args[0],i=this.formatter.columnize(n.column),s=this.formatter.columnize(n.references),o=this.formatter.wrap(n.inTable);let a=n.keyName||"";a&&(a=" constraint "+this.formatter.wrap(a)),e+=`,${a} foreign key(${i}) references ${o}(${s})`,n.onDelete&&(e+=` on delete ${n.onDelete}`),n.onUpdate&&(e+=` on update ${n.onUpdate}`)}return e}createTableBlock(){return this.getColumns().concat().join(",")}renameColumn(e,t){this.pushQuery({sql:`alter table ${this.tableName()} rename ${this.formatter.wrap(e)} to ${this.formatter.wrap(t)}`})}_setNullableState(e,t){const r=this;this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,statementsProducer:(n,i)=>r.client.ddl(r,n,i).setNullable(e,t)})}dropColumn(){const e=this,t=i(arguments).map((e=>this.client.customWrapIdentifier(e,s)));this.pushQuery({sql:`PRAGMA table_info(${this.tableName()})`,output(r){return e.client.ddl(e,r,this.connection).dropColumn(t)}})}}},{"../../../formatter/formatterUtils":264,"../../../schema/tablecompiler":288,"../../../util/is":293,"lodash/filter":484,"lodash/identity":493,"lodash/values":538}],256:[function(e,t,r){const n=e("../../../schema/viewcompiler.js"),{columnize:i}=e("../../../formatter/wrappingFormatter");t.exports=class extends n{constructor(e,t){super(e,t)}createOrReplace(){const e=this.columns,t=this.selectQuery.toString(),r=this.viewName(),n=`drop view if exists ${r}`,s=`create view ${r}${e?" ("+i(e,this.viewBuilder,this.client,this.bindingsHolder)+")":""} as ${t}`;this.pushQuery({sql:n}),this.pushQuery({sql:s})}}},{"../../../formatter/wrappingFormatter":266,"../../../schema/viewcompiler.js":290}],257:[function(e,t,r){const n=e("lodash/chunk"),i=e("lodash/flatten"),s=e("./internal/delay"),{isNumber:o}=e("../util/is");t.exports=function(e,t,r,a=1e3){let u,c=null;if(!o(a)||a<1)throw new TypeError(`Invalid chunkSize: ${a}`);if(!Array.isArray(r))throw new TypeError("Invalid batch: Expected array, got "+typeof r);const l=n(r,a);return Object.assign(Promise.resolve().then((async()=>{return await s(1),r=async e=>{const r=[];for(const n of l)r.push(await e(t).insert(n,u));return i(r)},c?r(c):e.transaction(r);var r})),{returning(e){return u=e,this},transacting(e){return c=e,this}})}},{"../util/is":293,"./internal/delay":258,"lodash/chunk":474,"lodash/flatten":486}],258:[function(e,t,r){t.exports=e=>new Promise((t=>setTimeout(t,e)))},{}],259:[function(e,t,r){t.exports={ensureConnectionCallback:function(e){e.client.emit("start",e.builder),e.builder.emit("start",e.builder);const t=e.builder.toSQL();return e.builder._debug&&e.client.logger.debug(t),Array.isArray(t)?e.queryArray(t):e.query(t)},ensureConnectionStreamCallback:function(e,t){try{const r=e.builder.toSQL();if(Array.isArray(r)&&t.hasHandler)throw new Error("The stream may only be used with a single query statement.");return e.client.stream(e.connection,r,t.stream,t.options)}catch(e){throw t.stream.emit("error",e),e}}}},{}],260:[function(e,t,r){const n=e("debug")("knex:query"),i=e("debug")("knex:bindings"),{isString:s}=e("../../util/is");function o(e,t,r,n){t=null==t?[]:[].concat(t);let i=0;return e.replace(/\\?\?/g,(e=>{if("\\?"===e)return"?";if(i===t.length)return e;const s=t[i++];return n._escapeBinding(s,{timeZone:r})}))}t.exports={enrichQueryObject:function(e,t,r){const o=s(t)?{sql:t}:t;o.bindings=r.prepBindings(o.bindings),o.sql=r.positionBindings(o.sql);const{__knexUid:a,__knexTxId:u}=e;var c,l;return r.emit("query",Object.assign({__knexUid:a,__knexTxId:u},o)),c=o.sql,l=u,n(c.replace(/%/g,"%%"),l),i(o.bindings,u),o},executeQuery:function(e,t,r){return r._query(e,t).catch((n=>{throw n.message=o(t.sql,t.bindings,void 0,r)+" - "+n.message,r.emit("query-error",n,Object.assign({__knexUid:e.__knexUid,__knexTxId:e.__knexUid},t)),n}))},formatQuery:o}},{"../../util/is":293,debug:299}],261:[function(e,t,r){const{KnexTimeoutError:n}=e("../util/timeout"),{timeout:i}=e("../util/timeout"),{ensureConnectionCallback:s,ensureConnectionStreamCallback:o}=e("./internal/ensure-connection-callback");let a;class u{constructor(e,t){this.client=e,this.builder=t,this.queries=[],this.connection=void 0}async run(){const e=this;try{const t=await this.ensureConnection(s);return e.builder.emit("end"),t}catch(t){throw e.builder._events&&e.builder._events.error&&e.builder.emit("error",t),t}}stream(t,r){const n="function"==typeof t&&1===arguments.length,i=n?{}:t,s=n?t:r,u="function"==typeof s;a=a||e("stream").Transform;const c=this.builder.queryContext();let l;const h=new a({objectMode:!0,transform:(e,t,r)=>{r(null,this.client.postProcessResponse(e,c))},destroy(){l&&l.destroy&&l.destroy(new Error("stream destroyed"))}});h.on("pipe",(e=>{l=e}));const d=this.ensureConnection(o,{options:i,hasHandler:u,stream:h}).catch((e=>{this.connection||h.emit("error",e)}));return u?(s(h),d):h}pipe(e,t){return this.stream(t).pipe(e)}async query(e){const{__knexUid:t,__knexTxId:r}=this.connection;this.builder.emit("query",Object.assign({__knexUid:t,__knexTxId:r},e));const s=this,o=this.builder.queryContext();null!==e&&"object"==typeof e&&(e.queryContext=o);let a=this.client.query(this.connection,e);return e.timeout&&(a=i(a,e.timeout)),a.then((e=>this.client.processResponse(e,s))).then((n=>{const i=this.client.postProcessResponse(n,o);return this.builder.emit("query-response",i,Object.assign({__knexUid:t,__knexTxId:r},e),this.builder),this.client.emit("query-response",i,Object.assign({__knexUid:t,__knexTxId:r},e),this.builder),i})).catch((t=>{if(!(t instanceof n))return Promise.reject(t);const{timeout:r,sql:i,bindings:s}=e;let o;return e.cancelOnTimeout?o=this.client.cancelQuery(this.connection):(this.connection.__knex__disposed=t,o=Promise.resolve()),o.catch((e=>{throw this.connection.__knex__disposed=t,Object.assign(e,{message:`After query timeout of ${r}ms exceeded, cancelling of query failed.`,sql:i,bindings:s,timeout:r})})).then((()=>{throw Object.assign(t,{message:`Defined query timeout of ${r}ms exceeded when running query.`,sql:i,bindings:s,timeout:r})}))})).catch((n=>{throw this.builder.emit("query-error",n,Object.assign({__knexUid:t,__knexTxId:r,queryContext:o},e)),n}))}async queryArray(e){if(1===e.length){const t=e[0];if(!t.statementsProducer)return this.query(t);const r=await t.statementsProducer(void 0,this.connection),n=r.sql.map((e=>({sql:e,bindings:t.bindings}))),i=r.pre.map((e=>({sql:e,bindings:t.bindings}))),s=r.post.map((e=>({sql:e,bindings:t.bindings})));let o=[];await this.queryArray(i);try{await this.client.transaction((async e=>{const t=new u(e.client,this.builder);if(t.connection=this.connection,o=await t.queryArray(n),r.check){if((await e.raw(r.check)).length>0)throw new Error("FOREIGN KEY constraint failed")}}),{connection:this.connection})}finally{await this.queryArray(s)}return o}const t=[];for(const r of e)t.push(await this.queryArray([r]));return t}async ensureConnection(e,t){if(this.builder._connection&&(this.connection=this.builder._connection),this.connection)return e(this,t);let r;try{r=await this.client.acquireConnection()}catch(e){if(!(e instanceof n))return Promise.reject(e);throw this.builder&&(e.sql=this.builder.sql,e.bindings=this.builder.bindings),e}try{return this.connection=r,await e(this,t)}finally{await this.client.releaseConnection(r)}}}t.exports=u},{"../util/timeout":298,"./internal/ensure-connection-callback":259,stream:void 0}],262:[function(e,t,r){const{EventEmitter:n}=e("events"),i=e("debug"),s=e("lodash/uniqueId"),{callbackify:o}=e("util"),a=e("../knex-builder/make-knex"),{timeout:u,KnexTimeoutError:c}=e("../util/timeout"),l=e("../util/finally-mixin"),h=i("knex:tx");const d=["read uncommitted","read committed","snapshot","repeatable read","serializable"];class f extends n{constructor(e,t,r={userParams:{},doNotRejectOnRollback:!0},n=null){super(),this.userParams=r.userParams,this.doNotRejectOnRollback=r.doNotRejectOnRollback;const i=this.txid=s("trx");this.client=e,this.logger=e.logger,this.outerTx=n,this.trxClient=void 0,this._completed=!1,this._debug=e.config&&e.config.debug,r.isolationLevel&&this.setIsolationLevel(r.isolationLevel),h("%s: Starting %s transaction",i,n?"nested":"top level"),this._lastChild=Promise.resolve();const o=(n?n._lastChild:Promise.resolve()).then((()=>this._evaluateContainer(r,t)));this._promise=o.then((e=>e)),n&&(n._lastChild=o.catch((()=>{})))}isCompleted(){return this._completed||this.outerTx&&this.outerTx.isCompleted()||!1}begin(e){return(this.isolationLevel?this.query(e,`SET TRANSACTION ISOLATION LEVEL ${this.isolationLevel};`):Promise.resolve()).then((()=>this.query(e,"BEGIN;")))}savepoint(e){return this.query(e,`SAVEPOINT ${this.txid};`)}commit(e,t){return this.query(e,"COMMIT;",1,t)}release(e,t){return this.query(e,`RELEASE SAVEPOINT ${this.txid};`,1,t)}setIsolationLevel(e){if(!d.includes(e))throw new Error(`Invalid isolationLevel, supported isolation levels are: ${JSON.stringify(d)}`);return this.isolationLevel=e,this}rollback(e,t){return u(this.query(e,"ROLLBACK",2,t),5e3).catch((e=>{if(!(e instanceof c))return Promise.reject(e);this._rejecter(t)}))}rollbackTo(e,t){return u(this.query(e,`ROLLBACK TO SAVEPOINT ${this.txid}`,2,t),5e3).catch((e=>{if(!(e instanceof c))return Promise.reject(e);this._rejecter(t)}))}query(e,t,r,n){const i=this.trxClient.query(e,t).catch((e=>{r=2,n=e,this._completed=!0,h("%s error running transaction query",this.txid)})).then((e=>{if(1===r&&this._resolver(n),2===r){if(void 0===n){if(this.doNotRejectOnRollback&&/^ROLLBACK\b/i.test(t))return void this._resolver();n=new Error(`Transaction rejected with non-error: ${n}`)}this._rejecter(n)}return e}));return 1!==r&&2!==r||(this._completed=!0),i}debug(e){return this._debug=!arguments.length||e,this}async _evaluateContainer(e,t){return this.acquireConnection(e,(e=>{const r=this.trxClient=function(e,t,r){const n=Object.create(t.constructor.prototype);n.version=t.version,n.config=t.config,n.driver=t.driver,n.connectionSettings=t.connectionSettings,n.transacting=!0,n.valueForUndefined=t.valueForUndefined,n.logger=t.logger,n.on("start",(function(r){e.emit("start",r),t.emit("start",r)})),n.on("query",(function(r){e.emit("query",r),t.emit("query",r)})),n.on("query-error",(function(r,n){e.emit("query-error",r,n),t.emit("query-error",r,n)})),n.on("query-response",(function(r,n,i){e.emit("query-response",r,n,i),t.emit("query-response",r,n,i)}));const i=n.query;n.query=function(t,s){const o=e.isCompleted();return new Promise((function(a,u){try{if(t!==r)throw new Error("Invalid connection for transaction query.");o&&p(e,s),a(i.call(n,t,s))}catch(e){u(e)}}))};const s=n.stream;return n.stream=function(t,i,o,a){const u=e.isCompleted();return new Promise((function(c,l){try{if(t!==r)throw new Error("Invalid connection for transaction query.");u&&p(e,i),c(s.call(n,t,i,o,a))}catch(e){l(e)}}))},n.acquireConnection=function(){return Promise.resolve(r)},n.releaseConnection=function(){return Promise.resolve()},n}(this,this.client,e),n=this.client.transacting?this.savepoint(e):this.begin(e),i=new Promise(((e,t)=>{this._resolver=e,this._rejecter=t}));return n.then((()=>function(e,t,r){const n=a(r);n.context.withUserParams=()=>{throw new Error("Cannot set user params on a transaction - it can only inherit params from main knex instance")},n.isTransaction=!0,n.userParams=e.userParams||{},n.context.transaction=function(t,r){return r?void 0===r.doNotRejectOnRollback&&(r.doNotRejectOnRollback=!0):r={doNotRejectOnRollback:!0},this._transaction(t,r,e)},n.savepoint=function(e,t){return n.transaction(e,t)},e.client.transacting?(n.commit=r=>e.release(t,r),n.rollback=r=>e.rollbackTo(t,r)):(n.commit=r=>e.commit(t,r),n.rollback=r=>e.rollback(t,r));return n.isCompleted=()=>e.isCompleted(),n}(this,e,r))).then((e=>{let r;e.executionPromise=i;try{r=t(e)}catch(e){r=Promise.reject(e)}return r&&r.then&&"function"==typeof r.then&&r.then((t=>e.commit(t))).catch((t=>e.rollback(t))),null})).catch((e=>this._rejecter(e))),i}))}async acquireConnection(e,t){const r=e&&e.connection,n=r||await this.client.acquireConnection();try{return n.__knexTxId=this.txid,await t(n)}finally{r?h("%s: not releasing external connection",this.txid):(h("%s: releasing connection",this.txid),this.client.releaseConnection(n))}}then(e,t){return this._promise.then(e,t)}catch(...e){return this._promise.catch(...e)}asCallback(e){return o((()=>this._promise))(e),this._promise}}function p(e,t){const r="string"==typeof t?t:t&&t.sql;throw h("%s: Transaction completed: %s",e.txid,r),new Error("Transaction query already complete, run with DEBUG=knex:tx for more info")}l(f.prototype),t.exports=f},{"../knex-builder/make-knex":272,"../util/finally-mixin":291,"../util/timeout":298,debug:299,events:void 0,"lodash/uniqueId":537,util:void 0}],263:[function(e,t,r){const{columnize:n,wrap:i}=e("./formatter/wrappingFormatter");t.exports=class{constructor(e,t){this.client=e,this.builder=t,this.bindings=[]}columnize(e){return n(e,this.builder,this.client,this)}wrap(e,t){return i(e,t,this.builder,this.client,this)}}},{"./formatter/wrappingFormatter":266}],264:[function(e,t,r){const{isObject:n}=e("../util/is");t.exports={compileCallback:function(e,t,r,n){const i=r.queryBuilder();return e.call(i,i),r.queryCompiler(i,n.bindings).toSQL(t||i._method||"select")},wrapAsIdentifier:function(e,t,r){const n=t.queryContext();return r.wrapIdentifier((e||"").trim(),n)},formatDefault:function(e,t,r){return void 0===e?"":null===e?"null":e&&e.isRawInstance?e.toQuery():"bool"===t?("false"===e&&(e=0),`'${e?1:0}'`):"json"!==t&&"jsonb"!==t||!n(e)?r._escapeBinding(e.toString()):`'${JSON.stringify(e)}'`}}},{"../util/is":293}],265:[function(e,t,r){const{columnize:n}=e("./wrappingFormatter");t.exports={replaceKeyBindings:function(e,t){const r={bindings:[]},i=e,s=e.bindings;return{method:"raw",sql:e.sql.replace(/\\?(:(\w+):(?=::)|:(\w+):(?!:)|:(\w+))/g,(function(e,o,a,u,c){if(e!==o)return o;const l=a||u||c,h=e.trim(),d=":"===h[h.length-1],f=s[l];return void 0===f?(Object.prototype.hasOwnProperty.call(s,l)&&r.bindings.push(f),e):d?e.replace(o,n(f,i,t,r)):e.replace(o,t.parameter(f,i,r))})),bindings:r.bindings}},replaceRawArrBindings:function(e,t){const r={bindings:[]},i=e,s=e.bindings.length,o=e.bindings;let a=0;const u=e.sql.replace(/\\?\?\??/g,(function(e){if("\\?"===e)return e;const s=o[a++];return"??"===e?n(s,i,t,r):t.parameter(s,i,r)}));if(s!==a)throw new Error(`Expected ${s} bindings, saw ${a}`);return{method:"raw",sql:u,bindings:r.bindings}}}},{"./wrappingFormatter":266}],266:[function(e,t,r){const n=e("lodash/transform"),i=e("../query/querybuilder"),{compileCallback:s,wrapAsIdentifier:o}=e("./formatterUtils"),a=["asc","desc"],u=n(["=","<",">","<=",">=","<>","!=","like","not like","between","not between","ilike","not ilike","exists","not exist","rlike","not rlike","regexp","not regexp","match","&","|","^","<<",">>","~","~=","~*","!~","!~*","#","&&","@>","<@","||","&<","&>","-|-","@@","!!",["?","\\?"],["?|","\\?|"],["?&","\\?&"]],((e,t)=>{Array.isArray(t)?e[t[0]]=t[1]:e[t]=t}),{});function c(e,t,r,n,a){const u=l(e,t,r,n,a);if(u)return u;switch(typeof e){case"function":return d(s(e,void 0,n,a),!0,r,n);case"object":return function(e,t,r,n){const a=[];for(const u in e){const l=e[u];if("function"==typeof l){const e=s(l,void 0,r,n);e.as=u,a.push(d(e,!0,t,r))}else l instanceof i?a.push(r.alias(`(${c(l,void 0,t,r,n)})`,o(u,t,r))):a.push(r.alias(c(l,void 0,t,r,n),o(u,t,r)))}return a.join(", ")}(e,r,n,a);case"number":return e;default:return h(e+"",r,n)}}function l(e,t,r,n,s){let o;return e instanceof i?(o=n.queryCompiler(e).toSQL(),o.bindings&&s.bindings.push(...o.bindings),d(o,t,r,n)):e&&e.isRawInstance?(e.client=n,r._queryContext&&(e.queryContext=()=>r._queryContext),o=e.toSQL(),o.bindings&&s.bindings.push(...o.bindings),o.sql):void(t&&s.bindings.push(e))}function h(e,t,r){const n=e.toLowerCase().indexOf(" as ");if(-1!==n){const i=e.slice(0,n),s=e.slice(n+4);return r.alias(h(i,t,r),o(s,t,r))}const i=[];let s=-1;const a=e.split(".");for(;++s<a.length;)e=a[s],0===s&&a.length>1?i.push(h((e||"").trim(),t,r)):i.push(o(e,t,r));return i.join(".")}function d(e,t,r,n){let i=e.sql||"";return i&&("select"===e.method||"first"===e.method)&&(t||e.as)&&(i=`(${i})`,e.as)?n.alias(i,h(e.as,r,n)):i}t.exports={columnize:function(e,t,r,n){const i=Array.isArray(e)?e:[e];let s="",o=-1;for(;++o<i.length;)o>0&&(s+=", "),s+=c(i[o],void 0,t,r,n);return s},direction:function(e,t,r,n){const i=l(e,void 0,t,r,n);return i||(-1!==a.indexOf((e||"").toLowerCase())?e:"asc")},operator:function(e,t,r,n){const i=l(e,void 0,t,r,n);if(i)return i;const s=u[(e||"").toLowerCase()];if(!s)throw new TypeError(`The operator "${e}" is not permitted`);return s},outputQuery:d,rawOrFn:function(e,t,r,n,i){return"function"==typeof e?d(s(e,t,n,i),void 0,r,n):l(e,void 0,r,n,i)||""},unwrapRaw:l,wrap:c,wrapString:h}},{"../query/querybuilder":278,"./formatterUtils":264,"lodash/transform":535}],267:[function(e,t,r){const n=e("./knex-builder/Knex");t.exports=n},{"./knex-builder/Knex":269}],268:[function(e,t,r){(function(e){t.exports=class{constructor(e){this.client=e}now(e){return"number"==typeof e?this.client.raw(`CURRENT_TIMESTAMP(${e})`):this.client.raw("CURRENT_TIMESTAMP")}uuidToBin(t,r=!0){const n=e.from(t.replace(/-/g,""),"hex");return r?e.concat([n.slice(6,8),n.slice(4,6),n.slice(0,4),n.slice(8,16)]):e.concat([n.slice(0,4),n.slice(4,6),n.slice(6,8),n.slice(8,16)])}binToUuid(t,r=!0){const n=e.from(t,"hex");return r?[n.toString("hex",4,8),n.toString("hex",2,4),n.toString("hex",0,2),n.toString("hex",8,10),n.toString("hex",10,16)].join("-"):[n.toString("hex",0,4),n.toString("hex",4,6),n.toString("hex",6,8),n.toString("hex",8,10),n.toString("hex",10,16)].join("-")}}}).call(this,e("buffer").Buffer)},{buffer:void 0}],269:[function(e,t,r){const n=e("../client"),i=e("../query/querybuilder"),s=e("../query/method-constants"),o=e("./make-knex"),{KnexTimeoutError:a}=e("../util/timeout"),{resolveConfig:u}=e("./internal/config-resolver"),c=e("../schema/builder"),l=e("../schema/viewbuilder"),h=e("../schema/columnbuilder"),d=e("../schema/tablebuilder");function f(e){const{resolvedConfig:t,Dialect:r}=u(...arguments),n=o(new r(t));return t.userParams&&(n.userParams=t.userParams),n}f.Client=n,f.KnexTimeoutError=a,f.QueryBuilder={extend:function(e,t){i.extend(e,t),s.push(e)}},f.SchemaBuilder={extend:function(e,t){c.extend(e,t)}},f.ViewBuilder={extend:function(e,t){l.extend(e,t)}},f.ColumnBuilder={extend:function(e,t){h.extend(e,t)}},f.TableBuilder={extend:function(e,t){d.extend(e,t)}},t.exports=f},{"../client":180,"../query/method-constants":277,"../query/querybuilder":278,"../schema/builder":282,"../schema/columnbuilder":283,"../schema/tablebuilder":287,"../schema/viewbuilder":289,"../util/timeout":298,"./internal/config-resolver":270,"./make-knex":272}],270:[function(e,t,r){const n=e("../../client"),{SUPPORTED_CLIENTS:i}=e("../../constants"),s=e("./parse-connection"),{getDialectByNameOrAlias:o}=e("../../dialects");t.exports={resolveConfig:function(e){let t,r;const a="string"==typeof e?Object.assign(s(e),arguments[2]):e;if(0===arguments.length||!a.client&&!a.dialect)t=n;else if("function"==typeof a.client)t=a.client;else{const e=a.client||a.dialect;if(!i.includes(e))throw new Error(`knex: Unknown configuration option 'client' value ${e}. Note that it is case-sensitive, check documentation for supported values.`);t=o(e)}return r="string"==typeof a.connection?Object.assign({},a,{connection:s(a.connection).connection}):Object.assign({},a),{resolvedConfig:r,Dialect:t}}}},{"../../client":180,"../../constants":181,"../../dialects":188,"./parse-connection":271}],271:[function(e,t,r){(function(r){const{parse:n}=e("pg-connection-string"),i=n,s=r&&r.platform&&"win32"===r.platform;function o(e){const t={};let r=e.pathname;if("/"===r[0]&&(r=r.slice(1)),t.database=r,e.hostname&&(0===e.protocol.indexOf("mssql")?t.server=e.hostname:t.host=e.hostname),e.port&&(t.port=e.port),(e.username||e.password)&&(t.user=decodeURIComponent(e.username)),e.password&&(t.password=decodeURIComponent(e.password)),e.searchParams)for(const[r,n]of e.searchParams.entries()){if(["mysql:","mariadb:"].includes(e.protocol))try{t[r]=JSON.parse(n)}catch(e){t[r]=n}else t[r]=n}return t}t.exports=function(e){const t=function(e){try{return new URL(e)}catch(e){return null}}(e),r=s&&t&&2===t.protocol.length;if(!t||r)return{client:"sqlite3",connection:{filename:e}};let{protocol:n}=t;":"===n.slice(-1)&&(n=n.slice(0,-1));return{client:n,connection:["postgresql","postgres"].includes(n)?i(e):o(t)}}}).call(this,e("_process"))},{_process:void 0,"pg-connection-string":550}],272:[function(e,t,r){const{EventEmitter:n}=e("events"),{Migrator:i}=e("../migrations/migrate/Migrator"),s=e("../migrations/seed/Seeder"),o=e("./FunctionHelper"),a=e("../query/method-constants"),u=e("lodash/merge"),c=e("../execution/batch-insert"),{isObject:l}=e("../util/is"),h={client:{get(){return this.context.client},set(e){this.context.client=e},configurable:!0},userParams:{get(){return this.context.userParams},set(e){this.context.userParams=e},configurable:!0},schema:{get(){return this.client.schemaBuilder()},configurable:!0},migrate:{get(){return new i(this)},configurable:!0},seed:{get(){return new s(this)},configurable:!0},fn:{get(){return new o(this.client)},configurable:!0}},d=["raw","batchInsert","transaction","transactionProvider","initialize","destroy","ref","withUserParams","queryBuilder","disableProcessing","enableProcessing"];for(const e of d)h[e]={value:function(...t){return this.context[e](...t)},configurable:!0};function f(e){const t=e.context||{};Object.assign(t,{queryBuilder(){return this.client.queryBuilder()},raw(){return this.client.raw.apply(this.client,arguments)},batchInsert(e,t,r=1e3){return c(this,e,t,r)},transaction(e,t){!t&&l(e)&&(t=e,e=null);const r=Object.assign({},t);return r.userParams=this.userParams||{},void 0===r.doNotRejectOnRollback&&(r.doNotRejectOnRollback=!0),this._transaction(e,r)},_transaction(e,t,r=null){if(e){return this.client.transaction(e,t,r)}return new Promise(((e,n)=>{this.client.transaction(e,t,r).catch(n)}))},transactionProvider(e){let t;return()=>(t||(t=this.transaction(void 0,e)),t)},initialize(e){return this.client.initializePool(e)},destroy(e){return this.client.destroy(e)},ref(e){return this.client.ref(e)},disableProcessing(){this.userParams.isProcessingDisabled||(this.userParams.wrapIdentifier=this.client.config.wrapIdentifier,this.userParams.postProcessResponse=this.client.config.postProcessResponse,this.client.config.wrapIdentifier=null,this.client.config.postProcessResponse=null,this.userParams.isProcessingDisabled=!0)},enableProcessing(){this.userParams.isProcessingDisabled&&(this.client.config.wrapIdentifier=this.userParams.wrapIdentifier,this.client.config.postProcessResponse=this.userParams.postProcessResponse,this.userParams.isProcessingDisabled=!1)},withUserParams(t){const r=function(e){const t=Object.create(Object.getPrototypeOf(e),Object.getOwnPropertyDescriptors(e)),r={},n=((e,t)=>g(r,e,t)).bind(t);return Object.assign(n,e),n.context=r,n}(e);return this.client&&(r.client=Object.create(this.client.constructor.prototype),u(r.client,this.client),r.client.config=Object.assign({},this.client.config)),m(r,r.client),p("query",e,r),p("query-error",e,r),p("query-response",e,r),p("start",e,r),r.userParams=t,r}}),e.context||(e.context=t)}function p(e,t,r){t.listeners(e).forEach((t=>{r.on(e,t)}))}function m(e,t){for(let t=0;t<a.length;t++){const r=a[t];e[r]=function(){const e=this.queryBuilder();return e[r].apply(e,arguments)}}Object.defineProperties(e,h),f(e),e.client=t,e.userParams={};const r=new n;for(const t in r)e[t]=r[t];e._internalListeners&&e._internalListeners.forEach((({eventName:t,listener:r})=>{e.client.removeListener(t,r)})),e._internalListeners=[],y(e,"start",(t=>{e.emit("start",t)})),y(e,"query",(t=>{e.emit("query",t)})),y(e,"query-error",((t,r)=>{e.emit("query-error",t,r)})),y(e,"query-response",((t,r,n)=>{e.emit("query-response",t,r,n)}))}function y(e,t,r){e.client.on(t,r),e._internalListeners.push({eventName:t,listener:r})}function g(e,t,r){const n=e.queryBuilder();return t||e.client.logger.warn("calling knex without a tableName is deprecated. Use knex.queryBuilder() instead."),t?n.table(t,r):n}t.exports=function(e){function t(e,r){return g(t.context,e,r)}return m(t,e),t}},{"../execution/batch-insert":257,"../migrations/migrate/Migrator":295,"../migrations/seed/Seeder":295,"../query/method-constants":277,"../util/is":293,"./FunctionHelper":268,events:void 0,"lodash/merge":517}],273:[function(e,t,r){(function(r){const n=e("colorette"),{inspect:i}=e("util"),{isString:s,isFunction:o}=e("./util/is");t.exports=class{constructor(e={}){const{log:{debug:t,warn:n,error:i,deprecate:s,inspectionDepth:o,enableColors:a}={}}=e;this._inspectionDepth=o||5,this._enableColors=function(e){if(null!=e)return e;if(r&&r.stdout)return r.stdout.isTTY;return!1}(a),this._debug=t,this._warn=n,this._error=i,this._deprecate=s}_log(e,t,r){if(null!=t&&!o(t))throw new TypeError("Extensions to knex logger must be functions!");o(t)?t(e):(s(e)||(e=i(e,{depth:this._inspectionDepth,colors:this._enableColors})),console.log(r?r(e):e))}debug(e){this._log(e,this._debug)}warn(e){this._log(e,this._warn,n.yellow)}error(e){this._log(e,this._error,n.red)}deprecate(e,t){const r=`${e} is deprecated, please use ${t}`;this._log(r,this._deprecate,n.yellow)}}}).call(this,e("_process"))},{"./util/is":293,_process:void 0,colorette:162,util:void 0}],274:[function(e,t,r){const n=e("assert");t.exports=class{constructor(e,t,r,n,i){this.schema=t,this.type="analytic",this.method=e,this.order=n||[],this.partitions=i||[],this.alias=r,this.and=this,this.grouping="columns"}partitionBy(e,t){return n(Array.isArray(e)||"string"==typeof e,"The argument to an analytic partitionBy function must be either a string\n            or an array of string."),Array.isArray(e)?this.partitions=this.partitions.concat(e):this.partitions.push({column:e,order:t}),this}orderBy(e,t){return n(Array.isArray(e)||"string"==typeof e,"The argument to an analytic orderBy function must be either a string\n            or an array of string."),Array.isArray(e)?this.order=this.order.concat(e):this.order.push({column:e,order:t}),this}}},{assert:void 0}],275:[function(e,t,r){t.exports={lockMode:{forShare:"forShare",forUpdate:"forUpdate",forNoKeyUpdate:"forNoKeyUpdate",forKeyShare:"forKeyShare"},waitMode:{skipLocked:"skipLocked",noWait:"noWait"}}},{}],276:[function(e,t,r){const n=e("assert");function i(e,t,r,n,i){if("function"==typeof r)return{type:"onWrapped",value:r,bool:t};switch(arguments.length){case 3:return{type:"onRaw",value:r,bool:t};case 4:return{type:e,column:r,operator:"=",value:n,bool:t};default:return{type:e,column:r,operator:n,value:i,bool:t}}}class s{constructor(e,t,r){this.schema=r,this.table=e,this.joinType=t,this.and=this,this.clauses=[]}get or(){return this._bool("or")}on(e){if("object"==typeof e&&"function"!=typeof e.toSQL){const t=Object.keys(e);let r=-1;const n="or"===this._bool()?"orOn":"on";for(;++r<t.length;)this[n](t[r],e[t[r]]);return this}const t=i("onBasic",this._bool(),...arguments);return t&&this.clauses.push(t),this}orOn(e,t,r){return this._bool("or").on.apply(this,arguments)}onJsonPathEquals(e,t,r,n){return this.clauses.push({type:"onJsonPathEquals",columnFirst:e,jsonPathFirst:t,columnSecond:r,jsonPathSecond:n,bool:this._bool(),not:this._not()}),this}orOnJsonPathEquals(e,t,r,n){return this._bool("or").onJsonPathEquals.apply(this,arguments)}using(e){return this.clauses.push({type:"onUsing",column:e,bool:this._bool()})}onVal(e){if("object"==typeof e&&"function"!=typeof e.toSQL){const t=Object.keys(e);let r=-1;const n="or"===this._bool()?"orOnVal":"onVal";for(;++r<t.length;)this[n](t[r],e[t[r]]);return this}const t=i("onVal",this._bool(),...arguments);return t&&this.clauses.push(t),this}andOnVal(){return this.onVal(...arguments)}orOnVal(){return this._bool("or").onVal(...arguments)}onBetween(e,t){return n(Array.isArray(t),"The second argument to onBetween must be an array."),n(2===t.length,"You must specify 2 values for the onBetween clause"),this.clauses.push({type:"onBetween",column:e,value:t,bool:this._bool(),not:this._not()}),this}onNotBetween(e,t){return this._not(!0).onBetween(e,t)}orOnBetween(e,t){return this._bool("or").onBetween(e,t)}orOnNotBetween(e,t){return this._bool("or")._not(!0).onBetween(e,t)}onIn(e,t){return Array.isArray(t)&&0===t.length?this.on(1,"=",0):(this.clauses.push({type:"onIn",column:e,value:t,not:this._not(),bool:this._bool()}),this)}onNotIn(e,t){return this._not(!0).onIn(e,t)}orOnIn(e,t){return this._bool("or").onIn(e,t)}orOnNotIn(e,t){return this._bool("or")._not(!0).onIn(e,t)}onNull(e){return this.clauses.push({type:"onNull",column:e,not:this._not(),bool:this._bool()}),this}orOnNull(e){return this._bool("or").onNull(e)}onNotNull(e){return this._not(!0).onNull(e)}orOnNotNull(e){return this._not(!0)._bool("or").onNull(e)}onExists(e){return this.clauses.push({type:"onExists",value:e,not:this._not(),bool:this._bool()}),this}orOnExists(e){return this._bool("or").onExists(e)}onNotExists(e){return this._not(!0).onExists(e)}orOnNotExists(e){return this._not(!0)._bool("or").onExists(e)}type(e){return this.joinType=e,this}_bool(e){if(1===arguments.length)return this._boolFlag=e,this;const t=this._boolFlag||"and";return this._boolFlag="and",t}_not(e){if(1===arguments.length)return this._notFlag=e,this;const t=this._notFlag;return this._notFlag=!1,t}}Object.assign(s.prototype,{grouping:"join"}),s.prototype.andOn=s.prototype.on,s.prototype.andOnIn=s.prototype.onIn,s.prototype.andOnNotIn=s.prototype.onNotIn,s.prototype.andOnNull=s.prototype.onNull,s.prototype.andOnNotNull=s.prototype.onNotNull,s.prototype.andOnExists=s.prototype.onExists,s.prototype.andOnNotExists=s.prototype.onNotExists,s.prototype.andOnBetween=s.prototype.onBetween,s.prototype.andOnNotBetween=s.prototype.onNotBetween,s.prototype.andOnJsonPathEquals=s.prototype.onJsonPathEquals,t.exports=s},{assert:void 0}],277:[function(e,t,r){t.exports=["with","withRecursive","withMaterialized","withNotMaterialized","select","as","columns","column","from","fromJS","fromRaw","into","withSchema","table","distinct","join","joinRaw","innerJoin","leftJoin","leftOuterJoin","rightJoin","rightOuterJoin","outerJoin","fullOuterJoin","crossJoin","where","andWhere","orWhere","whereNot","orWhereNot","whereLike","andWhereLike","orWhereLike","whereILike","andWhereILike","orWhereILike","whereRaw","whereWrapped","havingWrapped","orWhereRaw","whereExists","orWhereExists","whereNotExists","orWhereNotExists","whereIn","orWhereIn","whereNotIn","orWhereNotIn","whereNull","orWhereNull","whereNotNull","orWhereNotNull","whereBetween","whereNotBetween","andWhereBetween","andWhereNotBetween","orWhereBetween","orWhereNotBetween","groupBy","groupByRaw","orderBy","orderByRaw","union","unionAll","intersect","having","havingRaw","orHaving","orHavingRaw","offset","limit","count","countDistinct","min","max","sum","sumDistinct","avg","avgDistinct","increment","decrement","first","debug","pluck","clearSelect","clearWhere","clearGroup","clearOrder","clearHaving","insert","update","returning","del","delete","truncate","transacting","connection","jsonExtract","jsonSet","jsonInsert","jsonRemove","whereJsonObject","orWhereJsonObject","andWhereJsonObject","whereNotJsonObject","orWhereNotJsonObject","andWhereNotJsonObject","whereJsonPath","orWhereJsonPath","andWhereJsonPath","whereJsonSupersetOf","orWhereJsonSupersetOf","andWhereJsonSupersetOf","whereJsonNotSupersetOf","orWhereJsonNotSupersetOf","andWhereJsonNotSupersetOf","whereJsonSubsetOf","orWhereJsonSubsetOf","andWhereJsonSubsetOf","whereJsonNotSubsetOf","orWhereJsonNotSubsetOf","andWhereJsonNotSubsetOf"]},{}],278:[function(e,t,r){const n=e("assert"),{EventEmitter:i}=e("events"),s=e("lodash/assign"),o=e("lodash/clone"),a=e("lodash/each"),u=e("lodash/isEmpty"),c=e("lodash/isPlainObject"),l=e("lodash/last"),h=e("lodash/reject"),d=e("lodash/tail"),f=e("lodash/toArray"),{addQueryContext:p,normalizeArr:m}=e("../util/helpers"),y=e("./joinclause"),g=e("./analytic"),v=e("../util/save-async-stack"),{isBoolean:b,isNumber:_,isObject:w,isString:E,isFunction:x}=e("../util/is"),{lockMode:C,waitMode:k}=e("./constants"),{augmentWithBuilderInterface:O}=e("../builder-interface-augmenter"),S=new Set(["pluck","first","select"]),T=new Set(["with","select","columns","hintComments","where","union","join","group","order","having","limit","offset","counter","counters"]),$=new Set([C.forShare,C.forUpdate,C.forNoKeyUpdate,C.forKeyShare]);class j extends i{constructor(e){super(),this.client=e,this.and=this,this._single={},this._statements=[],this._method="select",e.config&&(v(this,5),this._debug=e.config.debug),this._joinFlag="inner",this._boolFlag="and",this._notFlag=!1,this._asColumnFlag=!1}toString(){return this.toQuery()}toSQL(e,t){return this.client.queryCompiler(this).toSQL(e||this._method,t)}clone(){const e=new this.constructor(this.client);return e._method=this._method,e._single=o(this._single),e._statements=o(this._statements),e._debug=this._debug,void 0!==this._options&&(e._options=o(this._options)),void 0!==this._queryContext&&(e._queryContext=o(this._queryContext)),void 0!==this._connection&&(e._connection=this._connection),e}timeout(e,{cancel:t}={}){return _(e)&&e>0&&(this._timeout=e,t&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this}isValidStatementArg(e){return"function"==typeof e||e instanceof j||e&&e.isRawInstance}_validateWithArgs(e,t,r,n){const[i,s]=void 0===r?[t,void 0]:[r,t];if("string"!=typeof e)throw new Error(`${n}() first argument must be a string`);if(this.isValidStatementArg(i)&&void 0===s)return;if(!(Array.isArray(s)&&s.length>0&&s.every((e=>"string"==typeof e))))throw new Error(`${n}() second argument must be a statement or non-empty column name list.`);if(!this.isValidStatementArg(i))throw new Error(`${n}() third argument must be a function / QueryBuilder or a raw when its second argument is a column name list`)}with(e,t,r){return this._validateWithArgs(e,t,r,"with"),this.withWrapped(e,t,r)}withMaterialized(e,t,r){throw new Error("With materialized is not supported by this dialect")}withNotMaterialized(e,t,r){throw new Error("With materialized is not supported by this dialect")}withWrapped(e,t,r,n){const[i,s]=void 0===r?[t,void 0]:[r,t],o={grouping:"with",type:"withWrapped",alias:e,columnList:s,value:i};return void 0!==n&&(o.materialized=n),this._statements.push(o),this}withRecursive(e,t,r){return this._validateWithArgs(e,t,r,"withRecursive"),this.withRecursiveWrapped(e,t,r)}withRecursiveWrapped(e,t,r){return this.withWrapped(e,t,r),this._statements[this._statements.length-1].recursive=!0,this}columns(e){return e||0===e?(this._statements.push({grouping:"columns",value:m(...arguments)}),this):this}as(e){return this._single.as=e,this}hintComment(e){if((e=Array.isArray(e)?e:[e]).some((e=>!E(e))))throw new Error("Hint comment must be a string");if(e.some((e=>e.includes("/*")||e.includes("*/"))))throw new Error('Hint comment cannot include "/*" or "*/"');if(e.some((e=>e.includes("?"))))throw new Error('Hint comment cannot include "?"');return this._statements.push({grouping:"hintComments",value:e}),this}withSchema(e){return this._single.schema=e,this}table(e,t={}){return this._single.table=e,this._single.only=!0===t.only,this}distinct(...e){return this._statements.push({grouping:"columns",value:m(...e),distinct:!0}),this}distinctOn(...e){if(u(e))throw new Error("distinctOn requires at least on argument");return this._statements.push({grouping:"columns",value:m(...e),distinctOn:!0}),this}join(e,t,...r){let n;const i=e instanceof j||"function"==typeof e?void 0:this._single.schema,s=this._joinType();return"function"==typeof t?(n=new y(e,s,i),t.call(n,n)):"raw"===s?n=new y(this.client.raw(e,t),"raw"):(n=new y(e,s,i),t&&n.on(t,...r)),this._statements.push(n),this}using(e){throw new Error("'using' function is only available in PostgreSQL dialect with Delete statements.")}innerJoin(...e){return this._joinType("inner").join(...e)}leftJoin(...e){return this._joinType("left").join(...e)}leftOuterJoin(...e){return this._joinType("left outer").join(...e)}rightJoin(...e){return this._joinType("right").join(...e)}rightOuterJoin(...e){return this._joinType("right outer").join(...e)}outerJoin(...e){return this._joinType("outer").join(...e)}fullOuterJoin(...e){return this._joinType("full outer").join(...e)}crossJoin(...e){return this._joinType("cross").join(...e)}joinRaw(...e){return this._joinType("raw").join(...e)}get or(){return this._bool("or")}get not(){return this._not(!0)}where(e,t,r){const n=arguments.length;if(!1===e||!0===e)return this.where(1,"=",e?1:0);if("function"==typeof e)return this.whereWrapped(e);if(w(e)&&!e.isRawInstance)return this._objectWhere(e);if(e&&e.isRawInstance&&1===n)return this.whereRaw(e);if(2===n&&(r=t,t="=",null===r))return this.whereNull(e);const i=`${t}`.toLowerCase().trim();if(3===n){if("in"===i||"not in"===i)return this._not("not in"===i).whereIn(e,r);if("between"===i||"not between"===i)return this._not("not between"===i).whereBetween(e,r)}return null!==r||"is"!==i&&"is not"!==i?(this._statements.push({grouping:"where",type:"whereBasic",column:e,operator:t,value:r,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag}),this):this._not("is not"===i).whereNull(e)}whereColumn(...e){return this._asColumnFlag=!0,this.where(...e),this._asColumnFlag=!1,this}orWhere(e,...t){this._bool("or");const r=e;return w(r)&&!r.isRawInstance?this.whereWrapped((function(){for(const e in r)this.andWhere(e,r[e])})):this.where(e,...t)}orWhereColumn(e,...t){this._bool("or");const r=e;return w(r)&&!r.isRawInstance?this.whereWrapped((function(){for(const e in r)this.andWhereColumn(e,"=",r[e])})):this.whereColumn(e,...t)}whereNot(e,...t){return t.length>=2&&("in"!==t[0]&&"between"!==t[0]||this.client.logger.warn('whereNot is not suitable for "in" and "between" type subqueries. You should use "not in" and "not between" instead.')),this._not(!0).where(e,...t)}whereNotColumn(...e){return this._not(!0).whereColumn(...e)}orWhereNot(...e){return this._bool("or").whereNot(...e)}orWhereNotColumn(...e){return this._bool("or").whereNotColumn(...e)}_objectWhere(e){const t=this._bool(),r=this._not()?"Not":"";for(const n in e)this[t+"Where"+r](n,e[n]);return this}whereRaw(e,t){const r=e.isRawInstance?e:this.client.raw(e,t);return this._statements.push({grouping:"where",type:"whereRaw",value:r,not:this._not(),bool:this._bool()}),this}orWhereRaw(e,t){return this._bool("or").whereRaw(e,t)}whereWrapped(e){return this._statements.push({grouping:"where",type:"whereWrapped",value:e,not:this._not(),bool:this._bool()}),this}whereExists(e){return this._statements.push({grouping:"where",type:"whereExists",value:e,not:this._not(),bool:this._bool()}),this}orWhereExists(e){return this._bool("or").whereExists(e)}whereNotExists(e){return this._not(!0).whereExists(e)}orWhereNotExists(e){return this._bool("or").whereNotExists(e)}whereIn(e,t){return Array.isArray(t)&&u(t)?this.where(this._not()):(this._statements.push({grouping:"where",type:"whereIn",column:e,value:t,not:this._not(),bool:this._bool()}),this)}orWhereIn(e,t){return this._bool("or").whereIn(e,t)}whereNotIn(e,t){return this._not(!0).whereIn(e,t)}orWhereNotIn(e,t){return this._bool("or")._not(!0).whereIn(e,t)}whereNull(e){return this._statements.push({grouping:"where",type:"whereNull",column:e,not:this._not(),bool:this._bool()}),this}orWhereNull(e){return this._bool("or").whereNull(e)}whereNotNull(e){return this._not(!0).whereNull(e)}orWhereNotNull(e){return this._bool("or").whereNotNull(e)}whereBetween(e,t){return n(Array.isArray(t),"The second argument to whereBetween must be an array."),n(2===t.length,"You must specify 2 values for the whereBetween clause"),this._statements.push({grouping:"where",type:"whereBetween",column:e,value:t,not:this._not(),bool:this._bool()}),this}whereNotBetween(e,t){return this._not(!0).whereBetween(e,t)}orWhereBetween(e,t){return this._bool("or").whereBetween(e,t)}orWhereNotBetween(e,t){return this._bool("or").whereNotBetween(e,t)}_whereLike(e,t,r){return this._statements.push({grouping:"where",type:e,column:t,value:r,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag}),this}whereLike(e,t){return this._whereLike("whereLike",e,t)}orWhereLike(e,t){return this._bool("or")._whereLike("whereLike",e,t)}whereILike(e,t){return this._whereLike("whereILike",e,t)}orWhereILike(e,t){return this._bool("or")._whereLike("whereILike",e,t)}groupBy(e){return e&&e.isRawInstance?this.groupByRaw.apply(this,arguments):(this._statements.push({grouping:"group",type:"groupByBasic",value:m(...arguments)}),this)}groupByRaw(e,t){const r=e.isRawInstance?e:this.client.raw(e,t);return this._statements.push({grouping:"group",type:"groupByRaw",value:r}),this}orderBy(e,t,r=""){return Array.isArray(e)?this._orderByArray(e):(this._statements.push({grouping:"order",type:"orderByBasic",value:e,direction:t,nulls:r}),this)}_orderByArray(e){for(let t=0;t<e.length;t++){const r=e[t];w(r)?this._statements.push({grouping:"order",type:"orderByBasic",value:r.column,direction:r.order,nulls:r.nulls}):E(r)&&this._statements.push({grouping:"order",type:"orderByBasic",value:r})}return this}orderByRaw(e,t){const r=e.isRawInstance?e:this.client.raw(e,t);return this._statements.push({grouping:"order",type:"orderByRaw",value:r}),this}_union(e,t){let r=t[0],n=t[1];if(1===t.length||2===t.length&&b(n)){Array.isArray(r)||(r=[r]);for(let t=0,i=r.length;t<i;t++)this._statements.push({grouping:"union",clause:e,value:r[t],wrap:n||!1})}else r=f(t).slice(0,t.length-1),n=t[t.length-1],b(n)||(r.push(n),n=!1),this._union(e,[r,n]);return this}union(...e){return this._union("union",e)}unionAll(...e){return this._union("union all",e)}intersect(e,t){if(1===arguments.length||2===arguments.length&&b(t)){Array.isArray(e)||(e=[e]);for(let r=0,n=e.length;r<n;r++)this._statements.push({grouping:"union",clause:"intersect",value:e[r],wrap:t||!1})}else e=f(arguments).slice(0,arguments.length-1),b(t=arguments[arguments.length-1])||(e.push(t),t=!1),this.intersect(e,t);return this}having(e,t,r){return e.isRawInstance&&1===arguments.length?this.havingRaw(e):"function"==typeof e?this.havingWrapped(e):(this._statements.push({grouping:"having",type:"havingBasic",column:e,operator:t,value:r,bool:this._bool(),not:this._not()}),this)}orHaving(e,...t){this._bool("or");const r=e;return w(r)&&!r.isRawInstance?this.havingWrapped((function(){for(const e in r)this.andHaving(e,r[e])})):this.having(e,...t)}havingWrapped(e){return this._statements.push({grouping:"having",type:"havingWrapped",value:e,bool:this._bool(),not:this._not()}),this}havingNull(e){return this._statements.push({grouping:"having",type:"havingNull",column:e,not:this._not(),bool:this._bool()}),this}orHavingNull(e){return this._bool("or").havingNull(e)}havingNotNull(e){return this._not(!0).havingNull(e)}orHavingNotNull(e){return this._not(!0)._bool("or").havingNull(e)}havingExists(e){return this._statements.push({grouping:"having",type:"havingExists",value:e,not:this._not(),bool:this._bool()}),this}orHavingExists(e){return this._bool("or").havingExists(e)}havingNotExists(e){return this._not(!0).havingExists(e)}orHavingNotExists(e){return this._not(!0)._bool("or").havingExists(e)}havingBetween(e,t){return n(Array.isArray(t),"The second argument to havingBetween must be an array."),n(2===t.length,"You must specify 2 values for the havingBetween clause"),this._statements.push({grouping:"having",type:"havingBetween",column:e,value:t,not:this._not(),bool:this._bool()}),this}orHavingBetween(e,t){return this._bool("or").havingBetween(e,t)}havingNotBetween(e,t){return this._not(!0).havingBetween(e,t)}orHavingNotBetween(e,t){return this._not(!0)._bool("or").havingBetween(e,t)}havingIn(e,t){return Array.isArray(t)&&u(t)?this.where(this._not()):(this._statements.push({grouping:"having",type:"havingIn",column:e,value:t,not:this._not(),bool:this._bool()}),this)}orHavingIn(e,t){return this._bool("or").havingIn(e,t)}havingNotIn(e,t){return this._not(!0).havingIn(e,t)}orHavingNotIn(e,t){return this._bool("or")._not(!0).havingIn(e,t)}havingRaw(e,t){const r=e.isRawInstance?e:this.client.raw(e,t);return this._statements.push({grouping:"having",type:"havingRaw",value:r,bool:this._bool(),not:this._not()}),this}orHavingRaw(e,t){return this._bool("or").havingRaw(e,t)}_setSkipBinding(e,t){let r=t;w(t)&&(r=t.skipBinding),this._single.skipBinding=this._single.skipBinding||{},this._single.skipBinding[e]=r}offset(e,t){if(null==e||e.isRawInstance||e instanceof j)this._single.offset=e;else{const t=parseInt(e,10);if(isNaN(t))this.client.logger.warn("A valid integer must be provided to offset");else{if(t<0)throw new Error("A non-negative integer must be provided to offset.");this._single.offset=t}}return this._setSkipBinding("offset",t),this}limit(e,t){const r=parseInt(e,10);return isNaN(r)?this.client.logger.warn("A valid integer must be provided to limit"):(this._single.limit=r,this._setSkipBinding("limit",t)),this}count(e,t){return this._aggregate("count",e||"*",t)}min(e,t){return this._aggregate("min",e,t)}max(e,t){return this._aggregate("max",e,t)}sum(e,t){return this._aggregate("sum",e,t)}avg(e,t){return this._aggregate("avg",e,t)}countDistinct(...e){let t;return e.length>1&&c(l(e))&&([t]=e.splice(e.length-1,1)),e.length?1===e.length&&(e=e[0]):e="*",this._aggregate("count",e,{...t,distinct:!0})}sumDistinct(e,t){return this._aggregate("sum",e,{...t,distinct:!0})}avgDistinct(e,t){return this._aggregate("avg",e,{...t,distinct:!0})}increment(e,t=1){if(w(e)){for(const t in e)this._counter(t,e[t]);return this}return this._counter(e,t)}decrement(e,t=1){if(w(e)){for(const t in e)this._counter(t,-e[t]);return this}return this._counter(e,-t)}clearCounters(){return this._single.counter={},this}first(...e){if(this._method&&"select"!==this._method)throw new Error(`Cannot chain .first() on "${this._method}" query`);return this.select(m(...e)),this._method="first",this.limit(1),this}connection(e){return this._connection=e,this.client.processPassedConnection(e),this}pluck(e){if(this._method&&"select"!==this._method)throw new Error(`Cannot chain .pluck() on "${this._method}" query`);return this._method="pluck",this._single.pluck=e,this._statements.push({grouping:"columns",type:"pluck",value:e}),this}clearSelect(){return this._clearGrouping("columns"),this}clearWhere(){return this._clearGrouping("where"),this}clearGroup(){return this._clearGrouping("group"),this}clearOrder(){return this._clearGrouping("order"),this}clearHaving(){return this._clearGrouping("having"),this}clear(e){if(!T.has(e))throw new Error(`Knex Error: unknown statement '${e}'`);return e.startsWith("counter")?this.clearCounters():("select"===e&&(e="columns"),this._clearGrouping(e),this)}insert(e,t,r){return this._method="insert",u(t)||this.returning(t,r),this._single.insert=e,this}update(e,t,r){let n;const i=this._single.update||{};if(this._method="update",E(e))c(t)?i[e]=JSON.stringify(t):i[e]=t,arguments.length>2&&(n=arguments[2]);else{const t=Object.keys(e);this._single.update&&this.client.logger.warn("Update called multiple times with objects.");let r=-1;for(;++r<t.length;)i[t[r]]=e[t[r]];n=arguments[1]}return u(n)||this.returning(n,r),this._single.update=i,this}returning(e,t){return this._single.returning=e,this._single.options=t,this}onConflict(e){return"string"==typeof e&&(e=[e]),new N(this,e||!0)}delete(e,t){return this._method="del",u(e)||this.returning(e,t),this}truncate(e){return this._method="truncate",e&&(this._single.table=e),this}columnInfo(e){return this._method="columnInfo",this._single.columnInfo=e,this}forUpdate(...e){return this._single.lock=C.forUpdate,1===e.length&&Array.isArray(e[0])?this._single.lockTables=e[0]:this._single.lockTables=e,this}forShare(...e){return this._single.lock=C.forShare,this._single.lockTables=e,this}forNoKeyUpdate(...e){return this._single.lock=C.forNoKeyUpdate,this._single.lockTables=e,this}forKeyShare(...e){return this._single.lock=C.forKeyShare,this._single.lockTables=e,this}skipLocked(){if(!this._isSelectQuery())throw new Error(`Cannot chain .skipLocked() on "${this._method}" query!`);if(!this._hasLockMode())throw new Error(".skipLocked() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===k.noWait)throw new Error(".skipLocked() cannot be used together with .noWait()!");return this._single.waitMode=k.skipLocked,this}noWait(){if(!this._isSelectQuery())throw new Error(`Cannot chain .noWait() on "${this._method}" query!`);if(!this._hasLockMode())throw new Error(".noWait() can only be used after a call to .forShare() or .forUpdate()!");if(this._single.waitMode===k.skipLocked)throw new Error(".noWait() cannot be used together with .skipLocked()!");return this._single.waitMode=k.noWait,this}fromJS(e){return a(e,((e,t)=>{"function"!=typeof this[t]&&this.client.logger.warn(`Knex Error: unknown key ${t}`),Array.isArray(e)?this[t].apply(this,e):this[t](e)})),this}fromRaw(e,t){const r=e.isRawInstance?e:this.client.raw(e,t);return this.from(r)}modify(e){return e.apply(this,[this].concat(d(arguments))),this}upsert(e,t,r){throw new Error(`Upsert is not yet supported for dialect ${this.client.dialect}`)}_json(e,t){return this._statements.push({grouping:"columns",type:"json",method:e,params:t}),this}jsonExtract(){const e=arguments[0];let t,r,n=!0;return arguments.length>=2&&(t=arguments[1]),arguments.length>=3&&(r=arguments[2]),4===arguments.length&&(n=arguments[3]),2===arguments.length&&Array.isArray(arguments[0])&&b(arguments[1])&&(n=arguments[1]),this._json("jsonExtract",{column:e,path:t,alias:r,singleValue:n})}jsonSet(e,t,r,n){return this._json("jsonSet",{column:e,path:t,value:r,alias:n})}jsonInsert(e,t,r,n){return this._json("jsonInsert",{column:e,path:t,value:r,alias:n})}jsonRemove(e,t,r){return this._json("jsonRemove",{column:e,path:t,alias:r})}_isJsonObject(e){return w(e)&&!(e instanceof j)}_whereJsonWrappedValue(e,t,r){const n={grouping:"where",type:e,column:t,value:r,not:this._not(),bool:this._bool(),asColumn:this._asColumnFlag};arguments[3]&&(n.operator=arguments[3]),arguments[4]&&(n.jsonPath=arguments[4]),this._statements.push(n)}whereJsonObject(e,t){return this._whereJsonWrappedValue("whereJsonObject",e,t),this}orWhereJsonObject(e,t,r){return this._bool("or").whereJsonObject(e,t,r)}whereNotJsonObject(e,t){return this._not(!0)._whereJsonWrappedValue("whereJsonObject",e,t),this}orWhereNotJsonObject(e,t,r){return this._not(!0)._bool("or").whereJsonObject(e,t,r)}whereJsonPath(e,t,r,n){return this._whereJsonWrappedValue("whereJsonPath",e,n,r,t),this}orWhereJsonPath(e,t,r,n){return this._bool("or").whereJsonPath(e,t,r,n)}whereJsonSupersetOf(e,t){return this._whereJsonWrappedValue("whereJsonSupersetOf",e,t),this}whereJsonNotSupersetOf(e,t){return this._not(!0).whereJsonSupersetOf(e,t),this}orWhereJsonSupersetOf(e,t){return this._whereJsonWrappedValue("whereJsonSupersetOf",e,t),this}orWhereJsonNotSupersetOf(e,t){return this._not(!0)._bool("or").whereJsonSupersetOf(e,t),this}whereJsonSubsetOf(e,t){return this._whereJsonWrappedValue("whereJsonSubsetOf",e,t),this}whereJsonNotSubsetOf(e,t){return this._not(!0).whereJsonSubsetOf(e,t),this}orWhereJsonSubsetOf(e,t){return this._whereJsonWrappedValue("whereJsonSubsetOf",e,t),this}orWhereJsonNotSubsetOf(e,t){return this._not(!0)._bool("or").whereJsonSubsetOf(e,t),this}whereJsonHasNone(e,t){return this._not(!0).whereJsonHasAll(e,t),this}_analytic(e,t,r){let i;const{schema:s}=this._single,o=this._analyticMethod();if(e="string"==typeof e?e:null,n("function"==typeof t||t.isRawInstance||Array.isArray(t)||"string"==typeof t||"object"==typeof t,"The second argument to an analytic function must be either a function, a raw,\n       an array of string or object, an object or a single string."),r&&n(Array.isArray(r)||"string"==typeof r||"object"==typeof r,"The third argument to an analytic function must be either a string, an array of string or object or an object."),x(t))i=new g(o,s,e),t.call(i,i);else if(t.isRawInstance){i={grouping:"columns",type:"analytic",method:o,raw:t,alias:e}}else{const n=Array.isArray(t)?t:[t];let s=r||[];s=Array.isArray(s)?s:[s],i={grouping:"columns",type:"analytic",method:o,order:n,alias:e,partitions:s}}return this._statements.push(i),this}rank(...e){return this._analyticMethod("rank")._analytic(...e)}denseRank(...e){return this._analyticMethod("dense_rank")._analytic(...e)}rowNumber(...e){return this._analyticMethod("row_number")._analytic(...e)}_counter(e,t){return t=parseFloat(t),this._method="update",this._single.counter=this._single.counter||{},this._single.counter[e]=t,this}_bool(e){if(1===arguments.length)return this._boolFlag=e,this;const t=this._boolFlag;return this._boolFlag="and",t}_not(e){if(1===arguments.length)return this._notFlag=e,this;const t=this._notFlag;return this._notFlag=!1,t}_joinType(e){if(1===arguments.length)return this._joinFlag=e,this;const t=this._joinFlag||"inner";return this._joinFlag="inner",t}_analyticMethod(e){return 1===arguments.length?(this._analyticFlag=e,this):this._analyticFlag||"row_number"}_aggregate(e,t,r={}){return this._statements.push({grouping:"columns",type:t.isRawInstance?"aggregateRaw":"aggregate",method:e,value:t,aggregateDistinct:r.distinct||!1,alias:r.as}),this}_clearGrouping(e){e in this._single?this._single[e]=void 0:this._statements=h(this._statements,{grouping:e})}_isSelectQuery(){return S.has(this._method)}_hasLockMode(){return $.has(this._single.lock)}}j.prototype.select=j.prototype.columns,j.prototype.column=j.prototype.columns,j.prototype.andWhereNot=j.prototype.whereNot,j.prototype.andWhereNotColumn=j.prototype.whereNotColumn,j.prototype.andWhere=j.prototype.where,j.prototype.andWhereColumn=j.prototype.whereColumn,j.prototype.andWhereRaw=j.prototype.whereRaw,j.prototype.andWhereBetween=j.prototype.whereBetween,j.prototype.andWhereNotBetween=j.prototype.whereNotBetween,j.prototype.andWhereJsonObject=j.prototype.whereJsonObject,j.prototype.andWhereNotJsonObject=j.prototype.whereJsonObject,j.prototype.andWhereJsonPath=j.prototype.whereJsonPath,j.prototype.andWhereLike=j.prototype.whereLike,j.prototype.andWhereILike=j.prototype.whereILike,j.prototype.andHaving=j.prototype.having,j.prototype.andHavingIn=j.prototype.havingIn,j.prototype.andHavingNotIn=j.prototype.havingNotIn,j.prototype.andHavingNull=j.prototype.havingNull,j.prototype.andHavingNotNull=j.prototype.havingNotNull,j.prototype.andHavingExists=j.prototype.havingExists,j.prototype.andHavingNotExists=j.prototype.havingNotExists,j.prototype.andHavingBetween=j.prototype.havingBetween,j.prototype.andHavingNotBetween=j.prototype.havingNotBetween,j.prototype.from=j.prototype.table,j.prototype.into=j.prototype.table,j.prototype.del=j.prototype.delete,O(j),p(j),j.extend=(e,t)=>{if(Object.prototype.hasOwnProperty.call(j.prototype,e))throw new Error(`Can't extend QueryBuilder with existing method ('${e}').`);s(j.prototype,{[e]:t})};class N{constructor(e,t){this.builder=e,this._columns=t}ignore(){return this.builder._single.onConflict=this._columns,this.builder._single.ignore=!0,this.builder}merge(e){return this.builder._single.onConflict=this._columns,this.builder._single.merge={updates:e},this.builder}then(){throw new Error("Incomplete onConflict clause. .onConflict() must be directly followed by either .merge() or .ignore()")}}t.exports=j},{"../builder-interface-augmenter":179,"../util/helpers":292,"../util/is":293,"../util/save-async-stack":296,"./analytic":274,"./constants":275,"./joinclause":276,assert:void 0,events:void 0,"lodash/assign":472,"lodash/clone":475,"lodash/each":481,"lodash/isEmpty":500,"lodash/isPlainObject":507,"lodash/last":514,"lodash/reject":524,"lodash/tail":528,"lodash/toArray":529}],279:[function(e,t,r){const n=e("../util/helpers"),i=e("../raw"),s=e("./querybuilder"),o=e("./joinclause"),a=e("debug"),u=e("lodash/assign"),c=e("lodash/compact"),l=e("lodash/groupBy"),h=e("lodash/has"),d=e("lodash/isEmpty"),f=e("lodash/map"),p=e("lodash/omitBy"),m=e("lodash/reduce"),{nanoid:y}=e("../util/nanoid"),{isString:g,isUndefined:v}=e("../util/is"),{columnize:b,direction:_,operator:w,wrap:E,unwrapRaw:x,rawOrFn:C}=e("../formatter/wrappingFormatter"),k=a("knex:bindings"),O=["columns","join","where","union","group","having","order","limit","offset","lock","waitMode"];t.exports=class{constructor(e,t,r){this.client=e,this.method=t._method||"select",this.options=t._options,this.single=t._single,this.timeout=t._timeout||!1,this.cancelOnTimeout=t._cancelOnTimeout||!1,this.grouped=l(t._statements,"grouping"),this.formatter=e.formatter(t),this._emptyInsertValue="default values",this.first=this.select,this.bindings=r||[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.builder=this.formatter.builder}toSQL(e,t){this._undefinedInWhereClause=!1,this.undefinedBindingsInfo=[];const r=this[e=e||this.method]()||"",n={method:e,options:m(this.options,u,{}),timeout:this.timeout,cancelOnTimeout:this.cancelOnTimeout,bindings:this.bindingsHolder.bindings||[],__knexQueryUid:y()};if(Object.defineProperties(n,{toNative:{value:()=>({sql:this.client.positionBindings(n.sql),bindings:this.client.prepBindings(n.bindings)}),enumerable:!1}}),g(r)?n.sql=r:u(n,r),"select"!==e&&"first"!==e||this.single.as&&(n.as=this.single.as),this._undefinedInWhereClause)throw k(n.bindings),new Error(`Undefined binding(s) detected when compiling ${e.toUpperCase()}. Undefined column(s): [${this.undefinedBindingsInfo.join(", ")}] query: ${n.sql}`);return n}select(){let e=this.with(),t="";const r=[],n=[];O.forEach((e=>{const i=this[e](this);switch(e){case"union":t=i;break;case"columns":case"join":case"where":r.push(i);break;default:n.push(i)}}));const i=this.grouped.union&&this.grouped.union.map((e=>e.wrap)).some((e=>e));if(this.onlyUnions()){const i=c(r.concat(n)).join(" ");e+=t+(i?" "+i:"")}else{const s=(i?"(":"")+c(r).join(" ")+(i?")":""),o=c(n).join(" ");e+=s+(t?" "+t:"")+(o?" "+o:o)}return e}pluck(){let e=this.single.pluck;return-1!==e.indexOf(".")&&(e=e.split(".").slice(-1)[0]),{sql:this.select(),pluck:e}}insert(){const e=this.single.insert||[],t=this.with()+`insert into ${this.tableName} `,r=this._insertBody(e);return""===r?"":t+r}_onConflictClause(e){return e instanceof i?this.formatter.wrap(e):`(${this.formatter.columnize(e)})`}_buildInsertValues(e){let t="",r=-1;for(;++r<e.values.length;)0!==r&&(t+="), ("),t+=this.client.parameterize(e.values[r],this.client.valueForUndefined,this.builder,this.bindingsHolder);return t}_insertBody(e){let t="";if(Array.isArray(e)){if(0===e.length)return""}else if("object"==typeof e&&d(e))return t+this._emptyInsertValue;const r=this._prepInsert(e);return"string"==typeof r?t+=r:r.columns.length?(t+=`(${b(r.columns,this.builder,this.client,this.bindingsHolder)}`,t+=") values ("+this._buildInsertValues(r)+")"):1===e.length&&e[0]?t+=this._emptyInsertValue:t="",t}update(){const e=this.with(),{tableName:t}=this,r=this._prepUpdate(this.single.update),n=this.where();return e+`update ${this.single.only?"only ":""}${t} set `+r.join(", ")+(n?` ${n}`:"")}_hintComments(){let e=this.grouped.hintComments||[];return e=e.map((e=>c(e.value).join(" "))),e=c(e).join(" "),e?`/*+ ${e} */ `:""}columns(){let e="";if(this.onlyUnions())return"";const t=this._hintComments(),r=this.grouped.columns||[];let n=-1,i=[];if(r)for(;++n<r.length;){const t=r[n];t.distinct&&(e="distinct "),t.distinctOn?e=this.distinctOn(t.value):"aggregate"===t.type?i.push(...this.aggregate(t)):"aggregateRaw"===t.type?i.push(this.aggregateRaw(t)):"analytic"===t.type?i.push(this.analytic(t)):"json"===t.type?i.push(this.json(t)):t.value&&t.value.length>0&&i.push(b(t.value,this.builder,this.client,this.bindingsHolder))}0===i.length&&(i=["*"]);return`${this.onlyJson()?"":"select "}${t}${e}`+i.join(", ")+(this.tableName?` from ${this.single.only?"only ":""}${this.tableName}`:"")}_aggregate(e,{aliasSeparator:t=" as ",distinctParentheses:r}={}){const n=e.value,i=e.method,s=e.aggregateDistinct?"distinct ":"",o=e=>E(e,void 0,this.builder,this.client,this.bindingsHolder),a=(e,r)=>r?e+t+o(r):e,u=(e,t)=>{let n=e.map(o).join(", ");if(s){const e=r?"(":" ",t=r?")":"";n=s.trim()+e+n+t}return a(`${i}(${n})`,t)},c=(e,t)=>{const r=`${i}(${s+o(e)})`;return a(r,t)};if(Array.isArray(n))return[u(n)];if("object"==typeof n){if(e.alias)throw new Error("When using an object explicit alias can not be used");return Object.entries(n).map((([e,t])=>Array.isArray(t)?u(t,e):c(t,e)))}const l=n.toLowerCase().indexOf(" as ");let h=n,{alias:d}=e;if(-1!==l){if(h=n.slice(0,l),d)throw new Error(`Found multiple aliases for same column: ${h}`);d=n.slice(l+4)}return[c(h,d)]}aggregate(e){return this._aggregate(e)}aggregateRaw(e){const t=e.aggregateDistinct?"distinct ":"";return`${e.method}(${t+x(e.value,void 0,this.builder,this.client,this.bindingsHolder)})`}_joinTable(e){return!e.schema||e.table instanceof i?e.table:`${e.schema}.${e.table}`}join(){let e="",t=-1;const r=this.grouped.join;if(!r)return"";for(;++t<r.length;){const n=r[t],i=this._joinTable(n);if(t>0&&(e+=" "),"raw"===n.joinType)e+=x(n.table,void 0,this.builder,this.client,this.bindingsHolder);else{e+=n.joinType+" join "+E(i,void 0,this.builder,this.client,this.bindingsHolder);let t=-1;for(;++t<n.clauses.length;){const r=n.clauses[t];e+=t>0?` ${r.bool} `:` ${"onUsing"===r.type?"using":"on"} `;const i=this[r.type](r);i&&(e+=i)}}}return e}onBetween(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(e,"between")+" "+e.value.map((e=>this.client.parameter(e,this.builder,this.bindingsHolder))).join(" and ")}onNull(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(e,"null")}onExists(e){return this._not(e,"exists")+" ("+C(e.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}onIn(e){if(Array.isArray(e.column))return this.multiOnIn(e);let t;return t=e.value instanceof i?this.client.parameter(e.value,this.builder,this.formatter):this.client.parameterize(e.value,void 0,this.builder,this.bindingsHolder),E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(e,"in ")+this.wrap(t)}multiOnIn(e){let t=-1,r=`(${b(e.column,this.builder,this.client,this.bindingsHolder)}) `;for(r+=this._not(e,"in ")+"((";++t<e.value.length;)0!==t&&(r+="),("),r+=this.client.parameterize(e.value[t],void 0,this.builder,this.bindingsHolder);return r+"))"}where(){const e=this.grouped.where;if(!e)return;const t=[];let r=-1;for(;++r<e.length;){const i=e[r];Object.prototype.hasOwnProperty.call(i,"value")&&n.containsUndefined(i.value)&&(this.undefinedBindingsInfo.push(i.column),this._undefinedInWhereClause=!0);const s=this[i.type](i);s&&(0===t.length?t[0]="where":t.push(i.bool),t.push(s))}return t.length>1?t.join(" "):""}group(){return this._groupsOrders("group")}order(){return this._groupsOrders("order")}having(){const e=this.grouped.having;if(!e)return"";const t=["having"];for(let r=0,n=e.length;r<n;r++){const n=e[r],i=this[n.type](n);i&&(0===t.length&&(t[0]="where"),(t.length>1||1===t.length&&"having"!==t[0])&&t.push(n.bool),t.push(i))}return t.length>1?t.join(" "):""}havingRaw(e){return this._not(e,"")+x(e.value,void 0,this.builder,this.client,this.bindingsHolder)}havingWrapped(e){const t=C(e.value,"where",this.builder,this.client,this.bindingsHolder);return t&&this._not(e,"")+"("+t.slice(6)+")"||""}havingBasic(e){return this._not(e,"")+E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+w(e.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(e.value,this.builder,this.bindingsHolder)}havingNull(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(e,"null")}havingExists(e){return this._not(e,"exists")+" ("+C(e.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}havingBetween(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(e,"between")+" "+e.value.map((e=>this.client.parameter(e,this.builder,this.bindingsHolder))).join(" and ")}havingIn(e){return Array.isArray(e.column)?this.multiHavingIn(e):E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(e,"in ")+this.wrap(this.client.parameterize(e.value,void 0,this.builder,this.bindingsHolder))}multiHavingIn(e){return this.multiOnIn(e)}union(){const e=this.onlyUnions(),t=this.grouped.union;if(!t)return"";let r="";for(let n=0,i=t.length;n<i;n++){const i=t[n];n>0&&(r+=" "),(n>0||!e)&&(r+=i.clause+" ");const s=C(i.value,void 0,this.builder,this.client,this.bindingsHolder);if(s){const e=i.wrap;e&&(r+="("),r+=s,e&&(r+=")")}}return r}onlyUnions(){return(!this.grouped.columns||!!this.grouped.columns[0].value)&&this.grouped.union&&!this.tableName}_getValueOrParameterFromAttribute(e,t){return!0===this.single.skipBinding[e]?null!=t?t:this.single[e]:this.client.parameter(this.single[e],this.builder,this.bindingsHolder)}onlyJson(){return!this.tableName&&this.grouped.columns&&1===this.grouped.columns.length&&"json"===this.grouped.columns[0].type}limit(){return!this.single.limit&&0!==this.single.limit?"":`limit ${this._getValueOrParameterFromAttribute("limit")}`}offset(){return this.single.offset?`offset ${this._getValueOrParameterFromAttribute("offset")}`:""}del(){const{tableName:e}=this,t=this.with(),r=this.where(),n=this.join();return t+`delete ${n?e+" ":""}from ${this.single.only?"only ":""}${e}`+(n?` ${n}`:"")+(r?` ${r}`:"")}truncate(){return`truncate ${this.tableName}`}lock(){if(this.single.lock)return this[this.single.lock]()}waitMode(){if(this.single.waitMode)return this[this.single.waitMode]()}skipLocked(){throw new Error(".skipLocked() is currently only supported on MySQL 8.0+ and PostgreSQL 9.5+")}noWait(){throw new Error(".noWait() is currently only supported on MySQL 8.0+, MariaDB 10.3.0+ and PostgreSQL 9.5+")}distinctOn(e){throw new Error(".distinctOn() is currently only supported on PostgreSQL")}onWrapped(e){const t=this,r=new o;e.value.call(r,r);let n="";for(let e=0;e<r.clauses.length;e++){const i=r.clauses[e];e>0&&(n+=` ${i.bool} `);const s=t[i.type](i);s&&(n+=s)}return n.length?`(${n})`:""}onBasic(e){const t=e.value instanceof s;return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+w(e.operator,this.builder,this.client,this.bindingsHolder)+" "+(t?"(":"")+E(e.value,void 0,this.builder,this.client,this.bindingsHolder)+(t?")":"")}onVal(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+w(e.operator,this.builder,this.client,this.bindingsHolder)+" "+this.client.parameter(e.value,this.builder,this.bindingsHolder)}onRaw(e){return x(e.value,void 0,this.builder,this.client,this.bindingsHolder)}onUsing(e){return"("+b(e.column,this.builder,this.client,this.bindingsHolder)+")"}_valueClause(e){return e.asColumn?E(e.value,void 0,this.builder,this.client,this.bindingsHolder):this.client.parameter(e.value,this.builder,this.bindingsHolder)}_columnClause(e){let t;return t=Array.isArray(e.column)?`(${b(e.column,this.builder,this.client,this.bindingsHolder)})`:E(e.column,void 0,this.builder,this.client,this.bindingsHolder),t}whereIn(e){const t=this.client.values(e.value,this.builder,this.bindingsHolder);return`${this._columnClause(e)} ${this._not(e,"in ")}${t}`}whereLike(e){return`${this._columnClause(e)} ${this._not(e,"like ")}${this._valueClause(e)}`}whereILike(e){return`${this._columnClause(e)} ${this._not(e,"ilike ")}${this._valueClause(e)}`}whereNull(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" is "+this._not(e,"null")}whereBasic(e){return this._not(e,"")+E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+w(e.operator,this.builder,this.client,this.bindingsHolder)+" "+this._valueClause(e)}whereExists(e){return this._not(e,"exists")+" ("+C(e.value,void 0,this.builder,this.client,this.bindingsHolder)+")"}whereWrapped(e){const t=C(e.value,"where",this.builder,this.client,this.bindingsHolder);return t&&this._not(e,"")+"("+t.slice(6)+")"||""}whereBetween(e){return E(e.column,void 0,this.builder,this.client,this.bindingsHolder)+" "+this._not(e,"between")+" "+e.value.map((e=>this.client.parameter(e,this.builder,this.bindingsHolder))).join(" and ")}whereRaw(e){return this._not(e,"")+x(e.value,void 0,this.builder,this.client,this.bindingsHolder)}_jsonWrapValue(e){if(!this.builder._isJsonObject(e))try{return JSON.stringify(JSON.parse(e.replace(/\n|\t/g,"")))}catch(t){return e}return JSON.stringify(e)}_jsonValueClause(e){return e.value=this._jsonWrapValue(e.value),this._valueClause(e)}whereJsonObject(e){return`${this._columnClause(e)} ${e.not?"!=":"="} ${this._jsonValueClause(e)}`}wrap(e){return"("!==e.charAt(0)?`(${e})`:e}json(e){return this[e.method](e.params)}analytic(e){let t="";const r=this;return t+=e.method+"() over (",e.raw?t+=e.raw:(e.partitions.length&&(t+="partition by ",t+=f(e.partitions,(function(e){return g(e)?r.formatter.columnize(e):r.formatter.columnize(e.column)+(e.order?" "+e.order:"")})).join(", ")+" "),t+="order by ",t+=f(e.order,(function(e){return g(e)?r.formatter.columnize(e):r.formatter.columnize(e.column)+(e.order?" "+e.order:"")})).join(", ")),t+=")",e.alias&&(t+=" as "+e.alias),t}with(){if(!this.grouped.with||!this.grouped.with.length)return"";const e=this.grouped.with;if(!e)return;const t=[];let r=-1,n=!1;for(;++r<e.length;){const i=e[r];i.recursive&&(n=!0);const s=this[i.type](i);t.push(s)}return`with ${n?"recursive ":""}${t.join(", ")} `}withWrapped(e){const t=C(e.value,void 0,this.builder,this.client,this.bindingsHolder),r=e.columnList?"("+b(e.columnList,this.builder,this.client,this.bindingsHolder)+")":"",n=void 0===e.materialized?"":e.materialized?"materialized ":"not materialized ";return t&&b(e.alias,this.builder,this.client,this.bindingsHolder)+r+" as "+n+"("+t+")"||""}_not(e,t){return e.not?`not ${t}`:t}_prepInsert(e){const t=C(e,void 0,this.builder,this.client,this.bindingsHolder);if(t)return t;let r=[];const n=[];Array.isArray(e)||(e=e?[e]:[]);let i=-1;for(;++i<e.length&&null!=e[i];){0===i&&(r=Object.keys(e[i]).sort());const t=new Array(r.length),s=Object.keys(e[i]);let o=-1;for(;++o<s.length;){const a=s[o];let u=r.indexOf(a);if(-1===u){r=r.concat(a).sort(),u=r.indexOf(a);let e=-1;for(;++e<n.length;)n[e].splice(u,0,void 0);t.splice(u,0,void 0)}t[u]=e[i][a]}n.push(t)}return{columns:r,values:n}}_prepUpdate(e={}){const{counter:t={}}=this.single;for(const r of Object.keys(t)){if(h(e,r)){this.client.logger.warn("increment/decrement called for a column that has already been specified in main .update() call. Ignoring increment/decrement and using value from .update() call.");continue}let n=t[r];const i=n<0?"-":"+";"-"===i&&(n=-n),e[r]=this.client.raw(`?? ${i} ?`,[r,n])}e=p(e,v);const r=[],n=Object.keys(e);let i=-1;for(;++i<n.length;)r.push(E(n[i],void 0,this.builder,this.client,this.bindingsHolder)+" = "+this.client.parameter(e[n[i]],this.builder,this.bindingsHolder));if(d(r))throw new Error(["Empty .update() call detected!","Update data does not contain any values to update.","This will result in a faulty query.",this.single.table?`Table: ${this.single.table}.`:"",this.single.update?`Columns: ${Object.keys(this.single.update)}.`:""].join(" "));return r}_formatGroupsItemValue(e,t){const{formatter:r}=this;let n,o="";return"last"===t?o=" is null":"first"===t&&(o=" is not null"),n=e instanceof i?x(e,void 0,this.builder,this.client,this.bindingsHolder):e instanceof s||t?"("+r.columnize(e)+o+")":r.columnize(e),n}_basicGroupOrder(e,t){return this._formatGroupsItemValue(e.value,e.nulls)+("order"===t&&"orderByRaw"!==e.type?` ${_(e.direction,this.builder,this.client,this.bindingsHolder)}`:"")}_groupOrder(e,t){return this._basicGroupOrder(e,t)}_groupOrderNulls(e,t){const r=this._formatGroupsItemValue(e.value),n="order"===t&&"orderByRaw"!==e.type?` ${_(e.direction,this.builder,this.client,this.bindingsHolder)}`:"";return!e.nulls||e.value instanceof i?r+n:`${r}${n||""} nulls ${e.nulls}`}_groupsOrders(e){const t=this.grouped[e];if(!t)return"";const r=t.map((t=>this._groupOrder(t,e)));return r.length?e+" by "+r.join(", "):""}get tableName(){if(!this._tableName){let e=this.single.table;const t=this.single.schema;if(e&&t){const r=e instanceof i,n="function"==typeof e;e instanceof s||r||n||(e=`${t}.${e}`)}this._tableName=e?E(e,e instanceof s,this.builder,this.client,this.bindingsHolder):""}return this._tableName}_jsonPathWrap(e){return this.client.parameter(e.path||e[1],this.builder,this.bindingsHolder)}_jsonExtract(e,t){let r;return r=Array.isArray(t.column)?t.column:[t],Array.isArray(e)||(e=[e]),r.map((t=>{let r=`${b(t.column||t[0],this.builder,this.client,this.bindingsHolder)}, ${this._jsonPathWrap(t)}`;e.forEach((e=>{r=e+"("+r+")"}));const n=t.alias||t[2];return n?this.client.alias(r,this.formatter.wrap(n)):r})).join(", ")}_jsonSet(e,t){const r=`${e}(${b(t.column,this.builder,this.client,this.bindingsHolder)}, ${this.client.parameter(t.path,this.builder,this.bindingsHolder)}, ${this.client.parameter(t.value,this.builder,this.bindingsHolder)})`;return t.alias?this.client.alias(r,this.formatter.wrap(t.alias)):r}_whereJsonPath(e,t){return`${e}(${this._columnClause(t)}, ${this._jsonPathWrap({path:t.jsonPath})}) ${w(t.operator,this.builder,this.client,this.bindingsHolder)} ${this._jsonValueClause(t)}`}_onJsonPathEquals(e,t){return e+"("+E(t.columnFirst,void 0,this.builder,this.client,this.bindingsHolder)+", "+this.client.parameter(t.jsonPathFirst,this.builder,this.bindingsHolder)+") = "+e+"("+E(t.columnSecond,void 0,this.builder,this.client,this.bindingsHolder)+", "+this.client.parameter(t.jsonPathSecond,this.builder,this.bindingsHolder)+")"}}},{"../formatter/wrappingFormatter":266,"../raw":280,"../util/helpers":292,"../util/is":293,"../util/nanoid":294,"./joinclause":276,"./querybuilder":278,debug:299,"lodash/assign":472,"lodash/compact":477,"lodash/groupBy":489,"lodash/has":490,"lodash/isEmpty":500,"lodash/map":515,"lodash/omitBy":520,"lodash/reduce":523}],280:[function(e,t,r){const{EventEmitter:n}=e("events"),i=e("debug"),s=e("lodash/assign"),o=e("lodash/isPlainObject"),a=e("lodash/reduce"),{replaceRawArrBindings:u,replaceKeyBindings:c}=e("./formatter/rawFormatter"),l=e("./util/helpers"),h=e("./util/save-async-stack"),{nanoid:d}=e("./util/nanoid"),{isNumber:f,isObject:p}=e("./util/is"),{augmentWithBuilderInterface:m}=e("./builder-interface-augmenter"),y=i("knex:bindings");class g extends n{constructor(e){super(),this.client=e,this.sql="",this.bindings=[],this._wrappedBefore=void 0,this._wrappedAfter=void 0,e&&e.config&&(this._debug=e.config.debug,h(this,4))}set(e,t){return this.sql=e,this.bindings=p(t)&&!t.toSQL||void 0===t?t:[t],this}timeout(e,{cancel:t}={}){return f(e)&&e>0&&(this._timeout=e,t&&(this.client.assertCanCancelQuery(),this._cancelOnTimeout=!0)),this}wrap(e,t){return this._wrappedBefore=e,this._wrappedAfter=t,this}toString(){return this.toQuery()}toSQL(e,t){let r;if(r=Array.isArray(this.bindings)?u(this,this.client):this.bindings&&o(this.bindings)?c(this,this.client):{method:"raw",sql:this.sql,bindings:void 0===this.bindings?[]:[this.bindings]},this._wrappedBefore&&(r.sql=this._wrappedBefore+r.sql),this._wrappedAfter&&(r.sql=r.sql+this._wrappedAfter),r.options=a(this._options,s,{}),this._timeout&&(r.timeout=this._timeout,this._cancelOnTimeout&&(r.cancelOnTimeout=this._cancelOnTimeout)),r.bindings=r.bindings||[],l.containsUndefined(r.bindings)){const e=l.getUndefinedIndices(this.bindings);throw y(r.bindings),new Error(`Undefined binding(s) detected for keys [${e}] when compiling RAW query: ${r.sql}`)}return r.__knexQueryUid=d(),Object.defineProperties(r,{toNative:{value:()=>({sql:this.client.positionBindings(r.sql),bindings:this.client.prepBindings(r.bindings)}),enumerable:!1}}),r}}g.prototype.isRawInstance=!0,m(g),l.addQueryContext(g),t.exports=g},{"./builder-interface-augmenter":179,"./formatter/rawFormatter":265,"./util/helpers":292,"./util/is":293,"./util/nanoid":294,"./util/save-async-stack":296,debug:299,events:void 0,"lodash/assign":472,"lodash/isPlainObject":507,"lodash/reduce":523}],281:[function(e,t,r){const n=e("./raw");t.exports=class extends n{constructor(e,t){super(e),this.ref=t,this._schema=null,this._alias=null}withSchema(e){return this._schema=e,this}as(e){return this._alias=e,this}toSQL(){const e=this._schema?`${this._schema}.${this.ref}`:this.ref,t=this.client.formatter(this),r=t.columnize(e),n=this._alias?`${r} as ${t.wrap(this._alias)}`:r;return this.set(n,[]),super.toSQL(...arguments)}}},{"./raw":280}],282:[function(e,t,r){const{EventEmitter:n}=e("events"),i=e("lodash/toArray"),s=e("lodash/assign"),{addQueryContext:o}=e("../util/helpers"),a=e("../util/save-async-stack"),{augmentWithBuilderInterface:u}=e("../builder-interface-augmenter");class c extends n{constructor(e){super(),this.client=e,this._sequence=[],e.config&&(this._debug=e.config.debug,a(this,4))}withSchema(e){return this._schema=e,this}toString(){return this.toQuery()}toSQL(){return this.client.schemaCompiler(this).toSQL()}async generateDdlCommands(){return await this.client.schemaCompiler(this).generateDdlCommands()}}["createTable","createTableIfNotExists","createTableLike","createView","createViewOrReplace","createMaterializedView","refreshMaterializedView","dropView","dropViewIfExists","dropMaterializedView","dropMaterializedViewIfExists","createSchema","createSchemaIfNotExists","dropSchema","dropSchemaIfExists","createExtension","createExtensionIfNotExists","dropExtension","dropExtensionIfExists","table","alterTable","view","alterView","hasTable","hasColumn","dropTable","renameTable","renameView","dropTableIfExists","raw"].forEach((function(e){c.prototype[e]=function(){return"createTableIfNotExists"===e&&this.client.logger.warn(["Use async .hasTable to check if table exists and then use plain .createTable. Since ",'.createTableIfNotExists actually just generates plain "CREATE TABLE IF NOT EXIST..." ',"query it will not work correctly if there are any alter table queries generated for ","columns afterwards. To not break old migrations this function is left untouched for now",", but it should not be used when writing new code and it is removed from documentation."].join("")),"table"===e&&(e="alterTable"),"view"===e&&(e="alterView"),this._sequence.push({method:e,args:i(arguments)}),this}})),c.extend=(e,t)=>{if(Object.prototype.hasOwnProperty.call(c.prototype,e))throw new Error(`Can't extend SchemaBuilder with existing method ('${e}').`);s(c.prototype,{[e]:t})},u(c),o(c),t.exports=c},{"../builder-interface-augmenter":179,"../util/helpers":292,"../util/save-async-stack":296,events:void 0,"lodash/assign":472,"lodash/toArray":529}],283:[function(e,t,r){const n=e("lodash/extend"),i=e("lodash/assign"),s=e("lodash/toArray"),{addQueryContext:o}=e("../util/helpers");class a{constructor(e,t,r,i){this.client=e,this._method="add",this._single={},this._modifiers={},this._statements=[],this._type=l[r]||r,this._args=i,this._tableBuilder=t,"alter"===t._method&&n(this,c)}references(e){return this._tableBuilder.foreign.call(this._tableBuilder,this._args[0],void 0,this)._columnBuilder(this).references(e)}}const u={default:"defaultTo",defaultsTo:"defaultTo"};["default","defaultsTo","defaultTo","unsigned","nullable","first","after","comment","collate","check","checkPositive","checkNegative","checkIn","checkNotIn","checkBetween","checkLength","checkRegex"].forEach((function(e){const t=u[e]||e;a.prototype[e]=function(){return this._modifiers[t]=s(arguments),this}})),o(a),a.prototype.notNull=a.prototype.notNullable=function(){return this.nullable(!1)},["index","primary","unique"].forEach((function(e){a.prototype[e]=function(){return-1===this._type.toLowerCase().indexOf("increments")&&this._tableBuilder[e].apply(this._tableBuilder,[this._args[0]].concat(s(arguments))),this}})),a.extend=(e,t)=>{if(Object.prototype.hasOwnProperty.call(a.prototype,e))throw new Error(`Can't extend ColumnBuilder with existing method ('${e}').`);i(a.prototype,{[e]:t})};const c={drop:function(){return this._single.drop=!0,this},alterType:function(e){return this._statements.push({grouping:"alterType",value:e}),this},alter:function({alterNullable:e=!0,alterType:t=!0}={}){return this._method="alter",this.alterNullable=e,this.alterType=t,this}},l={float:"floating",enum:"enu",boolean:"bool",string:"varchar",bigint:"bigInteger"};t.exports=a},{"../util/helpers":292,"lodash/assign":472,"lodash/extend":483,"lodash/toArray":529}],284:[function(e,t,r){const n=e("./internal/helpers"),i=e("lodash/groupBy"),s=e("lodash/first"),o=e("lodash/has"),a=e("lodash/tail"),{toNumber:u}=e("../util/helpers"),{formatDefault:c}=e("../formatter/formatterUtils"),{operator:l}=e("../formatter/wrappingFormatter");class h{constructor(e,t,r){this.client=e,this.tableCompiler=t,this.columnBuilder=r,this._commonBuilder=this.columnBuilder,this.args=r._args,this.type=r._type.toLowerCase(),this.grouped=i(r._statements,"grouping"),this.modified=r._modifiers,this.isIncrements=-1!==this.type.indexOf("increments"),this.formatter=e.formatter(r),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[],this.modifiers=[],this.checksCount=0}_addCheckModifiers(){this.modifiers.push("check","checkPositive","checkNegative","checkIn","checkNotIn","checkBetween","checkLength","checkRegex")}defaults(e){if(Object.prototype.hasOwnProperty.call(this._defaultMap,e))return this._defaultMap[e].bind(this)();throw new Error(`There is no default for the specified identifier ${e}`)}toSQL(){return this.pushQuery(this.compileColumn()),this.sequence.additional&&(this.sequence=this.sequence.concat(this.sequence.additional)),this.sequence}compileColumn(){return this.formatter.wrap(this.getColumnName())+" "+this.getColumnType()+this.getModifiers()}getColumnName(){return s(this.args)||this.defaults("columnName")}getColumnType(){if(!this._columnType){const e=this[this.type];this._columnType="function"==typeof e?e.apply(this,a(this.args)):e}return this._columnType}getModifiers(){const e=[];for(let t=0,r=this.modifiers.length;t<r;t++){const r=this.modifiers[t];if((!this.isIncrements||this.isIncrements&&"comment"===r)&&o(this.modified,r)){const t=this[r].apply(this,this.modified[r]);t&&e.push(t)}}return e.length>0?` ${e.join(" ")}`:""}varchar(e){return`varchar(${u(e,255)})`}floating(e,t){return`float(${u(e,8)}, ${u(t,2)})`}decimal(e,t){if(null===e)throw new Error("Specifying no precision on decimal columns is not supported for that SQL dialect.");return`decimal(${u(e,8)}, ${u(t,2)})`}specifictype(e){return e}nullable(e){return!1===e?"not null":"null"}notNullable(){return this.nullable(!1)}defaultTo(e){return`default ${c(e,this.type,this.client)}`}increments(e={primaryKey:!0}){return"integer not null"+(this.tableCompiler._canBeAddPrimaryKey(e)?" primary key":"")+" autoincrement"}bigincrements(e={primaryKey:!0}){return this.increments(e)}_pushAlterCheckQuery(e,t){let r=t;r||(this.checksCount++,r=this.tableCompiler.tableNameRaw+"_"+this.getColumnName()+"_"+this.checksCount),this.pushAdditional((function(){this.pushQuery(`alter table ${this.tableCompiler.tableName()} add constraint ${r} check(${e})`)}))}_checkConstraintName(e){return e?`constraint ${e} `:""}_check(e,t){return"alter"===this.columnBuilder._method?(this._pushAlterCheckQuery(e,t),""):`${this._checkConstraintName(t)}check (${e})`}checkPositive(e){return this._check(`${this.formatter.wrap(this.getColumnName())} ${l(">",this.columnBuilder,this.bindingsHolder)} 0`,e)}checkNegative(e){return this._check(`${this.formatter.wrap(this.getColumnName())} ${l("<",this.columnBuilder,this.bindingsHolder)} 0`,e)}_checkIn(e,t,r){return this._check(`${this.formatter.wrap(this.getColumnName())} ${r?"not ":""}in (${e.map((e=>this.client._escapeBinding(e))).join(",")})`,t)}checkIn(e,t){return this._checkIn(e,t)}checkNotIn(e,t){return this._checkIn(e,t,!0)}checkBetween(e,t){2!==e.length||Array.isArray(e[0])||Array.isArray(e[1])||(e=[e]);const r=e.map((e=>`${this.formatter.wrap(this.getColumnName())} between ${this.client._escapeBinding(e[0])} and ${this.client._escapeBinding(e[1])}`)).join(" or ");return this._check(r,t)}checkLength(e,t,r){return this._check(`length(${this.formatter.wrap(this.getColumnName())}) ${l(e,this.columnBuilder,this.bindingsHolder)} ${u(t)}`,r)}}h.prototype.binary="blob",h.prototype.bool="boolean",h.prototype.date="date",h.prototype.datetime="datetime",h.prototype.time="time",h.prototype.timestamp="timestamp",h.prototype.geometry="geometry",h.prototype.geography="geography",h.prototype.point="point",h.prototype.enu="varchar",h.prototype.bit=h.prototype.json="text",h.prototype.uuid=({useBinaryUuid:e=!1}={})=>e?"binary(16)":"char(36)",h.prototype.integer=h.prototype.smallint=h.prototype.mediumint="integer",h.prototype.biginteger="bigint",h.prototype.text="text",h.prototype.tinyint="tinyint",h.prototype.pushQuery=n.pushQuery,h.prototype.pushAdditional=n.pushAdditional,h.prototype.unshiftQuery=n.unshiftQuery,h.prototype._defaultMap={columnName:function(){if(!this.isIncrements)throw new Error(`You did not specify a column name for the ${this.type} column.`);return"id"}},t.exports=h},{"../formatter/formatterUtils":264,"../formatter/wrappingFormatter":266,"../util/helpers":292,"./internal/helpers":286,"lodash/first":485,"lodash/groupBy":489,"lodash/has":490,"lodash/tail":528}],285:[function(e,t,r){const{pushQuery:n,pushAdditional:i,unshiftQuery:s}=e("./internal/helpers");class o{constructor(e,t){this.builder=t,this._commonBuilder=this.builder,this.client=e,this.schema=t._schema,this.bindings=[],this.bindingsHolder=this,this.formatter=e.formatter(t),this.formatter.bindings=this.bindings,this.sequence=[]}createSchema(){h("createSchema")}createSchemaIfNotExists(){h("createSchemaIfNotExists")}dropSchema(){h("dropSchema")}dropSchemaIfExists(){h("dropSchemaIfExists")}dropTable(e){this.pushQuery(this.dropTablePrefix+this.formatter.wrap(l(this.schema,e)))}dropTableIfExists(e){this.pushQuery(this.dropTablePrefix+"if exists "+this.formatter.wrap(l(this.schema,e)))}dropView(e){this._dropView(e,!1,!1)}dropViewIfExists(e){this._dropView(e,!0,!1)}dropMaterializedView(e){throw new Error("materialized views are not supported by this dialect.")}dropMaterializedViewIfExists(e){throw new Error("materialized views are not supported by this dialect.")}renameView(e,t){throw new Error("rename view is not supported by this dialect (instead drop then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}_dropView(e,t,r){this.pushQuery((r?this.dropMaterializedViewPrefix:this.dropViewPrefix)+(t?"if exists ":"")+this.formatter.wrap(l(this.schema,e)))}raw(e,t){this.sequence.push(this.client.raw(e,t).toSQL())}toSQL(){const e=this.builder._sequence;for(let t=0,r=e.length;t<r;t++){const r=e[t];this[r.method].apply(this,r.args)}return this.sequence}async generateDdlCommands(){const e=this.toSQL();return{pre:[],sql:Array.isArray(e)?e:[e],check:null,post:[]}}}function a(e){const t=this.builder.queryContext();void 0!==t&&void 0===e.queryContext()&&e.queryContext(t),e.setSchema(this.schema);const r=e.toSQL();for(let e=0,t=r.length;e<t;e++)this.sequence.push(r[e])}function u(e){return"createLike"===e?function(t,r,n){const i=this.client.tableBuilder(e,t,r,n);a.call(this,i)}:function(t,r){const n=this.client.tableBuilder(e,t,null,r);a.call(this,n)}}function c(e){return function(t,r){const n=this.client.viewBuilder(e,t,r);a.call(this,n)}}function l(e,t){return e?`${e}.${t}`:t}function h(e){throw new Error(`${e} is not supported for this dialect (only PostgreSQL supports it currently).`)}o.prototype.dropTablePrefix="drop table ",o.prototype.dropViewPrefix="drop view ",o.prototype.dropMaterializedViewPrefix="drop materialized view ",o.prototype.alterViewPrefix="alter view ",o.prototype.alterTable=u("alter"),o.prototype.createTable=u("create"),o.prototype.createTableIfNotExists=u("createIfNot"),o.prototype.createTableLike=u("createLike"),o.prototype.createView=c("create"),o.prototype.createViewOrReplace=c("createOrReplace"),o.prototype.createMaterializedView=c("createMaterializedView"),o.prototype.alterView=c("alter"),o.prototype.pushQuery=n,o.prototype.pushAdditional=i,o.prototype.unshiftQuery=s,t.exports=o},{"./internal/helpers":286}],286:[function(e,t,r){const n=e("lodash/tail"),{isString:i}=e("../../util/is");t.exports={pushAdditional:function(e){const t=new this.constructor(this.client,this.tableCompiler,this.columnBuilder);e.call(t,n(arguments)),this.sequence.additional=(this.sequence.additional||[]).concat(t.sequence)},pushQuery:function(e){e&&(i(e)&&(e={sql:e}),e.bindings||(e.bindings=this.bindingsHolder.bindings),this.sequence.push(e),this.formatter=this.client.formatter(this._commonBuilder),this.bindings=[],this.formatter.bindings=this.bindings)},unshiftQuery:function(e){e&&(i(e)&&(e={sql:e}),e.bindings||(e.bindings=this.bindingsHolder.bindings),this.sequence.unshift(e),this.formatter=this.client.formatter(this._commonBuilder),this.bindings=[],this.formatter.bindings=this.bindings)}}},{"../../util/is":293,"lodash/tail":528}],287:[function(e,t,r){const n=e("lodash/each"),i=e("lodash/extend"),s=e("lodash/assign"),o=e("lodash/toArray"),a=e("../util/helpers"),{isString:u,isFunction:c,isObject:l}=e("../util/is");class h{constructor(e,t,r,n,i){if(this.client=e,this._fn=i,this._method=t,this._schemaName=void 0,this._tableName=r,this._tableNameLike=n,this._statements=[],this._single={},!n&&!c(this._fn))throw new TypeError("A callback function must be supplied to calls against `.createTable` and `.table`")}setSchema(e){this._schemaName=e}toSQL(){return"alter"===this._method&&i(this,d),this._fn&&this._fn.call(this,this),this.client.tableCompiler(this).toSQL()}timestamps(e,t,r){l(e)&&({useTimestamps:e,defaultToNow:t,useCamelCase:r}=e);const n=!0===e?"timestamp":"datetime",i=this[n](r?"createdAt":"created_at"),s=this[n](r?"updatedAt":"updated_at");if(!0===t){const e=this.client.raw("CURRENT_TIMESTAMP");i.notNullable().defaultTo(e),s.notNullable().defaultTo(e)}}comment(e){if("string"!=typeof e)throw new TypeError("Table comment must be string");this._single.comment=e}foreign(e,t){const r={column:e,keyName:t};this._statements.push({grouping:"alterTable",method:"foreign",args:[r]});let n={references(e){let t;return u(e)&&(t=e.split(".")),t&&1!==t.length?(r.inTable=t[0],r.references=t[1],n):(r.references=t?t[0]:e,{on(e){if("string"!=typeof e)throw new TypeError("Expected tableName to be a string, got: "+typeof e);return r.inTable=e,n},inTable(){return this.on.apply(this,arguments)}})},withKeyName:e=>(r.keyName=e,n),onUpdate:e=>(r.onUpdate=e,n),onDelete:e=>(r.onDelete=e,n),deferrable:e=>{if(-1!==["mysql","mssql","redshift","mysql2","oracledb"].indexOf(this.client.dialect))throw new Error(`${this.client.dialect} does not support deferrable`);return r.deferrable=e,n},_columnBuilder:e=>(i(e,n),n=e,e)};return n}check(e,t,r){return this._statements.push({grouping:"checks",args:[e,t,r]}),this}}["index","primary","unique","dropPrimary","dropUnique","dropIndex","dropForeign"].forEach((e=>{h.prototype[e]=function(){return this._statements.push({grouping:"alterTable",method:e,args:o(arguments)}),this}}));n({mysql:["engine","charset","collate"],postgresql:["inherits"]},(function(e,t){e.forEach((function(e){h.prototype[e]=function(r){if(this.client.dialect!==t)throw new Error(`Knex only supports ${e} statement with ${t}.`);if("alter"===this._method)throw new Error(`Knex does not support altering the ${e} outside of create table, please use knex.raw statement.`);this._single[e]=r}}))})),a.addQueryContext(h);["tinyint","smallint","mediumint","int","bigint","decimal","float","double","real","bit","boolean","serial","date","datetime","timestamp","time","year","geometry","geography","point","char","varchar","tinytext","tinyText","text","mediumtext","mediumText","longtext","longText","binary","varbinary","tinyblob","tinyBlob","mediumblob","mediumBlob","blob","longblob","longBlob","enum","set","bool","dateTime","increments","bigincrements","bigIncrements","integer","biginteger","bigInteger","string","json","jsonb","uuid","enu","specificType"].forEach((e=>{h.prototype[e]=function(){const t=o(arguments),r=this.client.columnBuilder(this,e,t);return this._statements.push({grouping:"columns",builder:r}),r}}));const d={renameColumn(e,t){return this._statements.push({grouping:"alterTable",method:"renameColumn",args:[e,t]}),this},dropTimestamps(){return this.dropColumns(!0===arguments[0]?["createdAt","updatedAt"]:["created_at","updated_at"])},setNullable(e){return this._statements.push({grouping:"alterTable",method:"setNullable",args:[e]}),this},check(e,t,r){this._statements.push({grouping:"alterTable",method:"check",args:[e,t,r]})},dropChecks(){this._statements.push({grouping:"alterTable",method:"dropChecks",args:o(arguments)})},dropNullable(e){return this._statements.push({grouping:"alterTable",method:"dropNullable",args:[e]}),this}};d.dropColumn=d.dropColumns=function(){return this._statements.push({grouping:"alterTable",method:"dropColumn",args:o(arguments)}),this},h.extend=(e,t)=>{if(Object.prototype.hasOwnProperty.call(h.prototype,e))throw new Error(`Can't extend TableBuilder with existing method ('${e}').`);s(h.prototype,{[e]:t})},t.exports=h},{"../util/helpers":292,"../util/is":293,"lodash/assign":472,"lodash/each":481,"lodash/extend":483,"lodash/toArray":529}],288:[function(e,t,r){const{pushAdditional:n,pushQuery:i,unshiftQuery:s}=e("./internal/helpers"),o=e("../util/helpers"),a=e("lodash/groupBy"),u=e("lodash/indexOf"),c=e("lodash/isEmpty"),l=e("lodash/tail"),{normalizeArr:h}=e("../util/helpers");class d{constructor(e,t){this.client=e,this.tableBuilder=t,this._commonBuilder=this.tableBuilder,this.method=t._method,this.schemaNameRaw=t._schemaName,this.tableNameRaw=t._tableName,this.tableNameLikeRaw=t._tableNameLike,this.single=t._single,this.grouped=a(t._statements,"grouping"),this.formatter=e.formatter(t),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[],this._formatting=e.config&&e.config.formatting,this.checksCount=0}toSQL(){return this[this.method](),this.sequence}create(e,t){const r=this.getColumns().map((e=>e.toSQL())),n=this.getColumnTypes(r);this.createAlterTableMethods&&this.alterTableForCreate(n),this.createQuery(n,e,t),this.columnQueries(r),delete this.single.comment,this.alterTable()}createIfNot(){this.create(!0)}createLike(){this.create(!1,!0)}createLikeIfNot(){this.create(!0,!0)}alter(){const e=this.getColumns().map((e=>e.toSQL())),t=this.getColumns("alter"),r=t.map((e=>e.toSQL())),n=this.getColumnTypes(e),i=this.getColumnTypes(r);this.addColumns(n),this.alterColumns(i,t),this.columnQueries(e),this.columnQueries(r),this.alterTable()}foreign(e){if(e.inTable&&e.references){const t=e.keyName?this.formatter.wrap(e.keyName):this._indexCommand("foreign",this.tableNameRaw,e.column),r=this.formatter.columnize(e.column),n=this.formatter.columnize(e.references),i=this.formatter.wrap(e.inTable),s=e.onUpdate?(this.lowerCase?" on update ":" ON UPDATE ")+e.onUpdate:"",o=e.onDelete?(this.lowerCase?" on delete ":" ON DELETE ")+e.onDelete:"",a=e.deferrable?this.lowerCase?` deferrable initially ${e.deferrable.toLowerCase()} `:` DEFERRABLE INITIALLY ${e.deferrable.toUpperCase()} `:"";this.lowerCase?this.pushQuery((this.forCreate?"":`alter table ${this.tableName()} add `)+"constraint "+t+" foreign key ("+r+") references "+i+" ("+n+")"+s+o+a):this.pushQuery((this.forCreate?"":`ALTER TABLE ${this.tableName()} ADD `)+"CONSTRAINT "+t+" FOREIGN KEY ("+r+") REFERENCES "+i+" ("+n+")"+s+o+a)}}getColumnTypes(e){return e.reduce((function(e,t){const r=t[0];return e.sql.push(r.sql),e.bindings.concat(r.bindings),e}),{sql:[],bindings:[]})}columnQueries(e){const t=e.reduce((function(e,t){const r=l(t);return c(r)?e:e.concat(r)}),[]);for(const e of t)this.pushQuery(e)}addColumns(e,t){if(t=t||this.addColumnsPrefix,e.sql.length>0){const r=e.sql.map((e=>t+e));this.pushQuery({sql:(this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+r.join(", "),bindings:e.bindings})}}alterColumns(e,t){e.sql.length>0&&this.addColumns(e,this.alterColumnsPrefix,t)}getColumns(e){const t=this.grouped.columns||[];e=e||"add";const r=this.tableBuilder.queryContext();return t.filter((t=>t.builder._method===e)).map((e=>(void 0!==r&&void 0===e.builder.queryContext()&&e.builder.queryContext(r),this.client.columnCompiler(this,e.builder))))}tableName(){const e=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameRaw}`:this.tableNameRaw;return this.formatter.wrap(e)}tableNameLike(){const e=this.schemaNameRaw?`${this.schemaNameRaw}.${this.tableNameLikeRaw}`:this.tableNameLikeRaw;return this.formatter.wrap(e)}alterTable(){const e=this.grouped.alterTable||[];for(let t=0,r=e.length;t<r;t++){const r=e[t];this[r.method]?this[r.method].apply(this,r.args):this.client.logger.error(`Debug: ${r.method} does not exist`)}for(const e in this.single)"function"==typeof this[e]&&this[e](this.single[e])}alterTableForCreate(e){this.forCreate=!0;const t=this.sequence,r=this.grouped.alterTable||[];this.grouped.alterTable=[];for(let t=0,n=r.length;t<n;t++){const n=r[t];u(this.createAlterTableMethods,n.method)<0?this.grouped.alterTable.push(n):this[n.method]?(this.sequence=[],this[n.method].apply(this,n.args),e.sql.push(this.sequence[0].sql)):this.client.logger.error(`Debug: ${n.method} does not exist`)}this.sequence=t,this.forCreate=!1}dropIndex(e){this.pushQuery(`drop index${e}`)}dropUnique(){throw new Error("Method implemented in the dialect driver")}dropForeign(){throw new Error("Method implemented in the dialect driver")}dropColumn(){const e=o.normalizeArr.apply(null,arguments),t=(Array.isArray(e)?e:[e]).map((e=>this.dropColumnPrefix+this.formatter.wrap(e)));this.pushQuery((this.lowerCase?"alter table ":"ALTER TABLE ")+this.tableName()+" "+t.join(", "))}_setNullableState(e,t){const r=this.tableName(),n=this.formatter.columnize(e),i=this.alterColumnsPrefix;return this.pushQuery({sql:"SELECT 1",output:()=>this.client.queryBuilder().from(this.tableNameRaw).columnInfo(e).then((e=>{if(c(e))throw new Error(`.setNullable: Column ${n} does not exist in table ${r}.`);const s=t?"null":"not null",o=e.type+(e.maxLength?`(${e.maxLength})`:""),a=null!==e.defaultValue&&void 0!==e.defaultValue?`default '${e.defaultValue}'`:"",u=`alter table ${r} ${i} ${n} ${o} ${s} ${a}`;return this.client.raw(u)}))})}setNullable(e){return this._setNullableState(e,!0)}dropNullable(e){return this._setNullableState(e,!1)}dropChecks(e){if(void 0===e)return"";e=h(e);const t=`alter table ${this.tableName()} ${e.map((e=>`drop constraint ${e}`)).join(", ")}`;this.pushQuery(t)}check(e,t,r){const n=this.tableName();let i=r;i||(this.checksCount++,i=n+"_"+this.checksCount);const s=`alter table ${n} add constraint ${i} check(${e})`;this.pushQuery(s)}_addChecks(){return this.grouped.checks?", "+this.grouped.checks.map((e=>`${e.args[2]?"constraint "+e.args[2]+" ":""}check (${this.client.raw(e.args[0],e.args[1])})`)).join(", "):""}_indexCommand(e,t,r){Array.isArray(r)||(r=r?[r]:[]);const n=(t.replace(/\.|-/g,"_")+"_"+r.join("_")+"_"+e).toLowerCase();return this.formatter.wrap(n)}_getPrimaryKeys(){return(this.grouped.alterTable||[]).filter((e=>"primary"===e.method)).flatMap((e=>e.args)).flat()}_canBeAddPrimaryKey(e){return e.primaryKey&&0===this._getPrimaryKeys().length}_getIncrementsColumnNames(){return this.grouped.columns.filter((e=>"increments"===e.builder._type)).map((e=>e.builder._args[0]))}}d.prototype.pushQuery=i,d.prototype.pushAdditional=n,d.prototype.unshiftQuery=s,d.prototype.lowerCase=!0,d.prototype.createAlterTableMethods=null,d.prototype.addColumnsPrefix="add column ",d.prototype.alterColumnsPrefix="alter column ",d.prototype.modifyColumnPrefix="modify column ",d.prototype.dropColumnPrefix="drop column ",t.exports=d},{"../util/helpers":292,"./internal/helpers":286,"lodash/groupBy":489,"lodash/indexOf":494,"lodash/isEmpty":500,"lodash/tail":528}],289:[function(e,t,r){const n=e("../util/helpers"),i=e("lodash/extend"),s=e("lodash/assign");class o{constructor(e,t,r,n){this.client=e,this._method=t,this._schemaName=void 0,this._columns=void 0,this._fn=n,this._viewName=r,this._statements=[],this._single={}}setSchema(e){this._schemaName=e}columns(e){this._columns=e}as(e){this._selectQuery=e}checkOption(){throw new Error("check option definition is not supported by this dialect.")}localCheckOption(){throw new Error("check option definition is not supported by this dialect.")}cascadedCheckOption(){throw new Error("check option definition is not supported by this dialect.")}toSQL(){return"alter"===this._method&&i(this,a),this._fn.call(this,this),this.client.viewCompiler(this).toSQL()}}const a={column(e){const t=this;return{rename:function(r){return t._statements.push({grouping:"alterView",method:"renameColumn",args:[e,r]}),this},defaultTo:function(r){return t._statements.push({grouping:"alterView",method:"defaultTo",args:[e,r]}),this}}}};n.addQueryContext(o),o.extend=(e,t)=>{if(Object.prototype.hasOwnProperty.call(o.prototype,e))throw new Error(`Can't extend ViewBuilder with existing method ('${e}').`);s(o.prototype,{[e]:t})},t.exports=o},{"../util/helpers":292,"lodash/assign":472,"lodash/extend":483}],290:[function(e,t,r){const{pushQuery:n}=e("./internal/helpers"),i=e("lodash/groupBy"),{columnize:s}=e("../formatter/wrappingFormatter");class o{constructor(e,t){this.client=e,this.viewBuilder=t,this._commonBuilder=this.viewBuilder,this.method=t._method,this.schemaNameRaw=t._schemaName,this.viewNameRaw=t._viewName,this.single=t._single,this.selectQuery=t._selectQuery,this.columns=t._columns,this.grouped=i(t._statements,"grouping"),this.formatter=e.formatter(t),this.bindings=[],this.formatter.bindings=this.bindings,this.bindingsHolder=this,this.sequence=[]}toSQL(){return this[this.method](),this.sequence}create(){this.createQuery(this.columns,this.selectQuery)}createOrReplace(){throw new Error("replace views is not supported by this dialect.")}createMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}createQuery(e,t,r,n){const i="create "+(r?"materialized ":"")+(n?"or replace ":"")+"view ",o=e?" ("+s(e,this.viewBuilder,this.client,this.bindingsHolder)+")":"";let a=i+this.viewName()+o;switch(a+=" as ",a+=t.toString(),this.single.checkOption){case"default_option":a+=" with check option";break;case"local":a+=" with local check option";break;case"cascaded":a+=" with cascaded check option"}this.pushQuery({sql:a})}renameView(e,t){throw new Error("rename view is not supported by this dialect (instead drop, then create another view).")}refreshMaterializedView(){throw new Error("materialized views are not supported by this dialect.")}alter(){this.alterView()}alterView(){const e=this.grouped.alterView||[];for(let t=0,r=e.length;t<r;t++){const r=e[t];this[r.method]?this[r.method].apply(this,r.args):this.client.logger.error(`Debug: ${r.method} does not exist`)}for(const e in this.single)"function"==typeof this[e]&&this[e](this.single[e])}renameColumn(e,t){throw new Error("rename column of views is not supported by this dialect.")}defaultTo(e,t){throw new Error("change default values of views is not supported by this dialect.")}viewName(){const e=this.schemaNameRaw?`${this.schemaNameRaw}.${this.viewNameRaw}`:this.viewNameRaw;return this.formatter.wrap(e)}}o.prototype.pushQuery=n,t.exports=o},{"../formatter/wrappingFormatter":266,"./internal/helpers":286,"lodash/groupBy":489}],291:[function(e,t,r){const n=e("./noop");t.exports=Promise.prototype.finally?e=>Object.assign(e,{finally(e){return this.then().finally(e)}}):n},{"./noop":295}],292:[function(e,t,r){const n=e("lodash/isPlainObject"),i=e("lodash/isTypedArray"),{CLIENT_ALIASES:s}=e("../constants"),{isFunction:o}=e("./is");function a(e){let t=!1;if(i(e))return!1;if(e&&o(e.toSQL))return t;if(Array.isArray(e))for(let r=0;r<e.length&&!t;r++)t=a(e[r]);else n(e)?Object.keys(e).forEach((r=>{t||(t=a(e[r]))})):t=void 0===e;return t}t.exports={addQueryContext:function(e){e.prototype.queryContext=function(e){return void 0===e?this._queryContext:(this._queryContext=e,this)}},containsUndefined:a,getUndefinedIndices:function(e){const t=[];return Array.isArray(e)?e.forEach(((e,r)=>{a(e)&&t.push(r)})):n(e)?Object.keys(e).forEach((r=>{a(e[r])&&t.push(r)})):t.push(0),t},normalizeArr:function(...e){return Array.isArray(e[0])?e[0]:e},resolveClientNameWithAliases:function(e){return s[e]||e},toNumber:function(e,t){if(null==e)return t;const r=parseInt(e,10);return isNaN(r)?t:r}}},{"../constants":181,"./is":293,"lodash/isPlainObject":507,"lodash/isTypedArray":511}],293:[function(e,t,r){t.exports={isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isUndefined:function(e){return void 0===e},isObject:function(e){return"object"==typeof e&&null!==e},isFunction:function(e){return"function"==typeof e}}},{}],294:[function(e,t,r){t.exports={nanoid:function(e=21){let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},nanonum:function(e=21){let t="",r=e;for(;r--;)t+="0123456789"[10*Math.random()|0];return t}}},{}],295:[function(e,t,r){t.exports=function(){}},{}],296:[function(e,t,r){t.exports=function(e,t){e.client.config.asyncStackTraces&&(e._asyncStack={error:new Error,lines:t})}},{}],297:[function(e,t,r){(function(e){const r=/[\0\b\t\n\r\x1a"'\\]/g,n={"\0":"\\0","\b":"\\b","\t":"\\t","\n":"\\n","\r":"\\r","":"\\Z",'"':'\\"',"'":"\\'","\\":"\\\\"};function i(e){return function t(r,n={}){return e(r,t,n)}}function s(e,t,r){return e&&"function"==typeof e.toSQL?e.toSQL(r):JSON.stringify(e)}function o(e,t,r){let n="";for(let i=0;i<e.length;i++){const s=e[i];Array.isArray(s)?n+=(0===i?"":", ")+"("+o(s,t,r)+")":n+=(0===i?"":", ")+t(s,r)}return n}function a(e){return"X"+u(e.toString("hex"))}function u(e,t,i){let s,o=r.lastIndex=0,a="";for(;s=r.exec(e);)a+=e.slice(o,s.index)+n[s[0]],o=r.lastIndex;return 0===o?"'"+e+"'":o<e.length?"'"+a+e.slice(o)+"'":"'"+a+"'"}function c(e,t,r={}){const n=r.timeZone||"local",i=new Date(e);let s,o,a,u,c,h,d;if("local"===n)s=i.getFullYear(),o=i.getMonth()+1,a=i.getDate(),u=i.getHours(),c=i.getMinutes(),h=i.getSeconds(),d=i.getMilliseconds();else{const e=function(e){if("Z"===e)return 0;const t=e.match(/([+\-\s])(\d\d):?(\d\d)?/);if(t)return("-"==t[1]?-1:1)*(parseInt(t[2],10)+(t[3]?parseInt(t[3],10):0)/60)*60;return!1}(n);!1!==e&&0!==e&&i.setTime(i.getTime()+6e4*e),s=i.getUTCFullYear(),o=i.getUTCMonth()+1,a=i.getUTCDate(),u=i.getUTCHours(),c=i.getUTCMinutes(),h=i.getUTCSeconds(),d=i.getUTCMilliseconds()}return l(s,4)+"-"+l(o,2)+"-"+l(a,2)+" "+l(u,2)+":"+l(c,2)+":"+l(h,2)+"."+l(d,3)}function l(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}t.exports={arrayToList:o,bufferToString:a,dateToString:c,escapeString:u,charsRegex:r,charsMap:n,escapeObject:s,makeEscape:function(t={}){const r=t.escapeDate||c,n=t.escapeArray||o,l=t.escapeBuffer||a,h=t.escapeString||u,d=t.escapeObject||s,f=t.wrap||i;function p(t,i,s){if(null==t)return"NULL";switch(typeof t){case"boolean":return t?"true":"false";case"number":return t+"";case"object":if(!(t instanceof Date))return Array.isArray(t)?n(t,i,s):e.isBuffer(t)?l(t,i,s):d(t,i,s);t=r(t,i,s)}return h(t,i,s)}return f?f(p):p}}}).call(this,{isBuffer:e("../../../../../../../../.npm-packages/lib/node_modules/browserify/node_modules/is-buffer/index.js")})},{"../../../../../../../../.npm-packages/lib/node_modules/browserify/node_modules/is-buffer/index.js":2}],298:[function(e,t,r){class n extends Error{constructor(e){super(e),this.name="KnexTimeoutError"}}t.exports.KnexTimeoutError=n,t.exports.timeout=function(e,t){return new Promise((function(r,i){const s=setTimeout((function(){i(new n("operation timed out"))}),t);e.then((function(e){clearTimeout(s),r(e)}),(function(e){clearTimeout(s),i(e)}))}))}},{}],299:[function(e,t,r){(function(n){r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){let e;try{e=r.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},r.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage=function(){try{return localStorage}catch(e){}}(),r.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(r);const{formatters:i}=t.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,e("_process"))},{"./common":300,_process:void 0}],300:[function(e,t,r){t.exports=function(t){function r(e){let t,i,s,o=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),s=i-(t||i);n.diff=s,n.prev=t,n.curr=i,t=i,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";o++;const s=r.formatters[i];if("function"==typeof s){const r=e[o];t=s.call(n,r),e.splice(o,1),o--}return t})),r.formatArgs.call(n,e);(n.log||r.log).apply(n,e)}return a.namespace=e,a.useColors=r.useColors(),a.color=r.selectColor(e),a.extend=n,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(i!==r.namespaces&&(i=r.namespaces,s=r.enabled(e)),s),set:e=>{o=e}}),"function"==typeof r.init&&r.init(a),a}function n(e,t){const n=r(this.namespace+(void 0===t?":":t)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},r.disable=function(){const e=[...r.names.map(i),...r.skips.map(i).map((e=>"-"+e))].join(",");return r.enable(""),e},r.enable=function(e){let t;r.save(e),r.namespaces=e,r.names=[],r.skips=[];const n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((e=>{r[e]=t[e]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},{ms:541}],301:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"DataView");t.exports=n},{"./_getNative":407,"./_root":453}],302:[function(e,t,r){var n=e("./_hashClear"),i=e("./_hashDelete"),s=e("./_hashGet"),o=e("./_hashHas"),a=e("./_hashSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},{"./_hashClear":416,"./_hashDelete":417,"./_hashGet":418,"./_hashHas":419,"./_hashSet":420}],303:[function(e,t,r){var n=e("./_listCacheClear"),i=e("./_listCacheDelete"),s=e("./_listCacheGet"),o=e("./_listCacheHas"),a=e("./_listCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},{"./_listCacheClear":433,"./_listCacheDelete":434,"./_listCacheGet":435,"./_listCacheHas":436,"./_listCacheSet":437}],304:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Map");t.exports=n},{"./_getNative":407,"./_root":453}],305:[function(e,t,r){var n=e("./_mapCacheClear"),i=e("./_mapCacheDelete"),s=e("./_mapCacheGet"),o=e("./_mapCacheHas"),a=e("./_mapCacheSet");function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=s,u.prototype.has=o,u.prototype.set=a,t.exports=u},{"./_mapCacheClear":438,"./_mapCacheDelete":439,"./_mapCacheGet":440,"./_mapCacheHas":441,"./_mapCacheSet":442}],306:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Promise");t.exports=n},{"./_getNative":407,"./_root":453}],307:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"Set");t.exports=n},{"./_getNative":407,"./_root":453}],308:[function(e,t,r){var n=e("./_MapCache"),i=e("./_setCacheAdd"),s=e("./_setCacheHas");function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=s,t.exports=o},{"./_MapCache":305,"./_setCacheAdd":455,"./_setCacheHas":456}],309:[function(e,t,r){var n=e("./_ListCache"),i=e("./_stackClear"),s=e("./_stackDelete"),o=e("./_stackGet"),a=e("./_stackHas"),u=e("./_stackSet");function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=u,t.exports=c},{"./_ListCache":303,"./_stackClear":460,"./_stackDelete":461,"./_stackGet":462,"./_stackHas":463,"./_stackSet":464}],310:[function(e,t,r){var n=e("./_root").Symbol;t.exports=n},{"./_root":453}],311:[function(e,t,r){var n=e("./_root").Uint8Array;t.exports=n},{"./_root":453}],312:[function(e,t,r){var n=e("./_getNative")(e("./_root"),"WeakMap");t.exports=n},{"./_getNative":407,"./_root":453}],313:[function(e,t,r){t.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},{}],314:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(n,o,r(o),e)}return n}},{}],315:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},{}],316:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}},{}],317:[function(e,t,r){var n=e("./_baseIndexOf");t.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},{"./_baseIndexOf":346}],318:[function(e,t,r){t.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},{}],319:[function(e,t,r){var n=e("./_baseTimes"),i=e("./isArguments"),s=e("./isArray"),o=e("./isBuffer"),a=e("./_isIndex"),u=e("./isTypedArray"),c=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=s(e),l=!r&&i(e),h=!r&&!l&&o(e),d=!r&&!l&&!h&&u(e),f=r||l||h||d,p=f?n(e.length,String):[],m=p.length;for(var y in e)!t&&!c.call(e,y)||f&&("length"==y||h&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,m))||p.push(y);return p}},{"./_baseTimes":373,"./_isIndex":425,"./isArguments":495,"./isArray":496,"./isBuffer":499,"./isTypedArray":511}],320:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},{}],321:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},{}],322:[function(e,t,r){t.exports=function(e,t,r,n){var i=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}},{}],323:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},{}],324:[function(e,t,r){t.exports=function(e){return e.split("")}},{}],325:[function(e,t,r){var n=e("./_baseAssignValue"),i=e("./eq");t.exports=function(e,t,r){(void 0!==r&&!i(e[t],r)||void 0===r&&!(t in e))&&n(e,t,r)}},{"./_baseAssignValue":331,"./eq":482}],326:[function(e,t,r){var n=e("./_baseAssignValue"),i=e("./eq"),s=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){var o=e[t];s.call(e,t)&&i(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},{"./_baseAssignValue":331,"./eq":482}],327:[function(e,t,r){var n=e("./eq");t.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},{"./eq":482}],328:[function(e,t,r){var n=e("./_baseEach");t.exports=function(e,t,r,i){return n(e,(function(e,n,s){t(i,e,r(e),s)})),i}},{"./_baseEach":335}],329:[function(e,t,r){var n=e("./_copyObject"),i=e("./keys");t.exports=function(e,t){return e&&n(t,i(t),e)}},{"./_copyObject":389,"./keys":512}],330:[function(e,t,r){var n=e("./_copyObject"),i=e("./keysIn");t.exports=function(e,t){return e&&n(t,i(t),e)}},{"./_copyObject":389,"./keysIn":513}],331:[function(e,t,r){var n=e("./_defineProperty");t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},{"./_defineProperty":398}],332:[function(e,t,r){var n=e("./_Stack"),i=e("./_arrayEach"),s=e("./_assignValue"),o=e("./_baseAssign"),a=e("./_baseAssignIn"),u=e("./_cloneBuffer"),c=e("./_copyArray"),l=e("./_copySymbols"),h=e("./_copySymbolsIn"),d=e("./_getAllKeys"),f=e("./_getAllKeysIn"),p=e("./_getTag"),m=e("./_initCloneArray"),y=e("./_initCloneByTag"),g=e("./_initCloneObject"),v=e("./isArray"),b=e("./isBuffer"),_=e("./isMap"),w=e("./isObject"),E=e("./isSet"),x=e("./keys"),C=e("./keysIn"),k="[object Arguments]",O="[object Function]",S="[object Object]",T={};T[k]=T["[object Array]"]=T["[object ArrayBuffer]"]=T["[object DataView]"]=T["[object Boolean]"]=T["[object Date]"]=T["[object Float32Array]"]=T["[object Float64Array]"]=T["[object Int8Array]"]=T["[object Int16Array]"]=T["[object Int32Array]"]=T["[object Map]"]=T["[object Number]"]=T[S]=T["[object RegExp]"]=T["[object Set]"]=T["[object String]"]=T["[object Symbol]"]=T["[object Uint8Array]"]=T["[object Uint8ClampedArray]"]=T["[object Uint16Array]"]=T["[object Uint32Array]"]=!0,T["[object Error]"]=T[O]=T["[object WeakMap]"]=!1,t.exports=function e(t,r,$,j,N,A){var I,P=1&r,R=2&r,q=4&r;if($&&(I=N?$(t,j,N,A):$(t)),void 0!==I)return I;if(!w(t))return t;var M=v(t);if(M){if(I=m(t),!P)return c(t,I)}else{var L=p(t),D=L==O||"[object GeneratorFunction]"==L;if(b(t))return u(t,P);if(L==S||L==k||D&&!N){if(I=R||D?{}:g(t),!P)return R?h(t,a(I,t)):l(t,o(I,t))}else{if(!T[L])return N?t:{};I=y(t,L,P)}}A||(A=new n);var F=A.get(t);if(F)return F;A.set(t,I),E(t)?t.forEach((function(n){I.add(e(n,r,$,n,t,A))})):_(t)&&t.forEach((function(n,i){I.set(i,e(n,r,$,i,t,A))}));var U=M?void 0:(q?R?f:d:R?C:x)(t);return i(U||t,(function(n,i){U&&(n=t[i=n]),s(I,i,e(n,r,$,i,t,A))})),I}},{"./_Stack":309,"./_arrayEach":315,"./_assignValue":326,"./_baseAssign":329,"./_baseAssignIn":330,"./_cloneBuffer":383,"./_copyArray":388,"./_copySymbols":390,"./_copySymbolsIn":391,"./_getAllKeys":403,"./_getAllKeysIn":404,"./_getTag":412,"./_initCloneArray":421,"./_initCloneByTag":422,"./_initCloneObject":423,"./isArray":496,"./isBuffer":499,"./isMap":503,"./isObject":505,"./isSet":508,"./keys":512,"./keysIn":513}],333:[function(e,t,r){var n=e("./isObject"),i=Object.create,s=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();t.exports=s},{"./isObject":505}],334:[function(e,t,r){t.exports=function(e,t,r){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,r)}),t)}},{}],335:[function(e,t,r){var n=e("./_baseForOwn"),i=e("./_createBaseEach")(n);t.exports=i},{"./_baseForOwn":340,"./_createBaseEach":395}],336:[function(e,t,r){var n=e("./_baseEach");t.exports=function(e,t){var r=[];return n(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}},{"./_baseEach":335}],337:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}},{}],338:[function(e,t,r){var n=e("./_arrayPush"),i=e("./_isFlattenable");t.exports=function e(t,r,s,o,a){var u=-1,c=t.length;for(s||(s=i),a||(a=[]);++u<c;){var l=t[u];r>0&&s(l)?r>1?e(l,r-1,s,o,a):n(a,l):o||(a[a.length]=l)}return a}},{"./_arrayPush":321,"./_isFlattenable":424}],339:[function(e,t,r){var n=e("./_createBaseFor")();t.exports=n},{"./_createBaseFor":396}],340:[function(e,t,r){var n=e("./_baseFor"),i=e("./keys");t.exports=function(e,t){return e&&n(e,t,i)}},{"./_baseFor":339,"./keys":512}],341:[function(e,t,r){var n=e("./_castPath"),i=e("./_toKey");t.exports=function(e,t){for(var r=0,s=(t=n(t,e)).length;null!=e&&r<s;)e=e[i(t[r++])];return r&&r==s?e:void 0}},{"./_castPath":381,"./_toKey":468}],342:[function(e,t,r){var n=e("./_arrayPush"),i=e("./isArray");t.exports=function(e,t,r){var s=t(e);return i(e)?s:n(s,r(e))}},{"./_arrayPush":321,"./isArray":496}],343:[function(e,t,r){var n=e("./_Symbol"),i=e("./_getRawTag"),s=e("./_objectToString"),o=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):s(e)}},{"./_Symbol":310,"./_getRawTag":409,"./_objectToString":450}],344:[function(e,t,r){var n=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&n.call(e,t)}},{}],345:[function(e,t,r){t.exports=function(e,t){return null!=e&&t in Object(e)}},{}],346:[function(e,t,r){var n=e("./_baseFindIndex"),i=e("./_baseIsNaN"),s=e("./_strictIndexOf");t.exports=function(e,t,r){return t==t?s(e,t,r):n(e,i,r)}},{"./_baseFindIndex":337,"./_baseIsNaN":352,"./_strictIndexOf":465}],347:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},{"./_baseGetTag":343,"./isObjectLike":506}],348:[function(e,t,r){var n=e("./_baseIsEqualDeep"),i=e("./isObjectLike");t.exports=function e(t,r,s,o,a){return t===r||(null==t||null==r||!i(t)&&!i(r)?t!=t&&r!=r:n(t,r,s,o,e,a))}},{"./_baseIsEqualDeep":349,"./isObjectLike":506}],349:[function(e,t,r){var n=e("./_Stack"),i=e("./_equalArrays"),s=e("./_equalByTag"),o=e("./_equalObjects"),a=e("./_getTag"),u=e("./isArray"),c=e("./isBuffer"),l=e("./isTypedArray"),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,m,y,g){var v=u(e),b=u(t),_=v?d:a(e),w=b?d:a(t),E=(_=_==h?f:_)==f,x=(w=w==h?f:w)==f,C=_==w;if(C&&c(e)){if(!c(t))return!1;v=!0,E=!1}if(C&&!E)return g||(g=new n),v||l(e)?i(e,t,r,m,y,g):s(e,t,_,r,m,y,g);if(!(1&r)){var k=E&&p.call(e,"__wrapped__"),O=x&&p.call(t,"__wrapped__");if(k||O){var S=k?e.value():e,T=O?t.value():t;return g||(g=new n),y(S,T,r,m,g)}}return!!C&&(g||(g=new n),o(e,t,r,m,y,g))}},{"./_Stack":309,"./_equalArrays":399,"./_equalByTag":400,"./_equalObjects":401,"./_getTag":412,"./isArray":496,"./isBuffer":499,"./isTypedArray":511}],350:[function(e,t,r){var n=e("./_getTag"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&"[object Map]"==n(e)}},{"./_getTag":412,"./isObjectLike":506}],351:[function(e,t,r){var n=e("./_Stack"),i=e("./_baseIsEqual");t.exports=function(e,t,r,s){var o=r.length,a=o,u=!s;if(null==e)return!a;for(e=Object(e);o--;){var c=r[o];if(u&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var l=(c=r[o])[0],h=e[l],d=c[1];if(u&&c[2]){if(void 0===h&&!(l in e))return!1}else{var f=new n;if(s)var p=s(h,d,l,e,t,f);if(!(void 0===p?i(d,h,3,s,f):p))return!1}}return!0}},{"./_Stack":309,"./_baseIsEqual":348}],352:[function(e,t,r){t.exports=function(e){return e!=e}},{}],353:[function(e,t,r){var n=e("./isFunction"),i=e("./_isMasked"),s=e("./isObject"),o=e("./_toSource"),a=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,d=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!s(e)||i(e))&&(n(e)?d:a).test(o(e))}},{"./_isMasked":429,"./_toSource":469,"./isFunction":501,"./isObject":505}],354:[function(e,t,r){var n=e("./_getTag"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&"[object Set]"==n(e)}},{"./_getTag":412,"./isObjectLike":506}],355:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./isLength"),s=e("./isObjectLike"),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(e){return s(e)&&i(e.length)&&!!o[n(e)]}},{"./_baseGetTag":343,"./isLength":502,"./isObjectLike":506}],356:[function(e,t,r){var n=e("./_baseMatches"),i=e("./_baseMatchesProperty"),s=e("./identity"),o=e("./isArray"),a=e("./property");t.exports=function(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?o(e)?i(e[0],e[1]):n(e):a(e)}},{"./_baseMatches":360,"./_baseMatchesProperty":361,"./identity":493,"./isArray":496,"./property":522}],357:[function(e,t,r){var n=e("./_isPrototype"),i=e("./_nativeKeys"),s=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))s.call(e,r)&&"constructor"!=r&&t.push(r);return t}},{"./_isPrototype":430,"./_nativeKeys":447}],358:[function(e,t,r){var n=e("./isObject"),i=e("./_isPrototype"),s=e("./_nativeKeysIn"),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return s(e);var t=i(e),r=[];for(var a in e)("constructor"!=a||!t&&o.call(e,a))&&r.push(a);return r}},{"./_isPrototype":430,"./_nativeKeysIn":448,"./isObject":505}],359:[function(e,t,r){var n=e("./_baseEach"),i=e("./isArrayLike");t.exports=function(e,t){var r=-1,s=i(e)?Array(e.length):[];return n(e,(function(e,n,i){s[++r]=t(e,n,i)})),s}},{"./_baseEach":335,"./isArrayLike":497}],360:[function(e,t,r){var n=e("./_baseIsMatch"),i=e("./_getMatchData"),s=e("./_matchesStrictComparable");t.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},{"./_baseIsMatch":351,"./_getMatchData":406,"./_matchesStrictComparable":444}],361:[function(e,t,r){var n=e("./_baseIsEqual"),i=e("./get"),s=e("./hasIn"),o=e("./_isKey"),a=e("./_isStrictComparable"),u=e("./_matchesStrictComparable"),c=e("./_toKey");t.exports=function(e,t){return o(e)&&a(t)?u(c(e),t):function(r){var o=i(r,e);return void 0===o&&o===t?s(r,e):n(t,o,3)}}},{"./_baseIsEqual":348,"./_isKey":427,"./_isStrictComparable":431,"./_matchesStrictComparable":444,"./_toKey":468,"./get":488,"./hasIn":491}],362:[function(e,t,r){var n=e("./_Stack"),i=e("./_assignMergeValue"),s=e("./_baseFor"),o=e("./_baseMergeDeep"),a=e("./isObject"),u=e("./keysIn"),c=e("./_safeGet");t.exports=function e(t,r,l,h,d){t!==r&&s(r,(function(s,u){if(d||(d=new n),a(s))o(t,r,u,l,e,h,d);else{var f=h?h(c(t,u),s,u+"",t,r,d):void 0;void 0===f&&(f=s),i(t,u,f)}}),u)}},{"./_Stack":309,"./_assignMergeValue":325,"./_baseFor":339,"./_baseMergeDeep":363,"./_safeGet":454,"./isObject":505,"./keysIn":513}],363:[function(e,t,r){var n=e("./_assignMergeValue"),i=e("./_cloneBuffer"),s=e("./_cloneTypedArray"),o=e("./_copyArray"),a=e("./_initCloneObject"),u=e("./isArguments"),c=e("./isArray"),l=e("./isArrayLikeObject"),h=e("./isBuffer"),d=e("./isFunction"),f=e("./isObject"),p=e("./isPlainObject"),m=e("./isTypedArray"),y=e("./_safeGet"),g=e("./toPlainObject");t.exports=function(e,t,r,v,b,_,w){var E=y(e,r),x=y(t,r),C=w.get(x);if(C)n(e,r,C);else{var k=_?_(E,x,r+"",e,t,w):void 0,O=void 0===k;if(O){var S=c(x),T=!S&&h(x),$=!S&&!T&&m(x);k=x,S||T||$?c(E)?k=E:l(E)?k=o(E):T?(O=!1,k=i(x,!0)):$?(O=!1,k=s(x,!0)):k=[]:p(x)||u(x)?(k=E,u(E)?k=g(E):f(E)&&!d(E)||(k=a(x))):O=!1}O&&(w.set(x,k),b(k,x,v,_,w),w.delete(x)),n(e,r,k)}}},{"./_assignMergeValue":325,"./_cloneBuffer":383,"./_cloneTypedArray":387,"./_copyArray":388,"./_initCloneObject":423,"./_safeGet":454,"./isArguments":495,"./isArray":496,"./isArrayLikeObject":498,"./isBuffer":499,"./isFunction":501,"./isObject":505,"./isPlainObject":507,"./isTypedArray":511,"./toPlainObject":533}],364:[function(e,t,r){var n=e("./_baseGet"),i=e("./_baseSet"),s=e("./_castPath");t.exports=function(e,t,r){for(var o=-1,a=t.length,u={};++o<a;){var c=t[o],l=n(e,c);r(l,c)&&i(u,s(c,e),l)}return u}},{"./_baseGet":341,"./_baseSet":369,"./_castPath":381}],365:[function(e,t,r){t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},{}],366:[function(e,t,r){var n=e("./_baseGet");t.exports=function(e){return function(t){return n(t,e)}}},{"./_baseGet":341}],367:[function(e,t,r){t.exports=function(e,t,r,n,i){return i(e,(function(e,i,s){r=n?(n=!1,e):t(r,e,i,s)})),r}},{}],368:[function(e,t,r){var n=e("./identity"),i=e("./_overRest"),s=e("./_setToString");t.exports=function(e,t){return s(i(e,t,n),e+"")}},{"./_overRest":452,"./_setToString":458,"./identity":493}],369:[function(e,t,r){var n=e("./_assignValue"),i=e("./_castPath"),s=e("./_isIndex"),o=e("./isObject"),a=e("./_toKey");t.exports=function(e,t,r,u){if(!o(e))return e;for(var c=-1,l=(t=i(t,e)).length,h=l-1,d=e;null!=d&&++c<l;){var f=a(t[c]),p=r;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(c!=h){var m=d[f];void 0===(p=u?u(m,f,d):void 0)&&(p=o(m)?m:s(t[c+1])?[]:{})}n(d,f,p),d=d[f]}return e}},{"./_assignValue":326,"./_castPath":381,"./_isIndex":425,"./_toKey":468,"./isObject":505}],370:[function(e,t,r){var n=e("./constant"),i=e("./_defineProperty"),s=e("./identity"),o=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:s;t.exports=o},{"./_defineProperty":398,"./constant":478,"./identity":493}],371:[function(e,t,r){t.exports=function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}},{}],372:[function(e,t,r){var n=e("./_baseEach");t.exports=function(e,t){var r;return n(e,(function(e,n,i){return!(r=t(e,n,i))})),!!r}},{"./_baseEach":335}],373:[function(e,t,r){t.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},{}],374:[function(e,t,r){var n=e("./_Symbol"),i=e("./_arrayMap"),s=e("./isArray"),o=e("./isSymbol"),a=n?n.prototype:void 0,u=a?a.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(s(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-Infinity?"-0":r}},{"./_Symbol":310,"./_arrayMap":320,"./isArray":496,"./isSymbol":510}],375:[function(e,t,r){var n=e("./_trimmedEndIndex"),i=/^\s+/;t.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},{"./_trimmedEndIndex":470}],376:[function(e,t,r){t.exports=function(e){return function(t){return e(t)}}},{}],377:[function(e,t,r){var n=e("./_SetCache"),i=e("./_arrayIncludes"),s=e("./_arrayIncludesWith"),o=e("./_cacheHas"),a=e("./_createSet"),u=e("./_setToArray");t.exports=function(e,t,r){var c=-1,l=i,h=e.length,d=!0,f=[],p=f;if(r)d=!1,l=s;else if(h>=200){var m=t?null:a(e);if(m)return u(m);d=!1,l=o,p=new n}else p=t?[]:f;e:for(;++c<h;){var y=e[c],g=t?t(y):y;if(y=r||0!==y?y:0,d&&g==g){for(var v=p.length;v--;)if(p[v]===g)continue e;t&&p.push(g),f.push(y)}else l(p,g,r)||(p!==f&&p.push(g),f.push(y))}return f}},{"./_SetCache":308,"./_arrayIncludes":317,"./_arrayIncludesWith":318,"./_cacheHas":379,"./_createSet":397,"./_setToArray":457}],378:[function(e,t,r){var n=e("./_arrayMap");t.exports=function(e,t){return n(t,(function(t){return e[t]}))}},{"./_arrayMap":320}],379:[function(e,t,r){t.exports=function(e,t){return e.has(t)}},{}],380:[function(e,t,r){var n=e("./identity");t.exports=function(e){return"function"==typeof e?e:n}},{"./identity":493}],381:[function(e,t,r){var n=e("./isArray"),i=e("./_isKey"),s=e("./_stringToPath"),o=e("./toString");t.exports=function(e,t){return n(e)?e:i(e,t)?[e]:s(o(e))}},{"./_isKey":427,"./_stringToPath":467,"./isArray":496,"./toString":534}],382:[function(e,t,r){var n=e("./_Uint8Array");t.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},{"./_Uint8Array":311}],383:[function(e,t,r){var n=e("./_root"),i="object"==typeof r&&r&&!r.nodeType&&r,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i?n.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var r=e.length,n=a?a(r):new e.constructor(r);return e.copy(n),n}},{"./_root":453}],384:[function(e,t,r){var n=e("./_cloneArrayBuffer");t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},{"./_cloneArrayBuffer":382}],385:[function(e,t,r){var n=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},{}],386:[function(e,t,r){var n=e("./_Symbol"),i=n?n.prototype:void 0,s=i?i.valueOf:void 0;t.exports=function(e){return s?Object(s.call(e)):{}}},{"./_Symbol":310}],387:[function(e,t,r){var n=e("./_cloneArrayBuffer");t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},{"./_cloneArrayBuffer":382}],388:[function(e,t,r){t.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},{}],389:[function(e,t,r){var n=e("./_assignValue"),i=e("./_baseAssignValue");t.exports=function(e,t,r,s){var o=!r;r||(r={});for(var a=-1,u=t.length;++a<u;){var c=t[a],l=s?s(r[c],e[c],c,r,e):void 0;void 0===l&&(l=e[c]),o?i(r,c,l):n(r,c,l)}return r}},{"./_assignValue":326,"./_baseAssignValue":331}],390:[function(e,t,r){var n=e("./_copyObject"),i=e("./_getSymbols");t.exports=function(e,t){return n(e,i(e),t)}},{"./_copyObject":389,"./_getSymbols":410}],391:[function(e,t,r){var n=e("./_copyObject"),i=e("./_getSymbolsIn");t.exports=function(e,t){return n(e,i(e),t)}},{"./_copyObject":389,"./_getSymbolsIn":411}],392:[function(e,t,r){var n=e("./_root")["__core-js_shared__"];t.exports=n},{"./_root":453}],393:[function(e,t,r){var n=e("./_arrayAggregator"),i=e("./_baseAggregator"),s=e("./_baseIteratee"),o=e("./isArray");t.exports=function(e,t){return function(r,a){var u=o(r)?n:i,c=t?t():{};return u(r,e,s(a,2),c)}}},{"./_arrayAggregator":314,"./_baseAggregator":328,"./_baseIteratee":356,"./isArray":496}],394:[function(e,t,r){var n=e("./_baseRest"),i=e("./_isIterateeCall");t.exports=function(e){return n((function(t,r){var n=-1,s=r.length,o=s>1?r[s-1]:void 0,a=s>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(s--,o):void 0,a&&i(r[0],r[1],a)&&(o=s<3?void 0:o,s=1),t=Object(t);++n<s;){var u=r[n];u&&e(t,u,n,o)}return t}))}},{"./_baseRest":368,"./_isIterateeCall":426}],395:[function(e,t,r){var n=e("./isArrayLike");t.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var s=r.length,o=t?s:-1,a=Object(r);(t?o--:++o<s)&&!1!==i(a[o],o,a););return r}}},{"./isArrayLike":497}],396:[function(e,t,r){t.exports=function(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),a=o.length;a--;){var u=o[e?a:++i];if(!1===r(s[u],u,s))break}return t}}},{}],397:[function(e,t,r){var n=e("./_Set"),i=e("./noop"),s=e("./_setToArray"),o=n&&1/s(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i;t.exports=o},{"./_Set":307,"./_setToArray":457,"./noop":519}],398:[function(e,t,r){var n=e("./_getNative"),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.exports=i},{"./_getNative":407}],399:[function(e,t,r){var n=e("./_SetCache"),i=e("./_arraySome"),s=e("./_cacheHas");t.exports=function(e,t,r,o,a,u){var c=1&r,l=e.length,h=t.length;if(l!=h&&!(c&&h>l))return!1;var d=u.get(e),f=u.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,y=2&r?new n:void 0;for(u.set(e,t),u.set(t,e);++p<l;){var g=e[p],v=t[p];if(o)var b=c?o(v,g,p,t,e,u):o(g,v,p,e,t,u);if(void 0!==b){if(b)continue;m=!1;break}if(y){if(!i(t,(function(e,t){if(!s(y,t)&&(g===e||a(g,e,r,o,u)))return y.push(t)}))){m=!1;break}}else if(g!==v&&!a(g,v,r,o,u)){m=!1;break}}return u.delete(e),u.delete(t),m}},{"./_SetCache":308,"./_arraySome":323,"./_cacheHas":379}],400:[function(e,t,r){var n=e("./_Symbol"),i=e("./_Uint8Array"),s=e("./eq"),o=e("./_equalArrays"),a=e("./_mapToArray"),u=e("./_setToArray"),c=n?n.prototype:void 0,l=c?c.valueOf:void 0;t.exports=function(e,t,r,n,c,h,d){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&n;if(f||(f=u),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;n|=2,d.set(e,t);var y=o(f(e),f(t),n,c,h,d);return d.delete(e),y;case"[object Symbol]":if(l)return l.call(e)==l.call(t)}return!1}},{"./_Symbol":310,"./_Uint8Array":311,"./_equalArrays":399,"./_mapToArray":443,"./_setToArray":457,"./eq":482}],401:[function(e,t,r){var n=e("./_getAllKeys"),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,s,o,a){var u=1&r,c=n(e),l=c.length;if(l!=n(t).length&&!u)return!1;for(var h=l;h--;){var d=c[h];if(!(u?d in t:i.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var y=u;++h<l;){var g=e[d=c[h]],v=t[d];if(s)var b=u?s(v,g,d,t,e,a):s(g,v,d,e,t,a);if(!(void 0===b?g===v||o(g,v,r,s,a):b)){m=!1;break}y||(y="constructor"==d)}if(m&&!y){var _=e.constructor,w=t.constructor;_==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof w&&w instanceof w||(m=!1)}return a.delete(e),a.delete(t),m}},{"./_getAllKeys":403}],402:[function(e,t,r){(function(e){var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],403:[function(e,t,r){var n=e("./_baseGetAllKeys"),i=e("./_getSymbols"),s=e("./keys");t.exports=function(e){return n(e,s,i)}},{"./_baseGetAllKeys":342,"./_getSymbols":410,"./keys":512}],404:[function(e,t,r){var n=e("./_baseGetAllKeys"),i=e("./_getSymbolsIn"),s=e("./keysIn");t.exports=function(e){return n(e,s,i)}},{"./_baseGetAllKeys":342,"./_getSymbolsIn":411,"./keysIn":513}],405:[function(e,t,r){var n=e("./_isKeyable");t.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},{"./_isKeyable":428}],406:[function(e,t,r){var n=e("./_isStrictComparable"),i=e("./keys");t.exports=function(e){for(var t=i(e),r=t.length;r--;){var s=t[r],o=e[s];t[r]=[s,o,n(o)]}return t}},{"./_isStrictComparable":431,"./keys":512}],407:[function(e,t,r){var n=e("./_baseIsNative"),i=e("./_getValue");t.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},{"./_baseIsNative":353,"./_getValue":413}],408:[function(e,t,r){var n=e("./_overArg")(Object.getPrototypeOf,Object);t.exports=n},{"./_overArg":451}],409:[function(e,t,r){var n=e("./_Symbol"),i=Object.prototype,s=i.hasOwnProperty,o=i.toString,a=n?n.toStringTag:void 0;t.exports=function(e){var t=s.call(e,a),r=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[a]=r:delete e[a]),i}},{"./_Symbol":310}],410:[function(e,t,r){var n=e("./_arrayFilter"),i=e("./stubArray"),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(e){return null==e?[]:(e=Object(e),n(o(e),(function(t){return s.call(e,t)})))}:i;t.exports=a},{"./_arrayFilter":316,"./stubArray":526}],411:[function(e,t,r){var n=e("./_arrayPush"),i=e("./_getPrototype"),s=e("./_getSymbols"),o=e("./stubArray"),a=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,s(e)),e=i(e);return t}:o;t.exports=a},{"./_arrayPush":321,"./_getPrototype":408,"./_getSymbols":410,"./stubArray":526}],412:[function(e,t,r){var n=e("./_DataView"),i=e("./_Map"),s=e("./_Promise"),o=e("./_Set"),a=e("./_WeakMap"),u=e("./_baseGetTag"),c=e("./_toSource"),l="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(n),y=c(i),g=c(s),v=c(o),b=c(a),_=u;(n&&_(new n(new ArrayBuffer(1)))!=p||i&&_(new i)!=l||s&&_(s.resolve())!=h||o&&_(new o)!=d||a&&_(new a)!=f)&&(_=function(e){var t=u(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case m:return p;case y:return l;case g:return h;case v:return d;case b:return f}return t}),t.exports=_},{"./_DataView":301,"./_Map":304,"./_Promise":306,"./_Set":307,"./_WeakMap":312,"./_baseGetTag":343,"./_toSource":469}],413:[function(e,t,r){t.exports=function(e,t){return null==e?void 0:e[t]}},{}],414:[function(e,t,r){var n=e("./_castPath"),i=e("./isArguments"),s=e("./isArray"),o=e("./_isIndex"),a=e("./isLength"),u=e("./_toKey");t.exports=function(e,t,r){for(var c=-1,l=(t=n(t,e)).length,h=!1;++c<l;){var d=u(t[c]);if(!(h=null!=e&&r(e,d)))break;e=e[d]}return h||++c!=l?h:!!(l=null==e?0:e.length)&&a(l)&&o(d,l)&&(s(e)||i(e))}},{"./_castPath":381,"./_isIndex":425,"./_toKey":468,"./isArguments":495,"./isArray":496,"./isLength":502}],415:[function(e,t,r){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return n.test(e)}},{}],416:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(){this.__data__=n?n(null):{},this.size=0}},{"./_nativeCreate":446}],417:[function(e,t,r){t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},{}],418:[function(e,t,r){var n=e("./_nativeCreate"),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},{"./_nativeCreate":446}],419:[function(e,t,r){var n=e("./_nativeCreate"),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},{"./_nativeCreate":446}],420:[function(e,t,r){var n=e("./_nativeCreate");t.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},{"./_nativeCreate":446}],421:[function(e,t,r){var n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},{}],422:[function(e,t,r){var n=e("./_cloneArrayBuffer"),i=e("./_cloneDataView"),s=e("./_cloneRegExp"),o=e("./_cloneSymbol"),a=e("./_cloneTypedArray");t.exports=function(e,t,r){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(e,r);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return s(e);case"[object Symbol]":return o(e)}}},{"./_cloneArrayBuffer":382,"./_cloneDataView":384,"./_cloneRegExp":385,"./_cloneSymbol":386,"./_cloneTypedArray":387}],423:[function(e,t,r){var n=e("./_baseCreate"),i=e("./_getPrototype"),s=e("./_isPrototype");t.exports=function(e){return"function"!=typeof e.constructor||s(e)?{}:n(i(e))}},{"./_baseCreate":333,"./_getPrototype":408,"./_isPrototype":430}],424:[function(e,t,r){var n=e("./_Symbol"),i=e("./isArguments"),s=e("./isArray"),o=n?n.isConcatSpreadable:void 0;t.exports=function(e){return s(e)||i(e)||!!(o&&e&&e[o])}},{"./_Symbol":310,"./isArguments":495,"./isArray":496}],425:[function(e,t,r){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},{}],426:[function(e,t,r){var n=e("./eq"),i=e("./isArrayLike"),s=e("./_isIndex"),o=e("./isObject");t.exports=function(e,t,r){if(!o(r))return!1;var a=typeof t;return!!("number"==a?i(r)&&s(t,r.length):"string"==a&&t in r)&&n(r[t],e)}},{"./_isIndex":425,"./eq":482,"./isArrayLike":497,"./isObject":505}],427:[function(e,t,r){var n=e("./isArray"),i=e("./isSymbol"),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!i(e))||(o.test(e)||!s.test(e)||null!=t&&e in Object(t))}},{"./isArray":496,"./isSymbol":510}],428:[function(e,t,r){t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},{}],429:[function(e,t,r){var n,i=e("./_coreJsData"),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(e){return!!s&&s in e}},{"./_coreJsData":392}],430:[function(e,t,r){var n=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},{}],431:[function(e,t,r){var n=e("./isObject");t.exports=function(e){return e==e&&!n(e)}},{"./isObject":505}],432:[function(e,t,r){t.exports=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}},{}],433:[function(e,t,r){t.exports=function(){this.__data__=[],this.size=0}},{}],434:[function(e,t,r){var n=e("./_assocIndexOf"),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},{"./_assocIndexOf":327}],435:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},{"./_assocIndexOf":327}],436:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e){return n(this.__data__,e)>-1}},{"./_assocIndexOf":327}],437:[function(e,t,r){var n=e("./_assocIndexOf");t.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},{"./_assocIndexOf":327}],438:[function(e,t,r){var n=e("./_Hash"),i=e("./_ListCache"),s=e("./_Map");t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},{"./_Hash":302,"./_ListCache":303,"./_Map":304}],439:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},{"./_getMapData":405}],440:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).get(e)}},{"./_getMapData":405}],441:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e){return n(this,e).has(e)}},{"./_getMapData":405}],442:[function(e,t,r){var n=e("./_getMapData");t.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},{"./_getMapData":405}],443:[function(e,t,r){t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}},{}],444:[function(e,t,r){t.exports=function(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}},{}],445:[function(e,t,r){var n=e("./memoize");t.exports=function(e){var t=n(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}},{"./memoize":516}],446:[function(e,t,r){var n=e("./_getNative")(Object,"create");t.exports=n},{"./_getNative":407}],447:[function(e,t,r){var n=e("./_overArg")(Object.keys,Object);t.exports=n},{"./_overArg":451}],448:[function(e,t,r){t.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},{}],449:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof r&&r&&!r.nodeType&&r,s=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=s&&s.exports===i&&n.process,a=function(){try{var e=s&&s.require&&s.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=a},{"./_freeGlobal":402}],450:[function(e,t,r){var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},{}],451:[function(e,t,r){t.exports=function(e,t){return function(r){return e(t(r))}}},{}],452:[function(e,t,r){var n=e("./_apply"),i=Math.max;t.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var s=arguments,o=-1,a=i(s.length-t,0),u=Array(a);++o<a;)u[o]=s[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=s[o];return c[t]=r(u),n(e,this,c)}}},{"./_apply":313}],453:[function(e,t,r){var n=e("./_freeGlobal"),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();t.exports=s},{"./_freeGlobal":402}],454:[function(e,t,r){t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},{}],455:[function(e,t,r){t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},{}],456:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],457:[function(e,t,r){t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}},{}],458:[function(e,t,r){var n=e("./_baseSetToString"),i=e("./_shortOut")(n);t.exports=i},{"./_baseSetToString":370,"./_shortOut":459}],459:[function(e,t,r){var n=Date.now;t.exports=function(e){var t=0,r=0;return function(){var i=n(),s=16-(i-r);if(r=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},{}],460:[function(e,t,r){var n=e("./_ListCache");t.exports=function(){this.__data__=new n,this.size=0}},{"./_ListCache":303}],461:[function(e,t,r){t.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},{}],462:[function(e,t,r){t.exports=function(e){return this.__data__.get(e)}},{}],463:[function(e,t,r){t.exports=function(e){return this.__data__.has(e)}},{}],464:[function(e,t,r){var n=e("./_ListCache"),i=e("./_Map"),s=e("./_MapCache");t.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new s(o)}return r.set(e,t),this.size=r.size,this}},{"./_ListCache":303,"./_Map":304,"./_MapCache":305}],465:[function(e,t,r){t.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}},{}],466:[function(e,t,r){var n=e("./_asciiToArray"),i=e("./_hasUnicode"),s=e("./_unicodeToArray");t.exports=function(e){return i(e)?s(e):n(e)}},{"./_asciiToArray":324,"./_hasUnicode":415,"./_unicodeToArray":471}],467:[function(e,t,r){var n=e("./_memoizeCapped"),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,r,n,i){t.push(n?i.replace(s,"$1"):r||e)})),t}));t.exports=o},{"./_memoizeCapped":445}],468:[function(e,t,r){var n=e("./isSymbol");t.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},{"./isSymbol":510}],469:[function(e,t,r){var n=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},{}],470:[function(e,t,r){var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},{}],471:[function(e,t,r){var n="[\\ud800-\\udfff]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",s="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",u="[\\ud800-\\udbff][\\udc00-\\udfff]",c="(?:"+i+"|"+s+")"+"?",l="[\\ufe0e\\ufe0f]?",h=l+c+("(?:\\u200d(?:"+[o,a,u].join("|")+")"+l+c+")*"),d="(?:"+[o+i+"?",i,a,u,n].join("|")+")",f=RegExp(s+"(?="+s+")|"+d+h,"g");t.exports=function(e){return e.match(f)||[]}},{}],472:[function(e,t,r){var n=e("./_assignValue"),i=e("./_copyObject"),s=e("./_createAssigner"),o=e("./isArrayLike"),a=e("./_isPrototype"),u=e("./keys"),c=Object.prototype.hasOwnProperty,l=s((function(e,t){if(a(t)||o(t))i(t,u(t),e);else for(var r in t)c.call(t,r)&&n(e,r,t[r])}));t.exports=l},{"./_assignValue":326,"./_copyObject":389,"./_createAssigner":394,"./_isPrototype":430,"./isArrayLike":497,"./keys":512}],473:[function(e,t,r){var n=e("./_copyObject"),i=e("./_createAssigner"),s=e("./keysIn"),o=i((function(e,t){n(t,s(t),e)}));t.exports=o},{"./_copyObject":389,"./_createAssigner":394,"./keysIn":513}],474:[function(e,t,r){var n=e("./_baseSlice"),i=e("./_isIterateeCall"),s=e("./toInteger"),o=Math.ceil,a=Math.max;t.exports=function(e,t,r){t=(r?i(e,t,r):void 0===t)?1:a(s(t),0);var u=null==e?0:e.length;if(!u||t<1)return[];for(var c=0,l=0,h=Array(o(u/t));c<u;)h[l++]=n(e,c,c+=t);return h}},{"./_baseSlice":371,"./_isIterateeCall":426,"./toInteger":531}],475:[function(e,t,r){var n=e("./_baseClone");t.exports=function(e){return n(e,4)}},{"./_baseClone":332}],476:[function(e,t,r){var n=e("./_baseClone");t.exports=function(e){return n(e,5)}},{"./_baseClone":332}],477:[function(e,t,r){t.exports=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var s=e[t];s&&(i[n++]=s)}return i}},{}],478:[function(e,t,r){t.exports=function(e){return function(){return e}}},{}],479:[function(e,t,r){var n=e("./_baseRest"),i=e("./eq"),s=e("./_isIterateeCall"),o=e("./keysIn"),a=Object.prototype,u=a.hasOwnProperty,c=n((function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&s(t[0],t[1],c)&&(n=1);++r<n;)for(var l=t[r],h=o(l),d=-1,f=h.length;++d<f;){var p=h[d],m=e[p];(void 0===m||i(m,a[p])&&!u.call(e,p))&&(e[p]=l[p])}return e}));t.exports=c},{"./_baseRest":368,"./_isIterateeCall":426,"./eq":482,"./keysIn":513}],480:[function(e,t,r){var n=e("./_baseDelay"),i=e("./_baseRest")((function(e,t){return n(e,1,t)}));t.exports=i},{"./_baseDelay":334,"./_baseRest":368}],481:[function(e,t,r){t.exports=e("./forEach")},{"./forEach":487}],482:[function(e,t,r){t.exports=function(e,t){return e===t||e!=e&&t!=t}},{}],483:[function(e,t,r){t.exports=e("./assignIn")},{"./assignIn":473}],484:[function(e,t,r){var n=e("./_arrayFilter"),i=e("./_baseFilter"),s=e("./_baseIteratee"),o=e("./isArray");t.exports=function(e,t){return(o(e)?n:i)(e,s(t,3))}},{"./_arrayFilter":316,"./_baseFilter":336,"./_baseIteratee":356,"./isArray":496}],485:[function(e,t,r){t.exports=e("./head")},{"./head":492}],486:[function(e,t,r){var n=e("./_baseFlatten");t.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},{"./_baseFlatten":338}],487:[function(e,t,r){var n=e("./_arrayEach"),i=e("./_baseEach"),s=e("./_castFunction"),o=e("./isArray");t.exports=function(e,t){return(o(e)?n:i)(e,s(t))}},{"./_arrayEach":315,"./_baseEach":335,"./_castFunction":380,"./isArray":496}],488:[function(e,t,r){var n=e("./_baseGet");t.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},{"./_baseGet":341}],489:[function(e,t,r){var n=e("./_baseAssignValue"),i=e("./_createAggregator"),s=Object.prototype.hasOwnProperty,o=i((function(e,t,r){s.call(e,r)?e[r].push(t):n(e,r,[t])}));t.exports=o},{"./_baseAssignValue":331,"./_createAggregator":393}],490:[function(e,t,r){var n=e("./_baseHas"),i=e("./_hasPath");t.exports=function(e,t){return null!=e&&i(e,t,n)}},{"./_baseHas":344,"./_hasPath":414}],491:[function(e,t,r){var n=e("./_baseHasIn"),i=e("./_hasPath");t.exports=function(e,t){return null!=e&&i(e,t,n)}},{"./_baseHasIn":345,"./_hasPath":414}],492:[function(e,t,r){t.exports=function(e){return e&&e.length?e[0]:void 0}},{}],493:[function(e,t,r){t.exports=function(e){return e}},{}],494:[function(e,t,r){var n=e("./_baseIndexOf"),i=e("./toInteger"),s=Math.max;t.exports=function(e,t,r){var o=null==e?0:e.length;if(!o)return-1;var a=null==r?0:i(r);return a<0&&(a=s(o+a,0)),n(e,t,a)}},{"./_baseIndexOf":346,"./toInteger":531}],495:[function(e,t,r){var n=e("./_baseIsArguments"),i=e("./isObjectLike"),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!a.call(e,"callee")};t.exports=u},{"./_baseIsArguments":347,"./isObjectLike":506}],496:[function(e,t,r){var n=Array.isArray;t.exports=n},{}],497:[function(e,t,r){var n=e("./isFunction"),i=e("./isLength");t.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},{"./isFunction":501,"./isLength":502}],498:[function(e,t,r){var n=e("./isArrayLike"),i=e("./isObjectLike");t.exports=function(e){return i(e)&&n(e)}},{"./isArrayLike":497,"./isObjectLike":506}],499:[function(e,t,r){var n=e("./_root"),i=e("./stubFalse"),s="object"==typeof r&&r&&!r.nodeType&&r,o=s&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===s?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;t.exports=u},{"./_root":453,"./stubFalse":527}],500:[function(e,t,r){var n=e("./_baseKeys"),i=e("./_getTag"),s=e("./isArguments"),o=e("./isArray"),a=e("./isArrayLike"),u=e("./isBuffer"),c=e("./_isPrototype"),l=e("./isTypedArray"),h=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(a(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||u(e)||l(e)||s(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(c(e))return!n(e).length;for(var r in e)if(h.call(e,r))return!1;return!0}},{"./_baseKeys":357,"./_getTag":412,"./_isPrototype":430,"./isArguments":495,"./isArray":496,"./isArrayLike":497,"./isBuffer":499,"./isTypedArray":511}],501:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./isObject");t.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},{"./_baseGetTag":343,"./isObject":505}],502:[function(e,t,r){t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},{}],503:[function(e,t,r){var n=e("./_baseIsMap"),i=e("./_baseUnary"),s=e("./_nodeUtil"),o=s&&s.isMap,a=o?i(o):n;t.exports=a},{"./_baseIsMap":350,"./_baseUnary":376,"./_nodeUtil":449}],504:[function(e,t,r){t.exports=function(e){return null==e}},{}],505:[function(e,t,r){t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},{}],506:[function(e,t,r){t.exports=function(e){return null!=e&&"object"==typeof e}},{}],507:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./_getPrototype"),s=e("./isObjectLike"),o=Function.prototype,a=Object.prototype,u=o.toString,c=a.hasOwnProperty,l=u.call(Object);t.exports=function(e){if(!s(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==l}},{"./_baseGetTag":343,"./_getPrototype":408,"./isObjectLike":506}],508:[function(e,t,r){var n=e("./_baseIsSet"),i=e("./_baseUnary"),s=e("./_nodeUtil"),o=s&&s.isSet,a=o?i(o):n;t.exports=a},{"./_baseIsSet":354,"./_baseUnary":376,"./_nodeUtil":449}],509:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./isArray"),s=e("./isObjectLike");t.exports=function(e){return"string"==typeof e||!i(e)&&s(e)&&"[object String]"==n(e)}},{"./_baseGetTag":343,"./isArray":496,"./isObjectLike":506}],510:[function(e,t,r){var n=e("./_baseGetTag"),i=e("./isObjectLike");t.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},{"./_baseGetTag":343,"./isObjectLike":506}],511:[function(e,t,r){var n=e("./_baseIsTypedArray"),i=e("./_baseUnary"),s=e("./_nodeUtil"),o=s&&s.isTypedArray,a=o?i(o):n;t.exports=a},{"./_baseIsTypedArray":355,"./_baseUnary":376,"./_nodeUtil":449}],512:[function(e,t,r){var n=e("./_arrayLikeKeys"),i=e("./_baseKeys"),s=e("./isArrayLike");t.exports=function(e){return s(e)?n(e):i(e)}},{"./_arrayLikeKeys":319,"./_baseKeys":357,"./isArrayLike":497}],513:[function(e,t,r){var n=e("./_arrayLikeKeys"),i=e("./_baseKeysIn"),s=e("./isArrayLike");t.exports=function(e){return s(e)?n(e,!0):i(e)}},{"./_arrayLikeKeys":319,"./_baseKeysIn":358,"./isArrayLike":497}],514:[function(e,t,r){t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},{}],515:[function(e,t,r){var n=e("./_arrayMap"),i=e("./_baseIteratee"),s=e("./_baseMap"),o=e("./isArray");t.exports=function(e,t){return(o(e)?n:s)(e,i(t,3))}},{"./_arrayMap":320,"./_baseIteratee":356,"./_baseMap":359,"./isArray":496}],516:[function(e,t,r){var n=e("./_MapCache");function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},{"./_MapCache":305}],517:[function(e,t,r){var n=e("./_baseMerge"),i=e("./_createAssigner")((function(e,t,r){n(e,t,r)}));t.exports=i},{"./_baseMerge":362,"./_createAssigner":394}],518:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},{}],519:[function(e,t,r){t.exports=function(){}},{}],520:[function(e,t,r){var n=e("./_baseIteratee"),i=e("./negate"),s=e("./pickBy");t.exports=function(e,t){return s(e,i(n(t)))}},{"./_baseIteratee":356,"./negate":518,"./pickBy":521}],521:[function(e,t,r){var n=e("./_arrayMap"),i=e("./_baseIteratee"),s=e("./_basePickBy"),o=e("./_getAllKeysIn");t.exports=function(e,t){if(null==e)return{};var r=n(o(e),(function(e){return[e]}));return t=i(t),s(e,r,(function(e,r){return t(e,r[0])}))}},{"./_arrayMap":320,"./_baseIteratee":356,"./_basePickBy":364,"./_getAllKeysIn":404}],522:[function(e,t,r){var n=e("./_baseProperty"),i=e("./_basePropertyDeep"),s=e("./_isKey"),o=e("./_toKey");t.exports=function(e){return s(e)?n(o(e)):i(e)}},{"./_baseProperty":365,"./_basePropertyDeep":366,"./_isKey":427,"./_toKey":468}],523:[function(e,t,r){var n=e("./_arrayReduce"),i=e("./_baseEach"),s=e("./_baseIteratee"),o=e("./_baseReduce"),a=e("./isArray");t.exports=function(e,t,r){var u=a(e)?n:o,c=arguments.length<3;return u(e,s(t,4),r,c,i)}},{"./_arrayReduce":322,"./_baseEach":335,"./_baseIteratee":356,"./_baseReduce":367,"./isArray":496}],524:[function(e,t,r){var n=e("./_arrayFilter"),i=e("./_baseFilter"),s=e("./_baseIteratee"),o=e("./isArray"),a=e("./negate");t.exports=function(e,t){return(o(e)?n:i)(e,a(s(t,3)))}},{"./_arrayFilter":316,"./_baseFilter":336,"./_baseIteratee":356,"./isArray":496,"./negate":518}],525:[function(e,t,r){var n=e("./_arraySome"),i=e("./_baseIteratee"),s=e("./_baseSome"),o=e("./isArray"),a=e("./_isIterateeCall");t.exports=function(e,t,r){var u=o(e)?n:s;return r&&a(e,t,r)&&(t=void 0),u(e,i(t,3))}},{"./_arraySome":323,"./_baseIteratee":356,"./_baseSome":372,"./_isIterateeCall":426,"./isArray":496}],526:[function(e,t,r){t.exports=function(){return[]}},{}],527:[function(e,t,r){t.exports=function(){return!1}},{}],528:[function(e,t,r){var n=e("./_baseSlice");t.exports=function(e){var t=null==e?0:e.length;return t?n(e,1,t):[]}},{"./_baseSlice":371}],529:[function(e,t,r){var n=e("./_Symbol"),i=e("./_copyArray"),s=e("./_getTag"),o=e("./isArrayLike"),a=e("./isString"),u=e("./_iteratorToArray"),c=e("./_mapToArray"),l=e("./_setToArray"),h=e("./_stringToArray"),d=e("./values"),f=n?n.iterator:void 0;t.exports=function(e){if(!e)return[];if(o(e))return a(e)?h(e):i(e);if(f&&e[f])return u(e[f]());var t=s(e);return("[object Map]"==t?c:"[object Set]"==t?l:d)(e)}},{"./_Symbol":310,"./_copyArray":388,"./_getTag":412,"./_iteratorToArray":432,"./_mapToArray":443,"./_setToArray":457,"./_stringToArray":466,"./isArrayLike":497,"./isString":509,"./values":538}],530:[function(e,t,r){var n=e("./toNumber"),i=1/0;t.exports=function(e){return e?(e=n(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},{"./toNumber":532}],531:[function(e,t,r){var n=e("./toFinite");t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},{"./toFinite":530}],532:[function(e,t,r){var n=e("./_baseTrim"),i=e("./isObject"),s=e("./isSymbol"),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(s(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=a.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):o.test(e)?NaN:+e}},{"./_baseTrim":375,"./isObject":505,"./isSymbol":510}],533:[function(e,t,r){var n=e("./_copyObject"),i=e("./keysIn");t.exports=function(e){return n(e,i(e))}},{"./_copyObject":389,"./keysIn":513}],534:[function(e,t,r){var n=e("./_baseToString");t.exports=function(e){return null==e?"":n(e)}},{"./_baseToString":374}],535:[function(e,t,r){var n=e("./_arrayEach"),i=e("./_baseCreate"),s=e("./_baseForOwn"),o=e("./_baseIteratee"),a=e("./_getPrototype"),u=e("./isArray"),c=e("./isBuffer"),l=e("./isFunction"),h=e("./isObject"),d=e("./isTypedArray");t.exports=function(e,t,r){var f=u(e),p=f||c(e)||d(e);if(t=o(t,4),null==r){var m=e&&e.constructor;r=p?f?new m:[]:h(e)&&l(m)?i(a(e)):{}}return(p?n:s)(e,(function(e,n,i){return t(r,e,n,i)})),r}},{"./_arrayEach":315,"./_baseCreate":333,"./_baseForOwn":340,"./_baseIteratee":356,"./_getPrototype":408,"./isArray":496,"./isBuffer":499,"./isFunction":501,"./isObject":505,"./isTypedArray":511}],536:[function(e,t,r){var n=e("./_baseUniq");t.exports=function(e){return e&&e.length?n(e):[]}},{"./_baseUniq":377}],537:[function(e,t,r){var n=e("./toString"),i=0;t.exports=function(e){var t=++i;return n(e)+t}},{"./toString":534}],538:[function(e,t,r){var n=e("./_baseValues"),i=e("./keys");t.exports=function(e){return null==e?[]:n(e,i(e))}},{"./_baseValues":378,"./keys":512}],539:[function(e,t,r){(function(e){const r="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,n="function"==typeof AbortController?AbortController:class{constructor(){this.signal=new o}abort(){this.signal.dispatchEvent("abort")}},i="function"==typeof AbortSignal,s="function"==typeof n.AbortSignal,o=i?AbortSignal:s?n.AbortController:class{constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if("abort"===e){this.aborted=!0;const t={type:e,target:this};this.onabort(t),this._listeners.forEach((e=>e(t)),this)}}onabort(){}addEventListener(e,t){"abort"===e&&this._listeners.push(t)}removeEventListener(e,t){"abort"===e&&(this._listeners=this._listeners.filter((e=>e!==t)))}},a=new Set,u=(e,t)=>{const r=`LRU_CACHE_OPTION_${e}`;h(r)&&d(r,`${e} option`,`options.${t}`,g)},c=(e,t)=>{const r=`LRU_CACHE_METHOD_${e}`;if(h(r)){const{prototype:n}=g,{get:i}=Object.getOwnPropertyDescriptor(n,e);d(r,`${e} method`,`cache.${t}()`,i)}},l=(...t)=>{"object"==typeof e&&e&&"function"==typeof e.emitWarning?e.emitWarning(...t):console.error(...t)},h=e=>!a.has(e),d=(e,t,r,n)=>{a.add(e);l(`The ${t} is deprecated. Please use ${r} instead.`,"DeprecationWarning",e,n)},f=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),p=e=>f(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?m:null:null;class m extends Array{constructor(e){super(e),this.fill(0)}}class y{constructor(e){if(0===e)return[];const t=p(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class g{constructor(e={}){const{max:t=0,ttl:r,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:s,updateAgeOnHas:o,allowStale:c,dispose:d,disposeAfter:m,noDisposeOnSet:v,noUpdateTTL:b,maxSize:_=0,maxEntrySize:w=0,sizeCalculation:E,fetchMethod:x,fetchContext:C,noDeleteOnFetchRejection:k,noDeleteOnStaleGet:O}=e,{length:S,maxAge:T,stale:$}=e instanceof g?{}:e;if(0!==t&&!f(t))throw new TypeError("max option must be a nonnegative integer");const j=t?p(t):Array;if(!j)throw new Error("invalid max value: "+t);if(this.max=t,this.maxSize=_,this.maxEntrySize=w||this.maxSize,this.sizeCalculation=E||S,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=x||null,this.fetchMethod&&"function"!=typeof this.fetchMethod)throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=C,!this.fetchMethod&&void 0!==C)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new j(t),this.prev=new j(t),this.head=0,this.tail=0,this.free=new y(t),this.initialFill=1,this.size=0,"function"==typeof d&&(this.dispose=d),"function"==typeof m?(this.disposeAfter=m,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!v,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!k,0!==this.maxEntrySize){if(0!==this.maxSize&&!f(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!f(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!$,this.noDeleteOnStaleGet=!!O,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!o,this.ttlResolution=f(n)||0===n?n:1,this.ttlAutopurge=!!i,this.ttl=r||T||0,this.ttl){if(!f(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(0===this.max&&0===this.ttl&&0===this.maxSize)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const e="LRU_CACHE_UNBOUNDED";if(h(e)){a.add(e);l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",e,g)}}$&&u("stale","allowStale"),T&&u("maxAge","ttl"),S&&u("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new m(this.max),this.starts=new m(this.max),this.setItemTTL=(e,t,n=r.now())=>{if(this.starts[e]=0!==t?n:0,this.ttls[e]=t,0!==t&&this.ttlAutopurge){const r=setTimeout((()=>{this.isStale(e)&&this.delete(this.keyList[e])}),t+1);r.unref&&r.unref()}},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?r.now():0};let e=0;const t=()=>{const t=r.now();if(this.ttlResolution>0){e=t;const r=setTimeout((()=>e=0),this.ttlResolution);r.unref&&r.unref()}return t};this.getRemainingTTL=r=>{const n=this.keyMap.get(r);return void 0===n?0:0===this.ttls[n]||0===this.starts[n]?1/0:this.starts[n]+this.ttls[n]-(e||t())},this.isStale=r=>0!==this.ttls[r]&&0!==this.starts[r]&&(e||t())-this.starts[r]>this.ttls[r]}updateItemAge(e){}setItemTTL(e,t,r){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new m(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,t,r,n)=>{if(!f(r)){if(!n)throw new TypeError("invalid size value (must be positive integer)");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(r=n(t,e),!f(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return r},this.addItemSize=(e,t)=>{this.sizes[e]=t;const r=this.maxSize-this.sizes[e];for(;this.calculatedSize>r;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,t){}requireSize(e,t,r,n){if(r||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.tail;this.isValidIndex(t)&&(!e&&this.isStale(t)||(yield t),t!==this.head);)t=this.prev[t]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let t=this.head;this.isValidIndex(t)&&(!e&&this.isStale(t)||(yield t),t!==this.tail);)t=this.next[t]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(const e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(const e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(const e of this.indexes())yield this.keyList[e]}*rkeys(){for(const e of this.rindexes())yield this.keyList[e]}*values(){for(const e of this.indexes())yield this.valList[e]}*rvalues(){for(const e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,t={}){for(const r of this.indexes())if(e(this.valList[r],this.keyList[r],this))return this.get(this.keyList[r],t)}forEach(e,t=this){for(const r of this.indexes())e.call(t,this.valList[r],this.keyList[r],this)}rforEach(e,t=this){for(const r of this.rindexes())e.call(t,this.valList[r],this.keyList[r],this)}get prune(){return c("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(const t of this.rindexes({allowStale:!0}))this.isStale(t)&&(this.delete(this.keyList[t]),e=!0);return e}dump(){const e=[];for(const t of this.indexes({allowStale:!0})){const n=this.keyList[t],i=this.valList[t],s={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){s.ttl=this.ttls[t];const e=r.now()-this.starts[t];s.start=Math.floor(Date.now()-e)}this.sizes&&(s.size=this.sizes[t]),e.unshift([n,s])}return e}load(e){this.clear();for(const[t,n]of e){if(n.start){const e=Date.now()-n.start;n.start=r.now()-e}this.set(t,n.value,n)}}dispose(e,t,r){}set(e,t,{ttl:r=this.ttl,start:n,noDisposeOnSet:i=this.noDisposeOnSet,size:s=0,sizeCalculation:o=this.sizeCalculation,noUpdateTTL:a=this.noUpdateTTL}={}){if(s=this.requireSize(e,t,s,o),this.maxEntrySize&&s>this.maxEntrySize)return this;let u=0===this.size?void 0:this.keyMap.get(e);if(void 0===u)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=t,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,s),a=!1;else{const r=this.valList[u];t!==r&&(this.isBackgroundFetch(r)?r.__abortController.abort():i||(this.dispose(r,e,"set"),this.disposeAfter&&this.disposed.push([r,e,"set"])),this.removeItemSize(u),this.valList[u]=t,this.addItemSize(u,s)),this.moveToTail(u)}if(0===r||0!==this.ttl||this.ttls||this.initializeTTLTracking(),a||this.setItemTTL(u,r,n),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const t=this.head,r=this.keyList[t],n=this.valList[t];return this.isBackgroundFetch(n)?n.__abortController.abort():(this.dispose(n,r,"evict"),this.disposeAfter&&this.disposed.push([n,r,"evict"])),this.removeItemSize(t),e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(r),this.size--,t}has(e,{updateAgeOnHas:t=this.updateAgeOnHas}={}){const r=this.keyMap.get(e);return void 0!==r&&!this.isStale(r)&&(t&&this.updateItemAge(r),!0)}peek(e,{allowStale:t=this.allowStale}={}){const r=this.keyMap.get(e);if(void 0!==r&&(t||!this.isStale(r))){const e=this.valList[r];return this.isBackgroundFetch(e)?e.__staleWhileFetching:e}}backgroundFetch(e,t,r,i){const s=void 0===t?void 0:this.valList[t];if(this.isBackgroundFetch(s))return s;const o=new n,a={signal:o.signal,options:r,context:i},u=new Promise((t=>t(this.fetchMethod(e,s,a)))).then((t=>(o.signal.aborted||this.set(e,t,a.options),t)),(n=>{if(this.valList[t]===u){!r.noDeleteOnFetchRejection||void 0===u.__staleWhileFetching?this.delete(e):this.valList[t]=u.__staleWhileFetching}if(u.__returned===u)throw n}));return u.__abortController=o,u.__staleWhileFetching=s,u.__returned=null,void 0===t?(this.set(e,u,a.options),t=this.keyMap.get(e)):this.valList[t]=u,u}isBackgroundFetch(e){return e&&"object"==typeof e&&"function"==typeof e.then&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||null===e.__returned)}async fetch(e,{allowStale:t=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:i=this.ttl,noDisposeOnSet:s=this.noDisposeOnSet,size:o=0,sizeCalculation:a=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,fetchContext:l=this.fetchContext,forceRefresh:h=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:t,updateAgeOnGet:r,noDeleteOnStaleGet:n});const d={allowStale:t,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:i,noDisposeOnSet:s,size:o,sizeCalculation:a,noUpdateTTL:u,noDeleteOnFetchRejection:c};let f=this.keyMap.get(e);if(void 0===f){const t=this.backgroundFetch(e,f,d,l);return t.__returned=t}{const n=this.valList[f];if(this.isBackgroundFetch(n))return t&&void 0!==n.__staleWhileFetching?n.__staleWhileFetching:n.__returned=n;if(!h&&!this.isStale(f))return this.moveToTail(f),r&&this.updateItemAge(f),n;const i=this.backgroundFetch(e,f,d,l);return t&&void 0!==i.__staleWhileFetching?i.__staleWhileFetching:i.__returned=i}}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet}={}){const i=this.keyMap.get(e);if(void 0!==i){const s=this.valList[i],o=this.isBackgroundFetch(s);if(this.isStale(i))return o?t?s.__staleWhileFetching:void 0:(n||this.delete(e),t?s:void 0);if(o)return;return this.moveToTail(i),r&&this.updateItemAge(i),s}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return c("del","delete"),this.delete}delete(e){let t=!1;if(0!==this.size){const r=this.keyMap.get(e);if(void 0!==r)if(t=!0,1===this.size)this.clear();else{this.removeItemSize(r);const t=this.valList[r];this.isBackgroundFetch(t)?t.__abortController.abort():(this.dispose(t,e,"delete"),this.disposeAfter&&this.disposed.push([t,e,"delete"])),this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return t}clear(){for(const e of this.rindexes({allowStale:!0})){const t=this.valList[e];if(this.isBackgroundFetch(t))t.__abortController.abort();else{const r=this.keyList[e];this.dispose(t,r,"delete"),this.disposeAfter&&this.disposed.push([t,r,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return c("reset","clear"),this.clear}get length(){return((e,t)=>{const r=`LRU_CACHE_PROPERTY_${e}`;if(h(r)){const{prototype:n}=g,{get:i}=Object.getOwnPropertyDescriptor(n,e);d(r,`${e} property`,`cache.${t}`,i)}})("length","size"),this.size}static get AbortController(){return n}static get AbortSignal(){return o}}t.exports=g}).call(this,e("_process"))},{_process:void 0}],540:[function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s.apply(this,arguments)}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,u(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,r){return l=c()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&u(i,r.prototype),i},l.apply(null,arguments)}function h(e){var t="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,a(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),u(n,e)},h(e)}function d(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(r,"__esModule",{value:!0});var m=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(h(Error)),y=function(e){function t(t){return e.call(this,"Invalid DateTime: "+t.toMessage())||this}return o(t,e),t}(m),g=function(e){function t(t){return e.call(this,"Invalid Interval: "+t.toMessage())||this}return o(t,e),t}(m),v=function(e){function t(t){return e.call(this,"Invalid Duration: "+t.toMessage())||this}return o(t,e),t}(m),b=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(m),_=function(e){function t(t){return e.call(this,"Invalid unit "+t)||this}return o(t,e),t}(m),w=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t}(m),E=function(e){function t(){return e.call(this,"Zone is an abstract class")||this}return o(t,e),t}(m),x="numeric",C="short",k="long",O={year:x,month:x,day:x},S={year:x,month:C,day:x},T={year:x,month:C,day:x,weekday:C},$={year:x,month:k,day:x},j={year:x,month:k,day:x,weekday:k},N={hour:x,minute:x},A={hour:x,minute:x,second:x},I={hour:x,minute:x,second:x,timeZoneName:C},P={hour:x,minute:x,second:x,timeZoneName:k},R={hour:x,minute:x,hourCycle:"h23"},q={hour:x,minute:x,second:x,hourCycle:"h23"},M={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:C},L={hour:x,minute:x,second:x,hourCycle:"h23",timeZoneName:k},D={year:x,month:x,day:x,hour:x,minute:x},F={year:x,month:x,day:x,hour:x,minute:x,second:x},U={year:x,month:C,day:x,hour:x,minute:x},B={year:x,month:C,day:x,hour:x,minute:x,second:x},V={year:x,month:C,day:x,weekday:C,hour:x,minute:x},z={year:x,month:k,day:x,hour:x,minute:x,timeZoneName:C},H={year:x,month:k,day:x,hour:x,minute:x,second:x,timeZoneName:C},W={year:x,month:k,day:x,weekday:k,hour:x,minute:x,timeZoneName:k},Q={year:x,month:k,day:x,weekday:k,hour:x,minute:x,second:x,timeZoneName:k};function G(e){return void 0===e}function J(e){return"number"==typeof e}function K(e){return"number"==typeof e&&e%1==0}function Z(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Y(e,t,r){if(0!==e.length)return e.reduce((function(e,n){var i=[t(n),n];return e&&r(e[0],i[0])===e[0]?e:i}),null)[1]}function X(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ee(e,t,r){return K(e)&&e>=t&&e<=r}function te(e,t){return void 0===t&&(t=2),e<0?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0")}function re(e){return G(e)||null===e||""===e?void 0:parseInt(e,10)}function ne(e){return G(e)||null===e||""===e?void 0:parseFloat(e)}function ie(e){if(!G(e)&&null!==e&&""!==e){var t=1e3*parseFloat("0."+e);return Math.floor(t)}}function se(e,t,r){void 0===r&&(r=!1);var n=Math.pow(10,t);return(r?Math.trunc:Math.round)(e*n)/n}function oe(e){return e%4==0&&(e%100!=0||e%400==0)}function ae(e){return oe(e)?366:365}function ue(e,t){var r=function(e,t){return e-t*Math.floor(e/t)}(t-1,12)+1;return 2===r?oe(e+(t-r)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function ce(e){var t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t)).setUTCFullYear(t.getUTCFullYear()-1900),+t}function le(e){var t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,n=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return 4===t||3===n?53:52}function he(e){return e>99?e:e>60?1900+e:2e3+e}function de(e,t,r,n){void 0===n&&(n=null);var i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};n&&(o.timeZone=n);var a=s({timeZoneName:t},o),u=new Intl.DateTimeFormat(r,a).formatToParts(i).find((function(e){return"timezonename"===e.type.toLowerCase()}));return u?u.value:null}function fe(e,t){var r=parseInt(e,10);Number.isNaN(r)&&(r=0);var n=parseInt(t,10)||0;return 60*r+(r<0||Object.is(r,-0)?-n:n)}function pe(e){var t=Number(e);if("boolean"==typeof e||""===e||Number.isNaN(t))throw new w("Invalid unit value "+e);return t}function me(e,t){var r={};for(var n in e)if(X(e,n)){var i=e[n];if(null==i)continue;r[t(n)]=pe(i)}return r}function ye(e,t){var r=Math.trunc(Math.abs(e/60)),n=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return""+i+te(r,2)+":"+te(n,2);case"narrow":return""+i+r+(n>0?":"+n:"");case"techie":return""+i+te(r,2)+te(n,2);default:throw new RangeError("Value format "+t+" is out of range for property format")}}function ge(e){return function(e,t){return t.reduce((function(t,r){return t[r]=e[r],t}),{})}(e,["hour","minute","second","millisecond"])}var ve=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/,be=["January","February","March","April","May","June","July","August","September","October","November","December"],_e=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],we=["J","F","M","A","M","J","J","A","S","O","N","D"];function Ee(e){switch(e){case"narrow":return[].concat(we);case"short":return[].concat(_e);case"long":return[].concat(be);case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var xe=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ce=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ke=["M","T","W","T","F","S","S"];function Oe(e){switch(e){case"narrow":return[].concat(ke);case"short":return[].concat(Ce);case"long":return[].concat(xe);case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Se=["AM","PM"],Te=["Before Christ","Anno Domini"],$e=["BC","AD"],je=["B","A"];function Ne(e){switch(e){case"narrow":return[].concat(je);case"short":return[].concat($e);case"long":return[].concat(Te);default:return null}}function Ae(e,t){for(var r,n="",i=p(e);!(r=i()).done;){var s=r.value;s.literal?n+=s.val:n+=t(s.val)}return n}var Ie={D:O,DD:S,DDD:$,DDDD:j,t:N,tt:A,ttt:I,tttt:P,T:R,TT:q,TTT:M,TTTT:L,f:D,ff:U,fff:z,ffff:W,F:F,FF:B,FFF:H,FFFF:Q},Pe=function(){function e(e,t){this.opts=t,this.loc=e,this.systemLoc=null}e.create=function(t,r){return void 0===r&&(r={}),new e(t,r)},e.parseFormat=function(e){for(var t=null,r="",n=!1,i=[],s=0;s<e.length;s++){var o=e.charAt(s);"'"===o?(r.length>0&&i.push({literal:n,val:r}),t=null,r="",n=!n):n||o===t?r+=o:(r.length>0&&i.push({literal:!1,val:r}),r=o,t=o)}return r.length>0&&i.push({literal:n,val:r}),i},e.macroTokenToFormatOpts=function(e){return Ie[e]};var t=e.prototype;return t.formatWithSystemDefault=function(e,t){return null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,s({},this.opts,t)).format()},t.formatDateTime=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,s({},this.opts,t)).format()},t.formatDateTimeParts=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,s({},this.opts,t)).formatToParts()},t.resolvedOptions=function(e,t){return void 0===t&&(t={}),this.loc.dtFormatter(e,s({},this.opts,t)).resolvedOptions()},t.num=function(e,t){if(void 0===t&&(t=0),this.opts.forceSimple)return te(e,t);var r=s({},this.opts);return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)},t.formatDateTimeFromString=function(t,r){var n=this,i="en"===this.loc.listingMode(),s=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,o=function(e,r){return n.loc.extract(t,e,r)},a=function(e){return t.isOffsetFixed&&0===t.offset&&e.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,e.format):""},u=function(){return i?function(e){return Se[e.hour<12?0:1]}(t):o({hour:"numeric",hourCycle:"h12"},"dayperiod")},c=function(e,r){return i?function(e,t){return Ee(t)[e.month-1]}(t,e):o(r?{month:e}:{month:e,day:"numeric"},"month")},l=function(e,r){return i?function(e,t){return Oe(t)[e.weekday-1]}(t,e):o(r?{weekday:e}:{weekday:e,month:"long",day:"numeric"},"weekday")},h=function(e){return i?function(e,t){return Ne(t)[e.year<0?0:1]}(t,e):o({era:e},"era")};return Ae(e.parseFormat(r),(function(r){switch(r){case"S":return n.num(t.millisecond);case"u":case"SSS":return n.num(t.millisecond,3);case"s":return n.num(t.second);case"ss":return n.num(t.second,2);case"uu":return n.num(Math.floor(t.millisecond/10),2);case"uuu":return n.num(Math.floor(t.millisecond/100));case"m":return n.num(t.minute);case"mm":return n.num(t.minute,2);case"h":return n.num(t.hour%12==0?12:t.hour%12);case"hh":return n.num(t.hour%12==0?12:t.hour%12,2);case"H":return n.num(t.hour);case"HH":return n.num(t.hour,2);case"Z":return a({format:"narrow",allowZ:n.opts.allowZ});case"ZZ":return a({format:"short",allowZ:n.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:n.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:n.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:n.loc.locale});case"z":return t.zoneName;case"a":return u();case"d":return s?o({day:"numeric"},"day"):n.num(t.day);case"dd":return s?o({day:"2-digit"},"day"):n.num(t.day,2);case"c":case"E":return n.num(t.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return s?o({month:"numeric",day:"numeric"},"month"):n.num(t.month);case"LL":return s?o({month:"2-digit",day:"numeric"},"month"):n.num(t.month,2);case"LLL":return c("short",!0);case"LLLL":return c("long",!0);case"LLLLL":return c("narrow",!0);case"M":return s?o({month:"numeric"},"month"):n.num(t.month);case"MM":return s?o({month:"2-digit"},"month"):n.num(t.month,2);case"MMM":return c("short",!1);case"MMMM":return c("long",!1);case"MMMMM":return c("narrow",!1);case"y":return s?o({year:"numeric"},"year"):n.num(t.year);case"yy":return s?o({year:"2-digit"},"year"):n.num(t.year.toString().slice(-2),2);case"yyyy":return s?o({year:"numeric"},"year"):n.num(t.year,4);case"yyyyyy":return s?o({year:"numeric"},"year"):n.num(t.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return n.num(t.weekYear.toString().slice(-2),2);case"kkkk":return n.num(t.weekYear,4);case"W":return n.num(t.weekNumber);case"WW":return n.num(t.weekNumber,2);case"o":return n.num(t.ordinal);case"ooo":return n.num(t.ordinal,3);case"q":return n.num(t.quarter);case"qq":return n.num(t.quarter,2);case"X":return n.num(Math.floor(t.ts/1e3));case"x":return n.num(t.ts);default:return function(r){var i=e.macroTokenToFormatOpts(r);return i?n.formatWithSystemDefault(t,i):r}(r)}}))},t.formatDurationFromString=function(t,r){var n,i=this,s=function(e){switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},o=e.parseFormat(r),a=o.reduce((function(e,t){var r=t.literal,n=t.val;return r?e:e.concat(n)}),[]),u=t.shiftTo.apply(t,a.map(s).filter((function(e){return e})));return Ae(o,(n=u,function(e){var t=s(e);return t?i.num(n.get(t),e.length):e}))},e}(),Re=function(){function e(e,t){this.reason=e,this.explanation=t}return e.prototype.toMessage=function(){return this.explanation?this.reason+": "+this.explanation:this.reason},e}(),qe=function(){function e(){}var t=e.prototype;return t.offsetName=function(e,t){throw new E},t.formatOffset=function(e,t){throw new E},t.offset=function(e){throw new E},t.equals=function(e){throw new E},i(e,[{key:"type",get:function(){throw new E}},{key:"name",get:function(){throw new E}},{key:"ianaName",get:function(){return this.name}},{key:"isUniversal",get:function(){throw new E}},{key:"isValid",get:function(){throw new E}}]),e}(),Me=null,Le=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var r=t.prototype;return r.offsetName=function(e,t){return de(e,t.format,t.locale)},r.formatOffset=function(e,t){return ye(this.offset(e),t)},r.offset=function(e){return-new Date(e).getTimezoneOffset()},r.equals=function(e){return"system"===e.type},i(t,[{key:"type",get:function(){return"system"}},{key:"name",get:function(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!0}}],[{key:"instance",get:function(){return null===Me&&(Me=new t),Me}}]),t}(qe),De={};var Fe={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};var Ue={},Be=function(e){function t(r){var n;return(n=e.call(this)||this).zoneName=r,n.valid=t.isValidZone(r),n}o(t,e),t.create=function(e){return Ue[e]||(Ue[e]=new t(e)),Ue[e]},t.resetCache=function(){Ue={},De={}},t.isValidSpecifier=function(e){return this.isValidZone(e)},t.isValidZone=function(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(e){return!1}};var r=t.prototype;return r.offsetName=function(e,t){return de(e,t.format,t.locale,this.name)},r.formatOffset=function(e,t){return ye(this.offset(e),t)},r.offset=function(e){var t=new Date(e);if(isNaN(t))return NaN;var r,n=(r=this.name,De[r]||(De[r]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),De[r]),i=n.formatToParts?function(e,t){for(var r=e.formatToParts(t),n=[],i=0;i<r.length;i++){var s=r[i],o=s.type,a=s.value,u=Fe[o];"era"===o?n[u]=a:G(u)||(n[u]=parseInt(a,10))}return n}(n,t):function(e,t){var r=e.format(t).replace(/\u200E/g,""),n=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),i=n[1],s=n[2];return[n[3],i,s,n[4],n[5],n[6],n[7]]}(n,t),s=i[0],o=i[1],a=i[2],u=i[3],c=i[4],l=i[5],h=i[6];"BC"===u&&(s=1-Math.abs(s));var d=+t,f=d%1e3;return(ce({year:s,month:o,day:a,hour:24===c?0:c,minute:l,second:h,millisecond:0})-(d-=f>=0?f:1e3+f))/6e4},r.equals=function(e){return"iana"===e.type&&e.name===this.name},i(t,[{key:"type",get:function(){return"iana"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return this.valid}}]),t}(qe),Ve=null,ze=function(e){function t(t){var r;return(r=e.call(this)||this).fixed=t,r}o(t,e),t.instance=function(e){return 0===e?t.utcInstance:new t(e)},t.parseSpecifier=function(e){if(e){var r=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new t(fe(r[1],r[2]))}return null};var r=t.prototype;return r.offsetName=function(){return this.name},r.formatOffset=function(e,t){return ye(this.fixed,t)},r.offset=function(){return this.fixed},r.equals=function(e){return"fixed"===e.type&&e.fixed===this.fixed},i(t,[{key:"type",get:function(){return"fixed"}},{key:"name",get:function(){return 0===this.fixed?"UTC":"UTC"+ye(this.fixed,"narrow")}},{key:"ianaName",get:function(){return 0===this.fixed?"Etc/UTC":"Etc/GMT"+ye(-this.fixed,"narrow")}},{key:"isUniversal",get:function(){return!0}},{key:"isValid",get:function(){return!0}}],[{key:"utcInstance",get:function(){return null===Ve&&(Ve=new t(0)),Ve}}]),t}(qe),He=function(e){function t(t){var r;return(r=e.call(this)||this).zoneName=t,r}o(t,e);var r=t.prototype;return r.offsetName=function(){return null},r.formatOffset=function(){return""},r.offset=function(){return NaN},r.equals=function(){return!1},i(t,[{key:"type",get:function(){return"invalid"}},{key:"name",get:function(){return this.zoneName}},{key:"isUniversal",get:function(){return!1}},{key:"isValid",get:function(){return!1}}]),t}(qe);function We(e,t){if(G(e)||null===e)return t;if(e instanceof qe)return e;if("string"==typeof e){var r=e.toLowerCase();return"default"===r?t:"local"===r||"system"===r?Le.instance:"utc"===r||"gmt"===r?ze.utcInstance:ze.parseSpecifier(r)||Be.create(e)}return J(e)?ze.instance(e):"object"==typeof e&&e.offset&&"number"==typeof e.offset?e:new He(e)}var Qe,Ge=function(){return Date.now()},Je="system",Ke=null,Ze=null,Ye=null,Xe=function(){function e(){}return e.resetCaches=function(){dt.resetCache(),Be.resetCache()},i(e,null,[{key:"now",get:function(){return Ge},set:function(e){Ge=e}},{key:"defaultZone",get:function(){return We(Je,Le.instance)},set:function(e){Je=e}},{key:"defaultLocale",get:function(){return Ke},set:function(e){Ke=e}},{key:"defaultNumberingSystem",get:function(){return Ze},set:function(e){Ze=e}},{key:"defaultOutputCalendar",get:function(){return Ye},set:function(e){Ye=e}},{key:"throwOnInvalid",get:function(){return Qe},set:function(e){Qe=e}}]),e}(),et=["base"],tt=["padTo","floor"],rt={};var nt={};function it(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=nt[r];return n||(n=new Intl.DateTimeFormat(e,t),nt[r]=n),n}var st={};var ot={};var at=null;function ut(e,t,r,n,i){var s=e.listingMode(r);return"error"===s?null:"en"===s?n(t):i(t)}var ct=function(){function e(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1,r.padTo,r.floor;var n=d(r,tt);if(!t||Object.keys(n).length>0){var i=s({useGrouping:!1},r);r.padTo>0&&(i.minimumIntegerDigits=r.padTo),this.inf=function(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=st[r];return n||(n=new Intl.NumberFormat(e,t),st[r]=n),n}(e,i)}}return e.prototype.format=function(e){if(this.inf){var t=this.floor?Math.floor(e):e;return this.inf.format(t)}return te(this.floor?Math.floor(e):se(e,3),this.padTo)},e}(),lt=function(){function e(e,t,r){var n;if(this.opts=r,e.zone.isUniversal){var i=e.offset/60*-1,o=i>=0?"Etc/GMT+"+i:"Etc/GMT"+i;0!==e.offset&&Be.create(o).valid?(n=o,this.dt=e):(n="UTC",r.timeZoneName?this.dt=e:this.dt=0===e.offset?e:pn.fromMillis(e.ts+60*e.offset*1e3))}else"system"===e.zone.type?this.dt=e:(this.dt=e,n=e.zone.name);var a=s({},this.opts);n&&(a.timeZone=n),this.dtf=it(t,a)}var t=e.prototype;return t.format=function(){return this.dtf.format(this.dt.toJSDate())},t.formatToParts=function(){return this.dtf.formatToParts(this.dt.toJSDate())},t.resolvedOptions=function(){return this.dtf.resolvedOptions()},e}(),ht=function(){function e(e,t,r){this.opts=s({style:"long"},r),!t&&Z()&&(this.rtf=function(e,t){void 0===t&&(t={});var r=t;r.base;var n=d(r,et),i=JSON.stringify([e,n]),s=ot[i];return s||(s=new Intl.RelativeTimeFormat(e,t),ot[i]=s),s}(e,r))}var t=e.prototype;return t.format=function(e,t){return this.rtf?this.rtf.format(e,t):function(e,t,r,n){void 0===r&&(r="always"),void 0===n&&(n=!1);var i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===r&&s){var o="days"===e;switch(t){case 1:return o?"tomorrow":"next "+i[e][0];case-1:return o?"yesterday":"last "+i[e][0];case 0:return o?"today":"this "+i[e][0]}}var a=Object.is(t,-0)||t<0,u=Math.abs(t),c=1===u,l=i[e],h=n?c?l[1]:l[2]||l[1]:c?i[e][0]:e;return a?u+" "+h+" ago":"in "+u+" "+h}(t,e,this.opts.numeric,"long"!==this.opts.style)},t.formatToParts=function(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]},e}(),dt=function(){function e(e,t,r,n){var i=function(e){var t=e.indexOf("-u-");if(-1===t)return[e];var r,n=e.substring(0,t);try{r=it(e).resolvedOptions()}catch(e){r=it(n).resolvedOptions()}var i=r;return[n,i.numberingSystem,i.calendar]}(e),s=i[0],o=i[1],a=i[2];this.locale=s,this.numberingSystem=t||o||null,this.outputCalendar=r||a||null,this.intl=function(e,t,r){return r||t?(e+="-u",r&&(e+="-ca-"+r),t&&(e+="-nu-"+t),e):e}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}e.fromOpts=function(t){return e.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)},e.create=function(t,r,n,i){void 0===i&&(i=!1);var s=t||Xe.defaultLocale;return new e(s||(i?"en-US":at||(at=(new Intl.DateTimeFormat).resolvedOptions().locale)),r||Xe.defaultNumberingSystem,n||Xe.defaultOutputCalendar,s)},e.resetCache=function(){at=null,nt={},st={},ot={}},e.fromObject=function(t){var r=void 0===t?{}:t,n=r.locale,i=r.numberingSystem,s=r.outputCalendar;return e.create(n,i,s)};var t=e.prototype;return t.listingMode=function(){var e=this.isEnglish(),t=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return e&&t?"en":"intl"},t.clone=function(t){return t&&0!==Object.getOwnPropertyNames(t).length?e.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1):this},t.redefaultToEN=function(e){return void 0===e&&(e={}),this.clone(s({},e,{defaultToEN:!0}))},t.redefaultToSystem=function(e){return void 0===e&&(e={}),this.clone(s({},e,{defaultToEN:!1}))},t.months=function(e,t,r){var n=this;return void 0===t&&(t=!1),void 0===r&&(r=!0),ut(this,e,r,Ee,(function(){var r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return n.monthsCache[i][e]||(n.monthsCache[i][e]=function(e){for(var t=[],r=1;r<=12;r++){var n=pn.utc(2016,r,1);t.push(e(n))}return t}((function(e){return n.extract(e,r,"month")}))),n.monthsCache[i][e]}))},t.weekdays=function(e,t,r){var n=this;return void 0===t&&(t=!1),void 0===r&&(r=!0),ut(this,e,r,Oe,(function(){var r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return n.weekdaysCache[i][e]||(n.weekdaysCache[i][e]=function(e){for(var t=[],r=1;r<=7;r++){var n=pn.utc(2016,11,13+r);t.push(e(n))}return t}((function(e){return n.extract(e,r,"weekday")}))),n.weekdaysCache[i][e]}))},t.meridiems=function(e){var t=this;return void 0===e&&(e=!0),ut(this,void 0,e,(function(){return Se}),(function(){if(!t.meridiemCache){var e={hour:"numeric",hourCycle:"h12"};t.meridiemCache=[pn.utc(2016,11,13,9),pn.utc(2016,11,13,19)].map((function(r){return t.extract(r,e,"dayperiod")}))}return t.meridiemCache}))},t.eras=function(e,t){var r=this;return void 0===t&&(t=!0),ut(this,e,t,Ne,(function(){var t={era:e};return r.eraCache[e]||(r.eraCache[e]=[pn.utc(-40,1,1),pn.utc(2017,1,1)].map((function(e){return r.extract(e,t,"era")}))),r.eraCache[e]}))},t.extract=function(e,t,r){var n=this.dtFormatter(e,t).formatToParts().find((function(e){return e.type.toLowerCase()===r}));return n?n.value:null},t.numberFormatter=function(e){return void 0===e&&(e={}),new ct(this.intl,e.forceSimple||this.fastNumbers,e)},t.dtFormatter=function(e,t){return void 0===t&&(t={}),new lt(e,this.intl,t)},t.relFormatter=function(e){return void 0===e&&(e={}),new ht(this.intl,this.isEnglish(),e)},t.listFormatter=function(e){return void 0===e&&(e={}),function(e,t){void 0===t&&(t={});var r=JSON.stringify([e,t]),n=rt[r];return n||(n=new Intl.ListFormat(e,t),rt[r]=n),n}(this.intl,e)},t.isEnglish=function(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")},t.equals=function(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar},i(e,[{key:"fastNumbers",get:function(){var e;return null==this.fastNumbersCached&&(this.fastNumbersCached=(!(e=this).numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)),this.fastNumbersCached}}]),e}();function ft(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.reduce((function(e,t){return e+t.source}),"");return RegExp("^"+n+"$")}function pt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce((function(t,r){var n=t[0],i=t[1],o=t[2],a=r(e,o),u=a[0],c=a[1],l=a[2];return[s({},n,u),c||i,l]}),[{},null,1]).slice(0,2)}}function mt(e){if(null==e)return[null,null];for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var i=0,s=r;i<s.length;i++){var o=s[i],a=o[0],u=o[1],c=a.exec(e);if(c)return u(c)}return[null,null]}function yt(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){var n,i={};for(n=0;n<t.length;n++)i[t[n]]=re(e[r+n]);return[i,null,r+n]}}var gt=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,vt=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,bt=RegExp(""+vt.source+("(?:"+gt.source+"?(?:\\[("+ve.source+")\\])?)?")),_t=RegExp("(?:T"+bt.source+")?"),wt=yt("weekYear","weekNumber","weekDay"),Et=yt("year","ordinal"),xt=RegExp(vt.source+" ?(?:"+gt.source+"|("+ve.source+"))?"),Ct=RegExp("(?: "+xt.source+")?");function kt(e,t,r){var n=e[t];return G(n)?r:re(n)}function Ot(e,t){return[{hours:kt(e,t,0),minutes:kt(e,t+1,0),seconds:kt(e,t+2,0),milliseconds:ie(e[t+3])},null,t+4]}function St(e,t){var r=!e[t]&&!e[t+1],n=fe(e[t+1],e[t+2]);return[{},r?null:ze.instance(n),t+3]}function Tt(e,t){return[{},e[t]?Be.create(e[t]):null,t+1]}var $t=RegExp("^T?"+vt.source+"$"),jt=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Nt(e){var t=e[0],r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l="-"===t[0],h=u&&"-"===u[0],d=function(e,t){return void 0===t&&(t=!1),void 0!==e&&(t||e&&l)?-e:e};return[{years:d(ne(r)),months:d(ne(n)),weeks:d(ne(i)),days:d(ne(s)),hours:d(ne(o)),minutes:d(ne(a)),seconds:d(ne(u),"-0"===u),milliseconds:d(ie(c),h)}]}var At={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function It(e,t,r,n,i,s,o){var a={year:2===t.length?he(re(t)):re(t),month:_e.indexOf(r)+1,day:re(n),hour:re(i),minute:re(s)};return o&&(a.second=re(o)),e&&(a.weekday=e.length>3?xe.indexOf(e)+1:Ce.indexOf(e)+1),a}var Pt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Rt(e){var t,r=e[1],n=e[2],i=e[3],s=e[4],o=e[5],a=e[6],u=e[7],c=e[8],l=e[9],h=e[10],d=e[11],f=It(r,s,i,n,o,a,u);return t=c?At[c]:l?0:fe(h,d),[f,new ze(t)]}var qt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,Mt=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,Lt=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Dt(e){var t=e[1],r=e[2],n=e[3];return[It(t,e[4],n,r,e[5],e[6],e[7]),ze.utcInstance]}function Ft(e){var t=e[1],r=e[2],n=e[3],i=e[4],s=e[5],o=e[6];return[It(t,e[7],r,n,i,s,o),ze.utcInstance]}var Ut=ft(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,_t),Bt=ft(/(\d{4})-?W(\d\d)(?:-?(\d))?/,_t),Vt=ft(/(\d{4})-?(\d{3})/,_t),zt=ft(bt),Ht=pt((function(e,t){return[{year:kt(e,t),month:kt(e,t+1,1),day:kt(e,t+2,1)},null,t+3]}),Ot,St,Tt),Wt=pt(wt,Ot,St,Tt),Qt=pt(Et,Ot,St,Tt),Gt=pt(Ot,St,Tt);var Jt=pt(Ot);var Kt=ft(/(\d{4})-(\d\d)-(\d\d)/,Ct),Zt=ft(xt),Yt=pt(Ot,St,Tt);var Xt={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},er=s({years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6}},Xt),tr=365.2425,rr=30.436875,nr=s({years:{quarters:4,months:12,weeks:52.1775,days:tr,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:4.3481250000000005,days:rr,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3}},Xt),ir=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],sr=ir.slice(0).reverse();function or(e,t,r){void 0===r&&(r=!1);var n={values:r?t.values:s({},e.values,t.values||{}),loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new ur(n)}function ar(e,t,r,n,i){var s=e[i][r],o=t[r]/s,a=!(Math.sign(o)===Math.sign(n[i]))&&0!==n[i]&&Math.abs(o)<=1?function(e){return e<0?Math.floor(e):Math.ceil(e)}(o):Math.trunc(o);n[i]+=a,t[r]-=a*s}var ur=function(){function e(e){var t="longterm"===e.conversionAccuracy||!1,r=t?nr:er;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||dt.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}e.fromMillis=function(t,r){return e.fromObject({milliseconds:t},r)},e.fromObject=function(t,r){if(void 0===r&&(r={}),null==t||"object"!=typeof t)throw new w("Duration.fromObject: argument expected to be an object, got "+(null===t?"null":typeof t));return new e({values:me(t,e.normalizeUnit),loc:dt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})},e.fromDurationLike=function(t){if(J(t))return e.fromMillis(t);if(e.isDuration(t))return t;if("object"==typeof t)return e.fromObject(t);throw new w("Unknown duration argument "+t+" of type "+typeof t)},e.fromISO=function(t,r){var n=function(e){return mt(e,[jt,Nt])}(t),i=n[0];return i?e.fromObject(i,r):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.fromISOTime=function(t,r){var n=function(e){return mt(e,[$t,Jt])}(t),i=n[0];return i?e.fromObject(i,r):e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new w("need to specify a reason the Duration is invalid");var n=t instanceof Re?t:new Re(t,r);if(Xe.throwOnInvalid)throw new v(n);return new e({invalid:n})},e.normalizeUnit=function(e){var t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new _(e);return t},e.isDuration=function(e){return e&&e.isLuxonDuration||!1};var t=e.prototype;return t.toFormat=function(e,t){void 0===t&&(t={});var r=s({},t,{floor:!1!==t.round&&!1!==t.floor});return this.isValid?Pe.create(this.loc,r).formatDurationFromString(this,e):"Invalid Duration"},t.toHuman=function(e){var t=this;void 0===e&&(e={});var r=ir.map((function(r){var n=t.values[r];return G(n)?null:t.loc.numberFormatter(s({style:"unit",unitDisplay:"long"},e,{unit:r.slice(0,-1)})).format(n)})).filter((function(e){return e}));return this.loc.listFormatter(s({type:"conjunction",style:e.listStyle||"narrow"},e)).format(r)},t.toObject=function(){return this.isValid?s({},this.values):{}},t.toISO=function(){if(!this.isValid)return null;var e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=se(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e},t.toISOTime=function(e){if(void 0===e&&(e={}),!this.isValid)return null;var t=this.toMillis();if(t<0||t>=864e5)return null;e=s({suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended"},e);var r=this.shiftTo("hours","minutes","seconds","milliseconds"),n="basic"===e.format?"hhmm":"hh:mm";e.suppressSeconds&&0===r.seconds&&0===r.milliseconds||(n+="basic"===e.format?"ss":":ss",e.suppressMilliseconds&&0===r.milliseconds||(n+=".SSS"));var i=r.toFormat(n);return e.includePrefix&&(i="T"+i),i},t.toJSON=function(){return this.toISO()},t.toString=function(){return this.toISO()},t.toMillis=function(){return this.as("milliseconds")},t.valueOf=function(){return this.toMillis()},t.plus=function(t){if(!this.isValid)return this;for(var r,n=e.fromDurationLike(t),i={},s=p(ir);!(r=s()).done;){var o=r.value;(X(n.values,o)||X(this.values,o))&&(i[o]=n.get(o)+this.get(o))}return or(this,{values:i},!0)},t.minus=function(t){if(!this.isValid)return this;var r=e.fromDurationLike(t);return this.plus(r.negate())},t.mapUnits=function(e){if(!this.isValid)return this;for(var t={},r=0,n=Object.keys(this.values);r<n.length;r++){var i=n[r];t[i]=pe(e(this.values[i],i))}return or(this,{values:t},!0)},t.get=function(t){return this[e.normalizeUnit(t)]},t.set=function(t){return this.isValid?or(this,{values:s({},this.values,me(t,e.normalizeUnit))}):this},t.reconfigure=function(e){var t=void 0===e?{}:e,r=t.locale,n=t.numberingSystem,i=t.conversionAccuracy,s=t.matrix;return or(this,{loc:this.loc.clone({locale:r,numberingSystem:n}),matrix:s,conversionAccuracy:i})},t.as=function(e){return this.isValid?this.shiftTo(e).get(e):NaN},t.normalize=function(){if(!this.isValid)return this;var e=this.toObject();return function(e,t){sr.reduce((function(r,n){return G(t[n])?r:(r&&ar(e,t,r,t,n),n)}),null)}(this.matrix,e),or(this,{values:e},!0)},t.rescale=function(){return this.isValid?or(this,{values:function(e){for(var t={},r=0,n=Object.entries(e);r<n.length;r++){var i=n[r],s=i[0],o=i[1];0!==o&&(t[s]=o)}return t}(this.normalize().shiftToAll().toObject())},!0):this},t.shiftTo=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!this.isValid)return this;if(0===r.length)return this;r=r.map((function(t){return e.normalizeUnit(t)}));for(var i,s,o={},a={},u=this.toObject(),c=p(ir);!(s=c()).done;){var l=s.value;if(r.indexOf(l)>=0){i=l;var h=0;for(var d in a)h+=this.matrix[d][l]*a[d],a[d]=0;J(u[l])&&(h+=u[l]);var f=Math.trunc(h);for(var m in o[l]=f,a[l]=(1e3*h-1e3*f)/1e3,u)ir.indexOf(m)>ir.indexOf(l)&&ar(this.matrix,u,m,o,l)}else J(u[l])&&(a[l]=u[l])}for(var y in a)0!==a[y]&&(o[i]+=y===i?a[y]:a[y]/this.matrix[i][y]);return or(this,{values:o},!0).normalize()},t.shiftToAll=function(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this},t.negate=function(){if(!this.isValid)return this;for(var e={},t=0,r=Object.keys(this.values);t<r.length;t++){var n=r[t];e[n]=0===this.values[n]?0:-this.values[n]}return or(this,{values:e},!0)},t.equals=function(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;for(var t,r=p(ir);!(t=r()).done;){var n=t.value;if(i=this.values[n],s=e.values[n],!(void 0===i||0===i?void 0===s||0===s:i===s))return!1}var i,s;return!0},i(e,[{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"years",get:function(){return this.isValid?this.values.years||0:NaN}},{key:"quarters",get:function(){return this.isValid?this.values.quarters||0:NaN}},{key:"months",get:function(){return this.isValid?this.values.months||0:NaN}},{key:"weeks",get:function(){return this.isValid?this.values.weeks||0:NaN}},{key:"days",get:function(){return this.isValid?this.values.days||0:NaN}},{key:"hours",get:function(){return this.isValid?this.values.hours||0:NaN}},{key:"minutes",get:function(){return this.isValid?this.values.minutes||0:NaN}},{key:"seconds",get:function(){return this.isValid?this.values.seconds||0:NaN}},{key:"milliseconds",get:function(){return this.isValid?this.values.milliseconds||0:NaN}},{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),cr="Invalid Interval";function lr(e,t){return e&&e.isValid?t&&t.isValid?t<e?hr.invalid("end before start","The end of an interval must be after its start, but you had start="+e.toISO()+" and end="+t.toISO()):null:hr.invalid("missing or invalid end"):hr.invalid("missing or invalid start")}var hr=function(){function e(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new w("need to specify a reason the Interval is invalid");var n=t instanceof Re?t:new Re(t,r);if(Xe.throwOnInvalid)throw new g(n);return new e({invalid:n})},e.fromDateTimes=function(t,r){var n=mn(t),i=mn(r),s=lr(n,i);return null==s?new e({start:n,end:i}):s},e.after=function(t,r){var n=ur.fromDurationLike(r),i=mn(t);return e.fromDateTimes(i,i.plus(n))},e.before=function(t,r){var n=ur.fromDurationLike(r),i=mn(t);return e.fromDateTimes(i.minus(n),i)},e.fromISO=function(t,r){var n=(t||"").split("/",2),i=n[0],s=n[1];if(i&&s){var o,a,u,c;try{a=(o=pn.fromISO(i,r)).isValid}catch(s){a=!1}try{c=(u=pn.fromISO(s,r)).isValid}catch(s){c=!1}if(a&&c)return e.fromDateTimes(o,u);if(a){var l=ur.fromISO(s,r);if(l.isValid)return e.after(o,l)}else if(c){var h=ur.fromISO(i,r);if(h.isValid)return e.before(u,h)}}return e.invalid("unparsable",'the input "'+t+"\" can't be parsed as ISO 8601")},e.isInterval=function(e){return e&&e.isLuxonInterval||!1};var t=e.prototype;return t.length=function(e){return void 0===e&&(e="milliseconds"),this.isValid?this.toDuration.apply(this,[e]).get(e):NaN},t.count=function(e){if(void 0===e&&(e="milliseconds"),!this.isValid)return NaN;var t=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(t,e).get(e))+1},t.hasSame=function(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))},t.isEmpty=function(){return this.s.valueOf()===this.e.valueOf()},t.isAfter=function(e){return!!this.isValid&&this.s>e},t.isBefore=function(e){return!!this.isValid&&this.e<=e},t.contains=function(e){return!!this.isValid&&(this.s<=e&&this.e>e)},t.set=function(t){var r=void 0===t?{}:t,n=r.start,i=r.end;return this.isValid?e.fromDateTimes(n||this.s,i||this.e):this},t.splitAt=function(){var t=this;if(!this.isValid)return[];for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];for(var s=n.map(mn).filter((function(e){return t.contains(e)})).sort(),o=[],a=this.s,u=0;a<this.e;){var c=s[u]||this.e,l=+c>+this.e?this.e:c;o.push(e.fromDateTimes(a,l)),a=l,u+=1}return o},t.splitBy=function(t){var r=ur.fromDurationLike(t);if(!this.isValid||!r.isValid||0===r.as("milliseconds"))return[];for(var n,i=this.s,s=1,o=[];i<this.e;){var a=this.start.plus(r.mapUnits((function(e){return e*s})));n=+a>+this.e?this.e:a,o.push(e.fromDateTimes(i,n)),i=n,s+=1}return o},t.divideEqually=function(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]},t.overlaps=function(e){return this.e>e.s&&this.s<e.e},t.abutsStart=function(e){return!!this.isValid&&+this.e==+e.s},t.abutsEnd=function(e){return!!this.isValid&&+e.e==+this.s},t.engulfs=function(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)},t.equals=function(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))},t.intersection=function(t){if(!this.isValid)return this;var r=this.s>t.s?this.s:t.s,n=this.e<t.e?this.e:t.e;return r>=n?null:e.fromDateTimes(r,n)},t.union=function(t){if(!this.isValid)return this;var r=this.s<t.s?this.s:t.s,n=this.e>t.e?this.e:t.e;return e.fromDateTimes(r,n)},e.merge=function(e){var t=e.sort((function(e,t){return e.s-t.s})).reduce((function(e,t){var r=e[0],n=e[1];return n?n.overlaps(t)||n.abutsStart(t)?[r,n.union(t)]:[r.concat([n]),t]:[r,t]}),[[],null]),r=t[0],n=t[1];return n&&r.push(n),r},e.xor=function(t){for(var r,n,i=null,s=0,o=[],a=t.map((function(e){return[{time:e.s,type:"s"},{time:e.e,type:"e"}]})),u=p((r=Array.prototype).concat.apply(r,a).sort((function(e,t){return e.time-t.time})));!(n=u()).done;){var c=n.value;1===(s+="s"===c.type?1:-1)?i=c.time:(i&&+i!=+c.time&&o.push(e.fromDateTimes(i,c.time)),i=null)}return e.merge(o)},t.difference=function(){for(var t=this,r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e.xor([this].concat(n)).map((function(e){return t.intersection(e)})).filter((function(e){return e&&!e.isEmpty()}))},t.toString=function(){return this.isValid?"["+this.s.toISO()+"  "+this.e.toISO()+")":cr},t.toISO=function(e){return this.isValid?this.s.toISO(e)+"/"+this.e.toISO(e):cr},t.toISODate=function(){return this.isValid?this.s.toISODate()+"/"+this.e.toISODate():cr},t.toISOTime=function(e){return this.isValid?this.s.toISOTime(e)+"/"+this.e.toISOTime(e):cr},t.toFormat=function(e,t){var r=(void 0===t?{}:t).separator,n=void 0===r?"  ":r;return this.isValid?""+this.s.toFormat(e)+n+this.e.toFormat(e):cr},t.toDuration=function(e,t){return this.isValid?this.e.diff(this.s,e,t):ur.invalid(this.invalidReason)},t.mapEndpoints=function(t){return e.fromDateTimes(t(this.s),t(this.e))},i(e,[{key:"start",get:function(){return this.isValid?this.s:null}},{key:"end",get:function(){return this.isValid?this.e:null}},{key:"isValid",get:function(){return null===this.invalidReason}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}}]),e}(),dr=function(){function e(){}return e.hasDST=function(e){void 0===e&&(e=Xe.defaultZone);var t=pn.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset},e.isValidIANAZone=function(e){return Be.isValidZone(e)},e.normalizeZone=function(e){return We(e,Xe.defaultZone)},e.months=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj,u=void 0===a?null:a,c=r.outputCalendar,l=void 0===c?"gregory":c;return(u||dt.create(i,o,l)).months(e)},e.monthsFormat=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj,u=void 0===a?null:a,c=r.outputCalendar,l=void 0===c?"gregory":c;return(u||dt.create(i,o,l)).months(e,!0)},e.weekdays=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj;return((void 0===a?null:a)||dt.create(i,o,null)).weekdays(e)},e.weekdaysFormat=function(e,t){void 0===e&&(e="long");var r=void 0===t?{}:t,n=r.locale,i=void 0===n?null:n,s=r.numberingSystem,o=void 0===s?null:s,a=r.locObj;return((void 0===a?null:a)||dt.create(i,o,null)).weekdays(e,!0)},e.meridiems=function(e){var t=(void 0===e?{}:e).locale,r=void 0===t?null:t;return dt.create(r).meridiems()},e.eras=function(e,t){void 0===e&&(e="short");var r=(void 0===t?{}:t).locale,n=void 0===r?null:r;return dt.create(n,null,"gregory").eras(e)},e.features=function(){return{relative:Z()}},e}();function fr(e,t){var r=function(e){return e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf()},n=r(t)-r(e);return Math.floor(ur.fromMillis(n).as("days"))}function pr(e,t,r,n){var i=function(e,t,r){for(var n,i,s={},o=0,a=[["years",function(e,t){return t.year-e.year}],["quarters",function(e,t){return t.quarter-e.quarter+4*(t.year-e.year)}],["months",function(e,t){return t.month-e.month+12*(t.year-e.year)}],["weeks",function(e,t){var r=fr(e,t);return(r-r%7)/7}],["days",fr]];o<a.length;o++){var u=a[o],c=u[0],l=u[1];if(r.indexOf(c)>=0){var h;n=c;var d,f=l(e,t);(i=e.plus(((h={})[c]=f,h)))>t?(e=e.plus(((d={})[c]=f-1,d)),f-=1):e=i,s[c]=f}}return[e,s,i,n]}(e,t,r),s=i[0],o=i[1],a=i[2],u=i[3],c=t-s,l=r.filter((function(e){return["hours","minutes","seconds","milliseconds"].indexOf(e)>=0}));if(0===l.length){var h;if(a<t)a=s.plus(((h={})[u]=1,h));a!==s&&(o[u]=(o[u]||0)+c/(a-s))}var d,f=ur.fromObject(o,n);return l.length>0?(d=ur.fromMillis(c,n)).shiftTo.apply(d,l).plus(f):f}var mr={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},yr={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gr=mr.hanidec.replace(/[\[|\]]/g,"").split("");function vr(e,t){var r=e.numberingSystem;return void 0===t&&(t=""),new RegExp(""+mr[r||"latn"]+t)}function br(e,t){return void 0===t&&(t=function(e){return e}),{regex:e,deser:function(e){var r=e[0];return t(function(e){var t=parseInt(e,10);if(isNaN(t)){t="";for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);if(-1!==e[r].search(mr.hanidec))t+=gr.indexOf(e[r]);else for(var i in yr){var s=yr[i],o=s[0],a=s[1];n>=o&&n<=a&&(t+=n-o)}}return parseInt(t,10)}return t}(r))}}}var _r="[ "+String.fromCharCode(160)+"]",wr=new RegExp(_r,"g");function Er(e){return e.replace(/\./g,"\\.?").replace(wr,_r)}function xr(e){return e.replace(/\./g,"").replace(wr," ").toLowerCase()}function Cr(e,t){return null===e?null:{regex:RegExp(e.map(Er).join("|")),deser:function(r){var n=r[0];return e.findIndex((function(e){return xr(n)===xr(e)}))+t}}}function kr(e,t){return{regex:e,deser:function(e){return fe(e[1],e[2])},groups:t}}function Or(e){return{regex:e,deser:function(e){return e[0]}}}var Sr={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};var Tr=null;function $r(e,t){var r;return(r=Array.prototype).concat.apply(r,e.map((function(e){return function(e,t){if(e.literal)return e;var r=Nr(Pe.macroTokenToFormatOpts(e.val),t);return null==r||r.includes(void 0)?e:r}(e,t)})))}function jr(e,t,r){var n=$r(Pe.parseFormat(r),e),i=n.map((function(t){return r=t,i=vr(n=e),s=vr(n,"{2}"),o=vr(n,"{3}"),a=vr(n,"{4}"),u=vr(n,"{6}"),c=vr(n,"{1,2}"),l=vr(n,"{1,3}"),h=vr(n,"{1,6}"),d=vr(n,"{1,9}"),f=vr(n,"{2,4}"),p=vr(n,"{4,6}"),m=function(e){return{regex:RegExp((t=e.val,t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:function(e){return e[0]},literal:!0};var t},y=function(e){if(r.literal)return m(e);switch(e.val){case"G":return Cr(n.eras("short",!1),0);case"GG":return Cr(n.eras("long",!1),0);case"y":return br(h);case"yy":case"kk":return br(f,he);case"yyyy":case"kkkk":return br(a);case"yyyyy":return br(p);case"yyyyyy":return br(u);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return br(c);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return br(s);case"MMM":return Cr(n.months("short",!0,!1),1);case"MMMM":return Cr(n.months("long",!0,!1),1);case"LLL":return Cr(n.months("short",!1,!1),1);case"LLLL":return Cr(n.months("long",!1,!1),1);case"o":case"S":return br(l);case"ooo":case"SSS":return br(o);case"u":return Or(d);case"uu":return Or(c);case"uuu":case"E":case"c":return br(i);case"a":return Cr(n.meridiems(),0);case"EEE":return Cr(n.weekdays("short",!1,!1),1);case"EEEE":return Cr(n.weekdays("long",!1,!1),1);case"ccc":return Cr(n.weekdays("short",!0,!1),1);case"cccc":return Cr(n.weekdays("long",!0,!1),1);case"Z":case"ZZ":return kr(new RegExp("([+-]"+c.source+")(?::("+s.source+"))?"),2);case"ZZZ":return kr(new RegExp("([+-]"+c.source+")("+s.source+")?"),2);case"z":return Or(/[a-z_+-/]{1,256}?/i);default:return m(e)}}(r)||{invalidReason:"missing Intl.DateTimeFormat.formatToParts support"},y.token=r,y;var r,n,i,s,o,a,u,c,l,h,d,f,p,m,y})),s=i.find((function(e){return e.invalidReason}));if(s)return{input:t,tokens:n,invalidReason:s.invalidReason};var o=function(e){return["^"+e.map((function(e){return e.regex})).reduce((function(e,t){return e+"("+t.source+")"}),"")+"$",e]}(i),a=o[0],u=o[1],c=RegExp(a,"i"),l=function(e,t,r){var n=e.match(t);if(n){var i={},s=1;for(var o in r)if(X(r,o)){var a=r[o],u=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(n.slice(s,s+u))),s+=u}return[n,i]}return[n,{}]}(t,c,u),h=l[0],d=l[1],f=d?function(e){var t,r=null;return G(e.z)||(r=Be.create(e.z)),G(e.Z)||(r||(r=new ze(e.Z)),t=e.Z),G(e.q)||(e.M=3*(e.q-1)+1),G(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),G(e.u)||(e.S=ie(e.u)),[Object.keys(e).reduce((function(t,r){var n=function(e){switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}}(r);return n&&(t[n]=e[r]),t}),{}),r,t]}(d):[null,null,void 0],p=f[0],m=f[1],y=f[2];if(X(d,"a")&&X(d,"H"))throw new b("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:n,regex:c,rawMatches:h,matches:d,result:p,zone:m,specificOffset:y}}function Nr(e,t){return e?Pe.create(t,e).formatDateTimeParts((Tr||(Tr=pn.fromMillis(1555555555555)),Tr)).map((function(t){return function(e,t,r){var n=e.type,i=e.value;if("literal"===n)return{literal:!0,val:i};var s=r[n],o=Sr[n];return"object"==typeof o&&(o=o[s]),o?{literal:!1,val:o}:void 0}(t,0,e)})):null}var Ar=[0,31,59,90,120,151,181,212,243,273,304,334],Ir=[0,31,60,91,121,152,182,213,244,274,305,335];function Pr(e,t){return new Re("unit out of range","you specified "+t+" (of type "+typeof t+") as a "+e+", which is invalid")}function Rr(e,t,r){var n=new Date(Date.UTC(e,t-1,r));e<100&&e>=0&&n.setUTCFullYear(n.getUTCFullYear()-1900);var i=n.getUTCDay();return 0===i?7:i}function qr(e,t,r){return r+(oe(e)?Ir:Ar)[t-1]}function Mr(e,t){var r=oe(e)?Ir:Ar,n=r.findIndex((function(e){return e<t}));return{month:n+1,day:t-r[n]}}function Lr(e){var t,r=e.year,n=e.month,i=e.day,o=qr(r,n,i),a=Rr(r,n,i),u=Math.floor((o-a+10)/7);return u<1?u=le(t=r-1):u>le(r)?(t=r+1,u=1):t=r,s({weekYear:t,weekNumber:u,weekday:a},ge(e))}function Dr(e){var t,r=e.weekYear,n=e.weekNumber,i=e.weekday,o=Rr(r,1,4),a=ae(r),u=7*n+i-o-3;u<1?u+=ae(t=r-1):u>a?(t=r+1,u-=ae(r)):t=r;var c=Mr(t,u);return s({year:t,month:c.month,day:c.day},ge(e))}function Fr(e){var t=e.year;return s({year:t,ordinal:qr(t,e.month,e.day)},ge(e))}function Ur(e){var t=e.year,r=Mr(t,e.ordinal);return s({year:t,month:r.month,day:r.day},ge(e))}function Br(e){var t=K(e.year),r=ee(e.month,1,12),n=ee(e.day,1,ue(e.year,e.month));return t?r?!n&&Pr("day",e.day):Pr("month",e.month):Pr("year",e.year)}function Vr(e){var t=e.hour,r=e.minute,n=e.second,i=e.millisecond,s=ee(t,0,23)||24===t&&0===r&&0===n&&0===i,o=ee(r,0,59),a=ee(n,0,59),u=ee(i,0,999);return s?o?a?!u&&Pr("millisecond",i):Pr("second",n):Pr("minute",r):Pr("hour",t)}var zr="Invalid DateTime",Hr=864e13;function Wr(e){return new Re("unsupported zone",'the zone "'+e.name+'" is not supported')}function Qr(e){return null===e.weekData&&(e.weekData=Lr(e.c)),e.weekData}function Gr(e,t){var r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new pn(s({},r,t,{old:r}))}function Jr(e,t,r){var n=e-60*t*1e3,i=r.offset(n);if(t===i)return[n,t];n-=60*(i-t)*1e3;var s=r.offset(n);return i===s?[n,i]:[e-60*Math.min(i,s)*1e3,Math.max(i,s)]}function Kr(e,t){var r=new Date(e+=60*t*1e3);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Zr(e,t,r){return Jr(ce(e),t,r)}function Yr(e,t){var r=e.o,n=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),o=s({},e.c,{year:n,month:i,day:Math.min(e.c.day,ue(n,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)}),a=ur.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),u=Jr(ce(o),r,e.zone),c=u[0],l=u[1];return 0!==a&&(c+=a,l=e.zone.offset(c)),{ts:c,o:l}}function Xr(e,t,r,n,i,o){var a=r.setZone,u=r.zone;if(e&&0!==Object.keys(e).length){var c=t||u,l=pn.fromObject(e,s({},r,{zone:c,specificOffset:o}));return a?l:l.setZone(u)}return pn.invalid(new Re("unparsable",'the input "'+i+"\" can't be parsed as "+n))}function en(e,t,r){return void 0===r&&(r=!0),e.isValid?Pe.create(dt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function tn(e,t){var r=e.c.year>9999||e.c.year<0,n="";return r&&e.c.year>=0&&(n+="+"),n+=te(e.c.year,r?6:4),t?(n+="-",n+=te(e.c.month),n+="-",n+=te(e.c.day)):(n+=te(e.c.month),n+=te(e.c.day)),n}function rn(e,t,r,n,i,s){var o=te(e.c.hour);return t?(o+=":",o+=te(e.c.minute),0===e.c.second&&r||(o+=":")):o+=te(e.c.minute),0===e.c.second&&r||(o+=te(e.c.second),0===e.c.millisecond&&n||(o+=".",o+=te(e.c.millisecond,3))),i&&(e.isOffsetFixed&&0===e.offset&&!s?o+="Z":e.o<0?(o+="-",o+=te(Math.trunc(-e.o/60)),o+=":",o+=te(Math.trunc(-e.o%60))):(o+="+",o+=te(Math.trunc(e.o/60)),o+=":",o+=te(Math.trunc(e.o%60)))),s&&(o+="["+e.zone.ianaName+"]"),o}var nn={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},sn={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},on={ordinal:1,hour:0,minute:0,second:0,millisecond:0},an=["year","month","day","hour","minute","second","millisecond"],un=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],cn=["year","ordinal","hour","minute","second","millisecond"];function ln(e){var t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new _(e);return t}function hn(e,t){var r,n,i=We(t.zone,Xe.defaultZone),s=dt.fromObject(t),o=Xe.now();if(G(e.year))r=o;else{for(var a,u=p(an);!(a=u()).done;){var c=a.value;G(e[c])&&(e[c]=nn[c])}var l=Br(e)||Vr(e);if(l)return pn.invalid(l);var h=Zr(e,i.offset(o),i);r=h[0],n=h[1]}return new pn({ts:r,zone:i,loc:s,o:n})}function dn(e,t,r){var n=!!G(r.round)||r.round,i=function(e,i){return e=se(e,n||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(e,i)},s=function(n){return r.calendary?t.hasSame(e,n)?0:t.startOf(n).diff(e.startOf(n),n).get(n):t.diff(e,n).get(n)};if(r.unit)return i(s(r.unit),r.unit);for(var o,a=p(r.units);!(o=a()).done;){var u=o.value,c=s(u);if(Math.abs(c)>=1)return i(c,u)}return i(e>t?-0:0,r.units[r.units.length-1])}function fn(e){var t,r={};return e.length>0&&"object"==typeof e[e.length-1]?(r=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[r,t]}var pn=function(){function e(e){var t=e.zone||Xe.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new Re("invalid input"):null)||(t.isValid?null:Wr(t));this.ts=G(e.ts)?Xe.now():e.ts;var n=null,i=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t)){var s=[e.old.c,e.old.o];n=s[0],i=s[1]}else{var o=t.offset(this.ts);n=Kr(this.ts,o),n=(r=Number.isNaN(n.year)?new Re("invalid input"):null)?null:n,i=r?null:o}this._zone=t,this.loc=e.loc||dt.create(),this.invalid=r,this.weekData=null,this.c=n,this.o=i,this.isLuxonDateTime=!0}e.now=function(){return new e({})},e.local=function(){var e=fn(arguments),t=e[0],r=e[1],n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],c=r[6];return hn({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},t)},e.utc=function(){var e=fn(arguments),t=e[0],r=e[1],n=r[0],i=r[1],s=r[2],o=r[3],a=r[4],u=r[5],c=r[6];return t.zone=ze.utcInstance,hn({year:n,month:i,day:s,hour:o,minute:a,second:u,millisecond:c},t)},e.fromJSDate=function(t,r){void 0===r&&(r={});var n,i=(n=t,"[object Date]"===Object.prototype.toString.call(n)?t.valueOf():NaN);if(Number.isNaN(i))return e.invalid("invalid input");var s=We(r.zone,Xe.defaultZone);return s.isValid?new e({ts:i,zone:s,loc:dt.fromObject(r)}):e.invalid(Wr(s))},e.fromMillis=function(t,r){if(void 0===r&&(r={}),J(t))return t<-Hr||t>Hr?e.invalid("Timestamp out of range"):new e({ts:t,zone:We(r.zone,Xe.defaultZone),loc:dt.fromObject(r)});throw new w("fromMillis requires a numerical input, but received a "+typeof t+" with value "+t)},e.fromSeconds=function(t,r){if(void 0===r&&(r={}),J(t))return new e({ts:1e3*t,zone:We(r.zone,Xe.defaultZone),loc:dt.fromObject(r)});throw new w("fromSeconds requires a numerical input")},e.fromObject=function(t,r){void 0===r&&(r={}),t=t||{};var n=We(r.zone,Xe.defaultZone);if(!n.isValid)return e.invalid(Wr(n));var i=Xe.now(),s=G(r.specificOffset)?n.offset(i):r.specificOffset,o=me(t,ln),a=!G(o.ordinal),u=!G(o.year),c=!G(o.month)||!G(o.day),l=u||c,h=o.weekYear||o.weekNumber,d=dt.fromObject(r);if((l||a)&&h)throw new b("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&a)throw new b("Can't mix ordinal dates with month/day");var f,m,y=h||o.weekday&&!l,g=Kr(i,s);y?(f=un,m=sn,g=Lr(g)):a?(f=cn,m=on,g=Fr(g)):(f=an,m=nn);for(var v,_=!1,w=p(f);!(v=w()).done;){var E=v.value;G(o[E])?o[E]=_?m[E]:g[E]:_=!0}var x=y?function(e){var t=K(e.weekYear),r=ee(e.weekNumber,1,le(e.weekYear)),n=ee(e.weekday,1,7);return t?r?!n&&Pr("weekday",e.weekday):Pr("week",e.week):Pr("weekYear",e.weekYear)}(o):a?function(e){var t=K(e.year),r=ee(e.ordinal,1,ae(e.year));return t?!r&&Pr("ordinal",e.ordinal):Pr("year",e.year)}(o):Br(o),C=x||Vr(o);if(C)return e.invalid(C);var k=Zr(y?Dr(o):a?Ur(o):o,s,n),O=new e({ts:k[0],zone:n,o:k[1],loc:d});return o.weekday&&l&&t.weekday!==O.weekday?e.invalid("mismatched weekday","you can't specify both a weekday of "+o.weekday+" and a date of "+O.toISO()):O},e.fromISO=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[Ut,Ht],[Bt,Wt],[Vt,Qt],[zt,Gt])}(e);return Xr(r[0],r[1],t,"ISO 8601",e)},e.fromRFC2822=function(e,t){void 0===t&&(t={});var r=function(e){return mt(function(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(e),[Pt,Rt])}(e);return Xr(r[0],r[1],t,"RFC 2822",e)},e.fromHTTP=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[qt,Dt],[Mt,Dt],[Lt,Ft])}(e);return Xr(r[0],r[1],t,"HTTP",t)},e.fromFormat=function(t,r,n){if(void 0===n&&(n={}),G(t)||G(r))throw new w("fromFormat requires an input string and a format");var i=n,s=i.locale,o=void 0===s?null:s,a=i.numberingSystem,u=void 0===a?null:a,c=function(e,t,r){var n=jr(e,t,r);return[n.result,n.zone,n.specificOffset,n.invalidReason]}(dt.fromOpts({locale:o,numberingSystem:u,defaultToEN:!0}),t,r),l=c[0],h=c[1],d=c[2],f=c[3];return f?e.invalid(f):Xr(l,h,n,"format "+r,t,d)},e.fromString=function(t,r,n){return void 0===n&&(n={}),e.fromFormat(t,r,n)},e.fromSQL=function(e,t){void 0===t&&(t={});var r=function(e){return mt(e,[Kt,Ht],[Zt,Yt])}(e);return Xr(r[0],r[1],t,"SQL",e)},e.invalid=function(t,r){if(void 0===r&&(r=null),!t)throw new w("need to specify a reason the DateTime is invalid");var n=t instanceof Re?t:new Re(t,r);if(Xe.throwOnInvalid)throw new y(n);return new e({invalid:n})},e.isDateTime=function(e){return e&&e.isLuxonDateTime||!1},e.parseFormatForOpts=function(e,t){void 0===t&&(t={});var r=Nr(e,dt.fromObject(t));return r?r.map((function(e){return e?e.val:null})).join(""):null},e.expandFormat=function(e,t){return void 0===t&&(t={}),$r(Pe.parseFormat(e),dt.fromObject(t)).map((function(e){return e.val})).join("")};var t=e.prototype;return t.get=function(e){return this[e]},t.resolvedLocaleOptions=function(e){void 0===e&&(e={});var t=Pe.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t.locale,numberingSystem:t.numberingSystem,outputCalendar:t.calendar}},t.toUTC=function(e,t){return void 0===e&&(e=0),void 0===t&&(t={}),this.setZone(ze.instance(e),t)},t.toLocal=function(){return this.setZone(Xe.defaultZone)},t.setZone=function(t,r){var n=void 0===r?{}:r,i=n.keepLocalTime,s=void 0!==i&&i,o=n.keepCalendarTime,a=void 0!==o&&o;if((t=We(t,Xe.defaultZone)).equals(this.zone))return this;if(t.isValid){var u=this.ts;if(s||a){var c=t.offset(this.ts);u=Zr(this.toObject(),c,t)[0]}return Gr(this,{ts:u,zone:t})}return e.invalid(Wr(t))},t.reconfigure=function(e){var t=void 0===e?{}:e,r=t.locale,n=t.numberingSystem,i=t.outputCalendar;return Gr(this,{loc:this.loc.clone({locale:r,numberingSystem:n,outputCalendar:i})})},t.setLocale=function(e){return this.reconfigure({locale:e})},t.set=function(e){if(!this.isValid)return this;var t,r=me(e,ln),n=!G(r.weekYear)||!G(r.weekNumber)||!G(r.weekday),i=!G(r.ordinal),o=!G(r.year),a=!G(r.month)||!G(r.day),u=o||a,c=r.weekYear||r.weekNumber;if((u||i)&&c)throw new b("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new b("Can't mix ordinal dates with month/day");n?t=Dr(s({},Lr(this.c),r)):G(r.ordinal)?(t=s({},this.toObject(),r),G(r.day)&&(t.day=Math.min(ue(t.year,t.month),t.day))):t=Ur(s({},Fr(this.c),r));var l=Zr(t,this.o,this.zone);return Gr(this,{ts:l[0],o:l[1]})},t.plus=function(e){return this.isValid?Gr(this,Yr(this,ur.fromDurationLike(e))):this},t.minus=function(e){return this.isValid?Gr(this,Yr(this,ur.fromDurationLike(e).negate())):this},t.startOf=function(e){if(!this.isValid)return this;var t={},r=ur.normalizeUnit(e);switch(r){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0}if("weeks"===r&&(t.weekday=1),"quarters"===r){var n=Math.ceil(this.month/3);t.month=3*(n-1)+1}return this.set(t)},t.endOf=function(e){var t;return this.isValid?this.plus((t={},t[e]=1,t)).startOf(e).minus(1):this},t.toFormat=function(e,t){return void 0===t&&(t={}),this.isValid?Pe.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):zr},t.toLocaleString=function(e,t){return void 0===e&&(e=O),void 0===t&&(t={}),this.isValid?Pe.create(this.loc.clone(t),e).formatDateTime(this):zr},t.toLocaleParts=function(e){return void 0===e&&(e={}),this.isValid?Pe.create(this.loc.clone(e),e).formatDateTimeParts(this):[]},t.toISO=function(e){var t=void 0===e?{}:e,r=t.format,n=void 0===r?"extended":r,i=t.suppressSeconds,s=void 0!==i&&i,o=t.suppressMilliseconds,a=void 0!==o&&o,u=t.includeOffset,c=void 0===u||u,l=t.extendedZone,h=void 0!==l&&l;if(!this.isValid)return null;var d="extended"===n,f=tn(this,d);return f+="T",f+=rn(this,d,s,a,c,h)},t.toISODate=function(e){var t=(void 0===e?{}:e).format,r=void 0===t?"extended":t;return this.isValid?tn(this,"extended"===r):null},t.toISOWeekDate=function(){return en(this,"kkkk-'W'WW-c")},t.toISOTime=function(e){var t=void 0===e?{}:e,r=t.suppressMilliseconds,n=void 0!==r&&r,i=t.suppressSeconds,s=void 0!==i&&i,o=t.includeOffset,a=void 0===o||o,u=t.includePrefix,c=void 0!==u&&u,l=t.extendedZone,h=void 0!==l&&l,d=t.format,f=void 0===d?"extended":d;return this.isValid?(c?"T":"")+rn(this,"extended"===f,s,n,a,h):null},t.toRFC2822=function(){return en(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)},t.toHTTP=function(){return en(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")},t.toSQLDate=function(){return this.isValid?tn(this,!0):null},t.toSQLTime=function(e){var t=void 0===e?{}:e,r=t.includeOffset,n=void 0===r||r,i=t.includeZone,s=void 0!==i&&i,o=t.includeOffsetSpace,a="HH:mm:ss.SSS";return(s||n)&&((void 0===o||o)&&(a+=" "),s?a+="z":n&&(a+="ZZ")),en(this,a,!0)},t.toSQL=function(e){return void 0===e&&(e={}),this.isValid?this.toSQLDate()+" "+this.toSQLTime(e):null},t.toString=function(){return this.isValid?this.toISO():zr},t.valueOf=function(){return this.toMillis()},t.toMillis=function(){return this.isValid?this.ts:NaN},t.toSeconds=function(){return this.isValid?this.ts/1e3:NaN},t.toUnixInteger=function(){return this.isValid?Math.floor(this.ts/1e3):NaN},t.toJSON=function(){return this.toISO()},t.toBSON=function(){return this.toJSDate()},t.toObject=function(e){if(void 0===e&&(e={}),!this.isValid)return{};var t=s({},this.c);return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t},t.toJSDate=function(){return new Date(this.isValid?this.ts:NaN)},t.diff=function(e,t,r){if(void 0===t&&(t="milliseconds"),void 0===r&&(r={}),!this.isValid||!e.isValid)return ur.invalid("created by diffing an invalid DateTime");var n,i=s({locale:this.locale,numberingSystem:this.numberingSystem},r),o=(n=t,Array.isArray(n)?n:[n]).map(ur.normalizeUnit),a=e.valueOf()>this.valueOf(),u=pr(a?this:e,a?e:this,o,i);return a?u.negate():u},t.diffNow=function(t,r){return void 0===t&&(t="milliseconds"),void 0===r&&(r={}),this.diff(e.now(),t,r)},t.until=function(e){return this.isValid?hr.fromDateTimes(this,e):this},t.hasSame=function(e,t){if(!this.isValid)return!1;var r=e.valueOf(),n=this.setZone(e.zone,{keepLocalTime:!0});return n.startOf(t)<=r&&r<=n.endOf(t)},t.equals=function(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)},t.toRelative=function(t){if(void 0===t&&(t={}),!this.isValid)return null;var r=t.base||e.fromObject({},{zone:this.zone}),n=t.padding?this<r?-t.padding:t.padding:0,i=["years","months","days","hours","minutes","seconds"],o=t.unit;return Array.isArray(t.unit)&&(i=t.unit,o=void 0),dn(r,this.plus(n),s({},t,{numeric:"always",units:i,unit:o}))},t.toRelativeCalendar=function(t){return void 0===t&&(t={}),this.isValid?dn(t.base||e.fromObject({},{zone:this.zone}),this,s({},t,{numeric:"auto",units:["years","months","days"],calendary:!0})):null},e.min=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.every(e.isDateTime))throw new w("min requires all arguments be DateTimes");return Y(r,(function(e){return e.valueOf()}),Math.min)},e.max=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.every(e.isDateTime))throw new w("max requires all arguments be DateTimes");return Y(r,(function(e){return e.valueOf()}),Math.max)},e.fromFormatExplain=function(e,t,r){void 0===r&&(r={});var n=r,i=n.locale,s=void 0===i?null:i,o=n.numberingSystem,a=void 0===o?null:o;return jr(dt.fromOpts({locale:s,numberingSystem:a,defaultToEN:!0}),e,t)},e.fromStringExplain=function(t,r,n){return void 0===n&&(n={}),e.fromFormatExplain(t,r,n)},i(e,[{key:"isValid",get:function(){return null===this.invalid}},{key:"invalidReason",get:function(){return this.invalid?this.invalid.reason:null}},{key:"invalidExplanation",get:function(){return this.invalid?this.invalid.explanation:null}},{key:"locale",get:function(){return this.isValid?this.loc.locale:null}},{key:"numberingSystem",get:function(){return this.isValid?this.loc.numberingSystem:null}},{key:"outputCalendar",get:function(){return this.isValid?this.loc.outputCalendar:null}},{key:"zone",get:function(){return this._zone}},{key:"zoneName",get:function(){return this.isValid?this.zone.name:null}},{key:"year",get:function(){return this.isValid?this.c.year:NaN}},{key:"quarter",get:function(){return this.isValid?Math.ceil(this.c.month/3):NaN}},{key:"month",get:function(){return this.isValid?this.c.month:NaN}},{key:"day",get:function(){return this.isValid?this.c.day:NaN}},{key:"hour",get:function(){return this.isValid?this.c.hour:NaN}},{key:"minute",get:function(){return this.isValid?this.c.minute:NaN}},{key:"second",get:function(){return this.isValid?this.c.second:NaN}},{key:"millisecond",get:function(){return this.isValid?this.c.millisecond:NaN}},{key:"weekYear",get:function(){return this.isValid?Qr(this).weekYear:NaN}},{key:"weekNumber",get:function(){return this.isValid?Qr(this).weekNumber:NaN}},{key:"weekday",get:function(){return this.isValid?Qr(this).weekday:NaN}},{key:"ordinal",get:function(){return this.isValid?Fr(this.c).ordinal:NaN}},{key:"monthShort",get:function(){return this.isValid?dr.months("short",{locObj:this.loc})[this.month-1]:null}},{key:"monthLong",get:function(){return this.isValid?dr.months("long",{locObj:this.loc})[this.month-1]:null}},{key:"weekdayShort",get:function(){return this.isValid?dr.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}},{key:"weekdayLong",get:function(){return this.isValid?dr.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}},{key:"offset",get:function(){return this.isValid?+this.o:NaN}},{key:"offsetNameShort",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}},{key:"offsetNameLong",get:function(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}},{key:"isOffsetFixed",get:function(){return this.isValid?this.zone.isUniversal:null}},{key:"isInDST",get:function(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}},{key:"isInLeapYear",get:function(){return oe(this.year)}},{key:"daysInMonth",get:function(){return ue(this.year,this.month)}},{key:"daysInYear",get:function(){return this.isValid?ae(this.year):NaN}},{key:"weeksInWeekYear",get:function(){return this.isValid?le(this.weekYear):NaN}}],[{key:"DATE_SHORT",get:function(){return O}},{key:"DATE_MED",get:function(){return S}},{key:"DATE_MED_WITH_WEEKDAY",get:function(){return T}},{key:"DATE_FULL",get:function(){return $}},{key:"DATE_HUGE",get:function(){return j}},{key:"TIME_SIMPLE",get:function(){return N}},{key:"TIME_WITH_SECONDS",get:function(){return A}},{key:"TIME_WITH_SHORT_OFFSET",get:function(){return I}},{key:"TIME_WITH_LONG_OFFSET",get:function(){return P}},{key:"TIME_24_SIMPLE",get:function(){return R}},{key:"TIME_24_WITH_SECONDS",get:function(){return q}},{key:"TIME_24_WITH_SHORT_OFFSET",get:function(){return M}},{key:"TIME_24_WITH_LONG_OFFSET",get:function(){return L}},{key:"DATETIME_SHORT",get:function(){return D}},{key:"DATETIME_SHORT_WITH_SECONDS",get:function(){return F}},{key:"DATETIME_MED",get:function(){return U}},{key:"DATETIME_MED_WITH_SECONDS",get:function(){return B}},{key:"DATETIME_MED_WITH_WEEKDAY",get:function(){return V}},{key:"DATETIME_FULL",get:function(){return z}},{key:"DATETIME_FULL_WITH_SECONDS",get:function(){return H}},{key:"DATETIME_HUGE",get:function(){return W}},{key:"DATETIME_HUGE_WITH_SECONDS",get:function(){return Q}}]),e}();function mn(e){if(pn.isDateTime(e))return e;if(e&&e.valueOf&&J(e.valueOf()))return pn.fromJSDate(e);if(e&&"object"==typeof e)return pn.fromObject(e);throw new w("Unknown datetime argument: "+e+", of type "+typeof e)}r.DateTime=pn,r.Duration=ur,r.FixedOffsetZone=ze,r.IANAZone=Be,r.Info=dr,r.Interval=hr,r.InvalidZone=He,r.Settings=Xe,r.SystemZone=Le,r.VERSION="3.1.0",r.Zone=qe},{}],541:[function(e,t,r){var n=1e3,i=60*n,s=60*i,o=24*s,a=7*o,u=365.25*o;function c(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*u;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*o;case"hours":case"hour":case"hrs":case"hr":case"h":return r*s;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=o)return c(e,t,o,"day");if(t>=s)return c(e,t,s,"hour");if(t>=i)return c(e,t,i,"minute");if(t>=n)return c(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=o)return Math.round(e/o)+"d";if(t>=s)return Math.round(e/s)+"h";if(t>=i)return Math.round(e/i)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],542:[function(e,t,r){(function(t){const n=e("./lib/jws.js"),i=e("./lib/jwe.js"),{responder:s}=e("./lib/common.js");function o(e){if(this.parts="string"==typeof e?e.split("."):[],3===this.parts.length)this.type="JWS";else{if(5!==this.parts.length)return void(this.error={message:"Invalid token"});this.type="JWE"}try{this.header=JSON.parse(t.from(this.parts[0],"base64"))}catch(e){return void(this.error={message:`Non parsable header. ${e.message}`})}if("JWS"===this.type)try{this.payload=JSON.parse(t.from(this.parts[1],"base64"))}catch(e){this.error={message:`Non parsable payload. ${e.message}`}}}r.generate=(e,...t)=>{if(t[0].constructor===Object)return n.generate(e,...t);if(t[1].constructor===Object)return i.generate(e,...t);let r=t.length-1;if(!(r>1&&r<5&&"function"==typeof t[r]))throw error;t[r](error)},r.parse=e=>new o(e),o.prototype.setAlgorithmList=function(e,t){return"string"==typeof e?this.algList=[e]:Array.isArray(e)&&(this.algList=e),"string"==typeof t?this.encList=[t]:Array.isArray(t)&&(this.encList=t),this},o.prototype.setTokenLifetime=function(e){return Number.isInteger(e)&&e>0&&(this.lifetime=e),this},o.prototype.setAudience=function(e){return"string"==typeof e?this.audList=[e]:Array.isArray(e)&&(this.audList=e),this},o.prototype.setIssuer=function(e){return"string"==typeof e?this.issList=[e]:Array.isArray(e)&&(this.issList=e),this},o.prototype.verify=function(e,t){if(t="function"==typeof t?t:void 0,this.error)return s(null,this,t);let r;if(e.constructor!==Object)r=e;else{if(void 0===this.header.kid)return this.error={message:"Missing kid claim in header"},s(null,this,t);if(void 0===e[this.header.kid])return this.error={message:"Key with id not found",kid:this.header.kid},s(null,this,t);r=e[this.header.kid]}return("JWS"===this.type?n.verify:i.verify)(this,r,t)}}).call(this,e("buffer").Buffer)},{"./lib/common.js":543,"./lib/jwe.js":545,"./lib/jws.js":546,buffer:void 0}],543:[function(e,t,r){function n(e,t,r){if(!r){if(e)throw e;return t}r(e,t)}r.buf2b64url=e=>e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),r.responder=n,r.payloadVerifications=(e,t)=>{if(e.audList){if(void 0===e.payload.aud)return e.error={message:"Missing aud claim in payload"},n(null,e,t);if(!e.audList.includes(e.payload.aud))return e.error={message:"Mismatching aud claim in payload"},n(null,e,t)}if(e.issList){if(void 0===e.payload.iss)return e.error={message:"Missing iss claim in payload"},n(null,e,t);if(!e.issList.includes(e.payload.iss))return e.error={message:"Mismatching iss claim in payload"},n(null,e,t)}let r=Number(e.payload.iat);if(!r)return e.error={message:"Missing or invalid iat claim in payload"},n(null,e,t);let i=Number(e.payload.exp);if(e.lifetime){let t=r+e.lifetime;(!i||t<i)&&(i=t)}return i&&Date.now()>1e3*i?(e.expired=i,n(null,e,t)):(e.valid=!0,n(null,e,t))}},{}],544:[function(e,t,r){(function(e){const t="Could not extract parameters from DER signature";function n(e,t,r){let n=0;for(;t+n<r&&0===e[t+n];)n++;return e[t+n]>=128?--n:n}r.derToConcat=(r,n)=>{let i=0;if(48!==r[i++])throw new Error(t);let s=r[i++];if(129===s&&(s=r[i++]),s>r.length-i||2!==r[i++])throw new Error(t);let o=r[i++];if(o>r.length-i-2||o>n+1)throw new Error(t);let a=i;if(i+=o,2!==r[i++])throw new Error(t);let u=r[i++];if(u!==r.length-i||u>n+1)throw new Error(t);let c=i;if(i+=u,i!==r.length)throw new Error(t);let l=n-o,h=n-u,d=e.allocUnsafe(l+o+h+u);for(i=0;i<l;i++)d[i]=0;let f=Math.max(-l,0);r.copy(d,i,a+f,a+o),i=n;for(let e=i;i<e+h;i++)d[i]=0;let p=Math.max(-h,0);return r.copy(d,i,c+p,c+u),d},r.concatToDer=(t,r)=>{let i=n(t,0,r),s=n(t,r,t.length),o=r-i,a=r-s,u=o+a+4,c=u<128,l=e.allocUnsafe((c?2:3)+u),h=0;return l[h++]=48,c?l[h++]=u:(l[h++]=129,l[h++]=255&u),l[h++]=2,l[h++]=o,i<0?(l[h++]=0,h+=t.copy(l,h,0,r)):h+=t.copy(l,h,i,r),l[h++]=2,l[h++]=a,s<0?(l[h++]=0,t.copy(l,h,r)):t.copy(l,h,r+s),l}}).call(this,e("buffer").Buffer)},{buffer:void 0}],545:[function(e,t,r){(function(t){const n=e("crypto"),{responder:i,buf2b64url:s,payloadVerifications:o}=e("./common.js"),a=/^(PBES2-HS(256|384|512)\053)?(RSA-OAEP|dir|A(128|192|256)KW)$/,u=/^A(128|192|256)(GCM|CBC-HS(256|384|512))$/;function c(e,r,s,o,a,u){let c,l,d=r[3]?+r[1]>>2:+r[1]>>3,p=r[3]?f:h;if("dir"!==e[0]){c=n.randomBytes(d);let t=e[4]?g:m;try{l=t(c,a,+e[4])}catch(e){return i(e,null,u)}}else{if("string"==typeof a)a=t.from(a,"base64");else if(!(a instanceof t)){let e=new TypeError("Key must be a buffer or a base64 string");return i(e,null,u)}if(a.length<d){let e=new TypeError(`Key must be at least ${d} bytes`);return i(e,null,u)}c=a.slice(0,d),l=""}o.iat=Math.floor(Date.now()/1e3);let y=p(s,c,l,JSON.stringify(o),+r[1]);return i(null,y,u)}function l(e,r,n,s,a){let u,c,l=t.from(e.parts[0]),h=t.from(e.parts[1],"base64"),f=t.from(e.parts[2],"base64"),m=t.from(e.parts[3],"base64"),g=t.from(e.parts[4],"base64"),b=n[3]?+n[1]>>2:+n[1]>>3,_=n[3]?p:d;if("dir"!==r[0]){let t=r[4]?v:y;try{u=t(h,s,+r[4])}catch(t){return e.error={message:`Could not decrypt token. ${t.message}`},i(null,e,a)}}else{if("string"==typeof s)s=t.from(s,"base64");else if(!(s instanceof t))return e.error={message:"Invalid key"},i(null,e,a);if(s.length<b)return e.error={message:`Invalid key length. Must be at least ${b} bytes`},i(null,e,a);u=s.slice(0,b)}try{c=_(m,l,g,u,f,+n[1])}catch(t){return e.error={message:`Could not decrypt token. ${t.message}`},i(null,e,a)}try{e.payload=JSON.parse(c)}catch(t){return e.error={message:`Non parsable payload. ${t.message}`},i(null,e,a)}return o(e,a)}function h(e,r,i,o,a){let u=n.randomBytes(12),c=n.createCipheriv(`id-aes${a}-GCM`,r,u);c.setAutoPadding(!1),c.setAAD(t.from(e));let l=s(t.concat([c.update(o),c.final()])),h=s(c.getAuthTag());return`${e}.${i}.${s(u)}.${l}.${h}`}function d(e,r,i,s,o,a){let u=n.createDecipheriv(`id-aes${a}-GCM`,s,o);return u.setAutoPadding(!1),u.setAAD(r),u.setAuthTag(i),t.concat([u.update(e),u.final()])}function f(e,r,i,o,a){let u=n.randomBytes(16),c=a>>3,l=n.createCipheriv(`AES-${a}-CBC`,r.slice(c),u),h=t.concat([l.update(o),l.final()]),d=e.length<<3,f=t.from(`000000000000000${d.toString(16)}`.slice(-16),"hex"),p=n.createHmac("SHA"+(a<<1),r.slice(0,c));p.update(t.from(e)).update(u).update(h).update(f);let m=s(p.digest().slice(0,c));return`${e}.${i}.${s(u)}.${s(h)}.${m}`}function p(e,r,i,s,o,a){let u=a>>3,c=r.length<<3,l=t.from(`000000000000000${c.toString(16)}`.slice(-16),"hex"),h=n.createHmac("SHA"+(a<<1),s.slice(0,u));if(h.update(r).update(o).update(e).update(l),!n.timingSafeEqual(h.digest().slice(0,u),i))throw new Error("Authentication of encrypted data failed");let d=s.slice(u),f=n.createDecipheriv(`AES-${a}-CBC`,d,o);return t.concat([f.update(e),f.final()])}function m(e,r){if(r instanceof t)r=r.toString();else if("string"!=typeof r)throw new TypeError("Key must be a buffer or a string");if(!r.includes("-----BEGIN")||!r.includes("KEY-----")&&!r.includes("CERTIFICATE-----"))throw new TypeError("Key must be a PEM formatted RSA public key");let i={key:r,padding:n.constants.RSA_PKCS1_OAEP_PADDING};return s(n.publicEncrypt(i,e))}function y(e,r){if(r instanceof t&&(r=r.toString()),"string"!=typeof r||!r.includes("-----BEGIN")||!r.includes("KEY-----"))throw new TypeError("Key must be a PEM formatted RSA private key");let i={key:r,padding:n.constants.RSA_PKCS1_OAEP_PADDING};return n.privateDecrypt(i,e)}function g(e,r,i){let o=i>>3;if("string"==typeof r)r=t.from(r,"base64");else if(!(r instanceof t))throw new TypeError("Key must be a buffer or a base64-encoded string");if(r.length<o)throw new TypeError(`Key length must be at least ${o} bytes`);r=r.slice(0,o);let a=[];for(let t=0;t<e.length;t+=8)a.push(e.slice(t,t+8));let u=t.alloc(16),c=t.from("A6A6A6A6A6A6A6A6","hex"),l=1;for(let e=0;e<6;e++)for(let e=0;e<a.length;e++){let s=n.createCipheriv(`AES${i}`,r,u),o=`000000000000000${l.toString(16)}`.slice(-16),h=s.update(t.concat([c,a[e]]));c=t.from(o,"hex");for(let e=0;e<8;e++)c[e]^=h[e];a[e]=h.slice(8,16),l++}return s(t.concat([c].concat(a)))}function v(e,r,i){let s=i>>3;if("string"==typeof r)r=t.from(r,"base64");else if(!(r instanceof t))throw new TypeError("Key must be a buffer or a base64 string");if(r.length<s)throw new TypeError(`Key must be at least ${s} bytes`);r=r.slice(0,s);let o=e.slice(0,8),a=[];for(let t=8;t<e.length;t+=8)a.push(e.slice(t,t+8));let u=t.alloc(16),c=6*a.length;for(let e=5;e>=0;e--)for(let e=a.length-1;e>=0;e--){let s=`000000000000000${c.toString(16)}`.slice(-16);s=t.from(s,"hex");for(let e=0;e<8;e++)o[e]^=s[e];let l=n.createDecipheriv(`AES${i}`,r,u).update(t.concat([o,a[e],u]));o=l.slice(0,8),a[e]=l.slice(8,16),c--}if(!o.equals(t.from("A6A6A6A6A6A6A6A6","hex")))throw new Error("Key unwrapping failed");return t.concat(a)}r.generate=(e,r,o,...l)=>{let h,d,f={alg:e,enc:r};if(l[0].constructor!==Object)h=l[0],d="function"==typeof l[1]?l[1]:void 0;else if(f.kid=l[1],h=l[0][l[1]],d="function"==typeof l[2]?l[2]:void 0,!h)return i(new TypeError("Invalid key identifier"),null,d);let p="string"==typeof e?e.match(a):null;if(!p||p[2]&&+p[2]!=2*p[4]){let e=new TypeError("Unrecognized key management algorithm");return i(e,null,d)}let m,y="string"==typeof r?r.match(u):null;if(!y||y[3]&&+y[3]!=2*y[1]){let e=new TypeError("Unrecognized content encryption algorithm");return i(e,null,d)}if(p[2]){let r=n.randomBytes(16);if(f.p2c=1024,f.p2s=s(r),m=t.concat([t.from(e),t.from([0]),r]),!d){let e=Number(p[2]);h=n.pbkdf2Sync(h,m,f.p2c,e>>4,`sha${e}`)}}let g=s(t.from(JSON.stringify(f)));if(!p[2]||!d)return c(p,y,g,o,h,d);let v=Number(p[2]);n.pbkdf2(h,m,f.p2c,v>>4,`sha${v}`,((e,t)=>{if(e)return d(e);c(p,y,g,o,t,d)}))},r.verify=(e,r,s)=>{if(e.error)return i(null,e,s);if("string"!=typeof e.header.alg)return e.error={message:"Missing or invalid alg claim in header"},i(null,e,s);if("string"!=typeof e.header.enc)return e.error={message:"Missing or invalid enc claim in header"},i(null,e,s);let o=e.header.alg.match(a);if(!o||o[2]&&+o[2]!=2*o[4])return e.error={message:`Unrecognized key management algorithm ${e.header.alg}`},i(null,e,s);if(e.algList&&!e.algList.includes(e.header.alg))return e.error={message:`Unwanted key management algorithm ${e.header.alg}`},i(null,e,s);let c,h,d=e.header.enc.match(u);if(!d||d[3]&&+d[3]!=2*d[1])return e.error={message:`Unrecognized content encryption algorithm ${e.header.enc}`},i(null,e,s);if(e.encList&&!e.encList.includes(e.header.enc))return e.error={message:`Unwanted content encryption algorithm ${e.header.enc}`},i(null,e,s);if(o[2]){if(h=e.header.p2c,!Number.isInteger(h)||h<1||h>16384)return e.error={message:"Missing or invalid p2c claim in header"},i(null,e,s);if(!s&&h>1024)return e.error={message:"p2c value too large for synchronous mode"},i(null,e,s);if("string"!=typeof e.header.p2s)return e.error={message:"Missing or invalid p2s claim in header"},i(null,e,s);let a=t.from(e.header.p2s,"base64"),u=e.header.alg;if(c=t.concat([t.from(u),t.from([0]),a]),!s){let e=Number(o[2]);r=n.pbkdf2Sync(r,c,h,e>>4,`sha${e}`)}}if(!o[2]||!s)return l(e,o,d,r,s);let f=Number(o[2]);n.pbkdf2(r,c,h,f>>4,`sha${f}`,((t,r)=>{if(t)return s(t);l(e,o,d,r,s)}))}}).call(this,e("buffer").Buffer)},{"./common.js":543,buffer:void 0,crypto:void 0}],546:[function(e,t,r){(function(t){const n=e("crypto"),i=e("./ecdsa.js"),{responder:s,buf2b64url:o,payloadVerifications:a}=e("./common.js"),u=/^(HS|RS|ES)(256|384|512)$/;function c(e,r,i){if("string"==typeof i)i=t.from(i,"base64");else if(!(i instanceof t))throw new TypeError("Key must be a buffer or a base64 string");let s=r>>3;if(i.length<s)throw new TypeError(`Key length must be at least ${s} bytes`);let a=n.createHmac(`SHA${r}`,i);return`${e}.${o(a.update(e).digest())}`}function l(e,r,i,s){if("string"==typeof s)s=t.from(s,"base64");else if(!(s instanceof t))throw new TypeError("Key must be a buffer or a base64 string");let o=i>>3;if(s.length<o)throw new TypeError(`Key length must be at least ${o} bytes`);let a=n.createHmac(`SHA${i}`,s);return a.update(e),n.timingSafeEqual(a.digest(),t.from(r,"base64"))}function h(e,r,i){if(i instanceof t)i=i.toString();else if("string"!=typeof i)throw new TypeError("Key must be a buffer or a UTF-8 string");if(!i.includes("-----BEGIN")||!i.includes("KEY-----"))throw new TypeError("Key must be a PEM formatted RSA private key");let s=n.createSign(`SHA${r}`);return`${e}.${o(s.update(e).sign(i))}`}function d(e,r,i,s){if(s instanceof t)s=s.toString();else if("string"!=typeof s)throw new TypeError("Key must be a buffer or a UTF-8 string");if(!s.includes("-----BEGIN")||!s.includes("KEY-----")&&!s.includes("CERTIFICATE-----"))throw new TypeError("Key must be a PEM formatted RSA public key");let o=n.createVerify(`SHA${i}`);return o.update(e),o.verify(s,r,"base64")}function f(e,r,s){if(s instanceof t)s=s.toString();else if("string"!=typeof s)throw new TypeError("Key must be a buffer or a UTF-8 string");if(!s.includes("-----BEGIN")||!s.includes("KEY-----"))throw new TypeError("Key must be a PEM formatted EC private key");let a=n.createSign(`SHA${r}`);a.update(e);let u=32;return 384===r?u=48:512===r&&(u=66),`${e}.${o(i.derToConcat(a.sign(s),u))}`}function p(e,r,s,o){if(o instanceof t)o=o.toString();else if("string"!=typeof o)throw new TypeError("Key must be a buffer or a UTF-8 string");if(!o.includes("-----BEGIN")||!o.includes("KEY-----")&&!o.includes("CERTIFICATE-----"))throw new TypeError("Key must be a PEM formatted EC public key");let a=32;if(384===s?a=48:512===s&&(a=66),(r=t.from(r,"base64")).length!==a<<1)return!1;let u=n.createVerify(`SHA${s}`);return u.update(e),u.verify(o,i.concatToDer(r,a))}r.generate=(e,r,...n)=>{let i,a,l={alg:e};if(n[0].constructor!==Object)i=n[0],a="function"==typeof n[1]?n[1]:void 0;else if(l.kid=n[1],i=n[0][n[1]],a="function"==typeof n[2]?n[2]:void 0,!i)return s(new TypeError("Invalid key identifier"),null,a);let d,p="string"==typeof e?e.match(u):null;if(!p)return s(new TypeError("Unrecognized algorithm"),null,a);d="HS"===p[1]?c:"RS"===p[1]?h:f,r.iat=Math.floor(Date.now()/1e3);let m,y=o(t.from(JSON.stringify(l))),g=o(t.from(JSON.stringify(r)));try{m=d(`${y}.${g}`,+p[2],i)}catch(e){return s(e,null,a)}return s(null,m,a)},r.verify=(e,t,r)=>{if(e.error)return s(null,e,r);if("string"!=typeof e.header.alg)return e.error={message:"Missing or invalid alg claim in header"},s(null,e,r);let n=e.header.alg.match(u);if(!n)return e.error={message:`Unrecognized algorithm ${e.header.alg}`},s(null,e,r);if(e.algList&&!e.algList.includes(e.header.alg))return e.error={message:`Unwanted algorithm ${e.header.alg}`},s(null,e,r);let i,o,c=`${e.parts[0]}.${e.parts[1]}`;i="HS"===n[1]?l:"RS"===n[1]?d:p;try{o=i(c,e.parts[2],+n[2],t)}catch(t){return e.error={message:`Could not verify integrity. ${t.message}`},s(null,e,r)}return o?a(e,r):(e.error={message:"Integrity check failed"},s(null,e,r))}}).call(this,e("buffer").Buffer)},{"./common.js":543,"./ecdsa.js":544,buffer:void 0,crypto:void 0}],547:[function(e,t,r){var n=e("wrappy");function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function s(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}t.exports=n(i),t.exports.strict=n(s),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return s(this)},configurable:!0})}))},{wrappy:576}],548:[function(e,t,r){"use strict";t.exports=e("./lib/hashsalt.js")},{"./lib/hashsalt.js":549}],549:[function(e,t,r){(function(r){"use strict";var n=e("crypto"),i=1e4;t.exports=function(e){return{hash:function(t,s){if(void 0===s&&t instanceof Function&&(s=t,t=void 0),!e)return s("No password provided");"string"==typeof t&&(t=new r(t,"hex"));var o=function(){n.pbkdf2(e,t,i,64,"sha1",(function(e,r){if(e)return s(e);var n="pbkdf2$10000$"+r.toString("hex")+"$"+t.toString("hex");s(null,n)}))};t?o():n.randomBytes(64,(function(e,r){if(e)return s(e);t=r,o()}))},verifyAgainst:function(t,r){if(!t||!e)return r(null,!1);var n=t.split("$");return 4===n.length&&n[2]&&n[3]?"pbkdf2"!==n[0]||n[1]!==i.toString()?r("Wrong algorithm and/or iterations"):void this.hash(n[3],(function(e,n){if(e)return r(e);r(null,n===t)})):r("Hash not formatted correctly")}}}}).call(this,e("buffer").Buffer)},{buffer:void 0,crypto:void 0}],550:[function(e,t,r){"use strict";var n=e("url"),i=e("fs");function s(e){if("/"===e.charAt(0))return{host:(r=e.split(" "))[0],database:r[1]};var t=n.parse(/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(e)?encodeURI(e).replace(/\%25(\d\d)/g,"%$1"):e,!0),r=t.query;for(var s in r)Array.isArray(r[s])&&(r[s]=r[s][r[s].length-1]);var o=(t.auth||":").split(":");if(r.user=o[0],r.password=o.splice(1).join(":"),r.port=t.port,"socket:"==t.protocol)return r.host=decodeURI(t.pathname),r.database=t.query.db,r.client_encoding=t.query.encoding,r;r.host||(r.host=t.hostname);var a=t.pathname;if(!r.host&&a&&/^%2f/i.test(a)){var u=a.split("/");r.host=decodeURIComponent(u[0]),a=u.splice(1).join("/")}switch(a&&"/"===a.charAt(0)&&(a=a.slice(1)||null),r.database=a&&decodeURI(a),"true"!==r.ssl&&"1"!==r.ssl||(r.ssl=!0),"0"===r.ssl&&(r.ssl=!1),(r.sslcert||r.sslkey||r.sslrootcert||r.sslmode)&&(r.ssl={}),r.sslcert&&(r.ssl.cert=i.readFileSync(r.sslcert).toString()),r.sslkey&&(r.ssl.key=i.readFileSync(r.sslkey).toString()),r.sslrootcert&&(r.ssl.ca=i.readFileSync(r.sslrootcert).toString()),r.sslmode){case"disable":r.ssl=!1;break;case"prefer":case"require":case"verify-ca":case"verify-full":break;case"no-verify":r.ssl.rejectUnauthorized=!1}return r}t.exports=s,s.parse=s},{fs:void 0,url:void 0}],551:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./TimeoutError"),i=e("./utils");r.PendingOperation=class{constructor(e){var t,r;this.timeoutMillis=e,this.deferred=i.defer(),this.possibleTimeoutCause=null,this.isRejected=!1,this.promise=(t=this.deferred.promise,r=e,new Promise(((e,i)=>{const s=setTimeout((()=>i(new n.TimeoutError)),r);t.then((t=>{clearTimeout(s),e(t)})).catch((e=>{clearTimeout(s),i(e)}))}))).catch((e=>(e instanceof n.TimeoutError&&(e=this.possibleTimeoutCause?new n.TimeoutError(this.possibleTimeoutCause.message):new n.TimeoutError("operation timed out for an unknown reason")),this.isRejected=!0,Promise.reject(e))))}abort(){this.reject(new Error("aborted"))}reject(e){this.deferred.reject(e)}resolve(e){this.deferred.resolve(e)}}},{"./TimeoutError":555,"./utils":557}],552:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./PendingOperation"),i=e("./Resource"),s=e("./utils"),o=e("events"),a=e("timers");function u(e,t){const r=e.indexOf(t);return-1!==r&&(e.splice(r,1),!0)}r.Pool=class{constructor(e){if(this.destroyed=!1,this.emitter=new o.EventEmitter,!(e=e||{}).create)throw new Error("Tarn: opt.create function most be provided");if(!e.destroy)throw new Error("Tarn: opt.destroy function most be provided");if("number"!=typeof e.min||e.min<0||e.min!==Math.round(e.min))throw new Error("Tarn: opt.min must be an integer >= 0");if("number"!=typeof e.max||e.max<=0||e.max!==Math.round(e.max))throw new Error("Tarn: opt.max must be an integer > 0");if(e.min>e.max)throw new Error("Tarn: opt.max is smaller than opt.min");if(!s.checkOptionalTime(e.acquireTimeoutMillis))throw new Error("Tarn: invalid opt.acquireTimeoutMillis "+JSON.stringify(e.acquireTimeoutMillis));if(!s.checkOptionalTime(e.createTimeoutMillis))throw new Error("Tarn: invalid opt.createTimeoutMillis "+JSON.stringify(e.createTimeoutMillis));if(!s.checkOptionalTime(e.destroyTimeoutMillis))throw new Error("Tarn: invalid opt.destroyTimeoutMillis "+JSON.stringify(e.destroyTimeoutMillis));if(!s.checkOptionalTime(e.idleTimeoutMillis))throw new Error("Tarn: invalid opt.idleTimeoutMillis "+JSON.stringify(e.idleTimeoutMillis));if(!s.checkOptionalTime(e.reapIntervalMillis))throw new Error("Tarn: invalid opt.reapIntervalMillis "+JSON.stringify(e.reapIntervalMillis));if(!s.checkOptionalTime(e.createRetryIntervalMillis))throw new Error("Tarn: invalid opt.createRetryIntervalMillis "+JSON.stringify(e.createRetryIntervalMillis));const t={create:!0,validate:!0,destroy:!0,log:!0,min:!0,max:!0,acquireTimeoutMillis:!0,createTimeoutMillis:!0,destroyTimeoutMillis:!0,idleTimeoutMillis:!0,reapIntervalMillis:!0,createRetryIntervalMillis:!0,propagateCreateError:!0};for(const r of Object.keys(e))if(!t[r])throw new Error(`Tarn: unsupported option opt.${r}`);this.creator=e.create,this.destroyer=e.destroy,this.validate="function"==typeof e.validate?e.validate:()=>!0,this.log=e.log||(()=>{}),this.acquireTimeoutMillis=e.acquireTimeoutMillis||3e4,this.createTimeoutMillis=e.createTimeoutMillis||3e4,this.destroyTimeoutMillis=e.destroyTimeoutMillis||5e3,this.idleTimeoutMillis=e.idleTimeoutMillis||3e4,this.reapIntervalMillis=e.reapIntervalMillis||1e3,this.createRetryIntervalMillis=e.createRetryIntervalMillis||200,this.propagateCreateError=!!e.propagateCreateError,this.min=e.min,this.max=e.max,this.used=[],this.free=[],this.pendingCreates=[],this.pendingAcquires=[],this.pendingDestroys=[],this.pendingValidations=[],this.destroyed=!1,this.interval=null,this.eventId=1}numUsed(){return this.used.length}numFree(){return this.free.length}numPendingAcquires(){return this.pendingAcquires.length}numPendingValidations(){return this.pendingValidations.length}numPendingCreates(){return this.pendingCreates.length}acquire(){const e=this.eventId++;this._executeEventHandlers("acquireRequest",e);const t=new n.PendingOperation(this.acquireTimeoutMillis);return this.pendingAcquires.push(t),t.promise=t.promise.then((t=>(this._executeEventHandlers("acquireSuccess",e,t),t))).catch((r=>(this._executeEventHandlers("acquireFail",e,r),u(this.pendingAcquires,t),Promise.reject(r)))),this._tryAcquireOrCreate(),t}release(e){this._executeEventHandlers("release",e);for(let t=0,r=this.used.length;t<r;++t){const r=this.used[t];if(r.resource===e)return this.used.splice(t,1),this.free.push(r.resolve()),this._tryAcquireOrCreate(),!0}return!1}isEmpty(){return 0===[this.numFree(),this.numUsed(),this.numPendingAcquires(),this.numPendingValidations(),this.numPendingCreates()].reduce(((e,t)=>e+t))}check(){const e=s.now(),t=[],r=this.min-this.used.length,n=this.free.length-r;let i=0;this.free.forEach((r=>{s.duration(e,r.timestamp)>=this.idleTimeoutMillis&&i<n?(i++,this._destroy(r.resource)):t.push(r)})),this.free=t,this.isEmpty()&&this._stopReaping()}destroy(){const e=this.eventId++;return this._executeEventHandlers("poolDestroyRequest",e),this._stopReaping(),this.destroyed=!0,s.reflect(Promise.all(this.pendingCreates.map((e=>s.reflect(e.promise)))).then((()=>new Promise(((e,t)=>{if(0===this.numPendingValidations())return void e();const r=setInterval((()=>{0===this.numPendingValidations()&&(a.clearInterval(r),e())}),100)})))).then((()=>Promise.all(this.used.map((e=>s.reflect(e.promise)))))).then((()=>Promise.all(this.pendingAcquires.map((e=>(e.abort(),s.reflect(e.promise))))))).then((()=>Promise.all(this.free.map((e=>s.reflect(this._destroy(e.resource))))))).then((()=>Promise.all(this.pendingDestroys.map((e=>e.promise))))).then((()=>{this.free=[],this.pendingAcquires=[]}))).then((t=>(this._executeEventHandlers("poolDestroySuccess",e),this.emitter.removeAllListeners(),t)))}on(e,t){this.emitter.on(e,t)}removeListener(e,t){this.emitter.removeListener(e,t)}removeAllListeners(e){this.emitter.removeAllListeners(e)}_tryAcquireOrCreate(){this.destroyed||(this._hasFreeResources()?this._doAcquire():this._shouldCreateMoreResources()&&this._doCreate())}_hasFreeResources(){return this.free.length>0}_doAcquire(){for(;this._canAcquire();){const e=this.pendingAcquires.shift(),t=this.free.pop();if(void 0===t||void 0===e){const e="this.free was empty while trying to acquire resource";throw this.log(`Tarn: ${e}`,"warn"),new Error(`Internal error, should never happen. ${e}`)}this.pendingValidations.push(e),this.used.push(t);const r=new n.PendingOperation(this.acquireTimeoutMillis);e.promise.catch((e=>{r.abort()})),r.promise.catch((e=>(this.log("Tarn: resource validator threw an exception "+e.stack,"warn"),!1))).then((r=>{try{r&&!e.isRejected?(this._startReaping(),e.resolve(t.resource)):(u(this.used,t),r?this.free.push(t):(this._destroy(t.resource),setTimeout((()=>{this._tryAcquireOrCreate()}),0)),e.isRejected||this.pendingAcquires.unshift(e))}finally{u(this.pendingValidations,e)}})),this._validateResource(t.resource).then((e=>{r.resolve(e)})).catch((e=>{r.reject(e)}))}}_canAcquire(){return this.free.length>0&&this.pendingAcquires.length>0}_validateResource(e){try{return Promise.resolve(this.validate(e))}catch(e){return Promise.reject(e)}}_shouldCreateMoreResources(){return this.used.length+this.pendingCreates.length<this.max&&this.pendingCreates.length<this.pendingAcquires.length}_doCreate(){const e=this.pendingAcquires.slice();this._create().promise.then((()=>(this._tryAcquireOrCreate(),null))).catch((t=>{this.propagateCreateError&&0!==this.pendingAcquires.length&&this.pendingAcquires[0].reject(t),e.forEach((e=>{e.possibleTimeoutCause=t})),s.delay(this.createRetryIntervalMillis).then((()=>this._tryAcquireOrCreate()))}))}_create(){const e=this.eventId++;this._executeEventHandlers("createRequest",e);const t=new n.PendingOperation(this.createTimeoutMillis);var r;return t.promise=t.promise.catch((r=>{throw u(this.pendingCreates,t)&&this._executeEventHandlers("createFail",e,r),r})),this.pendingCreates.push(t),(r=this.creator,new Promise(((e,t)=>{const n=(r,n)=>{r?t(r):e(n)};s.tryPromise((()=>r(n))).then((t=>{t&&e(t)})).catch((e=>{t(e)}))}))).then((r=>t.isRejected?(this.destroyer(r),null):(u(this.pendingCreates,t),this.free.push(new i.Resource(r)),t.resolve(r),this._executeEventHandlers("createSuccess",e,r),null))).catch((r=>(t.isRejected||(u(this.pendingCreates,t)&&this._executeEventHandlers("createFail",e,r),t.reject(r)),null))),t}_destroy(e){const t=this.eventId++;this._executeEventHandlers("destroyRequest",t,e);const r=new n.PendingOperation(this.destroyTimeoutMillis);return Promise.resolve().then((()=>this.destroyer(e))).then((()=>{r.resolve(e)})).catch((e=>{r.reject(e)})),this.pendingDestroys.push(r),r.promise.then((r=>(this._executeEventHandlers("destroySuccess",t,e),r))).catch((r=>this._logDestroyerError(t,e,r))).then((e=>{const t=this.pendingDestroys.findIndex((e=>e===r));return this.pendingDestroys.splice(t,1),e}))}_logDestroyerError(e,t,r){this._executeEventHandlers("destroyFail",e,t,r),this.log("Tarn: resource destroyer threw an exception "+r.stack,"warn")}_startReaping(){this.interval||(this._executeEventHandlers("startReaping"),this.interval=setInterval((()=>this.check()),this.reapIntervalMillis))}_stopReaping(){null!==this.interval&&(this._executeEventHandlers("stopReaping"),a.clearInterval(this.interval)),this.interval=null}_executeEventHandlers(e,...t){this.emitter.listeners(e).forEach((r=>{try{r(...t)}catch(t){this.log(`Tarn: event handler "${e}" threw an exception ${t.stack}`,"warn")}}))}}},{"./PendingOperation":551,"./Resource":554,"./utils":557,events:void 0,timers:void 0}],553:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.PromiseInspection=class{constructor(e){this._value=e.value,this._error=e.error}value(){return this._value}reason(){return this._error}isRejected(){return!!this._error}isFulfilled(){return!!this._value}}},{}],554:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./utils");class i{constructor(e){this.resource=e,this.resource=e,this.timestamp=n.now(),this.deferred=n.defer()}get promise(){return this.deferred.promise}resolve(){return this.deferred.resolve(void 0),new i(this.resource)}}r.Resource=i},{"./utils":557}],555:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});class n extends Error{}r.TimeoutError=n},{}],556:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./Pool");r.Pool=n.Pool;const i=e("./TimeoutError");r.TimeoutError=i.TimeoutError,t.exports={Pool:n.Pool,TimeoutError:i.TimeoutError}},{"./Pool":552,"./TimeoutError":555}],557:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=e("./PromiseInspection");function i(e){return"number"==typeof e&&e===Math.round(e)&&e>0}r.defer=function(){let e=null,t=null;return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}},r.now=function(){return Date.now()},r.duration=function(e,t){return Math.abs(t-e)},r.checkOptionalTime=function(e){return void 0===e||i(e)},r.checkRequiredTime=i,r.delay=function(e){return new Promise((t=>setTimeout(t,e)))},r.reflect=function(e){return e.then((e=>new n.PromiseInspection({value:e}))).catch((e=>new n.PromiseInspection({error:e})))},r.tryPromise=function(e){try{const t=e();return Promise.resolve(t)}catch(e){return Promise.reject(e)}}},{"./PromiseInspection":553}],558:[function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n(e.URI=e.URI||{})}(this,(function(e){"use strict";function t(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length>1){t[0]=t[0].slice(0,-1);for(var n=t.length-1,i=1;i<n;++i)t[i]=t[i].slice(1,-1);return t[n]=t[n].slice(1),t.join("")}return t[0]}function r(e){return"(?:"+e+")"}function n(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function i(e){return e.toUpperCase()}function s(e){var n="[A-Za-z]",i="[0-9]",s=t(i,"[A-Fa-f]"),o=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),a="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",u=t("[\\:\\/\\?\\#\\[\\]\\@]",a),c=e?"[\\uE000-\\uF8FF]":"[]",l=t(n,i,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=r(n+t(n,i,"[\\+\\-\\.]")+"*"),d=r(r(o+"|"+t(l,a,"[\\:]"))+"*"),f=(r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("[1-9][0-9]")+"|"+i),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?"+i)),p=r(f+"\\."+f+"\\."+f+"\\."+f),m=r(s+"{1,4}"),y=r(r(m+"\\:"+m)+"|"+p),g=r(r(m+"\\:")+"{6}"+y),v=r("\\:\\:"+r(m+"\\:")+"{5}"+y),b=r(r(m)+"?\\:\\:"+r(m+"\\:")+"{4}"+y),_=r(r(r(m+"\\:")+"{0,1}"+m)+"?\\:\\:"+r(m+"\\:")+"{3}"+y),w=r(r(r(m+"\\:")+"{0,2}"+m)+"?\\:\\:"+r(m+"\\:")+"{2}"+y),E=r(r(r(m+"\\:")+"{0,3}"+m)+"?\\:\\:"+m+"\\:"+y),x=r(r(r(m+"\\:")+"{0,4}"+m)+"?\\:\\:"+y),C=r(r(r(m+"\\:")+"{0,5}"+m)+"?\\:\\:"+m),k=r(r(r(m+"\\:")+"{0,6}"+m)+"?\\:\\:"),O=r([g,v,b,_,w,E,x,C,k].join("|")),S=r(r(l+"|"+o)+"+"),T=(r(O+"\\%25"+S),r(O+r("\\%25|\\%(?!"+s+"{2})")+S)),$=r("[vV]"+s+"+\\."+t(l,a,"[\\:]")+"+"),j=r("\\["+r(T+"|"+O+"|"+$)+"\\]"),N=r(r(o+"|"+t(l,a))+"*"),A=r(j+"|"+p+"(?!"+N+")|"+N),I=r("[0-9]*"),P=r(r(d+"@")+"?"+A+r("\\:"+I)+"?"),R=r(o+"|"+t(l,a,"[\\:\\@]")),q=r(R+"*"),M=r(R+"+"),L=r(r(o+"|"+t(l,a,"[\\@]"))+"+"),D=r(r("\\/"+q)+"*"),F=r("\\/"+r(M+D)+"?"),U=r(L+D),B=r(M+D),V="(?!"+R+")",z=(r(D+"|"+F+"|"+U+"|"+B+"|"+V),r(r(R+"|"+t("[\\/\\?]",c))+"*")),H=r(r(R+"|[\\/\\?]")+"*"),W=r(r("\\/\\/"+P+D)+"|"+F+"|"+B+"|"+V),Q=r(h+"\\:"+W+r("\\?"+z)+"?"+r("\\#"+H)+"?"),G=r(r("\\/\\/"+P+D)+"|"+F+"|"+U+"|"+V),J=r(G+r("\\?"+z)+"?"+r("\\#"+H)+"?");r(Q+"|"+J),r(h+"\\:"+W+r("\\?"+z)+"?"),r(r("\\/\\/("+r("("+d+")@")+"?("+A+")"+r("\\:("+I+")")+"?)")+"?("+D+"|"+F+"|"+B+"|"+V+")"),r("\\?("+z+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+A+")"+r("\\:("+I+")")+"?)")+"?("+D+"|"+F+"|"+U+"|"+V+")"),r("\\?("+z+")"),r("\\#("+H+")"),r(r("\\/\\/("+r("("+d+")@")+"?("+A+")"+r("\\:("+I+")")+"?)")+"?("+D+"|"+F+"|"+B+"|"+V+")"),r("\\?("+z+")"),r("\\#("+H+")"),r("("+d+")@"),r("\\:("+I+")");return{NOT_SCHEME:new RegExp(t("[^]",n,i,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",l,a),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",l,a),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",l,a),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",l,a),"g"),NOT_QUERY:new RegExp(t("[^\\%]",l,a,"[\\:\\@\\/\\?]",c),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",l,a,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",l,a),"g"),UNRESERVED:new RegExp(l,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",l,u),"g"),PCT_ENCODED:new RegExp(o,"g"),IPV4ADDRESS:new RegExp("^("+p+")$"),IPV6ADDRESS:new RegExp("^\\[?("+O+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+S+")")+"?\\]?$")}}var o=s(!1),a=s(!0),u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,s=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=2147483647,l=36,h=/^xn--/,d=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=Math.floor,y=String.fromCharCode;function g(e){throw new RangeError(p[e])}function v(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]);var i=function(e,t){for(var r=[],n=e.length;n--;)r[n]=t(e[n]);return r}((e=e.replace(f,".")).split("."),t).join(".");return n+i}function b(e){for(var t=[],r=0,n=e.length;r<n;){var i=e.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){var s=e.charCodeAt(r++);56320==(64512&s)?t.push(((1023&i)<<10)+(1023&s)+65536):(t.push(i),r--)}else t.push(i)}return t}var _=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},w=function(e,t,r){var n=0;for(e=r?m(e/700):e>>1,e+=m(e/t);e>455;n+=l)e=m(e/35);return m(n+36*e/(e+38))},E=function(e){var t,r=[],n=e.length,i=0,s=128,o=72,a=e.lastIndexOf("-");a<0&&(a=0);for(var u=0;u<a;++u)e.charCodeAt(u)>=128&&g("not-basic"),r.push(e.charCodeAt(u));for(var h=a>0?a+1:0;h<n;){for(var d=i,f=1,p=l;;p+=l){h>=n&&g("invalid-input");var y=(t=e.charCodeAt(h++))-48<10?t-22:t-65<26?t-65:t-97<26?t-97:l;(y>=l||y>m((c-i)/f))&&g("overflow"),i+=y*f;var v=p<=o?1:p>=o+26?26:p-o;if(y<v)break;var b=l-v;f>m(c/b)&&g("overflow"),f*=b}var _=r.length+1;o=w(i-d,_,0==d),m(i/_)>c-s&&g("overflow"),s+=m(i/_),i%=_,r.splice(i++,0,s)}return String.fromCodePoint.apply(String,r)},x=function(e){var t=[],r=(e=b(e)).length,n=128,i=0,s=72,o=!0,a=!1,u=void 0;try{for(var h,d=e[Symbol.iterator]();!(o=(h=d.next()).done);o=!0){var f=h.value;f<128&&t.push(y(f))}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}var p=t.length,v=p;for(p&&t.push("-");v<r;){var E=c,x=!0,C=!1,k=void 0;try{for(var O,S=e[Symbol.iterator]();!(x=(O=S.next()).done);x=!0){var T=O.value;T>=n&&T<E&&(E=T)}}catch(e){C=!0,k=e}finally{try{!x&&S.return&&S.return()}finally{if(C)throw k}}var $=v+1;E-n>m((c-i)/$)&&g("overflow"),i+=(E-n)*$,n=E;var j=!0,N=!1,A=void 0;try{for(var I,P=e[Symbol.iterator]();!(j=(I=P.next()).done);j=!0){var R=I.value;if(R<n&&++i>c&&g("overflow"),R==n){for(var q=i,M=l;;M+=l){var L=M<=s?1:M>=s+26?26:M-s;if(q<L)break;var D=q-L,F=l-L;t.push(y(_(L+D%F,0))),q=m(D/F)}t.push(y(_(q,0))),s=w(i,$,v==p),i=0,++v}}}catch(e){N=!0,A=e}finally{try{!j&&P.return&&P.return()}finally{if(N)throw A}}++i,++n}return t.join("")},C=function(e){return v(e,(function(e){return d.test(e)?"xn--"+x(e):e}))},k=function(e){return v(e,(function(e){return h.test(e)?E(e.slice(4).toLowerCase()):e}))},O={};function S(e){var t=e.charCodeAt(0);return t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase()}function T(e){for(var t="",r=0,n=e.length;r<n;){var i=parseInt(e.substr(r+1,2),16);if(i<128)t+=String.fromCharCode(i),r+=3;else if(i>=194&&i<224){if(n-r>=6){var s=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&i)<<6|63&s)}else t+=e.substr(r,6);r+=6}else if(i>=224){if(n-r>=9){var o=parseInt(e.substr(r+4,2),16),a=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function $(e,t){function r(e){var r=T(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,S).replace(t.PCT_ENCODED,i)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,S).replace(t.PCT_ENCODED,i)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,S).replace(t.PCT_ENCODED,i)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,S).replace(t.PCT_ENCODED,i)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,S).replace(t.PCT_ENCODED,i)),e}function j(e){return e.replace(/^0*(.*)/,"$1")||"0"}function N(e,t){var r=e.match(t.IPV4ADDRESS)||[],n=u(r,2)[1];return n?n.split(".").map(j).join("."):e}function A(e,t){var r=e.match(t.IPV6ADDRESS)||[],n=u(r,3),i=n[1],s=n[2];if(i){for(var o=i.toLowerCase().split("::").reverse(),a=u(o,2),c=a[0],l=a[1],h=l?l.split(":").map(j):[],d=c.split(":").map(j),f=t.IPV4ADDRESS.test(d[d.length-1]),p=f?7:8,m=d.length-p,y=Array(p),g=0;g<p;++g)y[g]=h[g]||d[m+g]||"";f&&(y[p-1]=N(y[p-1],t));var v=y.reduce((function(e,t,r){if(!t||"0"===t){var n=e[e.length-1];n&&n.index+n.length===r?n.length++:e.push({index:r,length:1})}return e}),[]).sort((function(e,t){return t.length-e.length}))[0],b=void 0;if(v&&v.length>1){var _=y.slice(0,v.index),w=y.slice(v.index+v.length);b=_.join(":")+"::"+w.join(":")}else b=y.join(":");return s&&(b+="%"+s),b}return e}var I=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,P=void 0==="".match(/(){0}/)[1];function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={},n=!1!==t.iri?a:o;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);var i=e.match(I);if(i){P?(r.scheme=i[1],r.userinfo=i[3],r.host=i[4],r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=i[7],r.fragment=i[8],isNaN(r.port)&&(r.port=i[5])):(r.scheme=i[1]||void 0,r.userinfo=-1!==e.indexOf("@")?i[3]:void 0,r.host=-1!==e.indexOf("//")?i[4]:void 0,r.port=parseInt(i[5],10),r.path=i[6]||"",r.query=-1!==e.indexOf("?")?i[7]:void 0,r.fragment=-1!==e.indexOf("#")?i[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?i[4]:void 0)),r.host&&(r.host=A(N(r.host,n),n)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");var s=O[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)$(r,n);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=C(r.host.replace(n.PCT_ENCODED,T).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}$(r,o)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}function q(e,t){var r=!1!==t.iri?a:o,n=[];return void 0!==e.userinfo&&(n.push(e.userinfo),n.push("@")),void 0!==e.host&&n.push(A(N(String(e.host),r),r).replace(r.IPV6ADDRESS,(function(e,t,r){return"["+t+(r?"%25"+r:"")+"]"}))),"number"!=typeof e.port&&"string"!=typeof e.port||(n.push(":"),n.push(String(e.port))),n.length?n.join(""):void 0}var M=/^\.\.?\//,L=/^\/\.(\/|$)/,D=/^\/\.\.(\/|$)/,F=/^\/?(?:.|\n)*?(?=\/|$)/;function U(e){for(var t=[];e.length;)if(e.match(M))e=e.replace(M,"");else if(e.match(L))e=e.replace(L,"/");else if(e.match(D))e=e.replace(D,"/"),t.pop();else if("."===e||".."===e)e="";else{var r=e.match(F);if(!r)throw new Error("Unexpected dot segment condition");var n=r[0];e=e.slice(n.length),t.push(n)}return t.join("")}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.iri?a:o,n=[],i=O[(t.scheme||e.scheme||"").toLowerCase()];if(i&&i.serialize&&i.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||i&&i.domainHost)try{e.host=t.iri?k(e.host):C(e.host.replace(r.PCT_ENCODED,T).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}$(e,r),"suffix"!==t.reference&&e.scheme&&(n.push(e.scheme),n.push(":"));var s=q(e,t);if(void 0!==s&&("suffix"!==t.reference&&n.push("//"),n.push(s),e.path&&"/"!==e.path.charAt(0)&&n.push("/")),void 0!==e.path){var u=e.path;t.absolutePath||i&&i.absolutePath||(u=U(u)),void 0===s&&(u=u.replace(/^\/\//,"/%2F")),n.push(u)}return void 0!==e.query&&(n.push("?"),n.push(e.query)),void 0!==e.fragment&&(n.push("#"),n.push(e.fragment)),n.join("")}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],i={};return n||(e=R(B(e,r),r),t=R(B(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=U(t.path||""),i.query=t.query):(t.path?("/"===t.path.charAt(0)?i.path=U(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path:i.path="/"+t.path,i.path=U(i.path)),i.query=t.query):(i.path=e.path,void 0!==t.query?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function z(e,t){return e&&e.toString().replace(t&&t.iri?a.PCT_ENCODED:o.PCT_ENCODED,T)}var H={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){var r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},W={scheme:"https",domainHost:H.domainHost,parse:H.parse,serialize:H.serialize};function Q(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}var G={scheme:"ws",domainHost:!0,parse:function(e,t){var r=e;return r.secure=Q(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(Q(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){var r=e.resourceName.split("?"),n=u(r,2),i=n[0],s=n[1];e.path=i&&"/"!==i?i:void 0,e.query=s,e.resourceName=void 0}return e.fragment=void 0,e}},J={scheme:"wss",domainHost:G.domainHost,parse:G.parse,serialize:G.serialize},K={},Z="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Y="[0-9A-Fa-f]",X=r(r("%[EFef][0-9A-Fa-f]%"+Y+Y+"%"+Y+Y)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+Y+Y)+"|"+r("%"+Y+Y)),ee=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),te=new RegExp(Z,"g"),re=new RegExp(X,"g"),ne=new RegExp(t("[^]","[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]","[\\.]",'[\\"]',ee),"g"),ie=new RegExp(t("[^]",Z,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g"),se=ie;function oe(e){var t=T(e);return t.match(te)?t:e}var ae={scheme:"mailto",parse:function(e,t){var r=e,n=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){for(var i=!1,s={},o=r.query.split("&"),a=0,u=o.length;a<u;++a){var c=o[a].split("=");switch(c[0]){case"to":for(var l=c[1].split(","),h=0,d=l.length;h<d;++h)n.push(l[h]);break;case"subject":r.subject=z(c[1],t);break;case"body":r.body=z(c[1],t);break;default:i=!0,s[z(c[0],t)]=z(c[1],t)}}i&&(r.headers=s)}r.query=void 0;for(var f=0,p=n.length;f<p;++f){var m=n[f].split("@");if(m[0]=z(m[0]),t.unicodeSupport)m[1]=z(m[1],t).toLowerCase();else try{m[1]=C(z(m[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}n[f]=m.join("@")}return r},serialize:function(e,t){var r,n=e,s=null!=(r=e.to)?r instanceof Array?r:"number"!=typeof r.length||r.split||r.setInterval||r.call?[r]:Array.prototype.slice.call(r):[];if(s){for(var o=0,a=s.length;o<a;++o){var u=String(s[o]),c=u.lastIndexOf("@"),l=u.slice(0,c).replace(re,oe).replace(re,i).replace(ne,S),h=u.slice(c+1);try{h=t.iri?k(h):C(z(h,t).toLowerCase())}catch(e){n.error=n.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}s[o]=l+"@"+h}n.path=s.join(",")}var d=e.headers=e.headers||{};e.subject&&(d.subject=e.subject),e.body&&(d.body=e.body);var f=[];for(var p in d)d[p]!==K[p]&&f.push(p.replace(re,oe).replace(re,i).replace(ie,S)+"="+d[p].replace(re,oe).replace(re,i).replace(se,S));return f.length&&(n.query=f.join("&")),n}},ue=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){var r=e.path&&e.path.match(ue),n=e;if(r){var i=t.scheme||n.scheme||"urn",s=r[1].toLowerCase(),o=r[2],a=i+":"+(t.nid||s),u=O[a];n.nid=s,n.nss=o,n.path=void 0,u&&(n=u.parse(n,t))}else n.error=n.error||"URN can not be parsed.";return n},serialize:function(e,t){var r=t.scheme||e.scheme||"urn",n=e.nid,i=r+":"+(t.nid||n),s=O[i];s&&(e=s.serialize(e,t));var o=e,a=e.nss;return o.path=(n||t.nid)+":"+a,o}},le=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,he={scheme:"urn:uuid",parse:function(e,t){var r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(le)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){var r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};O[H.scheme]=H,O[W.scheme]=W,O[G.scheme]=G,O[J.scheme]=J,O[ae.scheme]=ae,O[ce.scheme]=ce,O[he.scheme]=he,e.SCHEMES=O,e.pctEncChar=S,e.pctDecChars=T,e.parse=R,e.removeDotSegments=U,e.serialize=B,e.resolveComponents=V,e.resolve=function(e,t,r){var n=function(e,t){var r=e;if(t)for(var n in t)r[n]=t[n];return r}({scheme:"null"},r);return B(V(R(e,n),R(t,n),n,!0),n)},e.normalize=function(e,t){return"string"==typeof e?e=B(R(e,t),t):"object"===n(e)&&(e=R(B(e,t),t)),e},e.equal=function(e,t,r){return"string"==typeof e?e=B(R(e,r),r):"object"===n(e)&&(e=B(e,r)),"string"==typeof t?t=B(R(t,r),r):"object"===n(t)&&(t=B(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?a.ESCAPE:o.ESCAPE,S)},e.unescapeComponent=z,Object.defineProperty(e,"__esModule",{value:!0})}))},{}],559:[function(e,t,r){"use strict";for(var n=[],i={},s=0;s<256;s++)n[s]=(s+256).toString(16).substr(1),i[n[s]]=s;t.exports={parse:function(e,t,r){var n=t&&r||0,s=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,(function(e){s<16&&(t[n+s++]=i[e])}));s<16;)t[n+s++]=0;return t},unparse:function(e,t){var r=t||0,i=n;return i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+"-"+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]+i[e[r++]]}}},{}],560:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NIL",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(r,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(r,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(r,"v3",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(r,"v4",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(r,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(r,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return u.default}});var n=d(e("./v1.js")),i=d(e("./v3.js")),s=d(e("./v4.js")),o=d(e("./v5.js")),a=d(e("./nil.js")),u=d(e("./version.js")),c=d(e("./validate.js")),l=d(e("./stringify.js")),h=d(e("./parse.js"));function d(e){return e&&e.__esModule?e:{default:e}}},{"./nil.js":563,"./parse.js":564,"./stringify.js":568,"./v1.js":569,"./v3.js":570,"./v4.js":572,"./v5.js":573,"./validate.js":574,"./version.js":575}],561:[function(e,t,r){arguments[4][79][0].apply(r,arguments)},{dup:79}],562:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};r.default=n},{}],563:[function(e,t,r){arguments[4][80][0].apply(r,arguments)},{dup:80}],564:[function(e,t,r){arguments[4][81][0].apply(r,arguments)},{"./validate.js":574,dup:81}],565:[function(e,t,r){arguments[4][82][0].apply(r,arguments)},{dup:82}],566:[function(e,t,r){"use strict";let n;Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)};const i=new Uint8Array(16)},{}],567:[function(e,t,r){arguments[4][84][0].apply(r,arguments)},{dup:84}],568:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.unsafeStringify=o;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function o(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var a=function(e,t=0){const r=o(e,t);if(!(0,i.default)(r))throw TypeError("Stringified UUID is invalid");return r};r.default=a},{"./validate.js":574}],569:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./rng.js"))&&n.__esModule?n:{default:n},s=e("./stringify.js");let o,a,u=0,c=0;var l=function(e,t,r){let n=t&&r||0;const l=t||new Array(16);let h=(e=e||{}).node||o,d=void 0!==e.clockseq?e.clockseq:a;if(null==h||null==d){const t=e.random||(e.rng||i.default)();null==h&&(h=o=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=a=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const m=f-u+(p-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||f>u)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=f,c=p,a=d,f+=122192928e5;const y=(1e4*(268435455&f)+p)%4294967296;l[n++]=y>>>24&255,l[n++]=y>>>16&255,l[n++]=y>>>8&255,l[n++]=255&y;const g=f/4294967296*1e4&268435455;l[n++]=g>>>8&255,l[n++]=255&g,l[n++]=g>>>24&15|16,l[n++]=g>>>16&255,l[n++]=d>>>8|128,l[n++]=255&d;for(let e=0;e<6;++e)l[n+e]=h[e];return t||(0,s.unsafeStringify)(l)};r.default=l},{"./rng.js":566,"./stringify.js":568}],570:[function(e,t,r){arguments[4][87][0].apply(r,arguments)},{"./md5.js":561,"./v35.js":571,dup:87}],571:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.URL=r.DNS=void 0,r.default=function(e,t,r){function n(e,n,o,a){var u;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=(0,s.default)(n)),16!==(null===(u=n)||void 0===u?void 0:u.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(n),c.set(e,n.length),c=r(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,o){a=a||0;for(let e=0;e<16;++e)o[a+e]=c[e];return o}return(0,i.unsafeStringify)(c)}try{n.name=e}catch(e){}return n.DNS=o,n.URL=a,n};var n,i=e("./stringify.js"),s=(n=e("./parse.js"))&&n.__esModule?n:{default:n};const o="6ba7b810-9dad-11d1-80b4-00c04fd430c8";r.DNS=o;const a="6ba7b811-9dad-11d1-80b4-00c04fd430c8";r.URL=a},{"./parse.js":564,"./stringify.js":568}],572:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=o(e("./native.js")),i=o(e("./rng.js")),s=e("./stringify.js");function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t,r){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const o=(e=e||{}).random||(e.rng||i.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=o[e];return t}return(0,s.unsafeStringify)(o)};r.default=a},{"./native.js":562,"./rng.js":566,"./stringify.js":568}],573:[function(e,t,r){arguments[4][90][0].apply(r,arguments)},{"./sha1.js":567,"./v35.js":571,dup:90}],574:[function(e,t,r){arguments[4][91][0].apply(r,arguments)},{"./regex.js":565,dup:91}],575:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("./validate.js"))&&n.__esModule?n:{default:n};var s=function(e){if(!(0,i.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};r.default=s},{"./validate.js":574}],576:[function(e,t,r){t.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},{}]},{},[64]);
